{"id":"phage_explorer-00cd","title":"Pillar 5: Keyboard and Command Parity","description":"","status":"open","priority":1,"issue_type":"feature","created_at":"2025-12-09T00:36:05.432283-05:00","updated_at":"2025-12-09T00:36:05.432283-05:00","dependencies":[{"issue_id":"phage_explorer-00cd","depends_on_id":"phage_explorer-xivy","type":"blocks","created_at":"2025-12-09T00:37:15.374117-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-022","title":"Layer 1: GC Skew Replication Origin Overlay [G key]","description":"Layer 1 overlay (G key): Display cumulative GC skew sparkline with origin (minimum) and terminus (maximum) markers. O(n) scan, pure TypeScript. Reveals replication mode (theta vs rolling circle). Pedagogical value: 9/10. Priority: P0 - fundamental biology, low effort, high impact.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-06T23:10:40.281601-05:00","updated_at":"2025-12-07T00:00:32.736858-05:00","closed_at":"2025-12-07T00:00:32.736858-05:00","dependencies":[{"issue_id":"phage_explorer-022","depends_on_id":"phage_explorer-2g5","type":"blocks","created_at":"2025-12-06T23:10:40.28282-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-05vn","title":"[WEB-P3] Track and display recent commands","description":"","notes":"Command history added to web store with pushCommand/clear, wired to hotkeys, and displayed via RecentCommands widget in header.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-07T17:01:43.148334-05:00","updated_at":"2025-12-07T22:20:16.638566-05:00","closed_at":"2025-12-07T22:20:16.638587-05:00","dependencies":[{"issue_id":"phage_explorer-05vn","depends_on_id":"phage_explorer-f4t","type":"blocks","created_at":"2025-12-07T17:07:30.700556-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-0hx","title":"[WEB-P0] Implement vim modal state machine (NORMAL/SEARCH/COMMAND/VISUAL)","description":"Create state machine for vim-style modes with transitions and mode-specific key handling","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-07T16:58:41.295106-05:00","updated_at":"2025-12-07T17:31:29.827604-05:00","closed_at":"2025-12-07T17:31:29.827604-05:00","dependencies":[{"issue_id":"phage_explorer-0hx","depends_on_id":"phage_explorer-ows","type":"blocks","created_at":"2025-12-07T17:04:41.347254-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-0k6","title":"Layer 3: Temporal Evolution Replay","description":"## Temporal Evolution Replay (Layer 3 Simulation)\n\n### Concept\n\nEvolution is not a photograph — it's a **movie**. When we have multiple isolates of related phages collected over time (e.g., longitudinal coevolution studies, historical laboratory stocks), we can reconstruct **how the genome changed through time**.\n\nThis feature creates an **animated time-lapse of evolution**, showing:\n- When and where each mutation appeared\n- How **effective population size (Ne)** changed (population dynamics)\n- The **substitution rate** (molecular clock calibration)\n- Branches where lineages diverged\n\nThe key mathematical tool is the **dated phylogenetic tree** — a tree where branch lengths are calibrated to real time rather than genetic distance. Combined with ancestral sequence reconstruction, we can \"play back\" evolution.\n\n### Mathematical Foundations\n\n**Molecular Clock Hypothesis:**\n```\nSubstitutions accumulate at roughly constant rate:\n  genetic_distance ≈ μ × t × 2  (for two taxa)\nWhere:\n  μ = substitution rate (subs/site/year)\n  t = divergence time\nFor phages: μ ≈ 10⁻⁵ to 10⁻³ subs/site/year (much faster than most organisms)\n```\n\n**Root-to-tip Regression (clock test):**\n```\nFor each taxon i with sampling date tᵢ:\n  dᵢ = genetic distance from root to tip\nLinear regression: dᵢ = μ × tᵢ + c\nGood clock: R² \u003e 0.8, p \u003c 0.05\ntMRCA = -c / μ (time to most recent common ancestor)\n```\n\n**Least-Squares Dating (LSD2 algorithm):**\n```\nGiven unrooted tree T with branch lengths and tip dates {t₁...tₙ}:\nMinimize: Σᵢⱼ (dᵢⱼ - |tᵢ - tⱼ|×μ)²\nSubject to: all internal node dates \u003c descendant dates\nOutput: Dated tree with internal node dates\n```\n\n**Coalescent Skyline (Population Dynamics):**\n```\nE[waiting time for k → k-1 lineages] = Ne × 2 / (k(k-1))\nSkyline plot: Estimate Ne at each coalescent interval\nReveals population crashes (bottlenecks) and expansions\n```\n\n**Ancestral Sequence Reconstruction (Felsenstein):**\n```\nMaximum Likelihood at each internal node:\nP(node = A) = Σₓ P(left=x|node=A) × P(right=y|node=A) × P(A→x) × P(A→y)\nMarginal reconstruction: Most likely state at each position\n```\n\n### Implementation Approach\n\n**Core interfaces:**\n```typescript\ninterface DatedSequence {\n  id: string;\n  sequence: string;\n  collectionDate: Date;\n  location?: string;\n}\n\ninterface ClockAnalysis {\n  rate: number;              // subs/site/year\n  rateCI: [number, number];  // 95% CI\n  tmrca: Date;               // Time to MRCA\n  r2: number;                // Regression fit\n  clockLike: boolean;        // Is clock model appropriate?\n}\n\ninterface DatedTree {\n  tree: NewickTree;\n  nodeHeights: Map\u003cstring, number\u003e;  // Node ID -\u003e date\n  rate: number;\n}\n\ninterface AncestralReconstruction {\n  nodeSequences: Map\u003cstring, string\u003e;\n  mutations: MutationEvent[];\n  confidence: Map\u003cstring, Float32Array\u003e;\n}\n\ninterface EvolutionFrame {\n  time: number;\n  displayDate: string;\n  sequence: string;\n  mutations: { position: number; from: string; to: string }[];\n  activeBranches: string[];\n  neAtTime: number;\n  cumulativeMutations: number;\n}\n```\n\n**Animation frame generator** yields frames for smooth playback with mutations appearing at interpolated times.\n\n### TUI Visualization\n\n```\nTemporal Evolution Replay: Lambda isolates (1950-2020)\n═══════════════════════════════════════════════════════════════════════════════\n\nTime: ████████████████░░░░░░░░░░░░░░  1985-03-12\n      1950                     2020\n\nTree (branches alive highlighted):\n                ┌──● Lambda-1950 (ancestor)\n            ┌───┤\n        ┌───┤   └──○ Lambda-1962\n    ────┤   └──────────● Lambda-1985 ← YOU ARE HERE\n        └──────────────────○ Lambda-2020 (future)\n\nSequence at 1985-03-12:\nPosition:  12450  12451  12452  12453\nAncestral:   A      T      G      C\nCurrent:     A      T      C*     C    ← MUTATION! G→C (1983-08-21)\n\nMutation Timeline:\n     ╭─[G12452C]──[A3891T]──[T28103C]─────────────────────────╮\n1950 ┼──────○────────○──────────○──────────────────────────────┤ 2020\n\nEffective Population Size (Ne):\n       10⁶ ┤    ╭──────╮\n       10⁵ ┤────╯      ╰──╮                ╭──────────╮\n       10⁴ ┤               ╰────────────────╯          ╰────────\n           1950         1970         1990         2010\n\n[Space] Play/Pause  [←/→] Step  [+/-] Speed  [R] Reset  [ESC] Exit\n```\n\n### Why This Is Good\n\n1. **Time is the hidden dimension**: Most tools show genetic distance, not time. Biologists think in years.\n2. **Coevolution studies**: Phage-bacteria arms races occur over weeks to months. Animation reveals dynamics.\n3. **Outbreak forensics**: For phage therapy monitoring, knowing *when* resistance arose helps understand failures.\n4. **Educational power**: Nothing conveys \"evolution is ongoing\" like watching mutations accumulate.\n5. **Population dynamics**: Ne skyline reveals bottlenecks and expansions — demographic history of the phage.\n\n### Innovation Assessment\n\n**Novelty: HIGH** - Time-tree tools exist (BEAST, TreeTime, LSD2), but no interactive animated TUI visualization. \"Time scrubber\" interface is completely novel.\n\n**Pedagogical Value: 10/10** - Teaches molecular clocks, phylogenetic dating, coalescent theory, ancestral reconstruction, population dynamics.\n\n**Wow Factor: 10/10** - Watching mutations appear one by one as timeline advances — seeing the \"ghost\" of ancestral sequence transform into modern isolate — is genuinely mesmerizing.\n\n### Data Requirements\n- Multiple dated isolate sequences (FASTA + dates)\n- At least 5-10 isolates spanning time range\n- Good temporal signal (clock-like evolution)","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-06T23:17:53.647084-05:00","updated_at":"2025-12-07T13:42:40.50014-05:00","closed_at":"2025-12-07T13:42:40.50014-05:00","dependencies":[{"issue_id":"phage_explorer-0k6","depends_on_id":"phage_explorer-ojb","type":"blocks","created_at":"2025-12-06T23:17:53.649358-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-0mco","title":"[WEB-P4] Create ComputeOrchestrator class","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-07T17:01:38.579131-05:00","updated_at":"2025-12-07T18:42:45.532509-05:00","closed_at":"2025-12-07T18:42:45.532509-05:00","dependencies":[{"issue_id":"phage_explorer-0mco","depends_on_id":"phage_explorer-ru4","type":"blocks","created_at":"2025-12-07T17:07:24.584707-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-0mx8","title":"[WEB-P5] Add configurable density and speed","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-07T17:02:31.209044-05:00","updated_at":"2025-12-08T00:06:58.222098-05:00","closed_at":"2025-12-08T00:06:58.222098-05:00","dependencies":[{"issue_id":"phage_explorer-0mx8","depends_on_id":"phage_explorer-l1lc","type":"blocks","created_at":"2025-12-07T17:08:21.064886-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-0qa","title":"Layer 2: Self-Homology Dot Plot","description":"Compare genome against itself to reveal internal structure: direct repeats (parallel diagonals), inverted repeats/hairpins (perpendicular lines), tandem duplications, and palindromes. Uses k-mer indexing for efficient O(n×k + matches×w) computation. Braille-character rendering for high resolution. Essential for finding terminal repeats, att sites, regulatory palindromes. Novelty: 5/10, Pedagogical: 9/10, Cool Factor: 7/10.","notes":"Fixed runtime crash from OverlayManager importing TUI store in web: removed usePhageStore and provided safe defaults for overlays.","status":"in_progress","priority":2,"issue_type":"feature","created_at":"2025-12-06T23:14:47.63539-05:00","updated_at":"2025-12-08T02:19:14.619076-05:00","dependencies":[{"issue_id":"phage_explorer-0qa","depends_on_id":"phage_explorer-54g","type":"blocks","created_at":"2025-12-06T23:14:47.636771-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-0qu","title":"Advanced: Prophage Integration Site \u0026 Excision Risk Explorer","description":"Score attB hot spots, classify tyrosine/serine integrases via HMMER, search for DR/imperfect repeats near tRNA/tmRNA. Risk scoring via symmetry/mismatch penalties and recombination likelihood. Genome heatmap of att likelihood with per-site cards showing attL/attR/attP/attB reconstruction. Novelty: Medium-high, Pedagogical: High (recombination, repeats, stability).","notes":"## PROPHAGE INTEGRATION SITE \u0026 LIFECYCLE PROPENSITY SCORING\n\n**Expanded Feature Specification from Roadmap**\n\n### Concept\nScore lysogeny propensity and preferred integration hotspots, blending attP/attB motifs, integrase class, local repeats, and host genome context. Predict not just WHERE a phage integrates, but HOW LIKELY it is to choose lysogeny vs lysis.\n\n### Mathematical Foundations\n\n**Lifecycle Decision Score:**\n```\nL_propensity = w1 × S_att + w2 × S_regulatory + w3 × S_env + w4 × S_comparison\n\nwhere:\n- S_att: Integration site quality (0-1)\n- S_regulatory: CI/Cro circuit completeness (0-1)\n- S_env: Environmental response element density\n- S_comparison: Similarity to known lysogenic phages\n```\n\n**Regulatory Circuit Scoring:**\n```\nS_regulatory = (has_CI × 0.4) + (has_Cro × 0.2) + (has_antirepressor × 0.2) +\n               (operator_motifs × 0.1) + (promoter_architecture × 0.1)\n```\n\n**att Site Scoring (PSSM):**\n```\nscore = Σᵢ PSSM[i][base_i]\nBuilt from known att cores: Lambda-like, P4-like, Phi31-like\n```\n\n**Excision Risk Model:**\n```\nrisk = w_asymmetry × (1 - symmetryScore) +\n       w_gc × extreme_gc_penalty +\n       w_core × short_core_penalty -\n       serine_integrase_bonus\n```\n\n### Component Analysis\n\n**Integration Site Quality (S_att):**\n- Motif strength vs consensus\n- Arm symmetry (left vs right)\n- Core length and GC balance\n- Proximity to tRNA/tmRNA\n\n**Regulatory Circuit (S_regulatory):**\n- CI repressor presence and strength\n- Cro antirepressor\n- Operator motif quality\n- Promoter architecture (PL, PR, PRM)\n\n**Environmental Response (S_env):**\n- SOS response elements\n- Nutritional sensors\n- Stress-response motifs\n\n**Comparison (S_comparison):**\n- Similarity to known temperate phages\n- Lysogenic lifestyle markers\n\n### TUI Features\n- Lifecycle Propensity panel:\n  - Overall score (0-1) with TEMPERATE/LYTIC verdict\n  - Component breakdowns with progress bars\n  - Confidence explanation\n- Integration Site Heatmap along genome\n- Selected Site details:\n  - attB structure (left arm, core, right arm)\n  - Target type (tRNA-Arg, tmRNA, intergenic)\n  - Score and symmetry %\n- Excision Risk Assessment:\n  - Overall risk meter\n  - Factor breakdown (+ and - contributions)\n  - Predicted outcomes (precise, imprecise, specialized transduction)\n- Integration/Excision animation\n- [D] Detail view, [C] Compare phages, [S] Simulate\n\n### Integrase Classification\n- **Tyrosine recombinases**: Lambda Int family, precise excision\n- **Serine recombinases**: PhiC31 family, unidirectional\n- Catalytic residue detection (R-H-R-Y vs S-R-Y-D)\n\nNovelty: 8/10, Pedagogical: 9/10, Wow Factor: 8/10","status":"open","priority":3,"issue_type":"feature","created_at":"2025-12-06T23:52:19.165886-05:00","updated_at":"2025-12-07T13:39:47.862065-05:00","dependencies":[{"issue_id":"phage_explorer-0qu","depends_on_id":"phage_explorer-54g","type":"blocks","created_at":"2025-12-06T23:56:51.260138-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-0rm","title":"Advanced: Structure-Informed Capsid/Tail Constraint Scanner","description":"Score mutations against coarse structural constraints (lattice geometry, contact propensities). Per-residue fragility scores via Rust+WASM. ESM delta + structural penalty blend. Capsid/tail ASCII view with fragility heatmap; hover shows Δstability; shake test animation. Guides engineering for stability vs escape. Novelty: Medium.","notes":"## STRUCTURE-INFORMED CAPSID/TAIL CONSTRAINT SCANNER\n\n**Full TypeScript Implementation from Roadmap**\n\n### Concept\nIntegrate structural constraints into mutation analysis to identify mechanically fragile regions, assembly cliffs, evolvability maps, and engineering safe zones.\n\n### Mathematical Foundations\n\n**Contact Penalty Score:**\n```\nC_penalty(i) = Σ_j∈contacts(i) |ΔContact_affinity(aa_old → aa_new)|\n```\n\n**Lattice Geometry Constraint:**\n```\nSymmetry_violation = |position_new - position_ideal| / tolerance\n```\n\n**Structural Fragility Index:**\n```\nF(i) = α × C_penalty(i) + β × Burial(i) + γ × Conservation(i)\n- Burial: 0 = surface, 1 = core\n- Default weights: 0.4, 0.3, 0.3\n```\n\n**Delta Stability Estimation:**\n```\nΔΔG(mutation) ≈ BLOSUM_penalty × contact_weight + volume_change × packing_penalty\n```\n\n### Complete TypeScript Implementation\n\n- `ContactMapEntry` (residueA/B, distance, contactType)\n- `ResidueConstraint` (position, burial, fragility, conservation, interface flags)\n- `MutationEffect` (deltaStability, contactPenalty, volumeChange, allowed, warning)\n- `CapsidModel` with T-number, symmetry, subunit count\n- `VOLUME` and `HYDROPHOBICITY` amino acid property scales\n- `getBlosum62Penalty()` simplified substitution scoring\n- `generateCoarseContactMap()` for capsid/tail/generic\n- `computeBurial()` from contact density\n- `computeFragility()` combining burial, contacts, conservation\n- `predictMutationEffect()` per mutation analysis\n- `analyzeStructuralConstraints()` main pipeline\n- `renderFragilityHeatmap()` ASCII gradient visualization\n- `renderMutationTable()` formatted mutation analysis\n\n### TUI Features\n- Fragility heatmap: ░ robust → █ fragile\n- Critical position markers (▼)\n- Safe zones for engineering (═ bars)\n- 3D capsid view with fragility overlay\n- Mutation analysis table (pos, change, ΔStab, allowed)\n- T-number geometry visualization\n- Interface and symmetry contact warnings\n- [←/→] Navigate, [M] Scan mutations, [S] Safe zones, [3] Toggle 3D\n\nNovelty: 8/10, Pedagogical: 9/10, Wow Factor: 8/10","status":"in_progress","priority":3,"issue_type":"feature","created_at":"2025-12-07T00:18:12.512407-05:00","updated_at":"2025-12-07T17:46:21.997327-05:00","dependencies":[{"issue_id":"phage_explorer-0rm","depends_on_id":"phage_explorer-ojb","type":"blocks","created_at":"2025-12-07T00:20:54.265924-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-0vs","title":"Layer 2: Virion Stability Predictor","description":"Layer 2: Predict capsid stability across temperature and ionic strength for handling/formulation guidance. Practical guidance for storage/shipping; connects sequence to physical robustness.\n\n**Build Plan:**\n- Empirical models + coarse-grain capsid energetics (Rust + nalgebra)\n- Estimate melting/denaturation thresholds from capsid protein composition\n- Consider salt bridges, charge distribution, and hydrophobics\n- Optional lightweight MD-informed parameters\n- Precompute stability curves; WASM for quick recalcs on parameter changes\n\n**What Determines Stability:**\n- Net charge and charge distribution\n- Hydrophobic core integrity\n- Salt bridge networks\n- Disulfide bonds (if present)\n- Capsid geometry (T-number)\n\n**TUI Visualization:**\n- 'Stability bar' that shifts as temperature/salt sliders adjust\n- Warning icon when outside safe envelope\n- ASCII melting curve plot\n- Recommended storage conditions panel\n\nNovelty: 8/10, Pedagogical: 8/10, Cool Factor: 8/10.","status":"in_progress","priority":3,"issue_type":"feature","created_at":"2025-12-06T23:15:45.425383-05:00","updated_at":"2025-12-08T02:29:41.403305-05:00","dependencies":[{"issue_id":"phage_explorer-0vs","depends_on_id":"phage_explorer-54g","type":"blocks","created_at":"2025-12-06T23:15:45.425932-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-0weo","title":"Pillar 2: Glossary System","description":"## Interactive Glossary for Scientific Terms\n\n### What This Creates\n\n1. **Term Database (glossary/terms.ts)**\n   - 100+ biology/genetics terms with definitions\n   - Each term has: name, shortDef, longDef, relatedTerms[], seeAlso[]\n   - Categories: DNA, Protein, Phage, Evolution, Analysis Methods\n   - Example terms: nucleotide, codon, capsid, lysogeny, GC content, etc.\n\n2. **GlossaryPanel Component**\n   - Collapsible sidebar panel\n   - Search/filter functionality\n   - Category browsing\n   - Alphabetical index\n   - Click term → expand to full definition\n\n3. **TermTooltip Component**\n   - Hover on glossary terms → instant short definition\n   - Click to open full glossary entry\n   - Context-aware positioning\n\n4. **useGlossary Hook**\n   - `getTerm(termId)` - get definition\n   - `searchTerms(query)` - fuzzy search\n   - `relatedTerms(termId)` - get related concepts\n\n5. **Text Enhancement**\n   - HOC or hook to auto-link glossary terms in text\n   - Underline/highlight recognized terms\n   - Works with existing overlay descriptions\n\n### Term Categories to Cover\n- **DNA Basics**: nucleotide, base pair, strand, 5'/3' end, complementary, antiparallel\n- **Gene Structure**: ORF, promoter, RBS, start/stop codon, intergenic\n- **Translation**: codon, anticodon, reading frame, ribosome, tRNA, amino acid\n- **Phage Biology**: capsid, tail, baseplate, injection, lysogeny, lytic, temperate\n- **Evolution**: mutation, selection, HGT, synteny, homolog, ortholog\n- **Analysis**: GC content, skew, k-mer, entropy, ANI\n\n### Files to Create\n- packages/web/src/education/glossary/terms.ts\n- packages/web/src/education/glossary/GlossaryPanel.tsx\n- packages/web/src/education/components/TermTooltip.tsx\n- packages/web/src/education/hooks/useGlossary.ts\n\n### Why This Matters\nThe glossary is the most immediately useful beginner feature. It provides instant clarification without requiring users to leave the app or search externally.","status":"open","priority":1,"issue_type":"feature","created_at":"2025-12-09T11:32:34.117591-05:00","updated_at":"2025-12-09T11:32:34.117591-05:00","dependencies":[{"issue_id":"phage_explorer-0weo","depends_on_id":"phage_explorer-ty1n","type":"blocks","created_at":"2025-12-09T11:32:34.121492-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-10p","title":"[WEB-P2] Core Visualization: Canvas Rendering Engine","description":"# Phase 2: Core Visualization (Target: Weeks 3-5)\n\n## Purpose\nBuild the high-performance rendering engine that displays sequence data at 60fps. This is the visual heart of the application.\n\n## Why This Matters\nThe sequence grid is the most frequently viewed component. Users scroll through thousands of bases constantly. Any frame drops or latency destroys the \"instant feedback\" experience that defines Phage Explorer.\n\n## Design Philosophy\nWe render to Canvas 2D (not DOM) because:\n1. **Performance**: DOM cannot achieve 60fps with 5000+ colored elements\n2. **Control**: Pixel-perfect cyberpunk aesthetics\n3. **Consistency**: Same visual output across browsers\n\nWebGL is used for post-processing effects (glow, scanlines) that would be expensive in 2D.\n\n## Deliverables\n1. **Canvas Sequence Grid Renderer** - Main rendering engine\n2. **Glyph Atlas** - Pre-rendered character sprites\n3. **Virtual Scrolling** - Efficient rendering of 100k+ sequences\n4. **Gene Map Renderer** - Canvas/SVG hybrid\n5. **Sparkline Components** - Ported from TUI\n6. **WebGL Post-Processing** - Shaders for effects\n\n## Technical Architecture\n\n### SequenceGridRenderer\n```typescript\n- OffscreenCanvas double-buffering\n- High-DPI support (devicePixelRatio)\n- Dirty region tracking for partial updates\n- Color batching (group characters by color)\n- requestAnimationFrame scheduling\n```\n\n### GlyphAtlas\n```typescript\n- Pre-render all nucleotides (ACGTN) + amino acids\n- Single canvas texture for all characters\n- drawGlyph() copies from atlas to destination\n- ~10x faster than fillText() per character\n```\n\n### Virtual Scrolling\n```typescript\n- Only render visible rows + overscan\n- Smooth scroll with momentum physics\n- Prefetch ahead of scroll direction\n- 60fps target with 100k+ bases\n```\n\n## Acceptance Criteria\n- [ ] 60fps scrolling on 100k+ base sequences\n- [ ] All nucleotide/amino acid colors match TUI\n- [ ] Gene map shows correct positions and strands\n- [ ] Scanlines and glow effects render correctly\n- [ ] High-DPI displays render crisply\n- [ ] Memory usage stable during extended scrolling\n\n## Performance Targets\n| Metric | Target |\n|--------|--------|\n| Frame time | \u003c16.67ms |\n| First paint | \u003c100ms |\n| Scroll latency | \u003c8ms |\n| Memory (100k seq) | \u003c50MB |\n\n## Risks \u0026 Mitigations\n- **Risk**: Canvas performance varies across browsers\n  - **Mitigation**: Test Safari, use conservative techniques\n- **Risk**: Glyph atlas memory\n  - **Mitigation**: Generate at runtime, don't ship as image\n- **Risk**: WebGL shader complexity\n  - **Mitigation**: Simple shaders first, optimize later\n\n## Dependencies\n- Phase 0 (app scaffold with theme system)\n- Phase 1 (database for sequence data)","status":"closed","priority":0,"issue_type":"epic","created_at":"2025-12-07T16:56:14.282689-05:00","updated_at":"2025-12-07T18:04:37.240754-05:00","closed_at":"2025-12-07T18:04:37.240754-05:00","dependencies":[{"issue_id":"phage_explorer-10p","depends_on_id":"phage_explorer-87z","type":"blocks","created_at":"2025-12-07T17:04:30.294827-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-10p","depends_on_id":"phage_explorer-pml","type":"blocks","created_at":"2025-12-07T17:04:31.525345-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-11b","title":"[WEB-P2] Virtual Scrolling: Large Sequence Performance","description":"VirtualScroller for 100k+ sequences. Only render visible rows + overscan. Smooth scroll with momentum. Prefetch in scroll direction.","status":"closed","priority":0,"issue_type":"feature","created_at":"2025-12-07T16:57:47.79637-05:00","updated_at":"2025-12-07T18:01:40.863388-05:00","closed_at":"2025-12-07T18:01:40.863388-05:00","dependencies":[{"issue_id":"phage_explorer-11b","depends_on_id":"phage_explorer-10p","type":"blocks","created_at":"2025-12-07T17:04:55.258117-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-16p","title":"[WEB-P1] Create PhageDatabaseLoader class","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-07T16:58:15.872225-05:00","updated_at":"2025-12-07T17:51:04.390184-05:00","closed_at":"2025-12-07T17:51:04.390184-05:00","dependencies":[{"issue_id":"phage_explorer-16p","depends_on_id":"phage_explorer-qlo","type":"blocks","created_at":"2025-12-07T17:04:42.929004-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-16p","depends_on_id":"phage_explorer-n96","type":"blocks","created_at":"2025-12-07T17:05:00.384873-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-17r","title":"[WEB-P0] Configure tsconfig.json with path aliases","description":"Setup TypeScript configuration with strict mode and path aliases for @phage-explorer/* packages","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-07T16:58:07.315609-05:00","updated_at":"2025-12-07T17:20:34.795651-05:00","closed_at":"2025-12-07T17:20:34.795651-05:00","dependencies":[{"issue_id":"phage_explorer-17r","depends_on_id":"phage_explorer-94x","type":"blocks","created_at":"2025-12-07T17:04:37.045509-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-1eu","title":"Layer 2: Hilbert Curve Genome Atlas","description":"Transform linear genomes into compact 2D visualizations using Hilbert space-filling curves that preserve locality (adjacent sequence positions stay adjacent in 2D). Order-8 curve fits 65kb in 256x256 grid. Features GC content coloring, gene density overlay, multi-genome comparison, and interactive navigation. Reveals patterns invisible in linear views: GC islands, gene clusters, compositional discontinuities. Novelty: 8/10, Pedagogical: 8/10, Cool Factor: 9/10.","notes":"## HILBERT CURVE GENOME ATLAS\n\n**Comprehensive Feature Specification from Roadmap**\n\n### Concept\nTransforms linear genome sequences into compact 2D visualizations using a space-filling fractal curve that preserves locality. Unlike row wrapping, Hilbert curves keep nearby sequence positions near each other in 2D.\n\n**Why Hilbert Curves?**\n- Locality preservation: Adjacent bases stay adjacent in 2D\n- Compact: 65kb genome fits in 256x256 (order-8)\n- Multi-scale patterns visible at different zoom levels\n- Human visual system excels at 2D pattern detection\n\n**Applications**: GC content, gene density, repeat detection, HGT, multi-genome comparison\n\n### Mathematical Foundations\n\n**Curve Construction**: Order-n has 4^n points in 2^n x 2^n grid\n- Order 8: 65,536 points (fits most phages)\n- Order 10: 1,048,576 points (large genomes)\n\n**hilbertD2XY(n, d)**: Index to (x,y) conversion using quadrant rotation\n**hilbertXY2D(n, x, y)**: Reverse for interactive queries\n\n**Properties**: Bijective, continuous (adjacent indices differ by \u003c=1), self-similar\n\n### Implementation\n\n**Core Components**: HilbertConfig (order, colorScheme, windowSize), HilbertResult (grid: Uint8Array, width, height, metrics)\n\n**Coloring**: GC content (blue-white-red), Gene density (black-green), Custom gradients\n\n**Multi-genome**: Generate aligned Hilbert maps, highlight differences\n\n### TUI Visualization\n\nSingle genome: Order-8 map with GC coloring, cursor position, gene overlay\nComparison: Side-by-side Lambda/P22/HK97 with similarity percentages\n\n### Assessment\n- Novelty: 8/10 - Rare in genomics, TUI interactive is innovative\n- Pedagogical: 8/10 - Space-filling curves, locality, recursion\n- Cool Factor: 9/10 - Striking visual transformation\n\n### Files\n- packages/tui/src/components/HilbertView.tsx\n- packages/core/src/analysis/hilbert.ts\n- packages/core/src/analysis/hilbert-compare.ts","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-06T23:14:47.310035-05:00","updated_at":"2025-12-08T01:00:29.15194-05:00","closed_at":"2025-12-08T01:00:29.15194-05:00","dependencies":[{"issue_id":"phage_explorer-1eu","depends_on_id":"phage_explorer-54g","type":"blocks","created_at":"2025-12-06T23:14:47.311482-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-1lqy","title":"[WEB-P4] Port ribosome simulation logic to worker","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-07T17:01:53.365507-05:00","updated_at":"2025-12-07T18:43:08.128186-05:00","closed_at":"2025-12-07T18:43:08.128186-05:00","dependencies":[{"issue_id":"phage_explorer-1lqy","depends_on_id":"phage_explorer-z3eq","type":"blocks","created_at":"2025-12-07T17:07:40.303709-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-1qsp","title":"[WEB-P4] Create EvolutionTimelineView component","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-07T17:02:24.095483-05:00","updated_at":"2025-12-07T18:42:55.76536-05:00","closed_at":"2025-12-07T18:42:55.76536-05:00","dependencies":[{"issue_id":"phage_explorer-1qsp","depends_on_id":"phage_explorer-6vqr","type":"blocks","created_at":"2025-12-07T17:08:14.75815-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-1qsp","depends_on_id":"phage_explorer-9et6","type":"blocks","created_at":"2025-12-07T17:09:10.683955-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-1x12","title":"[WEB-P6] Test with screen reader (VoiceOver/NVDA)","description":"","notes":"Continuing accessibility polish: quick-action buttons now explicit type=button and wrapped in nav landmark; overlay manager avoids bogus dN/dS inputs. Still need live screen-reader run.","status":"in_progress","priority":0,"issue_type":"task","created_at":"2025-12-07T17:01:53.674557-05:00","updated_at":"2025-12-08T01:04:07.945579-05:00","dependencies":[{"issue_id":"phage_explorer-1x12","depends_on_id":"phage_explorer-2xt","type":"blocks","created_at":"2025-12-07T17:09:09.001736-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-1x12","depends_on_id":"phage_explorer-ld7x","type":"blocks","created_at":"2025-12-07T17:10:02.917311-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-1zj8","title":"[WEB-P3] Build command registry with categories","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-07T17:01:40.220282-05:00","updated_at":"2025-12-08T00:16:08.313113-05:00","closed_at":"2025-12-08T00:16:08.313113-05:00","dependencies":[{"issue_id":"phage_explorer-1zj8","depends_on_id":"phage_explorer-f4t","type":"blocks","created_at":"2025-12-07T17:07:30.467588-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-245z","title":"[WEB-P6] Integrate telemetry for error logging","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-07T17:02:28.326103-05:00","updated_at":"2025-12-08T00:43:53.10273-05:00","closed_at":"2025-12-08T00:43:53.10273-05:00","dependencies":[{"issue_id":"phage_explorer-245z","depends_on_id":"phage_explorer-ojh6","type":"blocks","created_at":"2025-12-07T17:09:40.185261-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-245z","depends_on_id":"phage_explorer-733k","type":"blocks","created_at":"2025-12-07T17:10:06.012299-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-25e1","title":"[WEB-P4] Implement diffusion model parameters","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-07T17:02:11.921707-05:00","updated_at":"2025-12-07T18:42:57.008862-05:00","closed_at":"2025-12-07T18:42:57.008862-05:00","dependencies":[{"issue_id":"phage_explorer-25e1","depends_on_id":"phage_explorer-os7j","type":"blocks","created_at":"2025-12-07T17:08:04.203964-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-26w","title":"[WEB-P0] Initialize packages/web with Vite scaffold","description":"Create packages/web directory structure and initialize with Vite + React template","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-07T16:58:03.020515-05:00","updated_at":"2025-12-07T17:20:27.578584-05:00","closed_at":"2025-12-07T17:20:27.578584-05:00","dependencies":[{"issue_id":"phage_explorer-26w","depends_on_id":"phage_explorer-94x","type":"blocks","created_at":"2025-12-07T17:04:36.955415-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-2cs1","title":"[WEB-P4] Create simulation.worker.ts","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-07T17:01:44.418495-05:00","updated_at":"2025-12-07T18:42:45.513631-05:00","closed_at":"2025-12-07T18:42:45.513631-05:00","dependencies":[{"issue_id":"phage_explorer-2cs1","depends_on_id":"phage_explorer-ru4","type":"blocks","created_at":"2025-12-07T17:07:31.188319-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-2cs1","depends_on_id":"phage_explorer-baxt","type":"blocks","created_at":"2025-12-07T17:09:00.738884-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-2g5","title":"Foundation: Overlay System Architecture","description":"Create OverlayManager in Zustand state store with Overlay interface (id, render, height, position). Enables Layer 1 quick toggles (G, X, B, P, R keys) and Layer 2+ visual augmentations. Precompute data on phage selection. Max 3 simultaneous overlays. THIS IS THE CRITICAL FOUNDATION for all 31 features.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-06T23:08:21.93375-05:00","updated_at":"2025-12-07T00:14:11.859895-05:00","closed_at":"2025-12-07T00:14:11.859895-05:00"}
{"id":"phage_explorer-2hv","title":"[WEB-P1] Setup Workbox with precacheAndRoute","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-07T16:58:25.856048-05:00","updated_at":"2025-12-07T17:53:55.429883-05:00","closed_at":"2025-12-07T17:53:55.429883-05:00","dependencies":[{"issue_id":"phage_explorer-2hv","depends_on_id":"phage_explorer-fdq","type":"blocks","created_at":"2025-12-07T17:04:44.707455-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-2kdr","title":"[WEB-P3] Build parameter configuration forms","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-07T17:02:00.460763-05:00","updated_at":"2025-12-08T00:20:56.221438-05:00","closed_at":"2025-12-08T00:20:56.221438-05:00","dependencies":[{"issue_id":"phage_explorer-2kdr","depends_on_id":"phage_explorer-7bsl","type":"blocks","created_at":"2025-12-07T17:07:33.600734-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-2q8","title":"[WEB-P0] Theme System: CSS Variables \u0026 Theme Tokens","description":"Port complete theme system from TUI. Create CSS variable tokens for all 10 themes. Implement theme switching hook. Add theme persistence.","status":"closed","priority":0,"issue_type":"feature","created_at":"2025-12-07T16:57:43.629603-05:00","updated_at":"2025-12-07T17:28:06.500162-05:00","closed_at":"2025-12-07T17:28:06.500162-05:00","dependencies":[{"issue_id":"phage_explorer-2q8","depends_on_id":"phage_explorer-87z","type":"blocks","created_at":"2025-12-07T17:04:23.470571-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-2q8","depends_on_id":"phage_explorer-94x","type":"blocks","created_at":"2025-12-07T17:04:53.004864-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-2q8","depends_on_id":"phage_explorer-aq6","type":"blocks","created_at":"2025-12-07T17:04:54.071276-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-2uo1","title":"Epic: Beginner Mode - Educational Layer for Non-Biologists","description":"# Epic: Beginner Mode - Educational Layer for Non-Biologists\n\n## Executive Summary\nCreate an optional Beginner Mode that transforms Phage Explorer into an accessible educational platform for technically competent users without biology/genetics background. NOT dumbed down—provides rich context, theory, and intuition through visually stunning explanations.\n\n## Target User Profile\n- Technically sophisticated (developers, engineers, data scientists)\n- No biology/genetics/virology training\n- Curious about the science, wants to understand 'why' not just 'what'\n\n## Design Principles\n1. Respect intelligence - assume technical competence\n2. Visual-first - animated diagrams over text walls\n3. Progressive disclosure - reveal complexity gradually\n4. Context-aware - show relevant explanations for what user views\n5. Non-intrusive - easy toggle, never blocks workflow\n\n## What Beginner Mode Provides\n1. Foundational Knowledge Modules (phages, DNA, Central Dogma, genetic code)\n2. Context-Aware Explanations (smart tooltips when viewing features)\n3. Visual Explainers (animated DNA helix, translation, infection cycle)\n4. Integrated Glossary (hover definitions, deep-dive links)\n5. Guided Tours (step-by-step walkthroughs)\n\n## Success Metrics\n- User can explain phages after 5 min in Beginner Mode\n- Glossary covers 100+ technical terms\n- Every overlay has beginner-friendly explanation\n- Visual explainers achieve 'that is beautiful' reaction","status":"in_progress","priority":1,"issue_type":"epic","created_at":"2025-12-09T11:31:57.599183-05:00","updated_at":"2025-12-09T23:55:15.897863482-06:00"}
{"id":"phage_explorer-2xt","title":"[WEB-P6] Accessibility Review: WCAG 2.1 AA Compliance","description":"Full accessibility audit. ARIA labels, focus management, screen reader testing, reduced motion support, high contrast theme.","status":"closed","priority":0,"issue_type":"feature","created_at":"2025-12-07T17:01:22.841287-05:00","updated_at":"2025-12-07T22:15:16.481995-05:00","closed_at":"2025-12-07T22:15:16.481999-05:00","dependencies":[{"issue_id":"phage_explorer-2xt","depends_on_id":"phage_explorer-zsi","type":"blocks","created_at":"2025-12-07T17:07:19.991485-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-3cl","title":"Advanced: CRISPR Pressure \u0026 Anti-CRISPR Landscape","description":"Integrate host CRISPR spacer hits + Acr predictions (HMMs, small ORF heuristics, ESM embedding similarity). Pressure score combining spacer density, PAM proximity, coding strand. Pressure bar with spacer ticks, Acr candidates glow; center on strongest clash. Novelty: High, Pedagogical: High.","notes":"## CRISPR PRESSURE \u0026 ANTI-CRISPR LANDSCAPE\n\n**Full TypeScript Implementation from Roadmap**\n\n### Concept\nVisualize the evolutionary arms race between CRISPR targeting and phage counter-defenses with pressure mapping, Acr prediction, and escape mutation analysis.\n\n### Mathematical Foundations\n\n**CRISPR Pressure Index:**\n```\nP(window) = Σ_spacers [ match_score × PAM_score × strand_weight ]\n\n- match_score: Sequence identity (0-1)\n- PAM_score: 1.0 if valid PAM, 0.3 otherwise\n- strand_weight: 1.0 coding, 0.7 template\n```\n\n**Acr Candidate Score:**\n```\nAcr_score = w1 × HMM_hit + w2 × size_fit + w3 × neighborhood + w4 × disorder\n\n- HMM_hit: Match to AcrIIA, AcrIIC, AcrIF families\n- size_fit: Optimal 50-200 aa range\n- neighborhood: Proximity to spacer hotspots\n- disorder: Charged residue fraction\n```\n\n**Escape Mutation Priority:**\n```\nE(position) = CRISPR_coverage × (1 - conservation) × synonymous_option\n```\n\n### Complete TypeScript Implementation\n\n- `SpacerHit` (host, crisprType I/II/III/V/VI, match, PAM, strand)\n- `AcrCandidate` (gene, score, family, disorder, confidence)\n- `CRISPRPressureWindow` (pressure index, spacer count, dominant type)\n- `EscapeMutation` (position, suggested base, affected spacers)\n- `PAM_PATTERNS` for Cas9, Cas12, Cas13\n- `ACR_HMM_PATTERNS` for AcrIIA, AcrIIC, AcrIF\n- `checkPAM()` PAM recognition by CRISPR type\n- `predictAcrScore()` combining HMM, size, disorder, proximity\n- `computePressureWindows()` sliding window analysis\n- `analyzeCRISPRPressure()` main pipeline\n- `renderCRISPRPressureBar()` ASCII gradient with Acr markers\n\n### TUI Features\n- Pressure map: ░ low → █ high pressure\n- Spacer hit markers (|)\n- Acr candidate stars (★)\n- Hotspot detail panel with spacer table\n- Host organism, CRISPR type, match %, PAM status\n- Acr candidate table with family, score, confidence\n- Arms race interpretation\n- [←/→] Navigate hotspots, [A] View Acr, [E] Escape mutations\n\nNovelty: 9/10, Pedagogical: 9/10, Wow Factor: 8/10","status":"closed","priority":3,"issue_type":"feature","created_at":"2025-12-07T00:18:13.42133-05:00","updated_at":"2025-12-07T17:15:53.673192-05:00","closed_at":"2025-12-07T17:15:53.673192-05:00","dependencies":[{"issue_id":"phage_explorer-3cl","depends_on_id":"phage_explorer-ojb","type":"blocks","created_at":"2025-12-07T00:20:54.384769-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-3cx","title":"[WEB-P2] Implement fast drawGlyph with drawImage","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-07T16:58:15.639942-05:00","updated_at":"2025-12-07T18:01:23.070562-05:00","closed_at":"2025-12-07T18:01:23.070562-05:00","dependencies":[{"issue_id":"phage_explorer-3cx","depends_on_id":"phage_explorer-53f","type":"blocks","created_at":"2025-12-07T17:05:06.932316-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-3cx","depends_on_id":"phage_explorer-adf","type":"blocks","created_at":"2025-12-07T17:05:31.379143-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-3cx","depends_on_id":"phage_explorer-enf","type":"blocks","created_at":"2025-12-07T17:05:32.631935-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-3jt","title":"Advanced: Protein Structure Quickview via Fold Embeddings","description":"Cluster structural proteins using TM-Vec/ESMFold embeddings to spot fold-family jumps. HNSW/UMAP for nearest neighbors + novelty score. ASCII contact map thumbnail, neighbor list with novelty meter, loop/patch delta annotations. Captures structural novelty beyond sequence identity. Novelty: High.","notes":"## PROTEIN STRUCTURE QUICKVIEW VIA FOLD EMBEDDINGS\n\n### How to Build\n- **Embeddings**: TM-Vec/ESMFold distogram embeddings (precompute via Python sidecar); cache vectors\n- **Clustering**: HNSW/UMAP pipeline (Rust+WASM) for nearest neighbors; novelty score vs known folds\n- **Delta explainer**: Highlight domain swaps, loop insertions, and charge patches\n- **UI**: Pick a protein, see nearest fold neighbors, novelty score, ASCII contact map strip\n\n### TUI Visualization\nASCII contact-map thumbnail; neighbor list with \"novelty meter\"; highlight loop/patch deltas as inline annotations.\n\n### Files\n- packages/core/src/analysis/fold-embeddings.ts\n- packages/tui/src/components/FoldQuickview.tsx","status":"in_progress","priority":3,"issue_type":"feature","created_at":"2025-12-07T00:17:40.679884-05:00","updated_at":"2025-12-07T00:30:27.838212-05:00","dependencies":[{"issue_id":"phage_explorer-3jt","depends_on_id":"phage_explorer-ojb","type":"blocks","created_at":"2025-12-07T00:20:52.256027-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-3kk","title":"[WEB-P2] Add smooth scroll animation with easing","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-07T16:58:25.574687-05:00","updated_at":"2025-12-07T18:01:31.810678-05:00","closed_at":"2025-12-07T18:01:31.810678-05:00","dependencies":[{"issue_id":"phage_explorer-3kk","depends_on_id":"phage_explorer-11b","type":"blocks","created_at":"2025-12-07T17:05:09.483602-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-3nmj","title":"[WEB-P3] Create CommandPalette component shell","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-07T17:01:38.276638-05:00","updated_at":"2025-12-08T00:15:57.731674-05:00","closed_at":"2025-12-08T00:15:57.731674-05:00","dependencies":[{"issue_id":"phage_explorer-3nmj","depends_on_id":"phage_explorer-f4t","type":"blocks","created_at":"2025-12-07T17:07:30.30337-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-3nw","title":"[WEB-P2] Add OffscreenCanvas double-buffering","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-07T16:58:01.970514-05:00","updated_at":"2025-12-07T18:01:42.489865-05:00","closed_at":"2025-12-07T18:01:42.489865-05:00","dependencies":[{"issue_id":"phage_explorer-3nw","depends_on_id":"phage_explorer-ltg","type":"blocks","created_at":"2025-12-07T17:05:00.721499-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-3uoo","title":"[WEB-P5] Benchmark GPU vs WASM performance","description":"","status":"in_progress","priority":2,"issue_type":"task","created_at":"2025-12-07T17:01:52.791139-05:00","updated_at":"2025-12-08T02:19:54.317998-05:00","dependencies":[{"issue_id":"phage_explorer-3uoo","depends_on_id":"phage_explorer-9vj","type":"blocks","created_at":"2025-12-07T17:07:46.638352-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-3uoo","depends_on_id":"phage_explorer-fwyc","type":"blocks","created_at":"2025-12-07T17:08:36.121248-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-3uoo","depends_on_id":"phage_explorer-qn3k","type":"blocks","created_at":"2025-12-07T17:08:37.155745-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-3yue","title":"[WEB-P3] Add simulation preview thumbnails","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-07T17:01:59.555024-05:00","updated_at":"2025-12-08T00:20:39.540018-05:00","closed_at":"2025-12-08T00:20:39.540018-05:00","dependencies":[{"issue_id":"phage_explorer-3yue","depends_on_id":"phage_explorer-7bsl","type":"blocks","created_at":"2025-12-07T17:07:33.506413-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-3z4","title":"[WEB-P1] Implement checkForUpdates background refresh","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-07T16:58:19.459261-05:00","updated_at":"2025-12-07T17:51:04.409399-05:00","closed_at":"2025-12-07T17:51:04.409399-05:00","dependencies":[{"issue_id":"phage_explorer-3z4","depends_on_id":"phage_explorer-qlo","type":"blocks","created_at":"2025-12-07T17:04:43.248229-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-3z4","depends_on_id":"phage_explorer-4fo","type":"blocks","created_at":"2025-12-07T17:05:01.18443-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-3zpa","title":"Task: Create education types file","description":"Create packages/web/src/education/types.ts with TypeScript interfaces: GlossaryTerm, Module, Tour, TourStep, ContextTopic, ContextExplanation. These types will be used across all education components.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-09T11:43:07.822887-05:00","updated_at":"2025-12-10T00:55:34.425922832-06:00","closed_at":"2025-12-10T00:55:34.425922832-06:00","dependencies":[{"issue_id":"phage_explorer-3zpa","depends_on_id":"phage_explorer-ty1n","type":"blocks","created_at":"2025-12-09T11:43:07.824252-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-43vg","title":"[WEB-P5] Implement rich clipboard copy (HTML+text)","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-07T17:02:17.969766-05:00","updated_at":"2025-12-08T00:08:30.852254-05:00","closed_at":"2025-12-08T00:08:30.852254-05:00","dependencies":[{"issue_id":"phage_explorer-43vg","depends_on_id":"phage_explorer-plt8","type":"blocks","created_at":"2025-12-07T17:08:07.892876-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-441","title":"Layer 3: Packaging Motor Pressure Gauge","description":"Layer 3 Overlay: Visualize packaging pressure (60 atm!) as you scroll through genome. The DNA packaging motor is one of the most powerful molecular machines known—generating forces exceeding 60 pN and internal pressures of ~60 atmospheres to compress DNA into capsid. Force increases exponentially with fill fraction via bending + electrostatic + entropic energy models.\n\n**Physics of Packaging:**\n- Terminase translocates DNA into preformed capsids\n- DNA packed to near-crystalline density (~500 mg/mL)\n- Motor burns ~1 ATP per 2 bp packaged\n- Packaging stalls when internal pressure = motor force\n- Stored energy drives subsequent DNA injection\n\n**What Limits Packaging:**\n- Bending energy (DNA persistence length ~50 nm)\n- Electrostatic repulsion (charged DNA backbone)\n- Entropy loss (organized vs random coil)\n- Capsid volume constraints\n\n**Implementation Stack:** Rust+WASM for polymer physics (ndarray + nalgebra), TypeScript wrapper, SQLite caching for force–extension curves. Scroll-synchronized display: position 1 = low pressure; position 48,000 = maximum stress. Pressure gauge flashes red when \u003e50 atm.\n\nNovelty: 10/10, Pedagogical: 9/10, Cool Factor: 10/10.","notes":"Packaging pressure gauge overlay (V): fill fraction tied to scroll (DNA/AA aware), force/pressure estimates, fill and pressure gauges, Esc/V close, integrated into overlay stack and menus","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-06T23:17:53.887447-05:00","updated_at":"2025-12-07T13:42:04.666795-05:00","closed_at":"2025-12-07T13:42:04.666855-05:00","dependencies":[{"issue_id":"phage_explorer-441","depends_on_id":"phage_explorer-ojb","type":"blocks","created_at":"2025-12-06T23:17:53.888443-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-441","depends_on_id":"phage_explorer-2g5","type":"blocks","created_at":"2025-12-06T23:40:02.457611-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-46l","title":"Layer 3: Lysogeny Decision Circuit Simulator","description":"Rebuild CI/Cro-like regulatory switch from sequence motifs and simulate bistable lysis/lysogeny decisions under varying MOI/damage. Promoter/operator/terminator scans + HMMER for CI/Cro-family. Boolean fast mode or ODE/Hill kinetics. Phase portrait visualization with attractors, parameter sliders that flip basins. Novelty: High, Pedagogical: High (bistability, Hill coefficients, feedback).","notes":"## LYSOGENY/LYSIS DECISION CIRCUIT RECONSTRUCTOR\n\n**Full Implementation from Roadmap**\n\n### Mathematical Foundations\n\n**Cooperative Binding (Hill Equation):**\n```\nf(R) = R^n / (K_D^n + R^n)\n```\n\n**CI/Cro Mutual Repression Model:**\n```\nd[CI]/dt = α_CI × f_rep(Cro, OR) - δ_CI × [CI]\nd[Cro]/dt = α_Cro × f_rep(CI, OR) - δ_Cro × [Cro]\n```\n\n**Operator Occupancy (Three-Site Model for Lambda OR):**\n```\nP(OR1 bound by CI) = [CI]² × K₁ / Z\nP(OR2 bound by CI) = [CI]² × K₂ × (1 + ω×P(OR1)) / Z\nZ = 1 + [CI]²K₁ + [CI]²K₂ + [CI]²K₃ + [CI]⁴K₁K₂ω + ...\n```\n\n**SOS Response (UV Damage):**\n```\nd[RecA*]/dt = k_UV × UV - k_off × [RecA*]\nCI_cleavage_rate = k_cleave × [RecA*] × [CI]\n```\n\n### Complete TypeScript Implementation\n\n- `RegulatoryCircuit` interface (promoters, operators, genes)\n- `SwitchState` (CI, Cro, CII, RecAStar concentrations)\n- `SwitchParameters` (synthesis/degradation rates, K_D values, cooperativity)\n- `calculateOperatorOccupancy()` partition function model\n- `calculateSynthesisRates()` PRM/PR activity\n- `switchODE()` full ODE system\n- `simulateSwitch()` trajectory with fate determination\n- `generatePhasePortrait()` vector field generation\n- `findRegulatoryElements()` promoter/operator scanning\n- `predictLysogenyProbability()` condition-based prediction\n\n### TUI Features\n- Phase Portrait (CI vs Cro) with vector field arrows\n- Separatrix marking lytic/lysogenic basins of attraction\n- Genetic Map showing PL, OL, cI, PRM, PR, cro, N\n- Parameter sliders: [M]OI, [U]V damage, [N]utrients\n- Trajectory simulation with live CI/Cro levels\n- P(lysogeny) calculator with factor explanations\n- [R]eset, [P]lay simulation, [J]ump to gene\n\n### Implementation Stack\n- **ODE Solver**: Rust + WASM for smooth trajectories\n- **Phase Portrait**: Precomputed vector field cached in SQLite\n- **Motif Scanning**: TypeScript PWM matching for promoters/operators\n- **UI**: Ink/React with real-time slider updates and animation\n\nNovelty: 10/10, Pedagogical: 10/10, Wow Factor: 9/10","status":"closed","priority":0,"issue_type":"feature","created_at":"2025-12-06T23:17:07.0583-05:00","updated_at":"2025-12-07T13:20:31.018946-05:00","closed_at":"2025-12-07T13:00:45.470304-05:00","dependencies":[{"issue_id":"phage_explorer-46l","depends_on_id":"phage_explorer-ojb","type":"blocks","created_at":"2025-12-06T23:17:07.060887-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-474","title":"Advanced: RNA Structure \u0026 Packaging Signal Explorer","description":"Advanced: Map how synonymous changes would alter mRNA folding/ΔG along coding regions to flag structure-constrained segments. Finds regions constrained by RNA structure, not just protein sequence.\n\n**Build Plan:**\n- ViennaRNA (via viennarna-wasm) for sliding-window MFE/ΔG\n- Compute 'synonymous stress' by sampling silent variants\n- Estimate ΔΔG distribution for each codon position\n- Annotate high-stress windows and link to translation attenuation\n- Flag regulatory RNA hypotheses\n\n**RNA Structure Constraints:**\n- High synonymous stress = structure-constrained\n- Low synonymous stress = freely variable\n- Connect to ribosome pausing predictions\n- Identify potential regulatory elements (riboswitches, attenuators)\n\n**TUI Visualization:**\n- Heat strip under gene showing ΔG and 'stress' percentile\n- Cursor shows example synonymous change and predicted ΔΔG\n- Toggle to overlay on sequence grid\n- Highlight potential regulatory structures\n\nNovelty: 9/10, Pedagogical: 9/10, Cool Factor: 8/10.","status":"open","priority":3,"issue_type":"feature","created_at":"2025-12-06T23:21:06.03497-05:00","updated_at":"2025-12-07T13:06:37.018183-05:00","dependencies":[{"issue_id":"phage_explorer-474","depends_on_id":"phage_explorer-54g","type":"blocks","created_at":"2025-12-06T23:21:06.039512-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-4ee","title":"Layer 3: Ribosome Traffic Jam Simulator","description":"Model mRNA translation as stochastic particle flow using TASEP (Totally Asymmetric Simple Exclusion Process) from statistical physics. Visualize ribosomes moving along transcripts, piling up at rare codon clusters, and creating traffic jams. Real-time animation with density sparklines, codon rate heatmaps, and bottleneck annotations. Teaches codon bias, translation dynamics, ribosome biology. Novelty: 9/10, Pedagogical: 10/10, Cool Factor: 9/10.","notes":"## RIBOSOME TRAFFIC JAM SIMULATOR\n\n**Comprehensive Feature Specification from Roadmap**\n\n### Concept\nModels mRNA translation as stochastic particle flow (TASEP - Totally Asymmetric Simple Exclusion Process), visualizing ribosome movement and pileups.\n\n**TASEP Model**:\n- Ribosomes = particles hopping forward stochastically\n- Each codon has hop rate (tRNA availability)\n- Exclusion: ribosomes cannot overlap (~10 codon footprint)\n- Entry at start codon (initiation rate alpha)\n- Exit at stop codon (termination rate beta)\n\n**Biological Insights**: Rare codon clusters cause queuing, SD spacing affects initiation, codon optimization, ribosome collisions, translation efficiency\n\n### Mathematical Foundations\n\n**Master Equation**: dni/dt = ki-1 ni-1(1-ni) - ki ni(1-ni+1)\n\n**Codon Rates**: Rate proportional to tRNA concentration x adaptation factor\nCAI = exp((1/L) sum(ln(wi)))\n\n**Steady-State Phases**:\n- Low density (alpha \u003c beta): Entry-limited\n- High density (alpha \u003e beta): Exit-limited\n- Maximal current (alpha = beta = 0.5)\n\n**Footprint**: ~28-30 nt = 9-10 codons minimum spacing\n\n### Implementation\n\n**Interfaces**: RibosomeState (position, dwellTime, id, state), TranslationSimulation (mrnaLength, ribosomes[], codonRates, density, flux, time), SimulationConfig (initiationRate, terminationRate, footprint, maxTime)\n\n**simulationTick()**: Attempt initiation, process ribosomes 3'-\u003e5', check blocking, update density\n\n**isBlocked()**: Check if ribosome ahead within footprint distance\n\n**Codon Adaptation Table**: GCT/GAA/CTG/AAA = 1.0 (fast), GCG/CTA/AGG = 0.1-0.3 (slow)\n\n### TUI Visualization\n\nLive animation: mRNA track with ribosome positions (triangles/dots), density sparkline, codon rate heatmap, traffic jam annotations, real-time stats\n\n### Assessment\n- Novelty: 9/10 - TASEP rarely shown interactively in TUI\n- Pedagogical: 10/10 - Statistical physics, codon bias, translation\n- Cool Factor: 9/10 - Watching ribosomes queue is mesmerizing\n\n### Files\n- packages/tui/src/components/RibosomeTrafficView.tsx\n- packages/core/src/analysis/translation-simulation.ts\n- packages/core/src/data/codon-tables.ts","status":"in_progress","priority":1,"issue_type":"feature","created_at":"2025-12-06T23:17:07.375278-05:00","updated_at":"2025-12-07T13:24:35.890927-05:00","dependencies":[{"issue_id":"phage_explorer-4ee","depends_on_id":"phage_explorer-ojb","type":"blocks","created_at":"2025-12-06T23:17:07.376015-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-4fo","title":"[WEB-P1] Generate manifest.json with file hash","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-07T16:58:08.858897-05:00","updated_at":"2025-12-07T17:52:23.084466-05:00","closed_at":"2025-12-07T17:52:23.084466-05:00","dependencies":[{"issue_id":"phage_explorer-4fo","depends_on_id":"phage_explorer-sad","type":"blocks","created_at":"2025-12-07T17:04:41.862762-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-4fo","depends_on_id":"phage_explorer-l63","type":"blocks","created_at":"2025-12-07T17:05:04.341727-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-4j6i","title":"Pillar 6: Guided Tours","description":"Step-by-step walkthroughs for new users including: Tour 1 (Your First Phage - 5min intro), Tour 2 (Reading DNA Like a Biologist - 7min deep dive), Tour 3 (Understanding Analysis Overlays - 10min advanced). Requires TourEngine component with spotlights, step navigation, progress tracking. Files: TourEngine.tsx, TourOverlay.tsx, FirstPhageTour.ts, ReadingDNATour.ts, AnalysisTour.ts, useTour.ts hook.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-09T11:42:31.247921-05:00","updated_at":"2025-12-09T11:42:31.247921-05:00","dependencies":[{"issue_id":"phage_explorer-4j6i","depends_on_id":"phage_explorer-ty1n","type":"blocks","created_at":"2025-12-09T11:42:31.250398-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-4j6i","depends_on_id":"phage_explorer-vs9k","type":"blocks","created_at":"2025-12-09T11:42:31.252-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-4l7w","title":"[WEB-P5] Add progress streaming for each analysis","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-07T17:01:42.08858-05:00","updated_at":"2025-12-07T20:56:24.577247-05:00","closed_at":"2025-12-07T20:56:24.577247-05:00","dependencies":[{"issue_id":"phage_explorer-4l7w","depends_on_id":"phage_explorer-971","type":"blocks","created_at":"2025-12-07T17:07:35.997043-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-4nt","title":"Layer 2: Information-Theoretic Sequence Anomaly Scanner","description":"Layer 2 Analysis: Full-panel KL divergence + compression analysis to detect anomalous regions. Classifies as potential HGT, repetitive, or regulatory. Discovery-oriented - finds what you weren't looking for. Extends X overlay.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-06T23:11:46.311139-05:00","updated_at":"2025-12-08T02:10:46.736037-05:00","closed_at":"2025-12-08T02:10:46.736037-05:00","dependencies":[{"issue_id":"phage_explorer-4nt","depends_on_id":"phage_explorer-54g","type":"blocks","created_at":"2025-12-06T23:11:46.312542-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-4nt","depends_on_id":"phage_explorer-wtf","type":"blocks","created_at":"2025-12-06T23:11:46.31378-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-4pf","title":"Layer 2: Non-B DNA Structure Map (G-Quadruplexes, Z-DNA)","description":"Detect and visualize alternative DNA conformations: G-quadruplexes (G4) using G4Hunter algorithm (score \u003e 1.5 = likely G4), Z-DNA using dinucleotide propensity scores (CG = 1.0, GC = 0.4, AT = -0.1). G4s regulate promoters and affect packaging; Z-DNA triggers innate immunity via ZBP1. Genome track with structure annotations and detailed sequence view. Novelty: 8/10, Pedagogical: 8/10, Cool Factor: 7/10.","notes":"## NON-B DNA STRUCTURE MAP (G4, Z-DNA)\n\n**Comprehensive Feature Specification from Roadmap**\n\n### Concept\nDNA adopts alternative conformations beyond canonical B-form helix with profound regulatory implications.\n\n**G-Quadruplexes (G4)**:\n- Four-stranded structures from G-rich sequences\n- Four guanines form planar \"G-tetrad\" via Hoogsteen bonding\n- Tetrads stack to form remarkably stable structures\n- Found in promoters, 5' UTRs, telomeres\n- In phages: regulate gene expression, affect DNA packaging\n\n**Z-DNA**:\n- Left-handed helix (vs right-handed B-DNA)\n- Forms in alternating purine-pyrimidine (CG)n sequences\n- Recognized by Z-DNA binding proteins (ZBP1/DAI)\n- Triggers innate immune responses - important for viral detection\n- In phages: may be immune evasion targets\n\n**Other Non-B**: Cruciform (inverted repeats), H-DNA/triplex (mirror repeats), slipped structures (tandem repeats)\n\n### Mathematical Foundations\n\n**G4 Pattern**:\nClassic motif: G{3,}N{1,7}G{3,}N{1,7}G{3,}N{1,7}G{3,}\n- G{3,} = 3+ consecutive guanines (one G-run)\n- N{1,7} = 1-7 any nucleotides (loop)\n\n**G4Hunter Algorithm**:\nScore = sum(G_contribution - C_contribution) / window_size\n- G-runs contribute +1 to +4 based on length\n- C-runs contribute -1 to -4 (complementary strand G4)\n- Score \u003e 1.5: likely G4\n- Score \u003e 2.0: strong G4\n\n**Z-DNA Propensity**:\nDinucleotide Z-scores:\n  CG: +1.0 (highest Z-forming)\n  CA/TG: +0.5\n  GC: +0.4\n  AT/TA: -0.1 (disfavored)\n  AA/TT: -0.5 (strongly disfavored)\n\nP_Z = sum(Z_score per dinucleotide) / window_size\nThreshold: P_Z \u003e 0.5 suggests Z-DNA potential\n\n**G4 Free Energy**:\ndG = dG_stacking + dG_loop + dG_ion\nStacking ~-10 kcal/mol per tetrad\nK+ stabilization ~-2 kcal/mol per ion\n\n### Implementation\n\n**Core Interfaces**:\n```typescript\ninterface NonBStructure {\n  type: 'G4' | 'Z-DNA' | 'cruciform' | 'triplex';\n  start: number;\n  end: number;\n  strand: '+' | '-' | 'both';\n  score: number;\n  sequence: string;\n  loops?: number[];  // Loop lengths for G4\n}\n```\n\n**detectG4()**: Compute G4Hunter scores over sliding window, find regions above threshold, assign strand based on score sign\n\n**detectZDNA()**: Compute dinucleotide Z-scores, find regions with propensity \u003e 0.5, merge overlapping regions\n\n### TUI Visualization\n\n```\n╭───────────────────────────────────────────────────────────────────────────╮\n│  NON-B DNA STRUCTURE MAP: T7 Phage                                       │\n├───────────────────────────────────────────────────────────────────────────┤\n│  Genome Track (39,937 bp):                                                │\n│  ════════════════════════════════════════════════════════════════════════ │\n│                                                                           │\n│  G4 (+ strand):    ──────⬡──────────────────⬡─────────────⬡⬡──────────── │\n│                           ↑                  ↑             ↑↑              │\n│                        Promoter?           5' UTR       Regulatory?      │\n│                                                                           │\n│  G4 (- strand):    ────────────⬢────────────────────⬢────────────────── │\n│                               ↑                     ↑                     │\n│                            Potential             Strong                   │\n│                                                                           │\n│  Z-DNA:            ─────────────────────[ZZZ]─────────────[ZZZZ]──────── │\n│                                            ↑                ↑              │\n│                                         Moderate         Strong           │\n│                                                                           │\n│  Structure Details:                                                       │\n│  | Position  | Type   | Score | Sequence                                 │\n│  |  2,341    | G4(+)  |  2.3  | GGGTTGGGTTTGGGTTTGGG                     │\n│  |  8,492    | G4(+)  |  1.8  | GGGGACGGGACGGGACGGGG                     │\n│  | 15,221    | Z-DNA  |  0.7  | CGCGCGCGCGCG                             │\n│                                                                           │\n│  Summary: 6 G4 motifs (4 strong) | 2 Z-DNA regions                       │\n│  [G] Toggle G4  [Z] Toggle Z-DNA  [D] Details  [E] Export  [ESC] Exit    │\n╰───────────────────────────────────────────────────────────────────────────╯\n```\n\n### Assessment\n- Novelty: 8/10 - G4/Z-DNA prediction exists but rarely in genome browsers, TUI novel\n- Pedagogical: 8/10 - Teaches non-canonical DNA, regulatory biology, biophysics\n- Cool Factor: 7/10 - DNA forming weird structures beyond double helix is surprising\n\n### Files\n- packages/tui/src/components/NonBDNAView.tsx\n- packages/core/src/analysis/g4-detection.ts\n- packages/core/src/analysis/z-dna-detection.ts","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-06T23:11:46.636728-05:00","updated_at":"2025-12-08T00:56:11.39333-05:00","closed_at":"2025-12-08T00:56:11.39333-05:00","dependencies":[{"issue_id":"phage_explorer-4pf","depends_on_id":"phage_explorer-54g","type":"blocks","created_at":"2025-12-06T23:11:46.637573-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-4rr","title":"[WEB-P0] Add theme transition animations","description":"Implement smooth CSS transitions when switching between themes","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-07T16:58:32.71098-05:00","updated_at":"2025-12-07T17:28:00.475033-05:00","closed_at":"2025-12-07T17:28:00.475033-05:00","dependencies":[{"issue_id":"phage_explorer-4rr","depends_on_id":"phage_explorer-2q8","type":"blocks","created_at":"2025-12-07T17:04:39.213906-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-4ty","title":"Advanced: Phage Cocktail Compatibility Matrix","description":"## Phage Cocktail Compatibility Matrix (Advanced Feature)\n\n### Concept\n\nPhage therapy rarely uses single phages — **cocktails** of multiple phages are essential to:\n1. Cover diverse host strains\n2. Prevent resistance emergence\n3. Ensure redundant killing mechanisms\n\nBut not all phages work together. Some interfere through:\n- **Superinfection exclusion (Sie)**: One phage blocks another from entering\n- **Receptor competition**: Both need same receptor (one wins)\n- **Lysis timing conflicts**: Different burst schedules cause resource waste\n- **Immunity/Lysogeny**: Temperate phage provides immunity against related phages\n\nThis feature computes a **compatibility matrix** across all phages and solves the **optimal cocktail selection problem**: find the minimal set covering target host range with no compatibility conflicts.\n\n### Mathematical Foundations\n\n**Compatibility scoring:**\n```\nFor phages A and B, compatibility score C(A,B) ∈ [-1, +1]:\n\nPositive factors (synergy):\n  - Different receptors: +0.3\n  - Different lysis timing (early + late): +0.2\n  - Complementary host ranges: +0.3\n  - No sequence homology in immunity regions: +0.2\n\nNegative factors (interference):\n  - Same receptor: -0.4\n  - Superinfection exclusion genes detected: -0.5\n  - Similar lysis timing: -0.2\n  - Sie genes present in both: -0.3\n  - One temperate provides immunity to other: -0.8\n\nC(A,B) = Σ positive_factors - Σ negative_factors (clamped to [-1, +1])\n```\n\n**Host range coverage:**\n```\nLet H = {h₁, h₂, ..., hₘ} = target hosts\nLet P = {p₁, p₂, ..., pₙ} = candidate phages\nLet R[i,j] = 1 if phage pᵢ infects host hⱼ, else 0\n\nCoverage of subset S ⊆ P:\n  Cov(S) = { hⱼ : ∃ pᵢ ∈ S with R[i,j] = 1 }\n```\n\n**Optimal cocktail as Set Cover + Compatibility (NP-hard):**\n```\nMaximize: |Cov(S)| (hosts covered)\nSubject to:\n  |S| ≤ k (max cocktail size, typically 3-5)\n  ∀ pᵢ, pⱼ ∈ S: C(pᵢ, pⱼ) \u003e threshold (no conflicts)\n\nSolutions:\n  - Greedy: Add phage with best coverage/compatibility ratio\n  - ILP: Optimal but slower\n  - Genetic algorithm: For large phage libraries\n```\n\n**ILP formulation:**\n```\nVariables:\n  xᵢ ∈ {0,1} = 1 if phage i selected\n  yⱼ ∈ {0,1} = 1 if host j covered\n\nMaximize: Σⱼ yⱼ\nSubject to:\n  Σᵢ xᵢ ≤ k                           (cocktail size limit)\n  yⱼ ≤ Σᵢ R[i,j] × xᵢ                 (coverage constraint)\n  xᵢ + xⱼ ≤ 1 for incompatible pairs  (compatibility constraint)\n```\n\n### Implementation Approach\n\n**Feature extraction for compatibility:**\n```typescript\ninterface PhageInterferenceFeatures {\n  phageId: number;\n  receptorGenes: string[];          // e.g., ['OmpC', 'LamB']\n  sieGenes: string[];               // Superinfection exclusion\n  lysisTime: 'early' | 'middle' | 'late';\n  lifecycle: 'lytic' | 'temperate';\n  immunityRegion?: string;          // For temperate phages\n  hostRange: Set\u003cstring\u003e;           // Confirmed hosts\n}\n```\n\n**Pairwise compatibility calculation:**\n```typescript\ninterface CompatibilityScore {\n  phageA: number;\n  phageB: number;\n  score: number;  // -1 to +1\n  factors: { name: string; contribution: number; reason: string }[];\n  compatible: boolean;  // score \u003e threshold\n}\n\n// Compute receptor overlap, Sie presence, lysis timing,\n// immunity cross-reaction, host range complementarity\n```\n\n**Optimal cocktail solver (greedy):**\n```typescript\ninterface CocktailSolution {\n  phages: number[];\n  coverage: string[];  // Hosts covered\n  coveragePercent: number;\n  compatibilityScore: number;  // Average pairwise score\n  rationale: string[];\n}\n\n// While selected.length \u003c maxSize and covered.size \u003c targetHosts.length:\n//   Find best phage (compatible + max marginal coverage)\n//   Add to selection, update covered set\n```\n\n### TUI Visualization\n\n```\nPhage Cocktail Compatibility Matrix\n═══════════════════════════════════════════════════════════════════════════════\n\nCompatibility Heatmap (12 phages):\n          │ λ   T4  T7  P22 M13 Mu  Φ29 Φ6  T5  SPβ HK97 P1  │\n──────────┼─────────────────────────────────────────────────────┤\nLambda    │ ·   +0.6 +0.4 -0.3 +0.8 +0.2 +0.5 +0.7 +0.1 -0.7 +0.3 +0.4 │\nT4        │     ·    +0.5 +0.6 +0.7 +0.3 +0.4 +0.8 +0.6 +0.4 +0.5 +0.5 │\nT7        │          ·    +0.5 +0.6 +0.4 +0.8 +0.7 +0.3 +0.3 +0.4 +0.5 │\nP22       │               ·    +0.5 -0.2 +0.3 +0.6 +0.4 +0.5 -0.4 +0.3 │\n...       │                                                             │\n──────────┴─────────────────────────────────────────────────────────────┘\n\nLegend: ▓▓▓ +0.8 ▒▒▒ +0.4 ░░░ 0.0 ··· -0.4 ▫▫▫ -0.8\n\n⚠ Incompatible pairs:\n  Lambda × SPbeta (-0.7): Cross-immunity (temperate, 78% identity)\n  Lambda × P22 (-0.3): Same receptor (LamB)\n\n───────────────────────────────────────────────────────────────────────────────\n\nCOCKTAIL OPTIMIZER\n\nTarget hosts: E. coli K-12, B, C; Salmonella; P. aeruginosa (5 total)\n\n✓ RECOMMENDED COCKTAIL:\n┌─────────────────────────────────────────────────────────────────────────────┐\n│  1. T4          Covers: E. coli K-12, E. coli B        Lysis: late          │\n│  2. T7          Covers: E. coli K-12, E. coli C        Lysis: early         │\n│  3. Phi6        Covers: P. aeruginosa                  Lysis: middle        │\n│                                                                              │\n│  Coverage: 4/5 hosts (80%)  ████████░░                                      │\n│  Compatibility: +0.67       ██████▓▓░░                                      │\n│                                                                              │\n│  Missing: Salmonella (consider adding P22)                                  │\n│                                                                              │\n│  RATIONALE:                                                                  │\n│  • T4 + T7: Different lysis timing (early + late = sustained killing)       │\n│  • T4 + T7: No receptor overlap (OmpC vs various)                           │\n│  • Phi6: Unique host range (Pseudomonas-specific)                           │\n│  • All lytic: No immunity/lysogeny conflicts                                │\n└─────────────────────────────────────────────────────────────────────────────┘\n\n[+] Add constraint   [H] Change hosts   [S] Solve again   [E] Export   [ESC] Exit\n```\n\n### Why This Is Good\n\n1. **Clinical relevance**: Phage therapy design is done by expert intuition. This provides quantitative guidance.\n2. **Resistance prevention**: Cocktails are essential but bad combinations are worse than single phages.\n3. **Scalable optimization**: As phage libraries grow (thousands), manual selection becomes impossible.\n4. **Explainable recommendations**: Not just \"use these\" but \"because X covers Y, and Z adds receptor diversity.\"\n5. **Novel contribution**: No existing tool combines compatibility scoring with coverage optimization.\n\n### Innovation Assessment\n\n**Novelty: VERY HIGH** - First computational compatibility predictor for phages. First cocktail optimization solver. Novel integration of molecular interference mechanisms.\n\n**Pedagogical Value: 9/10** - Teaches Sie, receptor competition, immunity, combinatorial optimization (set cover, ILP, greedy), therapy design principles.\n\n**Wow Factor: 9/10** - Heatmap with green (compatible) and red (incompatible) is immediately intuitive. Watching algorithm select optimal cocktail with rationale feels like having an expert consultant.\n\n### Data Requirements\n- Phage interference features (receptors, Sie genes, lysis timing)\n- Host range data (which phages infect which hosts)\n- Immunity region sequences (for temperate phages)","status":"open","priority":3,"issue_type":"feature","created_at":"2025-12-06T23:20:17.845538-05:00","updated_at":"2025-12-06T23:46:06.517103-05:00","dependencies":[{"issue_id":"phage_explorer-4ty","depends_on_id":"phage_explorer-54g","type":"blocks","created_at":"2025-12-06T23:20:17.848483-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-4wz","title":"Layer 2: Structural Variant Detector (Deletions, Inversions, Translocations)","description":"Layer 2 Analysis: Detect structural variants between phages - deletions, inversions, duplications, translocations. Alignment block analysis. Essential for understanding phage mosaicism and recombination.","status":"in_progress","priority":2,"issue_type":"feature","created_at":"2025-12-06T23:13:38.363422-05:00","updated_at":"2025-12-08T13:26:16.377525-05:00","dependencies":[{"issue_id":"phage_explorer-4wz","depends_on_id":"phage_explorer-54g","type":"blocks","created_at":"2025-12-06T23:13:38.365486-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-4wz","depends_on_id":"phage_explorer-2g5","type":"blocks","created_at":"2025-12-06T23:39:31.501831-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-4yk","title":"[WEB-P2] Integrate with React via ref and effect","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-07T16:58:05.315145-05:00","updated_at":"2025-12-07T18:02:32.647747-05:00","closed_at":"2025-12-07T18:02:32.647747-05:00","dependencies":[{"issue_id":"phage_explorer-4yk","depends_on_id":"phage_explorer-ltg","type":"blocks","created_at":"2025-12-07T17:05:03.262379-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-4yk","depends_on_id":"phage_explorer-ljv","type":"blocks","created_at":"2025-12-07T17:05:30.197595-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-5193","title":"[WEB-P5] Port selection pressure overlay [V key]","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-07T17:01:39.902716-05:00","updated_at":"2025-12-07T18:47:35.88-05:00","closed_at":"2025-12-07T18:47:35.88-05:00","dependencies":[{"issue_id":"phage_explorer-5193","depends_on_id":"phage_explorer-971","type":"blocks","created_at":"2025-12-07T17:07:33.513193-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-53f","title":"[WEB-P2] Glyph Atlas: Pre-Rendered Character Sprites","description":"Create GlyphAtlas class that pre-renders all nucleotides (ACGTN) and amino acids. Implement fast drawGlyph() from atlas texture.","status":"closed","priority":0,"issue_type":"feature","created_at":"2025-12-07T16:57:46.842464-05:00","updated_at":"2025-12-07T18:01:30.759222-05:00","closed_at":"2025-12-07T18:01:30.759222-05:00","dependencies":[{"issue_id":"phage_explorer-53f","depends_on_id":"phage_explorer-10p","type":"blocks","created_at":"2025-12-07T17:04:53.732559-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-54g","title":"Foundation: Menu Infrastructure (Analysis Menu \u0026 Simulation Hub)","description":"Create reusable ModalMenu component (Ink) for Analysis Menu (A key) and Simulation Hub (Shift+S). Implement MenuItem interface with icons, shortcuts, actions. Categorized navigation with fuzzy search. ESC always exits.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-06T23:08:58.84906-05:00","updated_at":"2025-12-08T00:21:49.751691-05:00","closed_at":"2025-12-08T00:21:49.751691-05:00"}
{"id":"phage_explorer-592y","title":"LysogenyCircuitVisualizer - CI/Cro decision circuit","description":"","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-09T00:38:13.568784-05:00","updated_at":"2025-12-09T00:38:13.568784-05:00","dependencies":[{"issue_id":"phage_explorer-592y","depends_on_id":"phage_explorer-m49v","type":"blocks","created_at":"2025-12-09T00:38:41.829966-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-5a2","title":"[WEB-P6] Performance Audit: Lighthouse \u0026 Bundle Optimization","description":"Achieve Lighthouse 90+ in all categories. Optimize bundle size, add code splitting, configure preloading. Setup Lighthouse CI.","status":"closed","priority":0,"issue_type":"feature","created_at":"2025-12-07T17:01:21.503668-05:00","updated_at":"2025-12-08T00:23:52.421517-05:00","closed_at":"2025-12-08T00:23:52.421517-05:00","dependencies":[{"issue_id":"phage_explorer-5a2","depends_on_id":"phage_explorer-zsi","type":"blocks","created_at":"2025-12-07T17:07:18.798999-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-5a7j","title":"Phase 4: Comparison System","description":"## Overview\n\nImplement the genome comparison system that allows side-by-side analysis of two phages with multi-metric evaluation.\n\n## Why Comparison Matters\n\nComparative genomics is fundamental to understanding:\n- **Evolutionary relationships** - How similar are these phages?\n- **Functional annotation** - What genes do they share?\n- **Host range prediction** - Do they target similar hosts?\n- **Horizontal gene transfer** - Have they exchanged genetic material?\n\nThe @phage-explorer/comparison package already provides the analysis engine; this phase builds the UI.\n\n## Technical Components\n\n### 1. ComparisonOverlay\n\n**What**: Full-featured comparison interface with phage selection and tabbed results\n\n**UI Structure**:\n```\n┌─────────────────────────────────────────┐\n│ Genome Comparison                   [X] │\n├─────────────────────────────────────────┤\n│ Phage A: [▼ Select phage...]           │\n│ Phage B: [▼ Select phage...]           │\n│                                         │\n│ [Compare] [Clear]                       │\n├─────────────────────────────────────────┤\n│ [Summary] [K-mer] [Info] [Corr] [Bio]  │\n├─────────────────────────────────────────┤\n│                                         │\n│    Tab content with visualizations      │\n│                                         │\n└─────────────────────────────────────────┘\n```\n\n**Tabs**:\n1. **Summary** - Overall similarity metrics\n2. **K-mer** - K-mer frequency comparison\n3. **Information** - Information-theoretic metrics\n4. **Correlation** - Sequence correlation analysis\n5. **Biological** - Gene-level comparison\n6. **Genes** - Shared/unique gene lists\n\n### 2. Diff Mode in SequenceGrid\n\n**What**: Visual highlighting of differences when comparing two sequences\n\n**Features**:\n- Insertions highlighted in green\n- Deletions highlighted in red\n- Mismatches highlighted in yellow\n- Statistics panel showing diff summary\n- Navigation between diff regions\n\n### 3. State Integration\n\nThe store already supports comparison:\n- `comparisonPhageAIndex: number | null`\n- `comparisonPhageBIndex: number | null`\n- `comparisonResult: ComparisonResult | null`\n- `comparisonLoading: boolean`\n- `comparisonTab: string`\n\nNeed to wire these to UI components.\n\n## @phage-explorer/comparison Package\n\nAlready provides:\n- `compareTwoPhages(seqA, seqB)` - Full comparison\n- K-mer spectrum analysis\n- Information-theoretic metrics (JSD, normalized compression)\n- Correlation matrices\n- Gene homology detection (via Jaccard similarity)\n\n## Dependencies\n\n- **Depends on**: Phase 1 (database), Phase 2 (PhageList for selection, SequenceGrid for diff view)\n- **Blocks**: None\n\n## Success Criteria\n\n- [ ] Can select two phages for comparison\n- [ ] Comparison runs in worker (non-blocking)\n- [ ] All 6 result tabs render correctly\n- [ ] Diff mode highlights sequence differences\n- [ ] Can navigate between diff regions\n- [ ] Comparison results are cached\n\n## Files to Create/Modify\n\n```\npackages/web/src/\n├── components/overlays/\n│   └── ComparisonOverlay.tsx    # NEW\n├── components/\n│   └── DiffHighlighter.tsx      # NEW (for SequenceGrid)\n```\n\n## Estimated Complexity: High\n\nThe comparison engine exists; the challenge is building intuitive UI for complex multi-dimensional results.","status":"in_progress","priority":2,"issue_type":"epic","created_at":"2025-12-08T12:54:59.129878-05:00","updated_at":"2025-12-08T22:58:32.441129-05:00","dependencies":[{"issue_id":"phage_explorer-5a7j","depends_on_id":"phage_explorer-qiaq","type":"blocks","created_at":"2025-12-08T12:55:22.778487-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-5ab","title":"Layer 1: Repeat/Palindrome Markers Overlay [R key]","description":"Layer 1 overlay (R key): Display repeat and palindrome markers - inverted repeats (hairpins), direct repeats (duplications). Self-comparison via sliding window. Identifies terminators, recombination sites. Priority: P2.","notes":"Repeat/palindrome overlay (R): naive palindrome scan, density sparkline, overlay stack, Esc/R close","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-06T23:10:41.455889-05:00","updated_at":"2025-12-07T13:00:55.446242-05:00","closed_at":"2025-12-07T13:00:55.446247-05:00","dependencies":[{"issue_id":"phage_explorer-5ab","depends_on_id":"phage_explorer-2g5","type":"blocks","created_at":"2025-12-06T23:10:41.456574-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-5b5","title":"Foundation: Advanced UI State Management","description":"## Advanced UI State Management\n\nZustand state structure supporting overlay/modal/simulation/command systems.\n\n### AdvancedUIState Interface\n```typescript\ninterface AdvancedUIState {\n  // Overlay system\n  activeOverlays: Set\u003cOverlayId\u003e;\n  overlayConfigs: Map\u003cOverlayId, OverlayConfig\u003e;\n\n  // Modal system\n  activeModal: ModalId | null;\n  modalHistory: ModalId[];  // For back navigation\n\n  // Simulation state\n  activeSimulation: SimulationId | null;\n  simulationState: SimState | null;\n  simulationSpeed: number;\n  simulationPaused: boolean;\n\n  // Command palette\n  commandPaletteOpen: boolean;\n  commandSearch: string;\n  commandResults: CommandMatch[];\n  selectedCommandIndex: number;\n\n  // Computed data cache\n  analysisCache: Map\u003cstring, AnalysisResult\u003e;\n}\n```\n\n### Key Principle\nPrecompute on phage selection, not on feature activation. When user selects a phage, background-compute: GC skew, complexity, bendability, promoter predictions. Makes overlays feel instant when toggled.\n\nDepends on: All 4 foundation systems (Overlay, Menu, Command Palette, Simulation)","notes":"Advanced UI state implemented: overlay stack, menu/simulation hubs, command palette state, precompute overlays on phage load, comparison + simulation state tracked in store","status":"closed","priority":0,"issue_type":"feature","created_at":"2025-12-06T23:35:36.359231-05:00","updated_at":"2025-12-07T13:23:18.530353-05:00","closed_at":"2025-12-07T13:23:18.530363-05:00","dependencies":[{"issue_id":"phage_explorer-5b5","depends_on_id":"phage_explorer-2g5","type":"blocks","created_at":"2025-12-06T23:35:36.360877-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-5b5","depends_on_id":"phage_explorer-54g","type":"blocks","created_at":"2025-12-06T23:35:36.361949-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-5b5","depends_on_id":"phage_explorer-8lh","type":"blocks","created_at":"2025-12-06T23:35:36.362786-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-5b5","depends_on_id":"phage_explorer-ojb","type":"blocks","created_at":"2025-12-06T23:35:36.363707-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-5c4","title":"[WEB-P0] Layout Shell: Header, Main, Footer Components","description":"Create basic app layout structure with Header, Main content area, and Footer. Port layout patterns from TUI. Add responsive behavior.","status":"closed","priority":0,"issue_type":"feature","created_at":"2025-12-07T16:57:53.616898-05:00","updated_at":"2025-12-07T17:33:41.154476-05:00","closed_at":"2025-12-07T17:33:41.154476-05:00","dependencies":[{"issue_id":"phage_explorer-5c4","depends_on_id":"phage_explorer-87z","type":"blocks","created_at":"2025-12-07T17:04:25.628939-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-5c4","depends_on_id":"phage_explorer-2q8","type":"blocks","created_at":"2025-12-07T17:04:56.193895-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-5c4","depends_on_id":"phage_explorer-aq6","type":"blocks","created_at":"2025-12-07T17:04:57.253863-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-5fz","title":"[WEB-P1] Create build script scripts/build-web-db.ts","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-07T16:58:05.736407-05:00","updated_at":"2025-12-07T17:52:23.07774-05:00","closed_at":"2025-12-07T17:52:23.07774-05:00","dependencies":[{"issue_id":"phage_explorer-5fz","depends_on_id":"phage_explorer-sad","type":"blocks","created_at":"2025-12-07T17:04:41.599271-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-5ihw","title":"[WEB-P6] Create keyboard shortcut reference page","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-07T17:02:37.086936-05:00","updated_at":"2025-12-07T17:17:08.044485-05:00","closed_at":"2025-12-07T17:17:08.044485-05:00","dependencies":[{"issue_id":"phage_explorer-5ihw","depends_on_id":"phage_explorer-gwhv","type":"blocks","created_at":"2025-12-07T17:09:49.226616-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-5jr","title":"Advanced: HGT Provenance Tracer","description":"Infer donor clades for genomic islands via GC/codon atypicality + k-mer taxonomic assignment (Mash/MinHash). Generate passport stamps per island with donor lineage, confidence, hallmark genes. Genome bar with colored islands; stamp shows donor pie and GC/codon plots. Novelty: High, Pedagogical: High.","notes":"## HORIZONTAL GENE TRANSFER PROVENANCE TRACER\n\n**Full TypeScript Implementation from Roadmap**\n\n### Concept\nCreate forensic 'passport stamps' for genomic islands identifying donor clades, transfer timing, and functional annotation.\n\n### Mathematical Foundations\n\n**Island Detection via Z-Score:**\n```\nGC_z(w) = (GC_w - μ_genome) / σ_genome\n\nFlag window if |GC_z| \u003e 2.0\n```\n\n**Dinucleotide Relative Abundance:**\n```\nρ(XY) = f(XY) / (f(X) × f(Y))\nZ_dinuc = Σ|ρ_island(XY) - ρ_genome(XY)| / 16\n```\n\n**MinHash Jaccard Similarity:**\n```\nJ(A, B) ≈ |MinHash(A) ∩ MinHash(B)| / |MinHash(A) ∪ MinHash(B)|\nContainment: C(A, B) = |MinHash(A) ∩ MinHash(B)| / |MinHash(A)|\n```\n\n**Amelioration Time Estimate:**\n```\nt_amelioration ∝ -ln(|CAI_island - CAI_genome|) / μ_mutation\n```\n\n### Complete TypeScript Implementation\n\n- `GenomicIsland` interface (start, end, GC, z-scores, genes, hallmarks)\n- `DonorCandidate` with taxon, similarity, confidence, evidence type\n- `PassportStamp` with island, donor, amelioration, mechanism\n- `HGTAnalysis` full analysis result\n- `computeGCContent()`, `computeDinucleotideFrequencies()`\n- `computeDinucleotideOddsRatio()`, `dinucleotideZScore()`\n- `detectIslands()` sliding window with merge\n- `createIsland()` with hallmark gene detection\n- `murmurhash3()` hash function\n- `computeMinHash()` k-mer sketching\n- `jaccardFromMinHash()` similarity calculation\n- `inferDonors()` reference database query\n- `estimateAmelioration()` recent/intermediate/ancient\n- `inferTransferMechanism()` lysogeny/transduction/conjugation\n- `analyzeHGTProvenance()` main pipeline\n- `renderIslandGenomeBar()` ASCII visualization\n- `renderPassportStamp()` detailed stamp view\n\n### TUI Features\n- Genome bar with colored islands (by amelioration: recent/intermediate/ancient)\n- 'Passport stamp' popup per island showing:\n  - Location and GC deviation\n  - Top donor with similarity\n  - Donor distribution bars\n  - GC/codon profile sparkline\n  - Hallmark genes\n  - Transfer mechanism\n  - Amelioration estimate\n- Summary: total islands, recent/ancient counts, dominant donors, foreign DNA %\n- [←/→] Navigate, [D] Donor details, [P] Phylo tree\n\n### Why It's Good\n- Forensic tracing of foreign DNA origins\n- Transfer timing estimation via amelioration\n- Connects to host range and safety assessment\n- 'Passport stamp' metaphor makes analysis accessible\n\nNovelty: 9/10, Pedagogical: 9/10, Wow Factor: 8/10","status":"in_progress","priority":3,"issue_type":"feature","created_at":"2025-12-07T00:17:42.024781-05:00","updated_at":"2025-12-07T16:53:07.004017-05:00","dependencies":[{"issue_id":"phage_explorer-5jr","depends_on_id":"phage_explorer-ojb","type":"blocks","created_at":"2025-12-07T00:20:52.376411-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-5l69","title":"Task: Create glossary terms database","description":"Create packages/web/src/education/glossary/terms.ts with 100+ biology terms. Categories: DNA Basics (nucleotide, base pair, strand, etc.), Gene Structure (ORF, promoter, RBS, codon), Translation (ribosome, tRNA, amino acid properties), Phage Biology (capsid, tail, lysogeny, lytic), Evolution (HGT, synteny, homolog), Analysis Methods (GC content, entropy, k-mer). Each term: id, name, shortDef (1 sentence), longDef (paragraph), category, relatedTerms[].","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-09T11:43:57.516946-05:00","updated_at":"2025-12-09T11:43:57.516946-05:00","dependencies":[{"issue_id":"phage_explorer-5l69","depends_on_id":"phage_explorer-0weo","type":"blocks","created_at":"2025-12-09T11:43:57.519954-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-5l69","depends_on_id":"phage_explorer-3zpa","type":"blocks","created_at":"2025-12-09T11:43:57.525027-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-5ldd","title":"Task: Register Ctrl+B hotkey for beginner mode toggle","description":"Use existing useHotkey system to register Ctrl+B as global toggle for Beginner Mode. Should show brief toast notification when toggled.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-09T11:43:07.966792-05:00","updated_at":"2025-12-10T00:58:05.57489028-06:00","closed_at":"2025-12-10T00:58:05.57489028-06:00","dependencies":[{"issue_id":"phage_explorer-5ldd","depends_on_id":"phage_explorer-chdb","type":"blocks","created_at":"2025-12-09T11:43:07.967551-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-5nwt","title":"Create BeginnerModeIndicator component","description":"Subtle status bar indicator showing Beginner Mode is active. Click to access Learn menu or disable. Non-intrusive styling. Shows in bottom status bar area. Includes tooltip with quick actions.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-09T11:47:38.763483-05:00","updated_at":"2025-12-09T11:47:38.763483-05:00","dependencies":[{"issue_id":"phage_explorer-5nwt","depends_on_id":"phage_explorer-owsv","type":"blocks","created_at":"2025-12-09T11:47:56.533307-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-5om","title":"[WEB-P2] Create scanline fragment shader","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-07T16:58:58.697489-05:00","updated_at":"2025-12-07T22:20:16.646921-05:00","closed_at":"2025-12-07T22:20:16.646921-05:00","dependencies":[{"issue_id":"phage_explorer-5om","depends_on_id":"phage_explorer-wl9","type":"blocks","created_at":"2025-12-07T17:05:21.9019-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-5ozb","title":"Pillar 1: Mobile Sequence Grid Excellence","description":"# Pillar 1: Mobile Sequence Grid Excellence\n\n## Problem Statement\n\nThe current mobile sequence grid has critical UX issues:\n1. **Cell sizes too small**: At default zoom, cells are 3-5px wide - too small for readable text but too large for dense pattern visualization\n2. **No visible letters**: GlyphAtlas skips text rendering when cellWidth ≤5px, making amino acid mode useless\n3. **Limited zoom range**: Need ability to zoom from genome-overview (1px) to single-base (20px+) \n4. **Poor touch scrolling**: Momentum scrolling exists but could be smoother\n5. **Orientation blind**: Portrait vs landscape should dramatically change the view\n\n## Solution Architecture\n\n### Smart Zoom System\nImplement a zoom system that understands what users need at each level:\n\n| Zoom Level | Cell Size | Shows Letters | Use Case |\n|------------|-----------|---------------|----------|\n| Genome (0.1x) | 1-2px | No | Pattern/GC visualization |\n| Region (0.3x) | 3-5px | No | Navigate to region |\n| Codon (1.0x) | 8-12px | Yes (tiny) | Read codons, see context |\n| Base (2.0x) | 16-24px | Yes (readable) | Detailed examination |\n| Ultra (4.0x) | 32-48px | Yes (large) | Touch selection |\n\n### Dual-Row DNA+AA View\nShow translation inline with DNA sequence:\n```\nDNA: ATG GAC TTA GCC...\nAA:   M   D   L   A ...\n```\n\n### Orientation-Aware Layout\n- **Portrait**: Tall, narrow grid - good for scrolling through genome\n- **Landscape**: Wide grid - shows more context per row\n\n## Implementation Tasks\n\n1. Fix GlyphAtlas to render micro-text at small sizes (4-8px)\n2. Implement smart zoom presets with semantic labels\n3. Add dual-row DNA+AA rendering mode\n4. Implement orientation change detection and grid reflow\n5. Improve touch scroll momentum and inertia\n6. Add tap-to-select position\n7. Add long-press context menu\n\n## Files to Modify\n\n- `/packages/web/src/rendering/GlyphAtlas.ts` - Micro-text rendering\n- `/packages/web/src/rendering/CanvasSequenceGridRenderer.ts` - Dual-row mode\n- `/packages/web/src/components/SequenceView.tsx` - Orientation hooks\n- `/packages/web/src/hooks/useSequenceGrid.ts` - Touch improvements\n\n## Success Criteria\n\n- [ ] Letters visible at 6px cell width (tiny but readable)\n- [ ] Smooth zoom from 0.1x to 4.0x\n- [ ] DNA+AA dual row visible in codon+ zoom levels\n- [ ] Landscape shows 50%+ more sequence per row\n- [ ] 60fps scroll/zoom on iPhone 12+\n- [ ] Tap to jump to position works reliably\n\n## Dependencies\n\n- Existing CanvasSequenceGridRenderer (foundation exists)\n- GlyphAtlas (needs extension for micro-text)\n- VirtualScroller (exists, needs tuning)\n\n## Considerations\n\n- **Performance**: Pre-render glyph atlases for multiple sizes\n- **Memory**: Limit cached glyph sizes to prevent OOM on mobile\n- **Accessibility**: Ensure zoom levels are announced to screen readers\n- **Battery**: Reduce redraws during idle periods\n","status":"in_progress","priority":1,"issue_type":"feature","created_at":"2025-12-09T00:33:56.465769-05:00","updated_at":"2025-12-09T00:36:09.926514-05:00","dependencies":[{"issue_id":"phage_explorer-5ozb","depends_on_id":"phage_explorer-xivy","type":"blocks","created_at":"2025-12-09T00:37:09.177477-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-5yc6","title":"[WEB-P4] Create LysogenyCircuitView component","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-07T17:01:59.005662-05:00","updated_at":"2025-12-07T18:43:06.965361-05:00","closed_at":"2025-12-07T18:43:06.965361-05:00","dependencies":[{"issue_id":"phage_explorer-5yc6","depends_on_id":"phage_explorer-glkb","type":"blocks","created_at":"2025-12-07T17:07:52.762915-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-5yc6","depends_on_id":"phage_explorer-t8sl","type":"blocks","created_at":"2025-12-07T17:09:08.694811-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-5yu6","title":"Micro-text GlyphAtlas for 4-8px cells","description":"# Task: Micro-text GlyphAtlas for 4-8px cells\n\n## Problem\nThe current GlyphAtlas skips text rendering when cellWidth ≤5px because standard fonts are illegible at that size. This makes the sequence grid useless for reading on mobile at moderate zoom levels.\n\n## Solution\nCreate optimized micro-text rendering for 4-8px cell widths using:\n\n1. **Pixel-perfect bitmap fonts**: Pre-render 4x6 and 5x7 pixel bitmap fonts for nucleotides (A,T,G,C,N) and amino acids (20 letters)\n\n2. **Subpixel rendering**: Use LCD subpixel rendering on capable displays for effective 3x resolution horizontally\n\n3. **Contrast optimization**: Use maximum contrast colors (pure white on colored background) for micro-text\n\n4. **Glyph caching**: Pre-render all glyphs to OffscreenCanvas atlas at multiple sizes\n\n## Technical Approach\n\n```typescript\n// In GlyphAtlas.ts\ninterface MicroGlyphConfig {\n  charWidth: 4 | 5 | 6;  // pixels\n  charHeight: 6 | 7 | 8; // pixels\n  subpixelRendering: boolean;\n}\n\n// Bitmap font data for 4x6 nucleotides\nconst MICRO_FONT_4x6: Record\u003cNucleotide, number[]\u003e = {\n  A: [0b0110, 0b1001, 0b1111, 0b1001, 0b1001, 0b0000],\n  T: [0b1111, 0b0100, 0b0100, 0b0100, 0b0100, 0b0000],\n  G: [0b0111, 0b1000, 0b1011, 0b1001, 0b0111, 0b0000],\n  C: [0b0111, 0b1000, 0b1000, 0b1000, 0b0111, 0b0000],\n  N: [0b1001, 0b1101, 0b1011, 0b1001, 0b1001, 0b0000],\n};\n```\n\n## Files to Modify\n\n- `/packages/web/src/rendering/GlyphAtlas.ts`\n  - Add `renderMicroGlyph(char, cellWidth, cellHeight)` method\n  - Add bitmap font data constants\n  - Add subpixel rendering path\n  - Update `drawNucleotide` and `drawAminoAcid` to use micro glyphs when appropriate\n\n## Testing\n\n1. Visual test at 4px, 5px, 6px, 7px, 8px cell widths\n2. Verify readability on Retina and non-Retina displays\n3. Performance test: render 10,000 cells at 60fps\n4. Color contrast verification for accessibility\n\n## Considerations\n\n- **Memory**: Bitmap fonts are tiny (\u003c1KB per size)\n- **Fallback**: If micro-text not available, show colored blocks (current behavior)\n- **DPI scaling**: Multiply dimensions by devicePixelRatio\n","status":"in_progress","priority":1,"issue_type":"task","created_at":"2025-12-09T00:35:11.947731-05:00","updated_at":"2025-12-09T00:43:35.291065-05:00","dependencies":[{"issue_id":"phage_explorer-5yu6","depends_on_id":"phage_explorer-5ozb","type":"blocks","created_at":"2025-12-09T00:40:29.839747-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-60w","title":"[WEB-P2] Create GlyphAtlas class with atlas canvas","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-07T16:58:12.866996-05:00","updated_at":"2025-12-07T18:01:23.061191-05:00","closed_at":"2025-12-07T18:01:23.061191-05:00","dependencies":[{"issue_id":"phage_explorer-60w","depends_on_id":"phage_explorer-53f","type":"blocks","created_at":"2025-12-07T17:05:04.008966-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-62oj","title":"Create Gene Explorer Tour definition","description":"Tour focused on gene-level features: selecting genes, reading ORF details, understanding start/stop codons, viewing protein properties, exploring codon usage. Approximately 6-8 steps. Stored in tours/gene-explorer.json.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-09T11:47:11.385695-05:00","updated_at":"2025-12-09T11:47:11.385695-05:00","dependencies":[{"issue_id":"phage_explorer-62oj","depends_on_id":"phage_explorer-bbf4","type":"blocks","created_at":"2025-12-09T11:47:19.397126-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-66a","title":"Layer 2: Comparative Synteny Browser","description":"Layer 2 Analysis: Multi-track visualization of gene order conservation. Ortholog clustering + synteny block detection. Reveals modular boundaries and evolutionary relationships beyond sequence similarity.","status":"in_progress","priority":2,"issue_type":"feature","created_at":"2025-12-06T23:13:38.661192-05:00","updated_at":"2025-12-08T13:29:37.763458-05:00","dependencies":[{"issue_id":"phage_explorer-66a","depends_on_id":"phage_explorer-54g","type":"blocks","created_at":"2025-12-06T23:13:38.661967-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-67t","title":"[WEB-P0] Create ThemePalette TypeScript interface","description":"Define TypeScript interfaces for theme structure matching TUI theme system","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-07T16:58:20.410125-05:00","updated_at":"2025-12-07T17:28:00.149693-05:00","closed_at":"2025-12-07T17:28:00.149693-05:00","dependencies":[{"issue_id":"phage_explorer-67t","depends_on_id":"phage_explorer-2q8","type":"blocks","created_at":"2025-12-07T17:04:38.917073-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-68b","title":"[WEB-P2] Create phosphor bloom fragment shader","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-07T16:58:57.703965-05:00","updated_at":"2025-12-07T22:20:22.977079-05:00","closed_at":"2025-12-07T22:20:22.977079-05:00","dependencies":[{"issue_id":"phage_explorer-68b","depends_on_id":"phage_explorer-wl9","type":"blocks","created_at":"2025-12-07T17:05:20.936291-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-6np","title":"[WEB-P2] Create VirtualScroller class","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-07T16:58:23.050731-05:00","updated_at":"2025-12-07T18:01:31.806977-05:00","closed_at":"2025-12-07T18:01:31.806977-05:00","dependencies":[{"issue_id":"phage_explorer-6np","depends_on_id":"phage_explorer-11b","type":"blocks","created_at":"2025-12-07T17:05:07.825672-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-6sn","title":"Advanced: Recombination Hotspot Radar","description":"Advanced: Detect mosaic ancestry along the genome using change-point detection on k-mer/embedding profiles and local phylogenies. Reveals chimeric origins and recent recombination donors.\n\n**Build Plan:**\n- Segment with ruptures-like change-point (Rust + ndarray) on embedding/k-mer vectors\n- For each segment, compute nearest clade via sketch (Mash/MinHash) and mini-tree\n- Cache segment→clade calls in SQLite\n- WASM for change-point + sketching; small phylo in TS for speed\n\n**Recombination Detection Methods:**\n- K-mer profile discontinuities\n- Embedding vector jumps\n- Local phylogeny incongruence\n- Change-point significance testing\n\n**TUI Visualization:**\n- Genome heat strip with colors per donor clade\n- Cursor shows donor list and support\n- Press 'r' to highlight high-confidence recombination breakpoints\n- Timeline view showing recombination history\n\nNovelty: 9/10, Pedagogical: 9/10, Cool Factor: 9/10.","notes":"## RECOMBINATION \u0026 MOSAICISM RADAR (SLIDING-WINDOW PHYLO)\n\n### How to Build\n- **Windows**: Slice genome; compute k-mer Jaccard/Mash distances to a panel; optional fast NJ per window (Rust+WASM)\n- **Breakpoint calling**: Change-point detection (PELT/Bayesian) on similarity traces; store segments with top donors\n- **Donor hints**: Track which reference best matches each window; summarize donor composition\n\n### TUI Visualization\nCircular radar with colored arcs; move cursor to see donor and similarity; press 'b' to jump to breakpoints; sparkline of similarity underneath.\n\n### Files\n- packages/core/src/analysis/recombination-radar.ts\n- packages/tui/src/components/MosaicRadarView.tsx","status":"open","priority":3,"issue_type":"feature","created_at":"2025-12-06T23:19:11.092247-05:00","updated_at":"2025-12-07T13:06:34.317841-05:00","dependencies":[{"issue_id":"phage_explorer-6sn","depends_on_id":"phage_explorer-54g","type":"blocks","created_at":"2025-12-06T23:19:11.093779-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-6tr2","title":"[WEB-P4] Create TimeControls reusable component","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-07T17:02:27.832566-05:00","updated_at":"2025-12-07T18:42:47.679538-05:00","closed_at":"2025-12-07T18:42:47.679538-05:00","dependencies":[{"issue_id":"phage_explorer-6tr2","depends_on_id":"phage_explorer-mila","type":"blocks","created_at":"2025-12-07T17:08:24.386799-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-6ubw","title":"[WEB-P5] Create WebGPU feature detection","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-07T17:01:49.367936-05:00","updated_at":"2025-12-08T00:44:16.828115-05:00","closed_at":"2025-12-08T00:44:16.828115-05:00","dependencies":[{"issue_id":"phage_explorer-6ubw","depends_on_id":"phage_explorer-9vj","type":"blocks","created_at":"2025-12-07T17:07:42.947405-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-6vqr","title":"[WEB-P4] Evolution Replay: Temporal Sequence Changes","description":"Replay evolutionary changes over time. Ancestral reconstruction, mutation timeline, phylogenetic context visualization.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-07T17:01:28.325369-05:00","updated_at":"2025-12-07T18:43:10.628771-05:00","closed_at":"2025-12-07T18:43:10.628771-05:00","dependencies":[{"issue_id":"phage_explorer-6vqr","depends_on_id":"phage_explorer-sft","type":"blocks","created_at":"2025-12-07T17:07:12.862362-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-6vqr","depends_on_id":"phage_explorer-ru4","type":"blocks","created_at":"2025-12-07T17:08:39.898943-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-6vqr","depends_on_id":"phage_explorer-mila","type":"blocks","created_at":"2025-12-07T17:08:48.750114-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-703y","title":"[WEB-P5] Port K-mer anomaly overlay [J key]","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-07T17:01:37.61181-05:00","updated_at":"2025-12-07T18:47:35.877545-05:00","closed_at":"2025-12-07T18:47:35.877545-05:00","dependencies":[{"issue_id":"phage_explorer-703y","depends_on_id":"phage_explorer-971","type":"blocks","created_at":"2025-12-07T17:07:31.2199-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-733k","title":"[WEB-P6] Create ErrorBoundary component","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-07T17:02:26.03626-05:00","updated_at":"2025-12-07T21:10:42.13037-05:00","closed_at":"2025-12-07T21:10:42.13037-05:00","dependencies":[{"issue_id":"phage_explorer-733k","depends_on_id":"phage_explorer-ojh6","type":"blocks","created_at":"2025-12-07T17:09:38.49504-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-74t","title":"[WEB-P2] Build shader composition pipeline","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-07T16:59:00.950485-05:00","updated_at":"2025-12-08T00:06:27.103353-05:00","closed_at":"2025-12-08T00:06:27.103353-05:00","dependencies":[{"issue_id":"phage_explorer-74t","depends_on_id":"phage_explorer-wl9","type":"blocks","created_at":"2025-12-07T17:05:23.783645-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-74t","depends_on_id":"phage_explorer-68b","type":"blocks","created_at":"2025-12-07T17:05:34.775254-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-74t","depends_on_id":"phage_explorer-5om","type":"blocks","created_at":"2025-12-07T17:05:36.087509-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-74t","depends_on_id":"phage_explorer-ysl","type":"blocks","created_at":"2025-12-07T17:05:37.093978-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-76b","title":"[WEB-P2] Port Sparkline to canvas renderer","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-07T16:58:44.870949-05:00","updated_at":"2025-12-07T20:59:21.40607-05:00","closed_at":"2025-12-07T20:59:21.40607-05:00","dependencies":[{"issue_id":"phage_explorer-76b","depends_on_id":"phage_explorer-w8e","type":"blocks","created_at":"2025-12-07T17:05:17.404915-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-76r9","title":"[WEB-P3] Port repeat/palindrome overlay [R key]","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-07T17:02:13.313477-05:00","updated_at":"2025-12-07T18:31:17.419227-05:00","closed_at":"2025-12-07T18:31:17.419227-05:00","dependencies":[{"issue_id":"phage_explorer-76r9","depends_on_id":"phage_explorer-7wzv","type":"blocks","created_at":"2025-12-07T17:07:35.31237-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-7am","title":"Advanced: Burst Kinetics \u0026 Latency Inference","description":"Infer adsorption rate, latent period, and burst size from OD/plaque time-series using SIR-like infection ODE/SDE. MAP/bootstrapped fits with credible intervals. Map parameters back to holin/endolysin/antiholin loci. Live fit plot, toggle deterministic/stochastic, residuals pane. Bridges wet-lab curves to genome-linked parameters. Novelty: High, Pedagogical: High.","notes":"## BURST KINETICS \u0026 LATENCY INFERENCE FROM GROWTH CURVES\n\n**Full Implementation from Roadmap**\n\n### Mathematical Foundations\n\n**Classic Infection ODE Model:**\n```\ndB/dt = μB - k·B·P            # Bacteria: growth - infection\ndI/dt = k·B·P - I/L           # Infected: new infections - lysis\ndP/dt = (b/L)·I - k·B·P - δP  # Phages: burst - adsorption - decay\n```\n\n**Age-Structured Infected Population:**\n```\n∂i(t,a)/∂t + ∂i(t,a)/∂a = -γ(a)·i(t,a)\nBoundary: i(t,0) = k·B(t)·P(t)\n```\n\n**Likelihood Function for Parameter Inference:**\n```\nL(θ|D) = ∏ᵢ N(yᵢ | f(tᵢ,θ), σ²)\nθ = {k, L, b, μ, δ, B₀, P₀}\n```\n\n**Stochastic Gillespie Model Propensities:**\n```\na₁ = μ·B       # Bacterial division\na₂ = k·B·P     # Adsorption\na₃ = (1/L)·I   # Lysis (releases b phages)\na₄ = δ·P       # Phage decay\n```\n\n### Complete TypeScript Implementation\n\n- `InfectionParameters` interface (k, L, b, μ, δ, B₀, P₀)\n- `rungeKutta4()` 4th-order ODE solver\n- `infectionODE()` system definition\n- `simulateInfection()` trajectory generation\n- `logLikelihood()` for parameter estimation\n- `nelderMead()` optimization\n- `identifyLysisCassette()` gene linking\n- `fitInfectionModel()` main inference function\n- `linkKineticsToGenome()` cassette→kinetics mapping\n\n### TUI Features\n- Growth Curve Fit with 95% CI shading\n- Inferred Parameters panel (k, L, b with confidence intervals)\n- Lysis Cassette visualization (holin, antiholin, endolysin, spanin)\n- Latency prediction match indicator\n- R² and AIC model fit statistics\n- [D]ata toggle, [M]ode ODE/Gillespie, [B]ootstrap, [J]ump to gene\n\n### Implementation Stack\n- **ODE Solver**: Rust + WASM for RK4 with adaptive stepping\n- **Optimization**: Nelder-Mead in TypeScript; optional L-BFGS in Rust\n- **Stochastic**: Gillespie algorithm in Rust + WASM\n- **Caching**: SQLite stores fitted parameters per dataset\n\nNovelty: 9/10, Pedagogical: 9/10, Wow Factor: 8/10","status":"closed","priority":3,"issue_type":"feature","created_at":"2025-12-06T23:49:11.338562-05:00","updated_at":"2025-12-07T13:53:01.59027-05:00","closed_at":"2025-12-07T13:53:01.59027-05:00","dependencies":[{"issue_id":"phage_explorer-7am","depends_on_id":"phage_explorer-ojb","type":"blocks","created_at":"2025-12-06T23:56:50.950647-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-7bsl","title":"[WEB-P3] Simulation Hub: Modal Launcher","description":"Modal for launching simulations with preview thumbnails, parameter configuration, and keyboard navigation.","status":"closed","priority":0,"issue_type":"feature","created_at":"2025-12-07T17:01:24.754853-05:00","updated_at":"2025-12-08T00:20:33.457946-05:00","closed_at":"2025-12-08T00:20:33.457946-05:00","dependencies":[{"issue_id":"phage_explorer-7bsl","depends_on_id":"phage_explorer-ee1","type":"blocks","created_at":"2025-12-07T17:07:11.825209-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-7bsl","depends_on_id":"phage_explorer-zld6","type":"blocks","created_at":"2025-12-07T17:07:49.047181-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-7euy","title":"Add educational commands to CommandPalette","description":"Register beginner mode commands in CommandPalette: toggle beginner mode, open glossary, start welcome tour, open module by name. Commands only visible when relevant. Uses existing command registration pattern.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-09T11:47:37.544025-05:00","updated_at":"2025-12-09T11:47:37.544025-05:00","dependencies":[{"issue_id":"phage_explorer-7euy","depends_on_id":"phage_explorer-owsv","type":"blocks","created_at":"2025-12-09T11:47:56.37386-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-7gs","title":"Advanced: Functional Module Coherence \u0026 Stoichiometry Checker","description":"Segment genomes into functional modules (replication, morphogenesis, lysis). Evaluate stoichiometric balance (capsid:scaffold ratios). Flag incomplete or overrepresented modules, suggest missing partners. Module ribbon with green/amber/red indicators. Quick genome QC and design check. Novelty: Medium-high.","notes":"## FUNCTIONAL MODULE COHERENCE \u0026 STOICHIOMETRY CHECKER\n\n**Full TypeScript Implementation from Roadmap**\n\n### Concept\nPerform comprehensive 'genome health check' by segmenting into functional modules and evaluating completeness, balance, and coherence.\n\n### Mathematical Foundations\n\n**Module Completeness Score:**\n```\nC_module = Σ(w_i × present_i) / Σ(w_i)\n\nwhere:\n- w_i: weight (1.0=critical, 0.5=common, 0.2=optional)\n- present_i: 1 if gene found, 0 otherwise\n```\n\n**Stoichiometric Balance Score:**\n```\nimbalance_ij = |log2(observed_i / observed_j) - log2(r_ij)|\nS_balance = 1 - tanh(Σ imbalance_ij / n_pairs)\n```\n\n**Module Coherence (Gene Neighborhood):**\n```\nCoherence = Σ(adjacent_same_module) / (Σ genes_in_module - 1)\n```\n\n**Expression Proxy from RBS:**\n```\nRBS_strength = PSSM_score(Shine-Dalgarno, -15 to -5)\nExpected_copies ∝ RBS_strength × CAI\n```\n\n### Complete TypeScript Implementation\n\n- `ModuleType`: replication, morphogenesis_head/tail, packaging, lysis, lysogeny, host_interaction, auxiliary\n- `ModuleGene` with role, essentiality, expected copy number, RBS strength\n- `FunctionalModule` with completeness, balance, coherence scores\n- `StoichiometryRule` defining gene pair ratios\n- `ModuleAnalysis` with quality grade A-F\n- `MODULE_KEYWORDS` regex patterns per module type\n- `ESSENTIAL_GENES` weighted lists per module\n- `STOICHIOMETRY_RULES` (MCP:portal, terminase large:small, etc.)\n- `estimateRBSStrength()` Shine-Dalgarno PSSM scoring\n- `classifyGene()`, `determineEssentiality()`\n- `assembleModules()` gene classification pipeline\n- `computeCompletenessScore()`, `computeBalanceScore()`\n- `computeCoherenceScore()` gene adjacency analysis\n- `analyzeModuleCoherence()` main analysis function\n- `renderModuleRibbon()`, `renderStoichiometryChart()`\n\n### TUI Features\n- Module Health Overview with progress bars per module\n- Status indicators: ● complete, ◐ partial, ○ missing\n- Missing essential gene warnings\n- Stoichiometry panel per module showing:\n  - Gene expression levels (bars)\n  - Expected vs observed comparison\n  - Balance score and coherence %\n- Suggestions panel with priority levels\n- Quality grade (A-F) prominently displayed\n- [Tab] Next module, [S] Stoichiometry, [H] Find homologs\n\n### Module Categories\n- Replication: polymerase, helicase, primase, SSB\n- Head: MCP, portal, scaffold, protease\n- Tail: major tail, tape measure, fiber, baseplate\n- Packaging: large/small terminase\n- Lysis: endolysin, holin, spanin\n- Lysogeny: integrase, CI, excisionase\n\nNovelty: 8/10, Pedagogical: 9/10, Wow Factor: 8/10","status":"in_progress","priority":3,"issue_type":"feature","created_at":"2025-12-07T00:17:43.641821-05:00","updated_at":"2025-12-07T13:38:55.758138-05:00","dependencies":[{"issue_id":"phage_explorer-7gs","depends_on_id":"phage_explorer-ojb","type":"blocks","created_at":"2025-12-07T00:20:52.492305-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-7nv2","title":"[WEB-P6] Setup Lighthouse CI in GitHub Actions","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-07T17:01:41.973018-05:00","updated_at":"2025-12-08T00:23:16.898567-05:00","closed_at":"2025-12-08T00:23:16.898567-05:00","dependencies":[{"issue_id":"phage_explorer-7nv2","depends_on_id":"phage_explorer-5a2","type":"blocks","created_at":"2025-12-07T17:08:58.351484-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-7roq","title":"[WEB-P6] Create WelcomeModal component","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-07T17:02:04.205395-05:00","updated_at":"2025-12-07T22:26:12.127039-05:00","closed_at":"2025-12-07T22:26:12.127039-05:00","dependencies":[{"issue_id":"phage_explorer-7roq","depends_on_id":"phage_explorer-as5q","type":"blocks","created_at":"2025-12-07T17:09:18.499531-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-7vdx","title":"[WEB-P6] Run initial Lighthouse audit","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-07T17:01:37.925993-05:00","updated_at":"2025-12-08T00:23:52.140983-05:00","closed_at":"2025-12-08T00:23:52.140983-05:00","dependencies":[{"issue_id":"phage_explorer-7vdx","depends_on_id":"phage_explorer-5a2","type":"blocks","created_at":"2025-12-07T17:08:52.859635-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-7wzv","title":"[WEB-P3] Layer 1 Overlays: Basic Analysis Visualization","description":"Port all Layer 1 overlays: GC skew [G], complexity [X], bendability [B], promoter/RBS [P], repeats [R]. Toggle with hotkeys.","status":"closed","priority":0,"issue_type":"feature","created_at":"2025-12-07T17:01:26.06274-05:00","updated_at":"2025-12-07T18:31:18.496675-05:00","closed_at":"2025-12-07T18:31:18.496675-05:00","dependencies":[{"issue_id":"phage_explorer-7wzv","depends_on_id":"phage_explorer-ee1","type":"blocks","created_at":"2025-12-07T17:07:12.939737-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-7wzv","depends_on_id":"phage_explorer-zld6","type":"blocks","created_at":"2025-12-07T17:07:50.748671-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-7y69","title":"Phase 1: Core Infrastructure","description":"## Overview\n\nEstablish the foundational infrastructure required for all other phases. This is the critical path - nothing else can proceed until these components are in place.\n\n## Why This Phase is First\n\nThe web app currently has:\n- A static landing page App.tsx (just marketing content)\n- No connection to the phage database\n- No integration with the shared @phage-explorer/state store\n\nWithout database access and proper state management, we cannot display phages, sequences, or any analysis results.\n\n## Technical Components\n\n### 1. WebPhageRepository (Critical)\n\n**What**: Implementation of the `PhageRepository` interface using sql.js\n\n**Why sql.js**: \n- Browser-native SQLite via WebAssembly\n- Single source of truth (same DB as TUI)\n- No backend server required\n- Works offline once cached\n\n**Interface to implement**:\n- `listPhages(): Promise\u003cPhageSummary[]\u003e`\n- `getPhageByIndex(index: number): Promise\u003cPhageFull | null\u003e`\n- `getSequenceWindow(phageId, start, end): Promise\u003cstring\u003e`\n- `searchPhages(query: string): Promise\u003cPhageSummary[]\u003e`\n\n### 2. State Integration\n\n**What**: Connect @phage-explorer/state Zustand store to React components\n\n**Current state**: Web has its own `useWebPreferences` store but doesn't use the shared store\n\n**Goal**: Unified state management matching TUI behavior\n\n### 3. App.tsx Rewrite\n\n**What**: Transform from static landing page to full application shell\n\n**Must include**:\n- useDatabase() hook for DB lifecycle\n- Loading states with progress indicator\n- Error boundary for DB failures\n- Proper component layout (PhageList, SequenceGrid, GeneMap)\n- Keyboard manager integration\n- Overlay system wiring\n\n## Dependencies\n\n- **Blocks**: All other phases (nothing works without this)\n- **Depends on**: None (pure foundation work)\n\n## Success Criteria\n\n- [ ] Database loads in browser with progress indicator\n- [ ] PhageRepository methods return correct data\n- [ ] Zustand store updates propagate to components\n- [ ] App.tsx renders proper layout (not landing page)\n- [ ] Keyboard events are captured\n\n## Files to Create/Modify\n\n```\npackages/web/src/\n├── data/\n│   ├── WebPhageRepository.ts    # NEW\n│   └── initDatabase.ts          # NEW\n├── App.tsx                      # REWRITE\n└── main.tsx                     # Minor updates\n```\n\n## Estimated Complexity: Medium\n\nThis phase is well-defined but critical. The sql.js integration pattern is standard, and the state store already exists.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-08T12:54:53.546095-05:00","updated_at":"2025-12-08T14:20:32.801839-05:00","closed_at":"2025-12-08T14:20:32.801839-05:00"}
{"id":"phage_explorer-7y69.1","title":"Implement WebPhageRepository","description":"## Objective\nCreate the web implementation of PhageRepository interface using sql.js to provide data access layer for all phage-related queries in the web application.\n\n## What Needs to Be Done\n1. Create packages/web/src/data/WebPhageRepository.ts\n2. Implement PhageRepository interface from @phage-explorer/core/types\n3. Implement all required methods:\n   - listPhages(): List all phages with metadata\n   - getPhageByIndex(index): Retrieve specific phage details\n   - getSequenceWindow(phageIndex, start, length): Fetch sequence segments\n   - searchPhages(query): Search phages by name/metadata\n4. Add database connection management\n5. Implement progress callbacks for long-running queries\n6. Add error handling for database operations\n\n## Why It Matters\nThis is the foundational data access layer for the entire web application. Every feature that needs phage data will depend on this repository. It abstracts sql.js implementation details and provides a clean, type-safe interface.\n\n## Technical Considerations\n- Use sql.js Database class for queries\n- Implement efficient SQL queries with proper indexing\n- Handle WASM memory constraints for large result sets\n- Consider lazy loading for sequences (don't load entire genomes at once)\n- Add TypeScript strict null checks\n- Ensure thread-safe operations (sql.js runs in main thread)\n- Cache frequently accessed metadata\n- Use prepared statements for performance\n\n## Files to Create/Modify\n- CREATE: packages/web/src/data/WebPhageRepository.ts\n- REFERENCE: packages/core/src/types.ts (PhageRepository interface)\n- REFERENCE: packages/cli/src/data/PhageRepository.ts (existing implementation for patterns)\n\n## Acceptance Criteria\n- [ ] WebPhageRepository class implements PhageRepository interface\n- [ ] All methods return correct TypeScript types\n- [ ] listPhages() returns array of PhageMetadata\n- [ ] getPhageByIndex() returns PhageInfo or null\n- [ ] getSequenceWindow() handles boundary conditions correctly\n- [ ] searchPhages() performs case-insensitive search\n- [ ] Progress callbacks fire appropriately for long queries\n- [ ] Error handling for closed/invalid database\n- [ ] Unit tests for all public methods\n- [ ] JSDoc documentation for all public APIs","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-08T12:57:32.315756-05:00","updated_at":"2025-12-08T13:22:37.274543-05:00","closed_at":"2025-12-08T13:22:37.274543-05:00","dependencies":[{"issue_id":"phage_explorer-7y69.1","depends_on_id":"phage_explorer-7y69","type":"parent-child","created_at":"2025-12-08T12:57:32.316309-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-7y69.1","depends_on_id":"phage_explorer-7y69.2","type":"blocks","created_at":"2025-12-08T12:57:45.040809-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-7y69.2","title":"Create initDatabase utility","description":"## Objective\nCreate a utility module to initialize sql.js WASM runtime and load the phage database file with progress tracking and offline support.\n\n## What Needs to Be Done\n1. Create packages/web/src/data/initDatabase.ts\n2. Initialize sql.js with WASM binary\n3. Fetch database file from server with progress tracking\n4. Implement IndexedDB caching for offline support\n5. Handle version checking and cache invalidation\n6. Provide progress callbacks for UI updates\n7. Export initDatabase() async function\n8. Add error handling for network failures\n\n## Why It Matters\nDatabase initialization is the critical first step for the web app. Users need clear feedback during loading (which can take several seconds for large databases). Offline support via IndexedDB provides better UX and reduces bandwidth on repeat visits.\n\n## Technical Considerations\n- sql.js WASM initialization is async and requires proper await\n- Database file may be 10-100MB, needs chunked loading\n- Use fetch() with ReadableStream for progress tracking\n- IndexedDB API is callback-based, wrap in Promises\n- Store database version/hash to detect updates\n- Consider compression (gzip) for database transfer\n- Handle partial downloads and resume capability\n- Clear old cache entries to prevent storage bloat\n- Add timeout handling for slow connections\n- Provide cancellation mechanism\n\n## Files to Create/Modify\n- CREATE: packages/web/src/data/initDatabase.ts\n- MODIFY: packages/web/package.json (ensure sql.js dependency)\n- REFERENCE: packages/cli/src/database/index.ts (for database schema understanding)\n\n## Acceptance Criteria\n- [ ] initDatabase() successfully initializes sql.js WASM\n- [ ] Database file fetches with progress callbacks (0-100%)\n- [ ] Progress callback receives bytes loaded and total bytes\n- [ ] IndexedDB caches database blob with version key\n- [ ] Subsequent loads use cache when available\n- [ ] Cache invalidation works when version changes\n- [ ] Network errors throw descriptive error messages\n- [ ] Function returns sql.js Database instance\n- [ ] Memory cleanup on errors (no WASM leaks)\n- [ ] JSDoc with usage examples\n- [ ] Integration test with mock fetch","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-08T12:57:34.372772-05:00","updated_at":"2025-12-08T13:22:35.648322-05:00","closed_at":"2025-12-08T13:22:35.648322-05:00","dependencies":[{"issue_id":"phage_explorer-7y69.2","depends_on_id":"phage_explorer-7y69","type":"parent-child","created_at":"2025-12-08T12:57:34.373234-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-7y69.3","title":"Integrate @phage-explorer/state store","description":"## Objective\nConnect the existing Zustand state store from @phage-explorer/state package to React components, merge web-specific preferences, and set up persistence layer.\n\n## What Needs to Be Done\n1. Import store from @phage-explorer/state\n2. Create web-specific store extensions (web preferences, UI state)\n3. Merge stores using Zustand's combine/middleware\n4. Implement persistence layer using localStorage/IndexedDB\n5. Create React hooks for store access (useStore, usePhageList, useSelectedPhage, etc.)\n6. Set up store hydration on app load\n7. Add TypeScript types for extended store\n8. Create StoreProvider component if needed for context\n\n## Why It Matters\nThe state store is the single source of truth for application state. Proper integration ensures consistent state management across all components, enables features like undo/redo, and provides persistence across sessions.\n\n## Technical Considerations\n- Zustand store is framework-agnostic, needs React bindings\n- Use Zustand's persist middleware for localStorage\n- Consider IndexedDB for large state (sequence cache, etc.)\n- Implement selective persistence (don't persist temporary UI state)\n- Handle hydration race conditions (load store before rendering)\n- Use shallow equality for selectors to prevent unnecessary re-renders\n- Split store into slices for better organization\n- Add DevTools integration for debugging\n- Handle migration for state schema changes\n- Consider immer middleware for immutable updates\n\n## Files to Create/Modify\n- CREATE: packages/web/src/state/store.ts (web store setup)\n- CREATE: packages/web/src/state/hooks.ts (React hooks)\n- CREATE: packages/web/src/state/persistence.ts (persistence layer)\n- MODIFY: packages/web/src/App.tsx (add store provider)\n- REFERENCE: packages/state/src/index.ts (main store definition)\n- REFERENCE: packages/tui/src/state/hooks.ts (TUI hooks for patterns)\n\n## Acceptance Criteria\n- [ ] Store accessible via useStore() hook\n- [ ] Specialized hooks work (usePhageList, useSelectedPhage, etc.)\n- [ ] State persists across browser sessions\n- [ ] Hydration completes before first render\n- [ ] Web-specific preferences integrated (theme, layout, etc.)\n- [ ] TypeScript types fully inferred (no 'any')\n- [ ] DevTools show store state and actions\n- [ ] Performance: selectors don't cause excessive re-renders\n- [ ] State migration handles version changes\n- [ ] Unit tests for store actions and selectors\n- [ ] Documentation with usage examples","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-08T12:57:35.2393-05:00","updated_at":"2025-12-08T13:27:51.622437-05:00","closed_at":"2025-12-08T13:27:51.622437-05:00","dependencies":[{"issue_id":"phage_explorer-7y69.3","depends_on_id":"phage_explorer-7y69","type":"parent-child","created_at":"2025-12-08T12:57:35.240032-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-7y69.4","title":"Rewrite App.tsx as application shell","description":"## Objective\nTransform App.tsx from a static landing page into a full application shell that manages database lifecycle, loading states, layout structure, and integrates core systems.\n\n## What Needs to Be Done\n1. Replace static landing page content with dynamic app shell\n2. Create useDatabase() hook for database lifecycle management\n3. Implement loading states with progress indicator\n4. Implement error states with retry capability\n5. Set up main application layout:\n   - Sidebar navigation (phage list, filters)\n   - Main content area (sequence viewer, details)\n   - Status bar (keyboard mode, stats)\n6. Wire up KeyboardManager component\n7. Connect OverlayProvider for modals/dialogs\n8. Add database initialization on mount\n9. Handle database errors gracefully\n10. Set up routing structure (if using React Router)\n\n## Why It Matters\nApp.tsx is the root component that orchestrates the entire application. It's responsible for critical lifecycle events like database initialization, error boundaries, and layout structure. This transformation moves from static demo to functioning app.\n\n## Technical Considerations\n- Database initialization is async, needs proper loading UI\n- Loading progress should be visible (progress bar or percentage)\n- Error states need actionable recovery (retry button, error details)\n- Layout should be responsive (mobile-friendly)\n- Sidebar should be collapsible to save screen space\n- Use React.Suspense for code splitting if needed\n- Add error boundary for React component errors\n- Consider layout persistence (remember sidebar state)\n- Keyboard manager needs to be high in component tree\n- OverlayProvider should wrap all content for modals\n- Handle browser back/forward navigation\n- Add keyboard shortcuts hint overlay\n\n## Files to Create/Modify\n- MODIFY: packages/web/src/App.tsx (complete rewrite)\n- CREATE: packages/web/src/hooks/useDatabase.ts (database lifecycle hook)\n- CREATE: packages/web/src/components/LoadingScreen.tsx (loading UI)\n- CREATE: packages/web/src/components/ErrorScreen.tsx (error UI)\n- CREATE: packages/web/src/components/Layout/AppLayout.tsx (main layout)\n- CREATE: packages/web/src/components/Layout/Sidebar.tsx (sidebar component)\n- CREATE: packages/web/src/components/Layout/StatusBar.tsx (status bar)\n- REFERENCE: packages/tui/src/App.tsx (TUI app structure for patterns)\n\n## Acceptance Criteria\n- [ ] App.tsx renders application shell, not static content\n- [ ] Database initializes on mount with progress indicator\n- [ ] Loading screen shows percentage and status message\n- [ ] Error screen shows error details and retry button\n- [ ] Layout has sidebar + main content + status bar\n- [ ] Sidebar is collapsible and remembers state\n- [ ] KeyboardManager is mounted and receives events\n- [ ] OverlayProvider wraps content for modals\n- [ ] Keyboard mode indicator visible in status bar\n- [ ] Error boundary catches and displays component errors\n- [ ] App works without database (shows empty state)\n- [ ] Responsive design works on mobile screens\n- [ ] Navigation structure is clear and intuitive\n- [ ] Performance: initial render under 100ms (after DB load)\n- [ ] Integration tests for loading/error/success states","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-08T12:57:36.358798-05:00","updated_at":"2025-12-08T14:15:30.019301-05:00","closed_at":"2025-12-08T14:15:30.019301-05:00","dependencies":[{"issue_id":"phage_explorer-7y69.4","depends_on_id":"phage_explorer-7y69","type":"parent-child","created_at":"2025-12-08T12:57:36.359127-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-7y69.4","depends_on_id":"phage_explorer-7y69.1","type":"blocks","created_at":"2025-12-08T12:57:46.020862-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-7y69.4","depends_on_id":"phage_explorer-7y69.3","type":"blocks","created_at":"2025-12-08T12:57:46.931879-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-7y69.5","title":"Wire keyboard manager to app","description":"## Objective\nIntegrate KeyboardManager component into the web application with vim-style modal system (NORMAL/SEARCH/COMMAND modes), global hotkeys, and mode transitions.\n\n## What Needs to Be Done\n1. Import KeyboardManager from @phage-explorer/tui/keyboard\n2. Adapt KeyboardManager for browser environment (DOM events)\n3. Set up modal keyboard system:\n   - NORMAL mode: navigation and commands (j/k/gg/G/etc)\n   - SEARCH mode: filtering and search (/)\n   - COMMAND mode: actions and commands (:)\n4. Register global hotkeys (q=quit, ?=help, /=search, :=command)\n5. Implement mode transitions (ESC to return to NORMAL)\n6. Connect keyboard events to store actions\n7. Handle input capture for SEARCH/COMMAND modes\n8. Add visual mode indicator\n9. Implement help overlay (? key)\n10. Handle keyboard conflicts with browser shortcuts\n\n## Why It Matters\nKeyboard navigation is a core feature that enables power users to navigate efficiently without mouse. The vim-style modal system provides a familiar interface for developers and reduces keyboard conflicts.\n\n## Technical Considerations\n- Browser keyboard events differ from terminal (use addEventListener)\n- Prevent default for captured keys (avoid browser shortcuts)\n- Handle focus management (input fields should capture keys)\n- Mode should be stored in global state for UI updates\n- Search mode needs input component for query entry\n- Command mode needs command palette component\n- Consider key repeat rates for navigation (j/k)\n- Handle IME input for international keyboards\n- Add keyboard shortcut customization\n- Document all keyboard shortcuts\n- Test on different browsers (Chrome, Firefox, Safari)\n- Handle touch devices gracefully (no keyboard)\n\n## Files to Create/Modify\n- CREATE: packages/web/src/components/KeyboardManager.tsx (web adapter)\n- CREATE: packages/web/src/components/KeyboardModeIndicator.tsx (mode display)\n- CREATE: packages/web/src/components/HelpOverlay.tsx (shortcut help)\n- CREATE: packages/web/src/components/SearchInput.tsx (search mode input)\n- CREATE: packages/web/src/components/CommandPalette.tsx (command mode UI)\n- MODIFY: packages/web/src/App.tsx (integrate KeyboardManager)\n- MODIFY: packages/web/src/state/store.ts (add keyboard mode state)\n- REFERENCE: packages/tui/src/keyboard/KeyboardManager.ts (original implementation)\n- REFERENCE: packages/tui/src/keyboard/types.ts (mode types)\n\n## Acceptance Criteria\n- [ ] KeyboardManager captures keyboard events globally\n- [ ] NORMAL mode handles navigation keys (j/k/gg/G/hjkl)\n- [ ] SEARCH mode activates on '/' key\n- [ ] COMMAND mode activates on ':' key\n- [ ] ESC key returns to NORMAL mode from any mode\n- [ ] Mode indicator shows current mode (bottom right)\n- [ ] '?' key shows help overlay with all shortcuts\n- [ ] Help overlay dismisses on ESC or any key\n- [ ] Input fields capture keys without triggering commands\n- [ ] Keyboard shortcuts work across all browsers\n- [ ] Touch devices show mode switcher buttons\n- [ ] No conflicts with critical browser shortcuts (Ctrl+W, etc)\n- [ ] Store tracks current keyboard mode\n- [ ] Mode transitions trigger store updates\n- [ ] Unit tests for key handling logic\n- [ ] Integration tests for mode transitions","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-08T12:57:37.476045-05:00","updated_at":"2025-12-08T14:16:03.566325-05:00","closed_at":"2025-12-08T14:16:03.566325-05:00","dependencies":[{"issue_id":"phage_explorer-7y69.5","depends_on_id":"phage_explorer-7y69","type":"parent-child","created_at":"2025-12-08T12:57:37.476438-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-7y69.5","depends_on_id":"phage_explorer-7y69.4","type":"blocks","created_at":"2025-12-08T12:57:48.681503-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-7zk9","title":"Swipe gestures for navigation","description":"","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-09T00:40:11.869483-05:00","updated_at":"2025-12-09T00:40:11.869483-05:00","dependencies":[{"issue_id":"phage_explorer-7zk9","depends_on_id":"phage_explorer-th9r","type":"blocks","created_at":"2025-12-09T00:40:29.618007-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-8226","title":"[WEB-P3] Implement push/pop/toggle methods","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-07T17:02:22.285498-05:00","updated_at":"2025-12-07T18:27:08.456021-05:00","closed_at":"2025-12-07T18:27:08.456021-05:00","dependencies":[{"issue_id":"phage_explorer-8226","depends_on_id":"phage_explorer-zld6","type":"blocks","created_at":"2025-12-07T17:07:36.595832-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-82x","title":"[WEB-P0] Handle key sequences (gg, Ctrl+Shift combinations)","description":"Implement multi-key sequence handling for vim-style commands like gg, dd, and complex modifier combinations","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-07T16:58:55.967408-05:00","updated_at":"2025-12-07T17:31:30.174566-05:00","closed_at":"2025-12-07T17:31:30.174566-05:00","dependencies":[{"issue_id":"phage_explorer-82x","depends_on_id":"phage_explorer-ows","type":"blocks","created_at":"2025-12-07T17:04:41.520113-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-82x","depends_on_id":"phage_explorer-csy","type":"blocks","created_at":"2025-12-07T17:05:08.677714-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-87z","title":"[WEB-P0] Foundation: Web App Scaffold \u0026 Core Systems","description":"# Phase 0: Foundation (Target: Weeks 1-2)\n\n## Purpose\nEstablish the foundational infrastructure for the web application. This phase creates the scaffolding that all subsequent phases will build upon.\n\n## Why This Matters\nA solid foundation prevents rework later. By establishing the package structure, build tooling, theme system, and keyboard handling first, all subsequent development follows consistent patterns and shares common infrastructure.\n\n## Deliverables\n1. **Package Scaffold** - `packages/web` with Vite + React 19\n2. **Path Aliases** - Configured imports for `@phage-explorer/*` shared packages\n3. **Layout Shell** - Header, Main content area, Footer components\n4. **Theme System** - Full port of TUI themes with CSS variables\n5. **Keyboard Manager** - Hotkey registration, vim-style modal support\n6. **CSS Foundation** - Reset, typography, base variables\n\n## Technical Decisions\n- **Vite over Next.js**: No SSR needed, Vite is faster and simpler\n- **React 19**: Concurrent features for smooth updates\n- **CSS Modules + Variables**: Scoped styles, zero runtime, theme tokens\n- **No UI library**: Custom primitives for maximum control over cyberpunk aesthetic\n\n## Acceptance Criteria\n- [ ] App boots in browser without errors\n- [ ] Theme switching works (all 10 themes from TUI)\n- [ ] Basic keyboard shortcuts respond (arrow keys, Escape, ?)\n- [ ] Build produces optimized bundle (\u003c200KB initial)\n- [ ] TypeScript compilation passes with strict mode\n- [ ] Shared packages (@core, @state) import correctly\n\n## Risks \u0026 Mitigations\n- **Risk**: Path alias resolution issues with Vite\n  - **Mitigation**: Test imports early, configure tsconfig.json properly\n- **Risk**: Theme token explosion\n  - **Mitigation**: Use semantic tokens mapped to theme palettes\n\n## Dependencies\n- Existing `@phage-explorer/core` package\n- Existing `@phage-explorer/state` package\n\n## Implementation Notes\nThe keyboard manager should support vim-style modal patterns (NORMAL, SEARCH, COMMAND, VISUAL modes) from day one. This is fundamental to the keyboard-first design philosophy.\n\nFont loading strategy: Self-host JetBrains Mono with font-display: swap for fast rendering.","status":"closed","priority":0,"issue_type":"epic","created_at":"2025-12-07T16:56:11.524254-05:00","updated_at":"2025-12-07T17:33:52.685672-05:00","closed_at":"2025-12-07T17:33:52.685672-05:00","dependencies":[{"issue_id":"phage_explorer-87z","depends_on_id":"phage_explorer-sar","type":"blocks","created_at":"2025-12-07T17:04:28.695388-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-8exb","title":"PackagingMotorVisualizer - DNA motor mechanics","description":"","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-09T00:38:16.20716-05:00","updated_at":"2025-12-09T00:38:16.20716-05:00","dependencies":[{"issue_id":"phage_explorer-8exb","depends_on_id":"phage_explorer-m49v","type":"blocks","created_at":"2025-12-09T00:38:42.882512-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-8g6j","title":"Task: Create GeneticCode module","description":"Educational module: The Genetic Code. Covers codons as 3-letter words, 64 combinations to 20 amino acids, degeneracy, start/stop codons, reading frames, codon bias. Include interactive codon wheel, reading frame demo.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-09T11:44:15.514246-05:00","updated_at":"2025-12-09T11:44:15.514246-05:00","dependencies":[{"issue_id":"phage_explorer-8g6j","depends_on_id":"phage_explorer-ao55","type":"blocks","created_at":"2025-12-09T11:44:15.514916-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-8g6j","depends_on_id":"phage_explorer-3zpa","type":"blocks","created_at":"2025-12-09T11:44:15.515645-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-8kpa","title":"[WEB-P5] Collaborative Sessions: WebRTC Real-Time","description":"Real-time collaboration via WebRTC. Create/join sessions, state sync, presence indicators. Edge function for signaling.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-07T17:01:25.098142-05:00","updated_at":"2025-12-07T22:35:49.801816-05:00","closed_at":"2025-12-07T22:35:49.801816-05:00","dependencies":[{"issue_id":"phage_explorer-8kpa","depends_on_id":"phage_explorer-zkp","type":"blocks","created_at":"2025-12-07T17:07:15.181208-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-8lh","title":"Foundation: Command Palette System","description":"Create fuzzy-search command palette (: or Ctrl+P) for instant access to any feature. CommandRegistry singleton where all features register with name, keywords, action. Power users can access any feature in 3-4 keystrokes.","status":"in_progress","priority":0,"issue_type":"epic","created_at":"2025-12-06T23:08:59.44721-05:00","updated_at":"2025-12-06T23:51:45.500489-05:00"}
{"id":"phage_explorer-8lir","title":"[WEB-P5] Port module detection overlay [L key]","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-07T17:01:38.649583-05:00","updated_at":"2025-12-07T21:05:18.714116-05:00","closed_at":"2025-12-07T21:05:18.714116-05:00","dependencies":[{"issue_id":"phage_explorer-8lir","depends_on_id":"phage_explorer-971","type":"blocks","created_at":"2025-12-07T17:07:32.742677-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-8mgm","title":"Feature: Amino Acid View UX Enhancements","description":"","notes":"# Feature: Amino Acid View UX Enhancements\n\n## Executive Summary\n\nImprove the amino acid view experience for non-specialists by using clear terminology, prominent controls, and rich contextual information.\n\n## Current Problems\n\n1. **Confusing Abbreviation**: \"AA\" means nothing to non-biologists\n2. **Subtle Toggle**: DNA/AA toggle is too small and similar to other controls\n3. **No Context**: Tapping an amino acid provides no educational information\n\n## User Stories\n\n\u003e As a student viewing a phage protein sequence,\n\u003e I want to understand what each amino acid letter means,\n\u003e So I can learn about protein structure while exploring.\n\n\u003e As a mobile user,\n\u003e I want clearly visible controls that are easy to tap,\n\u003e So I can switch between DNA and protein views without frustration.\n\n## Sub-Tasks\n\n### P1 - High Priority\n- `phage_explorer-elbv`: Rename \"AA\" to \"Amino Acids\" throughout UI\n- `phage_explorer-necy`: Implement touch HUD with detailed amino acid information\n\n### P2 - Normal Priority\n- `phage_explorer-fv8u`: Redesign DNA/Amino Acid toggle as prominent segmented control\n\n## Key Deliverables\n\n### 1. Terminology Update\nReplace all instances of \"AA\" with \"Amino Acids\" in user-facing text:\n- Toggle button label\n- Accessibility labels\n- Help text and tooltips\n- Footer hints\n\n### 2. Touch HUD\nWhen user taps and holds on an amino acid:\n- Full name (e.g., \"Methionine\")\n- Molecular weight\n- Classification (hydrophobic, polar, etc.)\n- Essential/non-essential status\n- Energy cost to synthesize\n- Codons that encode it\n\n### 3. Prominent Toggle\nReplace small button with segmented control:\n- Clear DNA / Amino Acids segments\n- Visual indication of active mode\n- 44px minimum touch target\n- Icons for quick recognition\n\n## File Locations\n\n- Sequence view: `/packages/web/src/components/SequenceView.tsx`\n- Amino acid data: Need to create `/packages/core/src/data/amino-acid-database.ts`\n\n## Success Criteria\n\n- [ ] No \"AA\" abbreviations in user-facing UI\n- [ ] Toggle button is visually prominent and touch-friendly\n- [ ] Touch HUD provides comprehensive amino acid information\n- [ ] All 20 amino acids have complete data\n- [ ] Scientific accuracy verified\n\n## Definition of Done\n\nAll sub-tasks completed, tested on mobile devices, and accessibility verified.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-09T11:25:52.644495-05:00","updated_at":"2025-12-09T11:34:11.629685-05:00","dependencies":[{"issue_id":"phage_explorer-8mgm","depends_on_id":"phage_explorer-jjq5","type":"blocks","created_at":"2025-12-09T11:26:24.47298-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-8p53","title":"[WEB-P3] Add keyboard navigation for sim selection","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-07T17:02:01.238901-05:00","updated_at":"2025-12-08T00:20:47.533795-05:00","closed_at":"2025-12-08T00:20:47.533795-05:00","dependencies":[{"issue_id":"phage_explorer-8p53","depends_on_id":"phage_explorer-7bsl","type":"blocks","created_at":"2025-12-07T17:07:33.685973-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-8sq","title":"[WEB-P0] Port all 10 themes with CSS custom properties","description":"Convert all 10 TUI themes to CSS custom properties. Include retro, matrix, ocean, sunset, nord, etc.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-07T16:58:24.74394-05:00","updated_at":"2025-12-07T17:28:00.270553-05:00","closed_at":"2025-12-07T17:28:00.270553-05:00","dependencies":[{"issue_id":"phage_explorer-8sq","depends_on_id":"phage_explorer-2q8","type":"blocks","created_at":"2025-12-07T17:04:39.011226-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-8sq","depends_on_id":"phage_explorer-67t","type":"blocks","created_at":"2025-12-07T17:05:06.682463-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-8vj0","title":"[WEB-P3] Display hotkeys inline with options","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-07T17:01:51.316605-05:00","updated_at":"2025-12-08T00:17:19.789797-05:00","closed_at":"2025-12-08T00:17:19.789797-05:00","dependencies":[{"issue_id":"phage_explorer-8vj0","depends_on_id":"phage_explorer-hg7","type":"blocks","created_at":"2025-12-07T17:07:31.771406-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-8x0c","title":"Phase 6: 3D Visualization","description":"Implement WebGL-based 3D structure viewer with multiple render modes, PDB/mmCIF support, and interactive controls for protein structure exploration.","status":"open","priority":2,"issue_type":"epic","created_at":"2025-12-08T12:56:35.722513-05:00","updated_at":"2025-12-08T12:56:35.722513-05:00"}
{"id":"phage_explorer-8x0c.1","title":"Implement Model3DView component","description":"Create WebGL/Three.js based 3D structure viewer component. Implement PDB and mmCIF file format loading and parsing. Add mouse orbit, pan, and zoom controls with smooth camera transitions. Include auto-framing to center structure on load. Provide basic lighting setup (ambient + directional). Handle loading states and error cases for invalid structures.","status":"in_progress","priority":2,"issue_type":"feature","created_at":"2025-12-08T12:57:34.562401-05:00","updated_at":"2025-12-08T14:27:38.966477-05:00","dependencies":[{"issue_id":"phage_explorer-8x0c.1","depends_on_id":"phage_explorer-8x0c","type":"parent-child","created_at":"2025-12-08T12:57:34.563569-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-8x0c.1","depends_on_id":"phage_explorer-7y69","type":"blocks","created_at":"2025-12-08T12:57:34.564961-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-8x0c.2","title":"Implement structure render modes","description":"Implement multiple rendering modes: Ribbon mode (smooth spline through backbone), Surface mode (molecular surface using marching cubes), Ball-and-stick mode (atoms as spheres, bonds as cylinders), and Cartoon mode (simplified secondary structure). Add mode switcher UI with visual previews. Optimize geometry generation for performance. Support per-chain coloring and custom color schemes.","notes":"Implemented web Model3DView render modes (ball-stick, cartoon, ribbon, surface), mode switcher, per-chain colors, and parser/bond/backbone support.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T12:57:40.993298-05:00","updated_at":"2025-12-08T14:50:14.298228-05:00","closed_at":"2025-12-08T14:50:14.298234-05:00","dependencies":[{"issue_id":"phage_explorer-8x0c.2","depends_on_id":"phage_explorer-8x0c","type":"parent-child","created_at":"2025-12-08T12:57:40.993901-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-8x0c.2","depends_on_id":"phage_explorer-8x0c.1","type":"blocks","created_at":"2025-12-08T12:57:40.994482-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-8x0c.3","title":"Implement fullscreen 3D mode","description":"Create fullscreen rendering mode with full viewport utilization. Implement keyboard controls: arrow keys for rotation, +/- for zoom, spacebar to toggle auto-rotation. Add quality preset system (low/medium/high/ultra) controlling antialiasing, shadow quality, and geometry detail. Include FPS counter and performance overlay. Support escape key to exit fullscreen. Add screenshot capture functionality.","status":"in_progress","priority":3,"issue_type":"task","created_at":"2025-12-08T12:57:48.434653-05:00","updated_at":"2025-12-09T01:04:35.845317-05:00","dependencies":[{"issue_id":"phage_explorer-8x0c.3","depends_on_id":"phage_explorer-8x0c","type":"parent-child","created_at":"2025-12-08T12:57:48.436465-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-8x0c.3","depends_on_id":"phage_explorer-8x0c.2","type":"blocks","created_at":"2025-12-08T12:57:48.438116-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-92s","title":"Foundation: Progressive Disclosure \u0026 User Journey","description":"## Progressive Disclosure \u0026 User Journey\n\nStrategy for exposing features based on user expertise level.\n\n### New User Journey (First 5 minutes)\n- Only Layer 0 (12 sacred controls)\n- Help overlay shows essential controls only\n- Navigate phages, scroll sequences, toggle DNA/AA\n\n### Intermediate User (First hour)\n- Layer 0 + Layer 1 overlays\n- Discover overlays via help\n- Try diff mode, explore 3D model\n- Help now shows 'Advanced: press A for more...'\n\n### Power User\n- Full Layer 0-4 access\n- Uses command palette (: or Ctrl+P)\n- Runs simulations, does comparative analysis\n- Discovers features through exploration\n\n### Key Insight\nEvery feature reachable in ≤3 keypresses but invisible until needed.\n\nDepends on: Help System (phage_explorer-ofm), UI Design System (phage_explorer-dx3)","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-06T23:35:35.931114-05:00","updated_at":"2025-12-07T00:08:51.333537-05:00","closed_at":"2025-12-07T00:08:51.333537-05:00","dependencies":[{"issue_id":"phage_explorer-92s","depends_on_id":"phage_explorer-ofm","type":"blocks","created_at":"2025-12-06T23:39:01.879645-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-92s","depends_on_id":"phage_explorer-dx3","type":"blocks","created_at":"2025-12-06T23:39:02.988977-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-94x","title":"[WEB-P0] Package Scaffold: Vite + React + Bun Configuration","description":"Set up packages/web with Vite build tooling, React 19, and Bun runtime. Configure path aliases for @phage-explorer/* packages. Setup TypeScript strict mode.","status":"closed","priority":0,"issue_type":"feature","created_at":"2025-12-07T16:57:39.54548-05:00","updated_at":"2025-12-07T17:20:41.054093-05:00","closed_at":"2025-12-07T17:20:41.054093-05:00","dependencies":[{"issue_id":"phage_explorer-94x","depends_on_id":"phage_explorer-87z","type":"blocks","created_at":"2025-12-07T17:04:22.397559-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-971","title":"[WEB-P5] Advanced Analysis Overlays: Heavy Computation","description":"Port advanced overlays: K-mer anomaly [J], module detection [L], selection pressure [V], transcription flow [Y]. All worker-based with progress.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-07T17:01:22.136663-05:00","updated_at":"2025-12-07T18:47:35.872481-05:00","closed_at":"2025-12-07T18:47:35.872481-05:00","dependencies":[{"issue_id":"phage_explorer-971","depends_on_id":"phage_explorer-zkp","type":"blocks","created_at":"2025-12-07T17:07:12.825097-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-9bi","title":"[WEB-P2] Add threshold-based highlighting","description":"","notes":"Sparkline supports threshold highlighting (band + line) via 'threshold' prop; implemented in packages/web/src/components/charts/Sparkline.tsx.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-07T16:58:49.698075-05:00","updated_at":"2025-12-07T21:00:00.824542-05:00","closed_at":"2025-12-07T21:00:00.824542-05:00","dependencies":[{"issue_id":"phage_explorer-9bi","depends_on_id":"phage_explorer-w8e","type":"blocks","created_at":"2025-12-07T17:05:19.64114-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-9et6","title":"[WEB-P4] Port evolution replay logic","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-07T17:02:14.166336-05:00","updated_at":"2025-12-07T18:42:55.761318-05:00","closed_at":"2025-12-07T18:42:55.761318-05:00","dependencies":[{"issue_id":"phage_explorer-9et6","depends_on_id":"phage_explorer-6vqr","type":"blocks","created_at":"2025-12-07T17:08:13.768837-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-9jc","title":"Advanced: Cocktail Resistance Evolution Simulator","description":"Simulate resistance emergence under single vs cocktail regimens using Gillespie/tau-leaping. Params from genome: receptor diversity, Sie genes, CRISPR spacer matches. Live ASCII trajectories, risk meter, side-by-side mono vs cocktail. Turns genomic evidence into dosing/risk guidance. Novelty: High, Pedagogical: High (stochastic processes, evolutionary dynamics).","notes":"## COCKTAIL RESISTANCE EVOLUTION SIMULATOR\n\n**Full Implementation from Roadmap**\n\n### Concept\nSimulate resistance emergence under single vs cocktail regimens using genome-derived parameters (receptor diversity, anti-defense, spacer proximity).\n\n### How to Build\n\n**Stochastic Engine:**\n- Gillespie/tau-leaping in Rust+WASM (rand + rayon)\n- Events: bacterial growth, phage adsorption, resistance mutation, receptor switching\n\n**Genome-Derived Parameters:**\n- Receptor diversity from tail fiber annotation\n- Sie genes (superinfection exclusion)\n- CRISPR spacer matches (immunity potential)\n- Anti-defense gene count\n\n**User Inputs:**\n- MOI (multiplicity of infection)\n- Dosing cadence (hours between doses)\n- Population size (CFU/mL)\n- Cocktail composition (1-5 phages)\n\n**Outputs:**\n- Probability of resistance over time\n- Time-to-resistance distribution\n- Compare mono vs cocktail curves\n- Optimal cocktail selection\n\n### TUI Features\n- Live ASCII trajectories (multiple runs overlaid)\n- Risk meter updates in real-time\n- Side-by-side mono vs cocktail comparison\n- Sliders: MOI, dose interval, population size\n- Toggle 'optimize cocktail' to auto-pick best trio\n- Resistance probability timeline\n- [R]un new simulation, [C]ompare, [O]ptimize\n\n### Why It's Good\n- Turns genomic evidence into therapy guidance\n- Quantifies resistance risk over time\n- Compares mono vs cocktail robustness\n- Identifies synergistic combinations\n\n### Implementation Stack\n- Rust+WASM for Gillespie simulator (rand, rayon)\n- TS/Ink UI for sliders and live trajectories\n- SQLite cache for genome-derived parameters\n- ASCII braille for trajectory plots\n\nNovelty: 9/10, Pedagogical: 9/10, Wow Factor: 9/10","status":"in_progress","priority":3,"issue_type":"feature","created_at":"2025-12-06T23:55:45.232996-05:00","updated_at":"2025-12-07T18:20:45.871789-05:00","dependencies":[{"issue_id":"phage_explorer-9jc","depends_on_id":"phage_explorer-ojb","type":"blocks","created_at":"2025-12-06T23:56:51.540252-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-9qjc","title":"Create CodonWheelVisualizer component","description":"Interactive genetic code wheel: click outer ring to select first base, middle for second, inner for third. Shows resulting amino acid with properties. Highlights start/stop codons. Links to GeneticCode module for deeper learning.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-09T11:46:10.179467-05:00","updated_at":"2025-12-09T11:46:10.179467-05:00","dependencies":[{"issue_id":"phage_explorer-9qjc","depends_on_id":"phage_explorer-owsv","type":"blocks","created_at":"2025-12-09T11:46:22.476658-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-9u0s","title":"Pillar 4: Visual Explainers (The Wow Factor)","description":"## Animated, Interactive Biological Visualizations\n\n### Philosophy\nThese aren't just illustrations—they're interactive tools that make abstract biology tangible. The goal is to create 'aha moments' where complex concepts suddenly click.\n\n### Visual 1: DNA Helix Explorer\n**What it shows:**\n- 3D double helix you can rotate/zoom\n- Click nucleotides to see base pairing\n- Follow the backbone (sugar-phosphate)\n- See major/minor grooves\n- Animate unwinding for replication\n\n**Technical approach:**\n- Three.js for 3D rendering\n- Simplified model (10-20 base pairs)\n- Annotations on hover\n- 'DNA basics' link to module\n\n### Visual 2: Translation Visualizer\n**What it shows:**\n- mRNA strand moving through ribosome\n- tRNAs delivering amino acids\n- Codon-anticodon matching\n- Growing polypeptide chain\n- Stop codon and release\n\n**Technical approach:**\n- Canvas 2D animation\n- Step-by-step or continuous mode\n- Current codon highlighted\n- Speed control\n\n### Visual 3: Codon Wheel/Table\n**What it shows:**\n- All 64 codons organized by first/second/third position\n- Color by amino acid property (hydrophobic, polar, charged)\n- Click codon → show amino acid info\n- Search by amino acid → highlight codons\n\n**Technical approach:**\n- SVG or Canvas\n- Two views: wheel and table\n- Filter by property\n\n### Visual 4: Phage Infection Animation\n**What it shows:**\n- Phage attaching to bacterial surface\n- DNA injection (tail contraction)\n- Replication inside host\n- Assembly of new phages\n- Lysis and release\n\n**Technical approach:**\n- Canvas 2D or CSS animation\n- Timeline control (scrub through stages)\n- Stage annotations\n- Option for lytic vs lysogenic path\n\n### Visual 5: Reading Frame Demo\n**What it shows:**\n- Same DNA sequence in all 3 forward frames\n- Visual shift showing different amino acids\n- Stop codon positions highlighted\n- Why frame matters for ORF finding\n\n**Technical approach:**\n- Interactive sequence display\n- Frame selector (1, 2, 3)\n- Real-time translation update\n\n### Files to Create\n- packages/web/src/education/visualizers/DNAHelixViz.tsx\n- packages/web/src/education/visualizers/TranslationViz.tsx\n- packages/web/src/education/visualizers/CodonWheelViz.tsx\n- packages/web/src/education/visualizers/InfectionViz.tsx\n- packages/web/src/education/visualizers/ReadingFrameViz.tsx\n\n### Integration\n- Embedded in foundational modules\n- Standalone access from 'Explore' menu\n- Context panels can show relevant visualizer\n\n### Why Prioritize Visuals\nBiology textbooks are full of static diagrams. Interactive visualizations are what make concepts truly click. These create the 'beautiful' reaction that drives engagement and learning.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-09T11:33:17.735589-05:00","updated_at":"2025-12-09T11:33:17.735589-05:00","dependencies":[{"issue_id":"phage_explorer-9u0s","depends_on_id":"phage_explorer-ty1n","type":"blocks","created_at":"2025-12-09T11:33:17.751478-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-9vj","title":"[WEB-P5] WebGPU Acceleration: GPU Compute Shaders","description":"Feature-flagged WebGPU compute for k-mer counting, heavy analysis. Graceful fallback to WASM. 10-100x speedup potential.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-07T17:01:23.566468-05:00","updated_at":"2025-12-08T00:10:58.722073-05:00","closed_at":"2025-12-08T00:10:58.722073-05:00","dependencies":[{"issue_id":"phage_explorer-9vj","depends_on_id":"phage_explorer-zkp","type":"blocks","created_at":"2025-12-07T17:07:13.978493-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-9wby","title":"Dual-row DNA+AA inline translation view","description":"# Task: Dual-row DNA+AA inline translation view\n\n## Problem\nCurrently users must toggle between DNA and AA view modes. For codon-level analysis, seeing both simultaneously is essential—DNA sequence with its translation aligned below.\n\n## Solution\nImplement a dual-row rendering mode in CanvasSequenceGridRenderer that shows:\n\n```\nPosition: 1    4    7    10   13   16   19...\nDNA:      ATG  GAC  TTA  GCC  AAA  TGT  CAG...\nAA:        M    D    L    A    K    C    Q ...\n```\n\n## Technical Design\n\n### Layout Structure\n- Row 1 (top): DNA triplets with codon grouping visual cues\n- Row 2 (bottom): Single AA centered under each codon\n- Visual separator line between rows\n- Codon boundary markers (subtle vertical lines every 3bp)\n\n### State Management\n```typescript\n// Add to store\nviewMode: dna | aa | dual  // Add dual option\n\n// Add to SequenceGridOptions\ndualRowMode?: boolean;\ncodonGrouping?: boolean;  // Show visual codon boundaries\n```\n\n### Rendering Logic\n```typescript\n// In CanvasSequenceGridRenderer\nprivate renderDualRow(ctx, range, layout) {\n  const codonStart = Math.floor(range.startIndex / 3) * 3;\n  \n  for (let i = codonStart; i \u003c range.endIndex; i += 3) {\n    // Render DNA row (3 nucleotides)\n    this.renderCodon(ctx, i, rowY: 0);\n    \n    // Render AA row (1 amino acid centered)\n    const aa = translateCodon(sequence.slice(i, i+3));\n    this.renderAA(ctx, aa, i, rowY: 1);\n  }\n}\n```\n\n## Files to Modify\n\n- `/packages/web/src/rendering/CanvasSequenceGridRenderer.ts` - Add dual-row render path\n- `/packages/state/src/store.ts` - Add dual view mode\n- `/packages/web/src/components/SequenceView.tsx` - Add UI toggle for dual mode\n- `/packages/web/src/hooks/useSequenceGrid.ts` - Support dual mode\n\n## Cell Sizing for Dual Mode\n\n| Zoom Level | DNA Cell | AA Cell | Total Row Height |\n|------------|----------|---------|------------------|\n| Codon (1.0x) | 8×10px | 24×12px | 24px |\n| Base (2.0x) | 16×16px | 48×18px | 36px |\n| Ultra (4.0x) | 32×24px | 96×28px | 56px |\n\n## Visual Design\n\n- DNA row: Standard nucleotide colors\n- AA row: Property-based coloring (hydrophobic=yellow, polar=green, charged=blue/red)\n- Codon boundaries: Subtle 1px line every 3bp\n- Reading frame indicator: Highlight current frame offset\n\n## Dependencies\n\n- Core translateCodon function (exists in @phage-explorer/core)\n- GlyphAtlas (for AA rendering)\n- Store update for new view mode\n","status":"in_progress","priority":1,"issue_type":"task","created_at":"2025-12-09T00:35:13.977114-05:00","updated_at":"2025-12-09T00:53:34.356984-05:00","dependencies":[{"issue_id":"phage_explorer-9wby","depends_on_id":"phage_explorer-5ozb","type":"blocks","created_at":"2025-12-09T00:40:30.161193-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-9wno","title":"Fix canvas sequence grid scaling and reduced-motion update","description":"CanvasSequenceGridRenderer scales 2D context on every resize (no reset), causing exponential transform and blurry rendering. reducedMotion/postProcess changes are ignored because renderer is not updated after init. Fix: reset transforms on resize; add setter methods; update hook to propagate reducedMotion/postProcess and rebuild on scanlines/glow/postProcess changes.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-08T00:23:50.262024-05:00","updated_at":"2025-12-08T00:41:27.752157-05:00","closed_at":"2025-12-08T00:41:27.752157-05:00"}
{"id":"phage_explorer-a0v","title":"[WEB-P0] Create base animation timing functions and keyframes","description":"Define CSS animation timing functions, durations, and reusable keyframe animations","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-07T16:59:26.894007-05:00","updated_at":"2025-12-07T17:24:34.831685-05:00","closed_at":"2025-12-07T17:24:34.831685-05:00","dependencies":[{"issue_id":"phage_explorer-a0v","depends_on_id":"phage_explorer-aq6","type":"blocks","created_at":"2025-12-07T17:04:45.332403-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-a2e8","title":"Integrate InfoButtons into existing overlays","description":"Add InfoButton components to key locations in existing analysis overlays. Target areas: chart legends, technical headers, unfamiliar terms. Conditional render based on beginnerMode state. Approximately 15-20 integration points across overlays.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-09T11:47:42.013143-05:00","updated_at":"2025-12-09T11:47:42.013143-05:00","dependencies":[{"issue_id":"phage_explorer-a2e8","depends_on_id":"phage_explorer-lgad","type":"blocks","created_at":"2025-12-09T11:47:56.677345-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-a2e8","depends_on_id":"phage_explorer-x7uu","type":"blocks","created_at":"2025-12-09T11:47:56.84697-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-a3ws","title":"[WEB-P3] Implement fuzzy search algorithm (fzy-style)","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-07T17:01:39.245667-05:00","updated_at":"2025-12-08T00:15:47.209901-05:00","closed_at":"2025-12-08T00:15:47.209901-05:00","dependencies":[{"issue_id":"phage_explorer-a3ws","depends_on_id":"phage_explorer-f4t","type":"blocks","created_at":"2025-12-07T17:07:30.392226-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-a70g","title":"LOD system for mobile 3D performance","description":"","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-09T00:40:32.248757-05:00","updated_at":"2025-12-09T00:40:32.248757-05:00","dependencies":[{"issue_id":"phage_explorer-a70g","depends_on_id":"phage_explorer-ba4h","type":"blocks","created_at":"2025-12-09T00:40:53.759994-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-a8i","title":"[WEB-P1] Setup sql.js WASM loading with proper paths","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-07T16:57:57.370152-05:00","updated_at":"2025-12-07T17:50:54.195251-05:00","closed_at":"2025-12-07T17:50:54.195251-05:00","dependencies":[{"issue_id":"phage_explorer-a8i","depends_on_id":"phage_explorer-pmb","type":"blocks","created_at":"2025-12-07T17:04:39.830843-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-adf","title":"[WEB-P2] Pre-render nucleotide characters (ACGTN)","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-07T16:58:13.793674-05:00","updated_at":"2025-12-07T18:01:23.06569-05:00","closed_at":"2025-12-07T18:01:23.06569-05:00","dependencies":[{"issue_id":"phage_explorer-adf","depends_on_id":"phage_explorer-53f","type":"blocks","created_at":"2025-12-07T17:05:05.019227-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-afrs","title":"[WEB-P3] Organize options by category","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-07T17:01:50.463942-05:00","updated_at":"2025-12-08T00:16:49.093919-05:00","closed_at":"2025-12-08T00:16:49.093919-05:00","dependencies":[{"issue_id":"phage_explorer-afrs","depends_on_id":"phage_explorer-hg7","type":"blocks","created_at":"2025-12-07T17:07:31.691155-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-afrs","depends_on_id":"phage_explorer-mquh","type":"blocks","created_at":"2025-12-07T17:07:58.31615-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-aiqn","title":"Pillar 8: Performance and Offline Support","description":"","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-09T00:36:06.722568-05:00","updated_at":"2025-12-09T00:36:06.722568-05:00","dependencies":[{"issue_id":"phage_explorer-aiqn","depends_on_id":"phage_explorer-xivy","type":"blocks","created_at":"2025-12-09T00:37:36.572262-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-ao55","title":"Pillar 3: Foundational Knowledge Modules","description":"## Core Educational Lessons\n\n### What This Creates\nFive standalone educational modules that can be accessed from a 'Learn' menu or linked from context help.\n\n### Module 1: What Is a Bacteriophage?\n**Content:**\n- Phages as bacterial viruses (most abundant biological entities on Earth)\n- Basic structure: head (capsid), tail, tail fibers\n- Size context (nanometers, smaller than bacteria)\n- Historical significance (Hershey-Chase, genetic code discovery)\n- Modern relevance (phage therapy, biotechnology tools)\n\n**Visuals:**\n- Annotated phage diagram (T4-like, filamentous, tailless)\n- Size comparison (phage vs bacteria vs human cell)\n- Electron microscopy gallery\n\n### Module 2: DNA Basics for Engineers\n**Content:**\n- DNA as information storage (compare to binary/text encoding)\n- Four bases (A, T, G, C) as alphabet\n- Double helix structure and base pairing rules\n- Directionality (5' to 3') - like reading direction\n- Complementary strands\n\n**Visuals:**\n- Animated base pairing (A-T, G-C)\n- Interactive double helix (rotate, zoom)\n- ASCII art comparison (ATGC vs 01)\n\n### Module 3: The Central Dogma\n**Content:**\n- DNA → RNA → Protein pipeline\n- Transcription (DNA to mRNA)\n- Translation (mRNA to protein)\n- Why this matters (sequence predicts function)\n- Phage context (minimal genomes, overlapping genes)\n\n**Visuals:**\n- Animated flow diagram\n- Ribosome 'reading' mRNA\n- Before/after: sequence vs protein\n\n### Module 4: The Genetic Code\n**Content:**\n- Codons as 3-letter words (64 combinations, 20 amino acids)\n- Degeneracy (multiple codons → same amino acid)\n- Start/stop codons\n- Reading frames (shift by 1 → completely different protein)\n- Why codon bias matters\n\n**Visuals:**\n- Interactive codon wheel/table\n- Reading frame shifter demo\n- Amino acid property wheel\n\n### Module 5: Phage Lifecycle\n**Content:**\n- Lytic cycle (attach → inject → replicate → lyse)\n- Lysogenic cycle (integrate → dormant → trigger)\n- Temperate vs virulent phages\n- Why this affects analysis (prophages in bacterial genomes)\n\n**Visuals:**\n- Animated infection cycle\n- Lambda decision circuit simplified\n- Prophage integration diagram\n\n### Technical Implementation\n- Each module as separate component with internal navigation\n- Progress tracking (which modules completed)\n- Cross-links to glossary terms\n- 'Try it' sections linking to actual app features\n\n### Files to Create\n- packages/web/src/education/modules/WhatIsPhage.tsx\n- packages/web/src/education/modules/DNABasics.tsx\n- packages/web/src/education/modules/CentralDogma.tsx\n- packages/web/src/education/modules/GeneticCode.tsx\n- packages/web/src/education/modules/PhageLifecycle.tsx\n- packages/web/src/education/modules/ModuleViewer.tsx (container)\n- packages/web/src/education/modules/index.ts\n\n### Why These Five\nThese modules cover the minimum knowledge needed to understand what Phage Explorer shows. They build on each other: phages → DNA → central dogma → genetic code → lifecycle.","status":"open","priority":1,"issue_type":"feature","created_at":"2025-12-09T11:32:54.277351-05:00","updated_at":"2025-12-09T11:32:54.277351-05:00","dependencies":[{"issue_id":"phage_explorer-ao55","depends_on_id":"phage_explorer-ty1n","type":"blocks","created_at":"2025-12-09T11:32:54.279422-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-aq6","title":"[WEB-P0] CSS Foundation: Reset, Typography, Base Styles","description":"Create CSS reset, typography scale, base variables. Self-host JetBrains Mono font. Configure font-feature-settings for code. Add scanline overlay class.","status":"closed","priority":0,"issue_type":"feature","created_at":"2025-12-07T16:57:58.242169-05:00","updated_at":"2025-12-07T17:24:40.294528-05:00","closed_at":"2025-12-07T17:24:40.294528-05:00","dependencies":[{"issue_id":"phage_explorer-aq6","depends_on_id":"phage_explorer-87z","type":"blocks","created_at":"2025-12-07T17:04:26.644259-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-as5q","title":"[WEB-P6] First-Run Onboarding: Welcome \u0026 Tour","description":"Welcome modal, experience level selection, feature tour with highlights, quick keyboard primer. Progressive discovery tooltips.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-07T17:01:24.718353-05:00","updated_at":"2025-12-07T22:26:04.013702-05:00","closed_at":"2025-12-07T22:26:04.013702-05:00","dependencies":[{"issue_id":"phage_explorer-as5q","depends_on_id":"phage_explorer-zsi","type":"blocks","created_at":"2025-12-07T17:07:21.160649-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-aufx","title":"[WEB-P6] Write user guide (all features)","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-07T17:02:35.601035-05:00","updated_at":"2025-12-08T00:42:08.38829-05:00","closed_at":"2025-12-08T00:42:08.38829-05:00","dependencies":[{"issue_id":"phage_explorer-aufx","depends_on_id":"phage_explorer-gwhv","type":"blocks","created_at":"2025-12-07T17:09:47.93958-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-auzp","title":"[WEB-P3] Port sequence complexity overlay [X key]","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-07T17:02:10.092654-05:00","updated_at":"2025-12-07T18:31:17.414696-05:00","closed_at":"2025-12-07T18:31:17.414696-05:00","dependencies":[{"issue_id":"phage_explorer-auzp","depends_on_id":"phage_explorer-7wzv","type":"blocks","created_at":"2025-12-07T17:07:35.025726-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-axn","title":"Advanced: Periodicity \u0026 Tandem Repeat Wavelet Spectrogram","description":"Detect tandem repeats, packaging motifs, and promoter periodicities via wavelets/FFT. CWT in Rust+WASM with peak picking for dominant periods/phases. Braille spectrogram under sequence grid with cursor showing period/phase. Finds periodic signals missed by motifs; links to packaging/regulation. Novelty: High, Pedagogical: High (spectral analysis, signal processing).","notes":"## PERIODICITY \u0026 TANDEM REPEAT WAVELET SPECTROGRAM\n\n**Full Implementation from Roadmap**\n\n### Mathematical Foundations\n\n**Continuous Wavelet Transform (CWT):**\n```\nW_f(a,b) = (1/√a) ∫ f(x) · ψ*((x-b)/a) dx\n\nwhere:\n- f(x): DNA signal (A=0, C=1, G=2, T=3 or purine/pyrimidine encoding)\n- ψ: Mother wavelet (Morlet: ψ(x) = e^(iω₀x) · e^(-x²/2))\n- a: Scale (inversely related to frequency/period)\n- b: Position (translation)\n```\n\n**Scale-to-Period Conversion (Morlet):**\n```\nPeriod(a) = (4π × a) / (ω₀ + √(2 + ω₀²))\nTypical scales: a ∈ [2, 256] for periods 2-256 bp\n```\n\n**Power Spectrogram \u0026 Peak Detection:**\n```\nP(a,b) = |W_f(a,b)|²\nisPeak(a,b) = P(a,b) \u003e P(a±1, b±1) AND P(a,b) \u003e threshold × median(P)\n```\n\n**Tandem Repeat Detection via Autocorrelation:**\n```\nR(τ) = Σᵢ f(i) · f(i+τ)\nTR_period = argmax_τ R(τ) for τ ∈ [2, 100]\n```\n\n### Complete TypeScript Implementation\n\n- `WaveletSpectrum` interface (scales, periods, positions, power matrix, peaks)\n- `SpectralPeak` with position, period, power, phase, annotation\n- `TandemRepeat` with start, end, period, copies, consensus unit, purity\n- `encodeDNA()` with numeric/purine/amino encodings\n- `morletWavelet()` complex wavelet function\n- `cwtPoint()` single point computation with Gaussian support\n- `computeCWT()` full spectrogram generation\n- `scaleToPeriod()` conversion function\n- `findSpectralPeaks()` with local maxima and significance threshold\n- `detectTandemRepeats()` autocorrelation-based detection\n- `mergeOverlapping()` for tandem repeat consolidation\n- `analyzePeriodicty()` full analysis pipeline\n- `annotatePeriod()` biological interpretation (codon, helix, promoter)\n- `renderSpectrogramASCII()` braille block visualization\n\n### Biological Periodicities Detected\n\n| Period | Interpretation |\n|--------|----------------|\n| 3 bp | Codon periodicity (coding regions) |\n| 10-11 bp | DNA helical pitch (packaging signals) |\n| 35-45 bp | Promoter spacing (σ factor architecture) |\n| 2-6 bp | Short tandem repeats |\n| 7-20 bp | Microsatellites |\n| 21-100 bp | Minisatellites |\n\n### TUI Features\n- Braille spectrogram strip (period vs position)\n- Scrolling synchronized with main sequence view\n- Dominant periodicities table with strength bars\n- Tandem repeats list with position, period, copies, consensus\n- Cursor shows period and phase at current position\n- [←/→] Move cursor, [P] Jump to peak, [T] Jump to repeat\n\n### Implementation Stack\n- Rust+WASM for CWT (realfft crate) for large genomes\n- TS FFT fallback (fft.js) for small genomes\n- SQLite cache for spectrogram tiles\n- Braille block character rendering (⠀⠁⠂⠃⠄⠅⠆⠇⡀⡁...)\n\nNovelty: 9/10, Pedagogical: 9/10, Wow Factor: 9/10","status":"open","priority":3,"issue_type":"feature","created_at":"2025-12-06T23:53:22.418534-05:00","updated_at":"2025-12-07T13:24:37.691715-05:00","dependencies":[{"issue_id":"phage_explorer-axn","depends_on_id":"phage_explorer-54g","type":"blocks","created_at":"2025-12-06T23:56:51.351465-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-b2er","title":"Task: Create WhatIsPhage module","description":"Educational module: What is a bacteriophage? Covers structure (capsid, tail, fibers), size context, historical significance (Hershey-Chase), modern applications (phage therapy). Include annotated phage diagram, size comparison visual, EM gallery.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-09T11:44:15.142025-05:00","updated_at":"2025-12-09T11:44:15.142025-05:00","dependencies":[{"issue_id":"phage_explorer-b2er","depends_on_id":"phage_explorer-ao55","type":"blocks","created_at":"2025-12-09T11:44:15.143421-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-b2er","depends_on_id":"phage_explorer-3zpa","type":"blocks","created_at":"2025-12-09T11:44:15.144549-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-b4f","title":"[WEB-P0] Create main content container with flex layout","description":"Build main content area with flexible layout system for routing different views","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-07T16:59:09.378054-05:00","updated_at":"2025-12-07T17:33:34.219401-05:00","closed_at":"2025-12-07T17:33:34.219401-05:00","dependencies":[{"issue_id":"phage_explorer-b4f","depends_on_id":"phage_explorer-5c4","type":"blocks","created_at":"2025-12-07T17:04:43.111048-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-b9h","title":"[WEB-P1] Test query result parity with Node SQLite","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-07T16:57:59.554928-05:00","updated_at":"2025-12-07T17:51:14.687762-05:00","closed_at":"2025-12-07T17:51:14.687762-05:00","dependencies":[{"issue_id":"phage_explorer-b9h","depends_on_id":"phage_explorer-pmb","type":"blocks","created_at":"2025-12-07T17:04:40.009615-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-b9h","depends_on_id":"phage_explorer-cla","type":"blocks","created_at":"2025-12-07T17:05:02.639627-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-ba4h","title":"Pillar 7: 3D Visualization Mobile Optimization","description":"","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-09T00:36:06.118553-05:00","updated_at":"2025-12-09T00:36:06.118553-05:00","dependencies":[{"issue_id":"phage_explorer-ba4h","depends_on_id":"phage_explorer-xivy","type":"blocks","created_at":"2025-12-09T00:37:33.594043-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-baxt","title":"[WEB-P4] Configure Comlink for type-safe messaging","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-07T17:01:40.365818-05:00","updated_at":"2025-12-07T18:42:45.526524-05:00","closed_at":"2025-12-07T18:42:45.526524-05:00","dependencies":[{"issue_id":"phage_explorer-baxt","depends_on_id":"phage_explorer-ru4","type":"blocks","created_at":"2025-12-07T17:07:27.035815-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-baxt","depends_on_id":"phage_explorer-r9fa","type":"blocks","created_at":"2025-12-07T17:08:57.621322-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-bbd","title":"[WEB-P1] Add saveToCache for storing decompressed DB","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-07T16:58:17.943107-05:00","updated_at":"2025-12-07T17:51:04.396691-05:00","closed_at":"2025-12-07T17:51:04.396691-05:00","dependencies":[{"issue_id":"phage_explorer-bbd","depends_on_id":"phage_explorer-qlo","type":"blocks","created_at":"2025-12-07T17:04:43.130802-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-bbf4","title":"Create TourEngine component","description":"Reusable tour system that highlights UI elements, shows instructional tooltips, and guides users step-by-step. Features: focus masking, step navigation, skip/exit options, progress indicator, keyboard navigation. Tours defined in JSON format for easy authoring.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-09T11:47:08.94275-05:00","updated_at":"2025-12-09T11:47:08.94275-05:00","dependencies":[{"issue_id":"phage_explorer-bbf4","depends_on_id":"phage_explorer-owsv","type":"blocks","created_at":"2025-12-09T11:47:19.085606-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-be3","title":"Advanced: Phage-Defense Arms Race Scanner","description":"Advanced: Integrate host defense genes (CRISPR arrays, RM, Abi) with phage anti-defense (anti-CRISPRs, Ocr-like, anti-RM) to visualize coevolutionary escalation. Shows who counters what.\n\n**Build Plan:**\n- Parse host defenses from provided host genomes/metadata\n- Scan phages for anti-defense HMMs (AcrDB, Ocr-like) and methyltransferases\n- Score matches (phage defense vs host counter-defense)\n- Store pairs in SQLite\n- Light inference in TS; heavy HMM in Rust+WASM\n\n**Defense/Counter-Defense Pairs:**\n- CRISPR ↔ Anti-CRISPR (Acr proteins)\n- Type I RM ↔ Ocr/Ral methyltransferases\n- Type II RM ↔ Dam/Dcm methylases\n- Abi systems ↔ Anti-Abi proteins\n\n**TUI Visualization:**\n- Bipartite defense map with 'who counters what'\n- Timeline bar if isolation dates known\n- Meter indicating 'defense pressure' vs 'counter strength'\n- Gene highlighting when hovering interactions\n\nNovelty: 9/10, Pedagogical: 9/10, Cool Factor: 9/10.","notes":"## PHAGE-DEFENSE ARMS RACE DASHBOARD\n\n### Concept\nSummarize anti-CRISPRs, RM evasion motifs, Abi counters, retron/CBASS hits, and Sie systems; score offense/defense balance per phage.\n\n### How to Build\n- **Detection**: HMMER for anti-CRISPR families; motif scans for RM evasion; domain scans for Abi/CBASS/retron; Sie heuristics on membrane proteins\n- **Scoring**: Weighted offense/defense index; store with gene links\n- **Cross-phage compare**: Rank phages by offense/defense; show missing counters\n\n### Why It's Good\nOffers an immediate strategic view of how a phage deals with host defenses; guides cocktail design.\n\n### Implementation Stack\nHMMER precompute; TS scoring; SQLite cache; Ink radar/stacked bars; all CPU, no GPU.\n\n### TUI Visualization\nRadar/stacked bars for offense vs defense; clicking a wedge jumps to the gene; \"missing counter\" badges with suggestions.\n\n### Files\n- packages/core/src/analysis/arms-race.ts\n- packages/tui/src/components/ArmsRaceDashboard.tsx","status":"in_progress","priority":2,"issue_type":"feature","created_at":"2025-12-06T23:20:17.595944-05:00","updated_at":"2025-12-08T20:56:14.960231-05:00","dependencies":[{"issue_id":"phage_explorer-be3","depends_on_id":"phage_explorer-54g","type":"blocks","created_at":"2025-12-06T23:20:17.596973-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-bfq","title":"[WEB-P2] Render gene blocks with strand colors","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-07T16:58:34.168092-05:00","updated_at":"2025-12-07T18:03:55.866727-05:00","closed_at":"2025-12-07T18:03:55.866727-05:00","dependencies":[{"issue_id":"phage_explorer-bfq","depends_on_id":"phage_explorer-rvg","type":"blocks","created_at":"2025-12-07T17:05:12.168784-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-biws","title":"[WEB-P6] Create feature tour with highlight overlays","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-07T17:02:06.410958-05:00","updated_at":"2025-12-08T00:14:41.080931-05:00","closed_at":"2025-12-08T00:14:41.080931-05:00","dependencies":[{"issue_id":"phage_explorer-biws","depends_on_id":"phage_explorer-as5q","type":"blocks","created_at":"2025-12-07T17:09:20.381238-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-bjoz","title":"Phase 3: Analysis Overlays","description":"## Overview\n\nImplement all 31 analysis overlay types that exist in the TUI, transforming ASCII visualizations into rich Canvas/WebGL graphics.\n\n## Why This Phase Matters\n\nAnalysis overlays are the **core value proposition** of Phage Explorer. They transform raw sequence data into biological insights through:\n- Statistical analysis (GC skew, complexity, k-mer anomalies)\n- Structural predictions (bendability, promoters, non-B DNA)\n- Evolutionary signals (HGT, selection pressure, codon bias)\n- Visual patterns (dot plots, CGR, Hilbert curves)\n\nWithout these, the app is just a sequence viewer.\n\n## Current State\n\n### Tier 1: Already Started (8 overlays)\nThese exist in web but may need completion/enhancement:\n- ✅ GCSkewOverlay - GC skew across genome\n- ✅ ComplexityOverlay - Entropy/complexity analysis\n- ✅ BendabilityOverlay - DNA bendability profile\n- ✅ PromoterOverlay - Promoter site predictions\n- ✅ RepeatsOverlay - Repeat finder visualization\n- ✅ KmerAnomalyOverlay - K-mer anomaly heatmap\n- ✅ ModuleOverlay - Functional module mapping\n- ✅ TranscriptionFlowOverlay - Expression program flow\n\n### Tier 2: Missing (17 overlays)\nThese need to be created from scratch:\n- PackagingPressureOverlay - DNA packaging constraints\n- VirionStabilityOverlay - Virion structural stability\n- PhasePortraitOverlay - AA property PCA scatter\n- BiasDecompositionOverlay - Codon bias PCA\n- HGTOverlay - Horizontal gene transfer islands\n- CRISPROverlay - CRISPR spacer mapping\n- SyntenyOverlay - Gene order conservation\n- TropismOverlay - Host receptor predictions\n- StructureConstraintOverlay - RNA structure constraints\n- NonBDNAOverlay - G-quadruplex, Z-DNA, cruciform\n- AnomalyOverlay - Statistical anomaly detection\n- DotPlotOverlay - Self-similarity matrix\n- CGROverlay - Chaos Game Representation\n- HilbertOverlay - Hilbert curve visualization\n- GelOverlay - Virtual gel electrophoresis\n\n### Supporting Components (3 additional)\n- AAKeyOverlay - Amino acid color reference\n- AALegend - Compact AA legend\n- SearchOverlay - Phage search interface\n\n## Architecture Pattern\n\nAll overlays follow a consistent pattern:\n\n```typescript\nexport function [Name]Overlay() {\n  // 1. Get sequence from store\n  const sequence = usePhageStore(s =\u003e s.currentPhage?.sequence ?? '');\n  \n  // 2. Get or compute analysis data (via worker)\n  const data = useAnalysisResult('[name]', sequence);\n  \n  // 3. Render with standard overlay wrapper\n  return (\n    \u003cOverlay title=\"[Name] Analysis\" onClose={...}\u003e\n      \u003cAnalysisCanvas data={data} /\u003e\n      \u003cStatisticsPanel data={data} /\u003e\n    \u003c/Overlay\u003e\n  );\n}\n```\n\n## Visualization Upgrades (ASCII → Canvas)\n\n| TUI ASCII | Web Canvas | Enhancement |\n|-----------|-----------|-------------|\n| Text sparklines | Sparkline.tsx | Smooth curves, hover values |\n| ASCII heatmaps | HeatmapCanvas | Color gradients, zoom |\n| Text scatter plots | ScatterCanvas | Interactive PCA exploration |\n| Box-drawing charts | SVG/Canvas | Animation, interactivity |\n| ASCII dot matrix | Canvas ImageData | Full resolution |\n\n## Dependencies\n\n- **Depends on**: Phase 1 (database), Phase 2 (core views for context)\n- **Blocks**: None directly, but needed for feature parity\n\n## Success Criteria\n\n- [ ] All 8 Tier 1 overlays fully functional\n- [ ] All 17 Tier 2 overlays implemented\n- [ ] Each overlay has Canvas-based visualization\n- [ ] Analysis runs in Web Worker (non-blocking)\n- [ ] Loading states while computing\n- [ ] Can trigger overlays via keyboard shortcuts\n- [ ] Menu system lists all available overlays\n\n## Files to Create\n\n```\npackages/web/src/components/overlays/\n├── PackagingPressureOverlay.tsx\n├── VirionStabilityOverlay.tsx\n├── PhasePortraitOverlay.tsx\n├── BiasDecompositionOverlay.tsx\n├── HGTOverlay.tsx\n├── CRISPROverlay.tsx\n├── SyntenyOverlay.tsx\n├── TropismOverlay.tsx\n├── StructureConstraintOverlay.tsx\n├── NonBDNAOverlay.tsx\n├── AnomalyOverlay.tsx\n├── DotPlotOverlay.tsx\n├── CGROverlay.tsx\n├── HilbertOverlay.tsx\n├── GelOverlay.tsx\n├── SearchOverlay.tsx\n├── AAKeyOverlay.tsx\n└── AALegend.tsx\n```\n\n## Estimated Complexity: High\n\nThis is the largest phase by file count. However, each overlay follows a similar pattern, making it parallelizable.","status":"closed","priority":2,"issue_type":"epic","created_at":"2025-12-08T12:54:57.593613-05:00","updated_at":"2025-12-09T11:35:27.227544-05:00","closed_at":"2025-12-09T11:35:27.227544-05:00","dependencies":[{"issue_id":"phage_explorer-bjoz","depends_on_id":"phage_explorer-qiaq","type":"blocks","created_at":"2025-12-08T12:55:22.720971-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-bjoz.1","title":"PhasePortraitOverlay - Amino acid property PCA scatter plot","description":"Implement overlay for visualizing amino acid usage patterns through PCA-based phase portrait analysis.\n\n## Biological Significance\nAmino acid usage reflects:\n- Codon optimization strategies\n- tRNA availability in host\n- Protein structural preferences\n- Evolutionary adaptation signatures\n- Horizontal gene transfer events (HGT clusters separately)\n\nPhase portraits reveal global proteome organization and identify genes with unusual compositional properties that may indicate recent HGT or specialized functions.\n\n## Visualization Type\nInteractive 2D scatter plot (PCA phase space):\n- Each point = one ORF/protein\n- X-axis: PC1 (primary variation, typically hydrophobicity)\n- Y-axis: PC2 (secondary variation, often charge/size)\n- Color coding by: functional category, GC%, or expression level\n- Interactive selection and zoom\n- Outlier highlighting\n\n## Worker Integration\nCreate `workers/phase-portrait-worker.ts`:\n- Extract amino acid composition for each ORF (20-dimensional vectors)\n- Compute PCA transformation (reduce to 2-3 dimensions)\n- Calculate loadings to interpret PC axes\n- Identify outliers using Mahalanobis distance\n- Cluster genes by AA usage patterns\n- Correlate with other features (GC%, position, function)\n\n## Implementation Details\n\n### Files to Create\n1. `src/tui/overlays/PhasePortraitOverlay.tsx`\n   - Interactive scatter plot using ScatterCanvas primitive\n   - Point selection and highlighting\n   - Axis labels with PC variance explained\n   - Loading vectors display (which AAs drive each PC)\n   - Outlier annotations\n\n2. `src/workers/phase-portrait-worker.ts`\n   - AA composition calculation\n   - PCA implementation (eigen decomposition)\n   - Outlier detection algorithms\n   - Clustering (k-means or DBSCAN)\n   - Feature correlation analysis\n\n### Dependencies\n- **Requires**: Visualization primitives task (ScatterCanvas.tsx)\n- Set dependency after primitives task is created\n\n### Keyboard Shortcut\n- **Alt+Shift+P** - Toggle phase portrait overlay\n\n### Data Flow\n1. User activates overlay (Alt+Shift+P)\n2. Worker receives all ORF sequences\n3. Worker computes:\n   - 20-dimensional AA frequency vectors for each ORF\n   - PCA transformation matrix\n   - PC scores for all ORFs\n   - Variance explained by each PC\n   - Loading vectors (AA contributions)\n4. Worker identifies outliers (\u003e3σ from centroid)\n5. UI renders scatter plot with interactive features\n6. User can:\n   - Hover to see ORF details\n   - Click to highlight ORF in main viewer\n   - Toggle color schemes\n   - View loading vectors\n\n## Display Features\n- **Scatter points**: ORFs positioned by PC1/PC2 scores\n- **Color schemes**: \n  - Functional category (structural, replication, lysis, etc.)\n  - GC% gradient\n  - Expression level (if predicted)\n  - Outlier status\n- **Loadings biplot**: Arrows showing AA contributions to PCs\n- **Variance info**: \"PC1: 45.2% variance, PC2: 23.1% variance\"\n- **Outlier labels**: Annotate unusual genes\n\n## Biological Interpretation Guide\n- **PC1 typically represents**: Hydrophobicity vs hydrophilicity\n- **PC2 typically represents**: Charge or size patterns\n- **Tight cluster**: Core conserved genes with host-adapted codon usage\n- **Outliers**: Potential HGT, recent acquisition, or specialized function\n\n## Testing Considerations\n- Validate with phages containing known HGT regions\n- Compare PC loadings with standard AA property scales\n- Check clustering against functional annotations","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T12:59:54.870611-05:00","updated_at":"2025-12-09T01:16:06.065315-05:00","closed_at":"2025-12-09T01:16:06.065315-05:00","dependencies":[{"issue_id":"phage_explorer-bjoz.1","depends_on_id":"phage_explorer-bjoz","type":"parent-child","created_at":"2025-12-08T12:59:54.872069-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-bjoz.1","depends_on_id":"phage_explorer-bjoz.7","type":"blocks","created_at":"2025-12-08T13:09:46.335604-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-bjoz.10","title":"StructureConstraintOverlay - RNA structure constraints","description":"Implement overlay for predicting and visualizing RNA secondary structure constraints that affect genome organization and expression.\n\n## Biological Significance\nRNA structures in phage genomes serve critical roles:\n- Ribosome binding sites (RBS) for translation initiation\n- Transcription terminators (rho-independent)\n- Riboswitches and regulatory elements\n- Packaging signals (pac sites)\n- Anti-sense regulation between overlapping genes\n\nThis overlay reveals hidden functional RNA elements through thermodynamic folding predictions.\n\n## Visualization Type\nMulti-layer visualization:\n- **Structure heatmap**: Base-pairing probability matrix (triangular)\n- **Energy landscape**: Minimum free energy (MFE) profile across genome\n- **Secondary structure diagrams**: Arc plots for high-confidence structures\n- **Functional element annotations**: RBS, terminators, riboswitches\n- **Conservation track**: Structure conservation in related phages\n\n## Worker Integration\nCreate `workers/structure-worker.ts`:\n- RNA secondary structure prediction (Vienna RNAfold algorithm)\n- Base-pairing probability calculations\n- Minimum free energy (MFE) sliding windows\n- RBS detection (Shine-Dalgarno sequences)\n- Terminator prediction (stem-loop + poly-U)\n- Riboswitch motif scanning\n- Structure conservation analysis\n\n## Implementation Details\n\n### Files to Create\n1. `src/tui/overlays/StructureConstraintOverlay.tsx`\n   - Triangular heatmap for pairing probabilities (HeatmapCanvas)\n   - Arc diagram for secondary structures (ArcDiagram)\n   - Energy profile plot\n   - Functional element track\n   - Interactive structure browser\n\n2. `src/workers/structure-worker.ts`\n   - RNA folding algorithms (implement simplified Vienna/Nussinov)\n   - Energy parameter tables (Turner 2004 model)\n   - RBS detection (sequence motifs + spacing)\n   - Terminator prediction (stem-loop energy + U-tract)\n   - Riboswitch HMMs (Rfam database)\n\n### Dependencies\n- **Requires**: Visualization primitives task (HeatmapCanvas, ArcDiagram)\n\n### Keyboard Shortcut\n- **Alt+R** - Toggle structure constraint overlay\n\n### Data Flow\n1. User activates overlay (Alt+R)\n2. Worker receives genome sequence (DNA → transcribed to RNA)\n3. Worker performs sliding window analysis (200-500 nt windows):\n   - Predict secondary structure (MFE and suboptimal)\n   - Calculate base-pairing probabilities\n   - Compute ensemble free energies\n4. Worker detects functional elements:\n   - Scan for RBS upstream of ORFs (16S rRNA complementarity)\n   - Identify terminators downstream of genes\n   - Search for riboswitch motifs\n5. Worker generates pairing probability matrix\n6. UI renders multi-layer visualization\n7. User can:\n   - Zoom into regions\n   - Click structure to see details\n   - Toggle functional element highlights\n\n## Display Layers\n\n### 1. Base-Pairing Probability Heatmap\n- Triangular matrix (position i vs position j)\n- Color intensity = pairing probability (0-1)\n- Strong pairs (\u003e0.9) = dark blue\n- Weak pairs (\u003c0.3) = light blue/white\n\n### 2. MFE Energy Profile\n- Line graph showing ΔG per window\n- More negative = more stable structures\n- Peaks indicate unstable regions (regulatory?)\n\n### 3. Secondary Structure Arcs\n- Arc diagram connecting paired bases\n- Arc height = pairing distance\n- Color by pairing type (GC, AU, GU wobble)\n- Only show high-confidence pairs (\u003e0.8)\n\n### 4. Functional Element Track\n- **RBS**: Green boxes upstream of ORFs\n- **Terminators**: Red stem-loop symbols\n- **Riboswitches**: Purple boxes with motif name\n- **Packaging signals**: Orange markers\n\n### 5. Conservation Track (if multi-genome)\n- Compare structure conservation vs sequence conservation\n- Compensatory mutations indicate functional structures\n\n## RNA Folding Algorithm\nUse dynamic programming approach (Nussinov or simplified Vienna):\n1. Initialize DP matrix for base-pairing\n2. Apply thermodynamic parameters (stacking, loops, bulges)\n3. Trace back to find MFE structure\n4. Calculate partition function for probabilities\n5. Identify suboptimal structures within 10% of MFE\n\n## Functional Element Detection\n\n### RBS (Ribosome Binding Site)\n- Scan -20 to -5 nt upstream of start codons\n- Look for Shine-Dalgarno: AGGAGG (allow 1 mismatch)\n- Calculate spacing to AUG (optimal 5-9 nt)\n- Check for secondary structure occlusion\n\n### Terminators\n- Scan downstream of stop codons\n- Detect stem-loop (ΔG \u003c -10 kcal/mol)\n- Check for poly-U tract (≥4 U's after stem)\n- Intrinsic (rho-independent) vs rho-dependent\n\n### Riboswitches\n- Scan with Rfam covariance models\n- Common in prophages: TPP, FMN, SAM riboswitches\n- Detect conserved structure + sequence motifs\n\n## Performance Optimization\n- Pre-compute energy tables\n- Use sparse matrix for pairing probabilities\n- Limit window size for long genomes (\u003e100 kb)\n- Web Worker offloading for heavy calculations\n\n## Scientific References\n- Zuker \u0026 Stiegler (1981) RNA folding algorithm\n- Turner et al. (2004) Thermodynamic parameters\n- Rfam database for riboswitch motifs\n- Stormo et al. (1982) RBS prediction\n\n## Testing Considerations\n- Validate RBS predictions with experimental data\n- Compare terminator predictions with RNA-seq data\n- Check structure predictions against crystallographic data (if available)\n- Test performance with large genomes (T4 ~170 kb)","status":"closed","priority":2,"issue_type":"task","assignee":"GreenBear","created_at":"2025-12-08T13:03:04.440808-05:00","updated_at":"2025-12-09T08:40:00.231875-05:00","closed_at":"2025-12-09T08:40:00.231875-05:00","dependencies":[{"issue_id":"phage_explorer-bjoz.10","depends_on_id":"phage_explorer-bjoz","type":"parent-child","created_at":"2025-12-08T13:03:04.442199-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-bjoz.10","depends_on_id":"phage_explorer-qiaq","type":"blocks","created_at":"2025-12-08T13:03:04.443185-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-bjoz.10","depends_on_id":"phage_explorer-bjoz.7","type":"blocks","created_at":"2025-12-08T13:09:51.712155-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-bjoz.11","title":"NonBDNAOverlay - G-quadruplex, Z-DNA, cruciform structures","description":"Implement overlay for detecting and visualizing non-B-form DNA structures including G-quadruplexes, Z-DNA, and cruciform structures in phage genomes.\n\n## Biological Significance\nNon-B-DNA structures have important biological roles:\n- **G-quadruplexes (G4)**: Regulatory elements, affect transcription/replication\n- **Z-DNA**: Left-handed helix, forms in high-GC regions under torsional stress\n- **Cruciforms**: Hairpin structures at inverted repeats, recombination hotspots\n- **Triplexes**: H-DNA formation, gene regulation\n- **A-DNA**: Dehydrated form, packaging-related\n\nThese structures can affect:\n- Gene expression and regulation\n- DNA packaging and ejection\n- Recombination and genome rearrangement\n- Evolutionary hotspots\n\n## Visualization Type\nMulti-track linear genome view:\n- **G4 track**: Predicted G-quadruplex forming sequences\n- **Z-DNA track**: High Z-DNA propensity regions\n- **Cruciform track**: Inverted repeat regions\n- **Triplex track**: Potential H-DNA sites\n- **Structure stability**: ΔG or propensity scores\n- **Feature details panel**: Structure parameters and scores\n\n## Worker Integration\nCreate `workers/nonbdna-worker.ts`:\n- G-quadruplex prediction (regex + folding energy)\n- Z-DNA propensity calculation (dinucleotide scores)\n- Inverted repeat detection for cruciforms\n- Triplex-forming oligonucleotide (TFO) prediction\n- Structure stability scoring\n- Overlap analysis with functional elements\n\n## Implementation Details\n\n### Files to Create\n1. `src/tui/overlays/NonBDNAOverlay.tsx`\n   - Multi-track genome visualization (GenomeTrack)\n   - Structure type toggle buttons\n   - Stability score coloring\n   - Interactive structure selection\n   - Details panel with sequence and parameters\n\n2. `src/workers/nonbdna-worker.ts`\n   - G4 detection algorithms\n   - Z-DNA propensity calculations (Z-hunt algorithm)\n   - Palindrome/inverted repeat finding\n   - Triplex prediction\n   - Thermodynamic stability calculations\n   - Statistical significance testing\n\n### Dependencies\n- **Requires**: Visualization primitives task (GenomeTrack)\n\n### Keyboard Shortcut\n- **Alt+N** - Toggle non-B-DNA overlay\n\n### Data Flow\n1. User activates overlay (Alt+N)\n2. Worker receives genome sequence\n3. Worker performs multiple scans:\n   - G4: Regex search for G-runs (G3+N1-7G3+N1-7G3+N1-7G3+)\n   - Z-DNA: Sliding window dinucleotide propensity\n   - Cruciforms: Inverted repeat finder (palindromes)\n   - Triplexes: Purine/pyrimidine tract detection\n4. Worker calculates stability:\n   - G4: Folding free energy\n   - Z-DNA: Propensity score (Zhunt)\n   - Cruciforms: Stem length and GC%\n   - Triplexes: Hoogsteen base-pairing energy\n5. Worker filters by significance thresholds\n6. UI renders multi-track display\n7. User can:\n   - Toggle structure types on/off\n   - Adjust sensitivity thresholds\n   - Click structure for details\n   - Export structure coordinates\n\n## Detection Algorithms\n\n### 1. G-Quadruplex (G4) Detection\nPattern: `G{3,}N{1,7}G{3,}N{1,7}G{3,}N{1,7}G{3,}`\n- Search for G-runs (≥3 consecutive Gs)\n- Require 4 G-runs with loops (1-7 nt)\n- Calculate folding stability (ΔG \u003c -10 kcal/mol)\n- Distinguish parallel vs antiparallel topologies\n\n### 2. Z-DNA Propensity\nUse Z-hunt algorithm (Ho et al. 1986):\n- Sliding window (50-500 bp)\n- Sum dinucleotide Z-DNA propensity scores\n- High scores for: CG, CA, TG repeats\n- Threshold: Zscore \u003e 500 (indicates Z-DNA formation)\n- Consider negative supercoiling effects\n\n### 3. Cruciform Structures\nInverted repeat detection:\n- Find palindromic sequences (mirror repeats)\n- Minimum stem length: 6 bp\n- Maximum loop size: 10 nt\n- Calculate stem stability (GC content, mismatches)\n- Extrusion free energy \u003c -15 kcal/mol\n\n### 4. Triplex (H-DNA)\nDetect triplex-forming sequences:\n- Long polypurine-polypyrimidine tracts (\u003e15 nt)\n- Mirror repeat symmetry (for H-y3 motifs)\n- Calculate Hoogsteen pairing stability\n- pH-dependent formation\n\n## Display Tracks\n\n### Track 1: G-Quadruplexes\n- Markers at G4 positions\n- Color by stability: Green (stable) → Red (weak)\n- Height = number of G-tetrads (3-5)\n- Tooltip: sequence, ΔG, topology\n\n### Track 2: Z-DNA Regions\n- Shaded regions with Z-propensity \u003e threshold\n- Intensity = propensity score\n- Color gradient: Blue (high) → Gray (low)\n- Tooltip: position, score, dinucleotide content\n\n### Track 3: Cruciforms\n- Hairpin symbols at inverted repeats\n- Size = stem length\n- Color = GC% (stability indicator)\n- Tooltip: palindrome sequence, stem/loop sizes\n\n### Track 4: Triplexes\n- Bar markers at TFO sites\n- Color by motif type (R·R-Y vs Y·R-Y)\n- Height = tract length\n- Tooltip: sequence, pairing scheme\n\n## Details Panel (on click)\nDisplay for selected structure:\n- **Type**: G-quadruplex/Z-DNA/Cruciform/Triplex\n- **Position**: Start-End coordinates\n- **Sequence**: Actual DNA sequence\n- **Stability**: ΔG or propensity score\n- **Parameters**: Loop sizes, stem length, G-tetrads, etc.\n- **Overlaps**: Nearby genes, regulatory elements\n- **Functional implications**: Predicted roles\n\n## Biological Interpretation\n\n### G-Quadruplexes\n- **In promoters**: Transcription regulation\n- **In coding regions**: Translation frameshifting\n- **In terminators**: Termination efficiency\n- **Near origins**: Replication fork pausing\n\n### Z-DNA\n- **High-GC regions**: Torsional stress relief\n- **Packaging**: Energy storage during DNA compression\n- **Recombination**: Hotspots for genome rearrangement\n\n### Cruciforms\n- **Inverted repeats**: Recombination substrates\n- **Terminal repeats**: Genome circularization signals\n- **Regulatory regions**: Transcription factor binding\n\n### Triplexes\n- **Polypurine tracts**: Gene silencing\n- **Repeated elements**: Structural organization\n\n## Thresholds and Filtering\nDefault thresholds:\n- **G4**: ΔG \u003c -10 kcal/mol, ≥3 G-tetrads\n- **Z-DNA**: Z-score \u003e 500, window ≥50 bp\n- **Cruciforms**: Stem ≥6 bp, ΔG \u003c -15 kcal/mol\n- **Triplexes**: Tract ≥15 nt, homopurine/homopyrimidine\n\nUser can adjust sensitivity via slider.\n\n## Performance Considerations\n- Pre-compile regex patterns for G4 search\n- Use rolling hash for palindrome detection\n- Cache dinucleotide scores for Z-DNA\n- Limit search to coding vs non-coding regions (toggle)\n\n## Scientific References\n- Huppert \u0026 Balasubramanian (2005) G4 prevalence\n- Ho et al. (1986) Z-hunt algorithm\n- Palecek (1991) Cruciform structures\n- Vasquez \u0026 Wilson (1998) Triplex DNA\n\n## Testing Considerations\n- Validate G4 predictions with G4-seq data\n- Compare Z-DNA with antibody mapping studies\n- Check cruciform predictions against S1 nuclease mapping\n- Test with genomes of known non-B-DNA structures","status":"closed","priority":2,"issue_type":"task","assignee":"GreenBear","created_at":"2025-12-08T13:03:05.862568-05:00","updated_at":"2025-12-09T08:37:11.62039-05:00","closed_at":"2025-12-09T08:37:11.62039-05:00","dependencies":[{"issue_id":"phage_explorer-bjoz.11","depends_on_id":"phage_explorer-bjoz","type":"parent-child","created_at":"2025-12-08T13:03:05.863554-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-bjoz.11","depends_on_id":"phage_explorer-qiaq","type":"blocks","created_at":"2025-12-08T13:03:05.864679-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-bjoz.11","depends_on_id":"phage_explorer-bjoz.7","type":"blocks","created_at":"2025-12-08T13:09:52.7967-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-bjoz.12","title":"AnomalyOverlay - Statistical anomaly detection","description":"Implement overlay for detecting statistical anomalies in genome sequences using multiple metrics and machine learning-based outlier detection.\n\n## Biological Significance\nGenomic anomalies can indicate:\n- Horizontal gene transfer (HGT) events\n- Sequencing errors or assembly artifacts\n- Pseudogenes or degraded sequences\n- Unusual selective pressures\n- Functional specialization (extreme codon bias)\n- Recent evolutionary changes\n\nThis overlay aggregates multiple compositional and structural metrics to identify regions that deviate significantly from expected patterns.\n\n## Visualization Type\nMulti-metric dashboard:\n- **Anomaly score track**: Composite anomaly score across genome\n- **Metric heatmap**: Individual metrics (GC%, codon bias, dinucleotide, etc.)\n- **Outlier scatter plot**: PCA of all metrics, highlighting anomalies\n- **Anomaly regions list**: Ranked by severity with annotations\n- **Comparison panel**: Compare to genome average and related phages\n\n## Worker Integration\nCreate `workers/anomaly-worker.ts`:\n- Calculate multiple compositional metrics per window/gene\n- Statistical outlier detection (z-scores, IQR, isolation forest)\n- PCA-based anomaly detection in metric space\n- Composite anomaly scoring\n- Classify anomaly types (composition, structure, expression)\n- Generate explanations for each anomaly\n\n## Implementation Details\n\n### Files to Create\n1. `src/tui/overlays/AnomalyOverlay.tsx`\n   - Anomaly score track (GenomeTrack)\n   - Multi-metric heatmap (HeatmapCanvas)\n   - PCA outlier scatter plot (ScatterCanvas)\n   - Anomaly region table with sorting\n   - Detailed anomaly inspector panel\n\n2. `src/workers/anomaly-worker.ts`\n   - Metric calculation functions (20+ metrics)\n   - Statistical outlier algorithms (z-score, IQR, LOF, Isolation Forest)\n   - PCA for dimensionality reduction\n   - Composite scoring function\n   - Anomaly classification logic\n   - Explanation generation\n\n### Dependencies\n- **Requires**: Visualization primitives task (GenomeTrack, HeatmapCanvas, ScatterCanvas)\n\n### Keyboard Shortcut\n- **Alt+A** - Toggle anomaly overlay\n\n### Data Flow\n1. User activates overlay (Alt+A)\n2. Worker receives genome sequence and annotations\n3. Worker calculates metrics for sliding windows (500 bp, 250 bp step):\n   - GC% and AT%\n   - GC skew: (G-C)/(G+C)\n   - AT skew: (A-T)/(A+T)\n   - Codon usage deviation\n   - Dinucleotide frequency (ρ-statistic)\n   - Codon adaptation index (CAI)\n   - Effective number of codons (ENC)\n   - k-mer frequencies (4-mers, 5-mers)\n   - Repeat density\n   - ORF density\n   - Gene length distribution\n   - Intergenic spacing\n4. Worker performs statistical analysis:\n   - Calculate mean and σ for each metric\n   - Compute z-scores for each window\n   - Apply IQR method (Q1-1.5×IQR, Q3+1.5×IQR)\n   - Run Isolation Forest algorithm\n   - Local Outlier Factor (LOF) for local anomalies\n5. Worker applies PCA to metric matrix:\n   - Reduce to 2-3 principal components\n   - Identify outliers in PC space (Mahalanobis distance)\n6. Worker generates composite anomaly score:\n   - Weighted combination of all detection methods\n   - Normalize to 0-100 scale\n7. Worker classifies anomalies:\n   - Compositional (GC%, dinucleotide)\n   - Structural (repeats, gene organization)\n   - Coding (codon bias, CAI)\n   - Unknown (multiple metrics, unclear cause)\n8. UI renders all visualization panels\n9. User can:\n   - Adjust sensitivity threshold\n   - Filter by anomaly type\n   - Click region for detailed analysis\n   - Export anomaly report\n\n## Metrics Calculated (20+)\n\n### Compositional Metrics\n1. GC% (overall)\n2. GC3% (third codon position)\n3. GC skew: (G-C)/(G+C)\n4. AT skew: (A-T)/(A+T)\n5. Purine skew: (A+G-T-C)/(A+G+T+C)\n6. Dinucleotide frequency deviations (16 combinations)\n7. Trinucleotide frequency deviations (64 combinations, subset)\n8. Codon frequency deviations (59 codons)\n\n### Structural Metrics\n9. ORF density (genes per kb)\n10. Gene length mean and variance\n11. Intergenic space length\n12. Repeat density (direct and inverted)\n13. Tandem repeat score\n14. Low complexity regions (entropy)\n\n### Coding Metrics\n15. Codon adaptation index (CAI)\n16. Effective number of codons (ENC)\n17. Relative synonymous codon usage (RSCU) deviation\n18. tRNA adaptation index (tAI)\n19. Translation efficiency score\n20. Stop codon frequency\n\n## Outlier Detection Methods\n\n### 1. Z-Score Method\n- Standard deviations from mean\n- Threshold: |z| \u003e 3 (99.7% confidence)\n- Simple, fast, assumes normal distribution\n\n### 2. IQR Method\n- Interquartile range (Q3 - Q1)\n- Outliers: \u003c Q1-1.5×IQR or \u003e Q3+1.5×IQR\n- Robust to non-normal distributions\n\n### 3. Isolation Forest\n- Tree-based anomaly detection\n- Isolates outliers with fewer splits\n- Handles high-dimensional data\n- Anomaly score: path length\n\n### 4. Local Outlier Factor (LOF)\n- Density-based method\n- Compares local density to neighbors\n- Detects local anomalies (not just global)\n\n### 5. PCA-Based\n- Mahalanobis distance in PC space\n- Captures multivariate outliers\n- Reduces dimensionality for visualization\n\n## Composite Anomaly Score\nWeighted average of detection methods:\n```\nscore = 0.25×z_score + 0.20×IQR_score + 0.25×IF_score + 0.15×LOF_score + 0.15×PCA_score\n```\nNormalize to 0-100 scale. Threshold for flagging: \u003e70.\n\n## Display Panels\n\n### 1. Anomaly Score Track\n- Line graph of composite score across genome\n- Color gradient: Green (normal) → Yellow → Red (anomalous)\n- Shaded regions above threshold\n- Vertical lines at peak anomalies\n\n### 2. Multi-Metric Heatmap\n- Rows: Genomic windows\n- Columns: Individual metrics\n- Color: z-score deviation (-3 to +3)\n- Reveals which metrics drive anomalies\n\n### 3. PCA Outlier Scatter Plot\n- X: PC1, Y: PC2\n- Each point = one window\n- Color by anomaly score\n- Interactive selection\n\n### 4. Anomaly Regions Table\n| Position | Score | Type | Metrics | Explanation |\n|----------|-------|------|---------|-------------|\n| 12345-12845 | 85 | Compositional | GC%, dinuc | Likely HGT from high-GC donor |\n| 45678-46178 | 78 | Coding | CAI, ENC | Unusual codon bias, recent acquisition? |\n\nSortable, filterable.\n\n### 5. Detailed Inspector Panel (on click)\nFor selected anomaly region:\n- Sequence and ORF annotations\n- Top 5 deviant metrics with z-scores\n- Comparison to genome average\n- Comparison to similar regions in related phages\n- Predicted cause (HGT, sequencing error, specialization)\n- Confidence level\n\n## Anomaly Classification\nBased on metric patterns:\n- **HGT candidate**: GC%, dinucleotide, codon bias all deviant\n- **Sequencing error**: Extreme outlier in single window, single metric\n- **Pseudogene**: Low CAI, high stop codons, frame shifts\n- **Regulatory region**: Low ORF density, high repeats\n- **Specialized function**: Extreme codon bias, high expression genes\n- **Unknown**: Multiple metrics deviant, no clear pattern\n\n## Biological Interpretation Guide\n- **High anomaly score (\u003e80)**: Strong evidence of unusual region, investigate\n- **Multiple clustered anomalies**: May indicate large HGT island or prophage\n- **Isolated single-window anomaly**: Often sequencing/assembly artifact\n- **Compositional anomalies**: HGT, base modification, selection\n- **Coding anomalies**: Expression level, tRNA availability, recent acquisition\n\n## Performance Optimization\n- Parallelize metric calculations in worker\n- Use efficient algorithms (rolling window statistics)\n- Cache PCA transformations\n- Incremental updates for interactive threshold adjustment\n\n## Scientific References\n- Karlin (1998) Dinucleotide relative abundance anomalies\n- Liu et al. (2008) Isolation Forest algorithm\n- Breunig et al. (2000) LOF algorithm\n- Tsirigos \u0026 Rigoutsos (2005) Compositional bias in genomes\n\n## Testing Considerations\n- Validate with known HGT regions\n- Test false positive rate on well-characterized phages\n- Compare with established HGT detection tools\n- Check sensitivity to parameter tuning\n- Verify explanation accuracy","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T13:03:07.005471-05:00","updated_at":"2025-12-09T11:35:13.016632-05:00","closed_at":"2025-12-09T11:35:13.016632-05:00","dependencies":[{"issue_id":"phage_explorer-bjoz.12","depends_on_id":"phage_explorer-bjoz","type":"parent-child","created_at":"2025-12-08T13:03:07.005964-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-bjoz.12","depends_on_id":"phage_explorer-qiaq","type":"blocks","created_at":"2025-12-08T13:03:07.006766-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-bjoz.12","depends_on_id":"phage_explorer-bjoz.7","type":"blocks","created_at":"2025-12-08T13:09:54.376554-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-bjoz.13","title":"DotPlotOverlay - Self-similarity matrix visualization","description":"Implement overlay for visualizing genome self-similarity through dot plot matrix analysis, revealing repeats, palindromes, and internal duplications.\n\n## Biological Significance\nDot plots reveal genome architecture features:\n- **Direct repeats**: Terminal repeats, ISs, duplications\n- **Inverted repeats**: Palindromes, cruciform-forming regions\n- **Tandem repeats**: Gene duplications, arrays\n- **Low complexity regions**: Homopolymer runs\n- **Mosaic structure**: Recombination breakpoints\n- **Symmetry patterns**: Genome organization principles\n\nCritical for identifying:\n- Packaging mechanisms (pac sites, terminal repeats)\n- Recombination hotspots\n- Mobile genetic elements\n- Evolution through duplication\n\n## Visualization Type\nInteractive 2D matrix:\n- **Main diagonal**: Self-identity (always present)\n- **Off-diagonal lines**: Repeats (direct or inverted)\n- **Rectangular blocks**: Duplicated regions\n- **Color intensity**: Match quality (identity %)\n- **Zoom and pan**: Focus on regions of interest\n- **Annotation overlay**: Gene positions, functional elements\n\n## Worker Integration\nCreate `workers/dotplot-worker.ts`:\n- Perform all-vs-all sequence comparison\n- Use efficient algorithms (suffix arrays, k-mer indexing)\n- Filter matches by length and identity thresholds\n- Classify repeat types (direct, inverted, tandem)\n- Calculate match statistics\n- Generate sparse matrix for rendering\n\n## Implementation Details\n\n### Files to Create\n1. `src/tui/overlays/DotPlotOverlay.tsx`\n   - Interactive heatmap visualization (HeatmapCanvas)\n   - Zoom and pan controls\n   - Match filtering controls (length, identity)\n   - Annotation overlay layer\n   - Selected region details panel\n\n2. `src/workers/dotplot-worker.ts`\n   - K-mer indexing for fast comparison\n   - Suffix array construction\n   - Match extension algorithms\n   - Repeat classification logic\n   - Sparse matrix generation\n   - Statistical significance testing\n\n### Dependencies\n- **Requires**: Visualization primitives task (HeatmapCanvas)\n\n### Keyboard Shortcut\n- **Alt+D** - Toggle dot plot overlay\n\n### Data Flow\n1. User activates overlay (Alt+D)\n2. Worker receives genome sequence\n3. Worker builds k-mer index (k=10-15):\n   - Hash all k-mers with positions\n   - For each k-mer, find all matching positions\n4. Worker extends matches:\n   - From k-mer seeds, extend in both directions\n   - Stop at mismatches (allow small gaps)\n   - Record match coordinates and identity\n5. Worker filters matches:\n   - Minimum length (default 20 bp)\n   - Minimum identity (default 80%)\n   - Remove trivial diagonal (self-matches)\n6. Worker classifies repeats:\n   - Direct: Same strand, forward orientation\n   - Inverted: Reverse complement matches (palindromes)\n   - Tandem: Adjacent repeats (spacing \u003c 100 bp)\n7. Worker generates sparse matrix:\n   - Only store significant matches\n   - Compress diagonal runs\n8. UI renders dot plot with zoom/pan\n9. User can:\n   - Zoom into regions\n   - Adjust filters (length, identity)\n   - Click match for details\n   - Toggle forward/reverse strand\n   - Export repeat coordinates\n\n## Dot Plot Algorithm\n\n### K-mer Seeding (fast initial scan)\n```\n1. Build k-mer hash table (k=12)\n2. For each k-mer in genome:\n   - Look up all matching positions\n   - Store as (pos1, pos2) coordinates\n3. Filter out over-represented k-mers (low complexity)\n```\n\n### Match Extension\n```\nFor each seed match:\n1. Extend right while bases match\n2. Extend left while bases match\n3. Allow 1-2 mismatches for fuzzy matching\n4. Calculate final identity %\n5. Store extended match if meets thresholds\n```\n\n### Inverted Match Detection\n- Also search for reverse complement k-mers\n- Plot in different color (e.g., red vs blue)\n- Indicates palindromic regions\n\n## Display Features\n\n### Main Dot Plot Matrix\n- **Axes**: Genome position (0 to length)\n- **Main diagonal**: Always visible (self-identity)\n- **Off-diagonal dots**: Repeat matches\n- **Color scheme**:\n  - Blue: Direct repeats (forward)\n  - Red: Inverted repeats (reverse complement)\n  - Color intensity: Identity % (light = weak, dark = strong)\n- **Annotations**: Gene boundaries, ORF tracks on axes\n\n### Control Panel\n- **Min length slider**: 20-500 bp\n- **Min identity slider**: 70-100%\n- **Strand toggle**: Show forward/reverse/both\n- **Zoom controls**: In/out, reset\n- **Export button**: Save repeat table\n\n### Match Details Panel (on click)\nDisplay for selected match:\n- **Type**: Direct/Inverted/Tandem repeat\n- **Coordinates**: (pos1, pos2) and length\n- **Identity**: % match and gaps\n- **Sequence**: Aligned sequences\n- **Context**: Genes overlapping/nearby\n- **Function**: Predicted role (terminal repeat, IS element, etc.)\n\n## Repeat Classification\n\n### Direct Repeats\n- Forward orientation matches\n- Same strand\n- Examples: Terminal repeats, gene duplications\n\n### Inverted Repeats\n- Reverse complement matches\n- Forms palindromes\n- Examples: Cruciform structures, transposon ends\n\n### Tandem Repeats\n- Adjacent repeats (spacing \u003c 100 bp)\n- Multiple copies in array\n- Examples: CRISPR-like arrays, simple sequence repeats\n\n### Terminal Repeats\n- Near genome ends (first/last 5%)\n- Often long (\u003e500 bp)\n- Critical for packaging and replication\n\n## Biological Interpretation\n\n### Long Terminal Repeats (\u003e500 bp)\n- **DTR (Direct Terminal Repeats)**: pac packaging mechanism\n- **ITR (Inverted Terminal Repeats)**: Hairpin telomeres (e.g., N15)\n- Facilitate genome circularization\n\n### Internal Duplications\n- Gene family expansion\n- Recent duplication events\n- Functional redundancy or subfunctionalization\n\n### Palindromic Regions\n- Recombination substrates\n- Regulatory elements\n- Genome rearrangement hotspots\n\n### Dispersed Repeats\n- Mobile genetic elements (IS, transposons)\n- Horizontal gene transfer scars\n- Recombination-prone regions\n\n## Performance Optimization\n\n### K-mer Indexing\n- Use hash table (O(1) lookup)\n- Bloom filter for k-mer pre-filtering\n- Limit k-mer length to avoid memory explosion\n\n### Sparse Matrix Storage\n- Only store non-zero entries (matches)\n- Use coordinate list (COO) format\n- Compressed sparse row (CSR) for rendering\n\n### Progressive Rendering\n- Render visible viewport only\n- Load detail on zoom\n- Use OffscreenCanvas for background rendering\n\n### Web Worker Offloading\n- Build k-mer index in worker\n- Stream results to UI incrementally\n- Cancel computation on parameter change\n\n## Matrix Resolution\nTrade-off between detail and performance:\n- **High resolution** (1 bp): Slow, shows all matches, large matrices\n- **Medium resolution** (10 bp): Balanced, good for most genomes\n- **Low resolution** (100 bp): Fast, overview only, large genomes\n\nAuto-adjust based on genome size:\n- \u003c50 kb: 1 bp\n- 50-200 kb: 10 bp\n- \u003e200 kb: 100 bp\n\n## Scientific Context\nDot plots are classic bioinformatics tools:\n- Originally manual (DNA sequence papers in 1970s-80s)\n- Now computational (BLAST, MUMmer for large-scale)\n- Reveal patterns invisible to linear views\n\n## Testing Considerations\n- Validate with phages having known terminal repeats (T4, T7)\n- Test inverted repeat detection with palindromic sequences\n- Compare with established tools (Gepard, JDotter)\n- Check performance with large genomes (\u003e200 kb)\n- Verify repeat classification accuracy","status":"closed","priority":2,"issue_type":"task","assignee":"LilacPond","created_at":"2025-12-08T13:05:23.447578-05:00","updated_at":"2025-12-09T11:34:11.414957-05:00","closed_at":"2025-12-09T11:34:11.414957-05:00","dependencies":[{"issue_id":"phage_explorer-bjoz.13","depends_on_id":"phage_explorer-bjoz","type":"parent-child","created_at":"2025-12-08T13:05:23.448629-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-bjoz.13","depends_on_id":"phage_explorer-qiaq","type":"blocks","created_at":"2025-12-08T13:05:23.449404-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-bjoz.13","depends_on_id":"phage_explorer-bjoz.7","type":"blocks","created_at":"2025-12-08T13:09:55.284826-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-bjoz.14","title":"CGROverlay - Chaos Game Representation fractal","description":"Implement overlay for visualizing genome sequences using Chaos Game Representation (CGR), a fractal-based method that reveals compositional patterns and oligonucleotide biases.\n\n## Biological Significance\nCGR (Chaos Game Representation) provides:\n- **Pattern visualization**: See oligonucleotide usage patterns at a glance\n- **Genome signatures**: Unique fractal patterns for each genome\n- **Compositional bias**: CG-rich vs AT-rich regions\n- **Markov properties**: Reveal sequence dependencies\n- **Species discrimination**: Different organisms have distinct CGR patterns\n- **Anomaly detection**: Deviations from typical patterns (HGT, artifacts)\n\nCGR is a scale-free representation that shows patterns from dinucleotides to long k-mers simultaneously.\n\n## Visualization Type\nInteractive 2D fractal plot:\n- **Square canvas**: 2D plot with corners labeled A, T, G, C\n- **Point cloud**: Each point represents a position in the sequence\n- **Density coloring**: Color intensity shows frequency\n- **Zoom capability**: Inspect higher-order k-mer patterns\n- **Quadrant analysis**: Analyze compositional biases\n- **Genome comparison**: Side-by-side CGR for related phages\n\n## Worker Integration\nCreate `workers/cgr-worker.ts`:\n- Implement CGR algorithm (iterative coordinate calculation)\n- Generate 2D point coordinates for entire sequence\n- Calculate density map for coloring\n- Compute oligonucleotide frequencies from CGR\n- Compare CGR patterns between genomes\n- Detect anomalies (outlier regions)\n\n## Implementation Details\n\n### Files to Create\n1. `src/tui/overlays/CGROverlay.tsx`\n   - Canvas-based CGR visualization\n   - Interactive zoom and pan\n   - Density heatmap coloring\n   - Quadrant statistics panel\n   - Comparison mode for multiple genomes\n   - Sequence region highlighting\n\n2. `src/workers/cgr-worker.ts`\n   - CGR coordinate calculation\n   - Density map generation\n   - K-mer frequency extraction from CGR\n   - Pattern comparison algorithms\n   - Anomaly detection in CGR space\n\n### Keyboard Shortcut\n- **Alt+Shift+C** - Toggle CGR overlay\n\n### Data Flow\n1. User activates overlay (Alt+Shift+C)\n2. Worker receives genome sequence\n3. Worker generates CGR coordinates:\n   - Initialize point at center (0.5, 0.5)\n   - For each base in sequence:\n     - Move halfway toward corner (A, T, G, or C)\n     - Record new coordinates\n   - Generates N points for N-length genome\n4. Worker calculates density map:\n   - Bin coordinates into 2D grid (e.g., 512×512)\n   - Count points per bin\n   - Apply log scaling for visibility\n5. Worker extracts k-mer frequencies:\n   - CGR encodes k-mer positions geometrically\n   - Count points in sub-regions to get k-mer freqs\n6. Worker detects anomalies:\n   - Compare local density to global pattern\n   - Identify under/over-represented regions\n7. UI renders CGR with density coloring\n8. User can:\n   - Zoom into quadrants (reveals higher k-mers)\n   - Click point to see sequence position\n   - Compare with reference CGR\n   - Export CGR image\n\n## CGR Algorithm\n\n### Basic Algorithm\n```\n1. Initialize canvas: 1×1 square\n2. Place corners: A=(0,0), T=(1,0), G=(1,1), C=(0,1)\n3. Start at center: x=0.5, y=0.5\n4. For each base b in sequence:\n   - corner_x, corner_y = corner[b]\n   - x = (x + corner_x) / 2\n   - y = (y + corner_y) / 2\n   - plot(x, y)\n```\n\n### Corner Assignments\nStandard arrangement:\n- **A (Adenine)**: Bottom-left (0, 0)\n- **T (Thymine)**: Bottom-right (1, 0)\n- **G (Guanine)**: Top-right (1, 1)\n- **C (Cytosine)**: Top-left (0, 1)\n\nAlternative: Purine/Pyrimidine arrangement\n- **Purines (A, G)**: Left side\n- **Pyrimidines (T, C)**: Right side\n\n### K-mer Encoding in CGR\nCGR geometrically encodes k-mers:\n- Each quadrant = 2-mer\n- Each sub-quadrant = 3-mer\n- Recursive subdivision = higher k-mers\n- Zoom level determines k-mer resolution\n\nExample: 2-mer quadrants\n- Top-left: C_\n  - Top-left sub-quadrant: CC\n  - Top-right: CG\n  - Bottom-right: CT\n  - Bottom-left: CA\n\n## Display Features\n\n### Main CGR Canvas\n- **Square plot**: 1:1 aspect ratio\n- **Corner labels**: A, T, G, C at vertices\n- **Point cloud**: All sequence positions\n- **Density coloring**: \n  - White: No points\n  - Light blue: Low density\n  - Dark blue: Medium density\n  - Red: High density (hotspots)\n- **Grid lines**: Quadrant boundaries (optional)\n\n### Zoom and Navigation\n- **Scroll to zoom**: Reveals k-mer substructure\n- **Click-drag to pan**: Explore regions\n- **Reset button**: Return to full view\n- **Zoom indicator**: Current k-mer resolution (2-mer, 3-mer, etc.)\n\n### Quadrant Statistics Panel\nDisplay for each quadrant:\n- **Dinucleotide**: AA, AT, AG, AC, TA, TT, etc.\n- **Count**: Number of occurrences\n- **Frequency**: % of total\n- **Expected**: Random expectation based on base frequencies\n- **Deviation**: Observed/Expected ratio\n\n### Comparison Mode\nSide-by-side CGR for:\n- Current genome vs reference genome\n- Coding vs non-coding regions\n- Different strands\n- Before/after filtering regions\n\n### Sequence Region Highlighting\n- User selects genomic region (e.g., gene)\n- Highlight corresponding points in CGR\n- Reveals compositional properties of that region\n\n## Biological Interpretation\n\n### Compositional Bias\n- **AT-rich**: Points cluster toward AT quadrants (bottom)\n- **GC-rich**: Points cluster toward GC quadrants (top)\n- **Balanced**: Even distribution\n\n### CG Suppression\n- Many genomes avoid CG dinucleotides (methylation targets)\n- Visible as empty CG sub-quadrant\n\n### Markov Properties\n- Random sequence: Uniform distribution\n- Markov chains: Non-uniform patterns\n- Higher-order dependencies: Fractal substructure\n\n### Genome Signatures\nEach species has characteristic CGR pattern:\n- Phages: Often high AT content (lower half emphasis)\n- Bacteria: More balanced\n- Related phages: Similar CGR patterns\n\n### Anomaly Detection\nDeviations from pattern:\n- HGT regions: Different k-mer usage\n- Sequencing errors: Outlier points\n- Low complexity: Extreme clustering\n\n## K-mer Frequency Extraction\nCGR encodes k-mer frequencies geometrically:\n- Count points in each sub-region\n- Region boundaries define k-mer identity\n- Efficient for extracting k-mer stats without re-scanning sequence\n\nExample: 2-mer frequencies\n- Divide CGR into 16 sub-quadrants (4×4)\n- Count points in each\n- Gives frequency of all 16 dinucleotides\n\n## Performance Optimization\n\n### Density Map Generation\n- Use 2D binning (histogram)\n- Typical resolution: 512×512 or 1024×1024\n- Apply Gaussian smoothing for aesthetics\n- Log-scale coloring for dynamic range\n\n### Point Cloud Rendering\n- For small genomes (\u003c100 kb): Plot all points\n- For large genomes (\u003e100 kb): Subsample or use density map only\n- Use WebGL for hardware acceleration (optional)\n\n### Progressive Computation\n- Generate CGR incrementally\n- Stream results to UI\n- Allow cancellation on user interaction\n\n## Scientific References\n- Jeffrey (1990) Original CGR paper\n- Deschavanne et al. (1999) Genomic signatures\n- Almeida et al. (2001) CGR for genome comparison\n- Oliver et al. (2014) CGR applications in bioinformatics\n\n## Comparison with Traditional Methods\nCGR advantages:\n- **Visual**: Patterns immediately visible\n- **Scale-free**: Multiple k-mers shown simultaneously\n- **Alignment-free**: No need for sequence alignment\n- **Fast**: Linear time complexity O(n)\n\nLimitations:\n- **Abstract**: Requires interpretation\n- **No positional info**: Shows composition, not order\n- **Resolution limits**: Zoom depth limited by genome length\n\n## Testing Considerations\n- Validate k-mer extraction against direct counting\n- Compare CGR patterns of related phages (should be similar)\n- Test with artificial sequences (random, Markov chains)\n- Verify performance with large genomes (\u003e200 kb)\n- Check anomaly detection accuracy","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T13:05:25.026102-05:00","updated_at":"2025-12-09T11:35:13.017849-05:00","closed_at":"2025-12-09T11:35:13.017849-05:00","dependencies":[{"issue_id":"phage_explorer-bjoz.14","depends_on_id":"phage_explorer-bjoz","type":"parent-child","created_at":"2025-12-08T13:05:25.027285-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-bjoz.14","depends_on_id":"phage_explorer-qiaq","type":"blocks","created_at":"2025-12-08T13:05:25.028619-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-bjoz.15","title":"HilbertOverlay - Hilbert curve space-filling visualization","description":"Implement overlay for visualizing genome sequences using Hilbert curve space-filling representation, which maps linear genome sequence to 2D space while preserving local proximity.\n\n## Biological Significance\nHilbert curve visualization provides:\n- **Proximity preservation**: Adjacent sequences remain nearby in 2D\n- **Multi-scale patterns**: View genome features at different resolutions\n- **Compositional domains**: Identify GC-rich and AT-rich regions\n- **Gene clustering**: See syntenic blocks and operons\n- **Repetitive elements**: Detect repeat patterns\n- **Anomaly detection**: Spot unusual compositional regions\n\nUnlike CGR (which shows k-mer patterns), Hilbert curves preserve sequential order, making them ideal for identifying positional features.\n\n## Visualization Type\n2D space-filling curve with feature overlays:\n- **Hilbert curve path**: Genome sequence mapped to fractal curve\n- **Base coloring**: Each position colored by base (A/T/G/C)\n- **Feature overlays**: GC%, genes, repeats\n- **Multi-resolution**: Zoom to see local details\n- **Position tracking**: Click to locate in linear genome view\n- **Comparison mode**: Multiple genomes side-by-side\n\n## Worker Integration\nCreate `workers/hilbert-worker.ts`:\n- Generate Hilbert curve coordinates for each position\n- Calculate curve order based on genome length\n- Map sequence features to 2D coordinates\n- Generate colored pixel array for fast rendering\n- Support multiple color schemes (bases, GC%, features)\n- Calculate statistical summaries at different resolutions\n\n## Implementation Details\n\n### Files to Create\n1. `src/tui/overlays/HilbertOverlay.tsx`\n   - Canvas-based Hilbert curve rendering\n   - Interactive zoom and pan\n   - Position selection and linking to linear view\n   - Color scheme selector\n   - Feature overlay toggles\n   - Resolution selector\n\n2. `src/workers/hilbert-worker.ts`\n   - Hilbert curve coordinate generation\n   - Recursive curve algorithm (d2xy, xy2d functions)\n   - Pixel array generation\n   - Multi-resolution data structures\n   - Feature mapping to curve coordinates\n\n### Keyboard Shortcut\n- **Alt+Shift+H** - Toggle Hilbert overlay\n\n### Data Flow\n1. User activates overlay (Alt+Shift+H)\n2. Worker receives genome sequence and annotations\n3. Worker determines Hilbert curve order:\n   - Calculate minimum order where 4^n ≥ genome_length\n   - Example: 50 kb genome → order 8 (4^8 = 65536)\n4. Worker generates Hilbert curve coordinates:\n   - For each position i in genome:\n     - Convert i to (x, y) Hilbert curve coordinate\n     - Store mapping\n5. Worker generates pixel array:\n   - Create 2D array (size 2^n × 2^n)\n   - Color each pixel by base or feature\n   - Apply color scheme\n6. Worker maps features (genes, repeats) to coordinates\n7. UI renders Hilbert curve to canvas\n8. User can:\n   - Zoom into regions\n   - Click position to see sequence details\n   - Toggle feature overlays\n   - Switch color schemes\n   - Export as image\n\n## Hilbert Curve Algorithm\n\n### Coordinate Mapping (Linear → 2D)\n```python\ndef d2xy(n, d):\n    \"\"\"Convert distance along curve to (x, y) coordinates\"\"\"\n    # n = curve order (2^n × 2^n grid)\n    # d = distance along curve (0 to 4^n - 1)\n    x, y = 0, 0\n    s = 1\n    while s \u003c n:\n        rx = 1 \u0026 (d // 2)\n        ry = 1 \u0026 (d ^ rx)\n        x, y = rot(s, x, y, rx, ry)\n        x += s * rx\n        y += s * ry\n        d //= 4\n        s *= 2\n    return x, y\n```\n\n### Reverse Mapping (2D → Linear)\n```python\ndef xy2d(n, x, y):\n    \"\"\"Convert (x, y) coordinates to distance along curve\"\"\"\n    d = 0\n    s = n // 2\n    while s \u003e 0:\n        rx = (x \u0026 s) \u003e 0\n        ry = (y \u0026 s) \u003e 0\n        d += s * s * ((3 * rx) ^ ry)\n        x, y = rot(s, x, y, rx, ry)\n        s //= 2\n    return d\n```\n\n### Curve Order Selection\nChoose order n such that 2^(2n) ≥ genome_length:\n- Genome 1-256 bp: n=4 (16×16)\n- Genome 257-4096 bp: n=6 (64×64)\n- Genome 4097-65536 bp: n=8 (256×256)\n- Genome 65537-1M bp: n=10 (1024×1024)\n\n## Color Schemes\n\n### 1. Base Coloring\nStandard 4-color scheme:\n- **A**: Green\n- **T**: Red\n- **G**: Yellow\n- **C**: Blue\n\n### 2. GC% Gradient\nSliding window GC%:\n- AT-rich (0%): Blue\n- Balanced (50%): White\n- GC-rich (100%): Red\n\n### 3. Feature-Based\nColor by genomic feature:\n- **Genes**: Green (coding regions)\n- **Intergenic**: Gray\n- **Repeats**: Orange\n- **Anomalies**: Red\n\n### 4. Codon Position\nFor coding regions:\n- **1st position**: Red\n- **2nd position**: Green\n- **3rd position**: Blue\n- Reveals codon usage patterns\n\n### 5. Hydrophobicity (for protein-coding)\nAmino acid hydrophobicity scale:\n- Hydrophobic: Orange\n- Hydrophilic: Cyan\n\n## Display Features\n\n### Main Hilbert Canvas\n- **Square canvas**: 2^n × 2^n pixels\n- **Continuous path**: Hilbert curve fills space\n- **Colored pixels**: Each position colored by scheme\n- **Smooth rendering**: Anti-aliasing for aesthetics\n\n### Feature Overlays\nToggle layers:\n- **Gene boundaries**: Outline boxes\n- **Repeat regions**: Highlighted areas\n- **GC% contours**: Isolines\n- **Anomaly markers**: Red dots\n\n### Position Indicator\n- **Hover**: Show genome position and sequence\n- **Click**: Jump to position in linear viewer\n- **Selected region**: Highlight on curve\n\n### Resolution Control\n- **Order selector**: 4, 6, 8, 10, 12\n- Higher order = more detail, slower rendering\n- Auto-select based on genome size\n\n### Comparison Mode\n- Side-by-side Hilbert curves\n- Compare current genome to reference\n- Alignment-free comparison\n- Highlight differences\n\n## Biological Interpretation\n\n### Compositional Domains\n- **Clustered colors**: Homogeneous regions (AT-rich or GC-rich)\n- **Mixed colors**: Balanced composition\n- **Sharp transitions**: Domain boundaries (possible HGT)\n\n### Gene Clustering\n- **Blocks of green**: Gene-dense regions\n- **Scattered green**: Sparse gene distribution\n- **Syntenic blocks**: Adjacent genes, similar color\n\n### Repetitive Elements\n- **Periodic patterns**: Tandem repeats\n- **Scattered similar patches**: Dispersed repeats\n- **Symmetry**: Inverted or palindromic repeats\n\n### Anomalies\n- **Color outliers**: Unusual composition\n- **Isolated patches**: Small HGT events\n- **Gradient disruptions**: Sudden compositional changes\n\n## Multi-Scale Analysis\nHilbert curves show patterns at multiple scales:\n- **Large scale**: Whole-genome compositional trends\n- **Medium scale**: Gene clusters, operons\n- **Small scale**: Individual genes, repeats\n\nZoom in/out to explore hierarchy.\n\n## Comparison with Other Methods\n\n### vs. CGR (Chaos Game Representation)\n- **Hilbert**: Preserves sequence order, positional features\n- **CGR**: Shows k-mer patterns, order-independent\n\n### vs. Linear Genome View\n- **Hilbert**: 2D reveals patterns invisible in 1D\n- **Linear**: Better for precise positional annotations\n\n### vs. Dot Plot\n- **Hilbert**: Shows single genome, compositional\n- **Dot Plot**: Shows self-similarity, repeats\n\n## Performance Optimization\n\n### Pixel Array Generation\n- Pre-compute all coordinates in worker\n- Use Uint8ClampedArray for pixel data\n- Transfer to UI as ImageData\n- Direct canvas putImageData (fast)\n\n### Progressive Rendering\n- Render low resolution first (quick preview)\n- Progressive refinement for zoom\n- Cancel and restart on user interaction\n\n### WebGL Acceleration (optional)\n- Use GPU for large genomes (\u003e1 Mb)\n- Shader-based coloring\n- Hardware-accelerated zoom/pan\n\n### Caching\n- Cache Hilbert coordinate mappings\n- Reuse for different color schemes\n- Store multi-resolution pyramids\n\n## Scientific References\n- Hilbert (1891) Original Hilbert curve\n- Liao et al. (2014) Genomic Hilbert curves\n- Anders (2009) Hilbert curve for genomic data\n- Visualizing Biological Data by Design (2014)\n\n## Use Cases\n\n### Identifying GC-Rich Islands\n- Switch to GC% gradient color scheme\n- Look for red clusters (GC-rich)\n- May indicate HGT or functional specialization\n\n### Finding Gene Deserts\n- Use feature-based coloring\n- Gray regions = intergenic spaces\n- Long gray patches = gene deserts\n\n### Detecting Repeats\n- Base coloring shows periodic patterns\n- Similar color patches = repeats\n- Zoom to verify\n\n### Comparing Phages\n- Side-by-side Hilbert curves\n- Similar patterns = related genomes\n- Different patterns = divergent evolution\n\n## Testing Considerations\n- Validate coordinate mapping (d2xy and xy2d inverse)\n- Test with genomes of various sizes\n- Compare patterns with known features (genes, GC%)\n- Verify zoom/pan performance\n- Check color scheme accuracy","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T13:05:25.261067-05:00","updated_at":"2025-12-08T20:19:32.976952-05:00","closed_at":"2025-12-08T20:19:32.976952-05:00","dependencies":[{"issue_id":"phage_explorer-bjoz.15","depends_on_id":"phage_explorer-bjoz","type":"parent-child","created_at":"2025-12-08T13:05:25.261631-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-bjoz.15","depends_on_id":"phage_explorer-qiaq","type":"blocks","created_at":"2025-12-08T13:05:25.262352-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-bjoz.16","title":"GelOverlay - Virtual gel electrophoresis simulation","description":"Implement overlay for simulating virtual gel electrophoresis of phage genome and restriction digests, providing a familiar visualization of DNA fragments.\n\n## Biological Significance\nGel electrophoresis is a fundamental molecular biology technique:\n- **Restriction mapping**: Predict digest patterns for validation\n- **Genome size verification**: Visual size estimation\n- **Fragment analysis**: Identify expected bands\n- **Quality control**: Compare predicted vs actual gels\n- **Experimental planning**: Choose optimal restriction enzymes\n\nThis overlay helps researchers plan experiments and validate genome assemblies.\n\n## Visualization Type\nSimulated gel image with lanes:\n- **Gel canvas**: Traditional gel appearance (blue/gray background)\n- **Ladder lane**: DNA size markers (1kb, lambda/HindIII, etc.)\n- **Sample lanes**: Genome fragments\n- **Band intensity**: Based on fragment size and concentration\n- **Multiple digests**: Side-by-side comparison\n- **Measurement tools**: Size estimation, band picking\n\n## Worker Integration\nCreate `workers/gel-worker.ts`:\n- Perform in silico restriction digests\n- Calculate fragment sizes\n- Simulate band migration (inverse log relationship)\n- Calculate band intensities (proportional to fragment size)\n- Support single and double digests\n- Generate gel image data\n\n## Implementation Details\n\n### Files to Create\n1. `src/tui/overlays/GelOverlay.tsx`\n   - Gel canvas rendering (GelCanvas primitive)\n   - Enzyme selector with search\n   - Digest type selector (single, double, triple)\n   - Lane configuration panel\n   - Band measurement tools\n   - Export gel image\n\n2. `src/workers/gel-worker.ts`\n   - Restriction enzyme database (recognition sites)\n   - In silico digest algorithm\n   - Fragment sorting and sizing\n   - Band position calculation (log scale)\n   - Band intensity calculation\n   - Gel image generation\n\n3. `src/data/restriction-enzymes.ts`\n   - Common restriction enzyme database\n   - Recognition sequences and cut sites\n   - Isoschizomers and neoschizomers\n\n### Dependencies\n- **Requires**: Visualization primitives task (GelCanvas)\n\n### Keyboard Shortcut\n- **Alt+G** - Toggle gel overlay\n\n### Data Flow\n1. User activates overlay (Alt+G)\n2. User selects restriction enzyme(s) from database\n3. Worker receives genome sequence and enzyme choice(s)\n4. Worker performs in silico digest:\n   - Search for recognition sites\n   - Determine cut positions\n   - Calculate fragment sizes\n   - Sort fragments by size\n5. Worker calculates band positions:\n   - Apply logarithmic migration formula\n   - Position relative to ladder markers\n6. Worker calculates band intensities:\n   - Intensity proportional to fragment size (more DNA = brighter)\n   - Apply saturation for very large fragments\n7. Worker generates gel image:\n   - Blue/gray background\n   - White/blue bands with Gaussian blur (realistic appearance)\n   - Lane boundaries\n8. UI renders gel canvas\n9. User can:\n   - Add/remove enzymes\n   - Compare multiple digests\n   - Measure band sizes\n   - Export gel image\n   - Plan double/triple digests\n\n## Restriction Digest Algorithm\n\n### Single Digest\n```python\ndef digest(sequence, enzyme):\n    recognition_site = enzyme.pattern\n    fragments = []\n    positions = find_all(sequence, recognition_site)\n    \n    # Add cut positions\n    cuts = [0]  # Start\n    for pos in positions:\n        cut_site = pos + enzyme.cut_offset\n        cuts.append(cut_site)\n    cuts.append(len(sequence))  # End\n    \n    # Calculate fragment sizes\n    for i in range(len(cuts) - 1):\n        size = cuts[i+1] - cuts[i]\n        fragments.append(size)\n    \n    return sorted(fragments, reverse=True)\n```\n\n### Double Digest\n```python\ndef double_digest(sequence, enzyme1, enzyme2):\n    # Combine cut sites from both enzymes\n    cuts1 = find_cuts(sequence, enzyme1)\n    cuts2 = find_cuts(sequence, enzyme2)\n    all_cuts = sorted(set([0] + cuts1 + cuts2 + [len(sequence)]))\n    \n    # Calculate fragments\n    fragments = []\n    for i in range(len(all_cuts) - 1):\n        size = all_cuts[i+1] - all_cuts[i]\n        fragments.append(size)\n    \n    return sorted(fragments, reverse=True)\n```\n\n## Band Migration Calculation\n\n### Logarithmic Migration\nDNA migration distance is inversely proportional to log(size):\n```\ndistance = A - B × log10(size)\n```\nWhere:\n- A = gel length (top position)\n- B = scaling factor (dependent on gel %, voltage)\n\nCalibrate using ladder markers:\n- 10 kb → 10% down gel\n- 1 kb → 50% down gel\n- 100 bp → 90% down gel\n\n### Band Position Formula\n```python\ndef calculate_position(fragment_size, gel_params):\n    # Calibration from ladder\n    ref_sizes = [10000, 5000, 1000, 500, 100]  # bp\n    ref_positions = [0.1, 0.25, 0.5, 0.7, 0.9]  # fraction of gel\n    \n    # Fit log curve\n    A, B = fit_log_curve(ref_sizes, ref_positions)\n    \n    # Calculate position for fragment\n    position = A - B * log10(fragment_size)\n    return position\n```\n\n## Band Intensity Calculation\n\n### Intensity Formula\nBand intensity proportional to DNA mass:\n```\nintensity = min(fragment_size × concentration, MAX_INTENSITY)\n```\n\nAdjustments:\n- **Small fragments (\u003c100 bp)**: Reduced intensity (ethidium bromide doesn't bind well)\n- **Large fragments (\u003e10 kb)**: Slightly reduced (diffusion blur)\n- **Normalization**: Scale to image pixel values (0-255)\n\n### Gaussian Blur\nApply Gaussian blur to bands for realistic appearance:\n```\nblur_sigma = 2 + (fragment_size / 10000)  # Larger fragments = more blur\n```\n\n## Gel Visualization\n\n### Gel Canvas Layout\n```\n|-------------------------------------|\n| Ladder | Sample1 | Sample2 | Sample3|\n|   M    |  Uncut  | EcoRI   |EcoR+Hnd|\n|-------------------------------------|\n|  10kb  |         |   ■     |   ■    |\n|   5kb  |         |         |   ■    |\n|   1kb  |   ■     |   ■     |   ■    |\n|  500bp |         |   ■     |        |\n|  100bp |         |         |   ■    |\n|-------------------------------------|\n```\n\n### Lane Types\n1. **Marker/Ladder**: Standard DNA size markers\n   - 1kb ladder: 10000, 8000, 6000, 5000, 4000, 3000, 2000, 1500, 1000, 500 bp\n   - Lambda/HindIII: 23130, 9416, 6557, 4361, 2322, 2027, 564, 125 bp\n   - 100bp ladder: 1500, 1200, 1000, 900, 800, 700, 600, 500, 400, 300, 200, 100 bp\n\n2. **Uncut genome**: Single band at genome size\n\n3. **Single digest**: Multiple bands based on enzyme\n\n4. **Double digest**: Combined cut sites\n\n### Gel Appearance\n- **Background**: Blue-gray (#1a1a2e gradient)\n- **Bands**: White to light blue (#eee to #aaf)\n- **Wells**: Dark blue depressions at top\n- **Lane dividers**: Faint vertical lines\n\n## Restriction Enzyme Database\n\n### Common Phage Enzymes\n- **EcoRI**: G^AATTC (6-cutter, frequent)\n- **HindIII**: A^AGCTT (6-cutter)\n- **BamHI**: G^GATCC (6-cutter)\n- **PstI**: CTGCA^G (6-cutter)\n- **NotI**: GC^GGCCGC (8-cutter, rare)\n- **XbaI**: T^CTAGA (6-cutter)\n- **SalI**: G^TCGAC (6-cutter)\n\n### Enzyme Properties\n```typescript\ninterface RestrictionEnzyme {\n  name: string;\n  recognition_site: string;  // e.g., \"GAATTC\"\n  cut_pattern: string;        // e.g., \"G^AATTC\"\n  cut_offset_5prime: number;  // e.g., 1 (cuts after G)\n  cut_offset_3prime: number;  // e.g., 5 (creates 5' overhang)\n  type: \"5-overhang\" | \"3-overhang\" | \"blunt\";\n  isoschizomers: string[];    // Enzymes with same site\n}\n```\n\n## Interactive Features\n\n### Enzyme Selector\n- Searchable dropdown\n- Filter by:\n  - Recognition site length (4-cutter, 6-cutter, 8-cutter)\n  - Overhang type (5', 3', blunt)\n  - Expected cut frequency\n- Show predicted fragment count\n\n### Lane Configuration\n- Add/remove lanes\n- Select digest type per lane\n- Label lanes\n- Reorder lanes (drag-drop)\n\n### Band Measurement Tool\n- Click two bands to measure size difference\n- Click band to see exact size\n- Hover for fragment info\n\n### Export Options\n- PNG/SVG image\n- Fragment size table (CSV)\n- NEBcutter-style map\n\n## Biological Applications\n\n### 1. Genome Assembly Validation\nCompare predicted digest to experimental gel:\n- Match band patterns\n- Verify fragment sizes\n- Identify misassemblies\n\n### 2. Restriction Mapping\nBuild physical map from overlapping digests:\n- Single digests A, B\n- Double digest A+B\n- Deduce fragment order\n\n### 3. Enzyme Selection\nChoose enzymes for cloning/subcloning:\n- Avoid internal sites\n- Create compatible overhangs\n- Optimize fragment sizes\n\n### 4. Contamination Detection\nExpected vs observed band patterns:\n- Extra bands → contamination\n- Missing bands → deletion\n- Size shifts → mutations\n\n## Advanced Features\n\n### Fragment Analysis Table\nDisplay alongside gel:\n| Lane | Fragment # | Size (bp) | % of Total |\n|------|-----------|-----------|------------|\n| EcoRI| 1         | 15234     | 45%        |\n| EcoRI| 2         | 8721      | 26%        |\n| EcoRI| 3         | 4567      | 13%        |\n| ...  | ...       | ...       | ...        |\n\n### Cut Site Map\nShow restriction sites on linear genome map:\n```\nGenome: 0----EcoRI----HindIII----EcoRI----50000\n             15234      23955      39722\n```\n\n### Methylation Sensitivity\nSome enzymes blocked by methylation:\n- Dam methylation: GATC\n- Dcm methylation: CCWGG\n- Toggle methylation-sensitive enzymes\n\n## Performance Optimization\n- Pre-compute enzyme cut sites\n- Cache digest results\n- Use OffscreenCanvas for gel rendering\n- Progressive rendering for many lanes\n\n## Scientific References\n- Roberts et al. (2010) REBASE restriction enzyme database\n- Sambrook \u0026 Russell (2001) Molecular Cloning protocols\n- Southern (1975) Original gel electrophoresis method\n\n## Testing Considerations\n- Validate digest with known phages (lambda, T7)\n- Compare predicted vs literature digests\n- Test with 4-cutters (many fragments) and 8-cutters (few fragments)\n- Verify band position calculations\n- Check visualization accuracy","status":"closed","priority":2,"issue_type":"task","assignee":"GreenBear","created_at":"2025-12-08T13:08:22.359414-05:00","updated_at":"2025-12-09T08:34:06.1384-05:00","closed_at":"2025-12-09T08:34:06.1384-05:00","dependencies":[{"issue_id":"phage_explorer-bjoz.16","depends_on_id":"phage_explorer-bjoz","type":"parent-child","created_at":"2025-12-08T13:08:22.360385-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-bjoz.16","depends_on_id":"phage_explorer-qiaq","type":"blocks","created_at":"2025-12-08T13:08:22.361509-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-bjoz.16","depends_on_id":"phage_explorer-bjoz.7","type":"blocks","created_at":"2025-12-08T13:09:56.927609-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-bjoz.17","title":"SearchOverlay - Phage search interface","description":"Implement overlay for searching within phage genome and annotations using multiple search modes (sequence, motif, gene name, feature).\n\n## Purpose\nProvide comprehensive search functionality:\n- **Sequence search**: Find exact or fuzzy DNA/protein sequences\n- **Motif search**: IUPAC ambiguity codes, regex patterns\n- **Gene search**: Find by name, product, function\n- **Feature search**: Search annotations (CDS, promoters, terminators)\n- **Multi-pattern search**: Combine multiple queries (AND/OR)\n- **Position-based search**: Find features in genomic regions\n\n## Visualization Type\nSearch interface overlay with results panel:\n- **Search bar**: Multi-mode input with autocomplete\n- **Mode selector**: Sequence / Motif / Gene / Feature / Position\n- **Results list**: Scrollable list with context preview\n- **Result highlighting**: Highlight matches in main viewer\n- **Navigation**: Jump to results, next/previous buttons\n- **Export**: Save search results to file\n\n## Worker Integration\nCreate `workers/search-worker.ts`:\n- Efficient string search algorithms (Boyer-Moore, Aho-Corasick)\n- Regex pattern matching\n- IUPAC ambiguity code expansion\n- Fuzzy matching (allow mismatches)\n- Feature annotation search and filtering\n- Result ranking by relevance\n\n## Implementation Details\n\n### Files to Create\n1. `src/tui/overlays/SearchOverlay.tsx`\n   - Search input component with mode selector\n   - Search options panel (fuzzy, case-sensitive, strand)\n   - Results list with virtualization (for many results)\n   - Result preview with context\n   - Navigation controls (next/prev, jump)\n   - Export functionality\n\n2. `src/workers/search-worker.ts`\n   - Multi-algorithm search implementation\n   - IUPAC code handling\n   - Regex compilation and matching\n   - Fuzzy search algorithms (Levenshtein distance)\n   - Feature filtering and ranking\n   - Result formatting\n\n### Keyboard Shortcut\n- **Ctrl+F** or **/** - Open search overlay\n- **Escape** - Close search\n- **Enter** - Execute search / Jump to next result\n- **Shift+Enter** - Jump to previous result\n\n### Data Flow\n1. User opens search overlay (Ctrl+F)\n2. User types query and selects mode\n3. Worker receives search parameters:\n   - Query string\n   - Search mode (sequence/motif/gene/feature/position)\n   - Options (fuzzy, case-sensitive, strand, max mismatches)\n4. Worker performs search based on mode:\n   - **Sequence**: Boyer-Moore or Aho-Corasick\n   - **Motif**: Expand IUPAC codes, then search\n   - **Gene**: Text search in annotations\n   - **Feature**: Filter by feature type and properties\n   - **Position**: Range queries on coordinates\n5. Worker ranks results:\n   - Exact matches first\n   - Order by position (5' to 3')\n   - Score by relevance (for fuzzy/text search)\n6. Worker returns results with context (±20 bp)\n7. UI displays results list\n8. User clicks result to jump to position\n9. Main viewer highlights selected match\n10. User navigates with next/previous buttons\n\n## Search Modes\n\n### 1. Sequence Search\nExact or fuzzy DNA/protein sequence matching.\n\n**DNA Search:**\n- Input: ATCGATCG\n- Find all occurrences in genome\n- Options:\n  - Search both strands (default: yes)\n  - Case-sensitive (default: no)\n  - Allow mismatches (default: 0, max: 3)\n\n**Protein Search:**\n- Input: MKLAVKL\n- Search in translated ORFs\n- All six reading frames\n\n**Algorithm:**\n- Short queries (\u003c20 bp): Boyer-Moore\n- Multiple queries: Aho-Corasick (AC automaton)\n- Fuzzy: Modified BM with mismatch tolerance\n\n### 2. Motif Search\nIUPAC ambiguity codes and regex.\n\n**IUPAC Codes:**\n```\nR = A or G (puRine)\nY = C or T (pYrimidine)\nM = A or C (aMino)\nK = G or T (Keto)\nS = G or C (Strong)\nW = A or T (Weak)\nH = A or C or T (not G)\nB = C or G or T (not A)\nD = A or G or T (not C)\nV = A or C or G (not T)\nN = A or C or G or T (aNy)\n```\n\n**Example Queries:**\n- `TATAWR`: TATA box motif (W=A or T, R=A or G)\n- `GGNCC`: SacII-like sites\n- `CNNNNNNNNGG`: Simple repeat with variable loop\n\n**Algorithm:**\n- Expand IUPAC to regex\n- Compile regex pattern\n- Search genome with regex engine\n\n**Regex Support:**\n- `.` = any base\n- `[ATCG]` = character class\n- `{n}`, `{n,m}` = repetition\n- `^`, `$` = start/end (for whole-genome patterns)\n\n### 3. Gene Search\nSearch gene names, products, functions.\n\n**Searchable Fields:**\n- Gene name (e.g., \"gp23\", \"major capsid protein\")\n- Product description\n- Function annotation\n- EC numbers (enzyme classification)\n- GO terms (gene ontology)\n\n**Query Types:**\n- **Exact**: \"DNA polymerase\"\n- **Partial**: \"polymer\" (matches polymerase)\n- **Wildcard**: \"DNA*ase\" (matches DNAse, DNAase)\n- **Multiple terms**: \"DNA AND polymerase\"\n\n**Ranking:**\n- Exact name match: highest\n- Product match: high\n- Function match: medium\n- Partial match: lower\n\n### 4. Feature Search\nSearch by genomic feature type.\n\n**Feature Types:**\n- CDS (coding sequences)\n- gene\n- promoter\n- terminator\n- RBS (ribosome binding site)\n- repeat_region\n- misc_feature\n\n**Filter Options:**\n- By type: \"show all CDS\"\n- By property: \"CDS with length \u003e 1000\"\n- By location: \"features in 10000-20000\"\n- By strand: \"only + strand\"\n\n**Query Examples:**\n- All terminators: type=terminator\n- Long genes: type=CDS AND length\u003e2000\n- Overlapping genes: type=CDS AND overlaps=true\n\n### 5. Position Search\nFind features by genomic coordinates.\n\n**Query Formats:**\n- Single position: `12345`\n- Range: `10000-20000`\n- Multiple ranges: `1000-2000, 5000-6000`\n\n**Options:**\n- Exact position: Features at exactly this position\n- Overlapping: Features that overlap this range\n- Contained: Features fully within this range\n\n## Search Options\n\n### Fuzzy Matching\nAllow mismatches in sequence search:\n- **0 mismatches**: Exact match only\n- **1 mismatch**: Allow one different base\n- **2 mismatches**: Allow two different bases\n- **3 mismatches**: Maximum fuzzy tolerance\n\nAlgorithm: Hamming distance or edit distance.\n\n### Strand Selection\n- **Both strands** (default): Search forward and reverse complement\n- **+ strand only**: Search forward strand\n- **- strand only**: Search reverse complement\n\n### Case Sensitivity\n- **Case-insensitive** (default): ATCG = atcg\n- **Case-sensitive**: Distinguish (rare, for special annotations)\n\n### Result Limit\n- Default: Show all results\n- Limit: Stop after N results (for very common patterns)\n- Warning if \u003e1000 results\n\n## Results Display\n\n### Results List\n```\n┌─ Search Results (5 matches) ─────────────┐\n│                                           │\n│ 1. Position 1234 (+)                     │\n│    ...ATCGATCGATCG...                    │\n│    Gene: gp23 (Major capsid protein)     │\n│                                           │\n│ 2. Position 5678 (-)                     │\n│    ...CGATCGATCGAT...                    │\n│    Intergenic region                     │\n│                                           │\n│ 3. Position 9012 (+)                     │\n│    ...ATCGATCGATCG...                    │\n│    Gene: gp45 (DNA polymerase)           │\n│                                           │\n│ [Next] [Previous] [Export]               │\n└───────────────────────────────────────────┘\n```\n\n### Result Item Fields\n- **Position**: Genomic coordinate (1-based)\n- **Strand**: + (forward) or - (reverse)\n- **Context**: ±20 bp sequence context\n- **Annotation**: Overlapping gene or feature\n- **Match type**: Exact / 1mm / 2mm (mismatch count)\n\n### Navigation\n- **Click result**: Jump to position in main viewer\n- **Next button**: Go to next result (wrap around)\n- **Previous button**: Go to previous result\n- **Keyboard shortcuts**: Enter (next), Shift+Enter (prev)\n\n### Highlighting in Main Viewer\n- Highlight all matches with colored boxes\n- Selected match: Bright color (yellow)\n- Other matches: Dim color (light yellow)\n- Auto-scroll to selected match\n\n## Export Functionality\n\n### Export Formats\n1. **CSV**: Spreadsheet-compatible\n   ```\n   Position,Strand,Sequence,Annotation,Type\n   1234,+,ATCGATCGATCG,gp23,exact\n   5678,-,CGATCGATCGAT,intergenic,exact\n   ```\n\n2. **BED**: Genome browser format\n   ```\n   genome  1233  1245  match_1  1000  +\n   genome  5677  5689  match_2  1000  -\n   ```\n\n3. **FASTA**: Sequence format\n   ```\n   \u003ematch_1_pos1234_plus\n   ATCGATCGATCG\n   \u003ematch_2_pos5678_minus\n   CGATCGATCGAT\n   ```\n\n4. **JSON**: Structured data\n   ```json\n   {\n     \"query\": \"ATCGATCGATCG\",\n     \"mode\": \"sequence\",\n     \"results\": [\n       {\"position\": 1234, \"strand\": \"+\", \"sequence\": \"...\", \"annotation\": \"gp23\"}\n     ]\n   }\n   ```\n\n## Advanced Features\n\n### Batch Search\nSearch multiple patterns at once:\n- Input: List of sequences (one per line)\n- Algorithm: Aho-Corasick multi-pattern matching\n- Results: Grouped by pattern\n\n### Regular Expression Library\nPre-defined regex for common motifs:\n- **TATA box**: `TATAWR`\n- **Kozak sequence**: `GCCGCCACCAUGG`\n- **Shine-Dalgarno**: `AGGAGG`\n- **Poly-A tail**: `A{6,}`\n- **CpG island**: `[CG]{20,}`\n\nSelect from dropdown to auto-fill search.\n\n### Search History\n- Remember recent searches\n- Quick re-run previous queries\n- Clear history option\n\n### Bookmarks\n- Save interesting search results\n- Named bookmarks with notes\n- Persistent across sessions\n\n## Performance Optimization\n\n### Efficient Algorithms\n- **Boyer-Moore**: O(n/m) average for single pattern\n- **Aho-Corasick**: O(n + m + z) for multiple patterns\n- **Suffix Array**: O(m log n) pre-processing, O(m + k) search\n\n### Incremental Search\n- Start search as user types (debounced)\n- Cancel previous search on new input\n- Progressive results display\n\n### Indexing\n- Pre-build k-mer index for common searches\n- Gene name trie for autocomplete\n- Feature R-tree for position queries\n\n### Web Worker\n- Offload search to background thread\n- Keep UI responsive\n- Cancellable searches\n\n## Biological Use Cases\n\n### Finding Restriction Sites\n- Search: `GAATTC` (EcoRI)\n- Mode: Sequence, both strands\n- Quick map of all sites\n\n### Identifying Promoters\n- Search: `TTGACA[N]{16,18}TATAAT` (E. coli σ70)\n- Mode: Motif (regex)\n- Annotate promoters\n\n### Finding Repeated Genes\n- Search: Gene name \"capsid\"\n- Mode: Gene search\n- Identify duplications\n\n### Locating Terminators\n- Search: Type = terminator\n- Mode: Feature search\n- Map transcription units\n\n## Testing Considerations\n- Validate Boyer-Moore implementation\n- Test IUPAC code expansion\n- Check fuzzy matching accuracy\n- Verify result ranking\n- Test performance with large genomes (\u003e200 kb)\n- Edge cases: pattern at genome ends, overlapping matches","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T13:08:22.630181-05:00","updated_at":"2025-12-09T11:35:13.018793-05:00","closed_at":"2025-12-09T11:35:13.018793-05:00","dependencies":[{"issue_id":"phage_explorer-bjoz.17","depends_on_id":"phage_explorer-bjoz","type":"parent-child","created_at":"2025-12-08T13:08:22.631353-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-bjoz.17","depends_on_id":"phage_explorer-qiaq","type":"blocks","created_at":"2025-12-08T13:08:22.632623-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-bjoz.18","title":"AAKeyOverlay - Amino acid color reference","description":"Implement overlay for displaying amino acid color reference key and property information.\n\n## Purpose\nProvide quick reference for amino acid visualization:\n- **Color legend**: Show color scheme for each amino acid\n- **Property groups**: Classify AAs by properties (hydrophobic, charged, etc.)\n- **Single-letter codes**: AA abbreviations\n- **Three-letter codes**: Full abbreviations\n- **Chemical properties**: pI, hydrophobicity, molecular weight\n- **Codon degeneracy**: Number of codons per AA\n- **Usage guide**: Explain color schemes used in other overlays\n\n## Visualization Type\nReference panel overlay:\n- **Color grid**: 20 amino acids with color swatches\n- **Property grouping**: Organized by chemical properties\n- **Info panel**: Detailed AA properties on hover/click\n- **Scheme selector**: Switch between color schemes\n- **Export**: Save as reference image\n\n## Implementation Details\n\n### Files to Create\n1. `src/tui/overlays/AAKeyOverlay.tsx`\n   - Grid layout for 20 amino acids\n   - Color swatches with labels\n   - Property grouping sections\n   - Detailed info panel\n   - Color scheme selector\n   - Legend with property categories\n\n2. `src/data/amino-acids.ts`\n   - Amino acid database\n   - Color schemes (multiple options)\n   - Properties (hydrophobicity, charge, size, polarity)\n   - Codon mappings\n\n### Keyboard Shortcut\n- **Alt+K** - Toggle AA key overlay (K for Key)\n\n### Data Structure\n\n#### Amino Acid Database\n```typescript\ninterface AminoAcid {\n  name: string;           // \"Alanine\"\n  code1: string;          // \"A\"\n  code3: string;          // \"Ala\"\n  codons: string[];       // [\"GCT\", \"GCC\", \"GCA\", \"GCG\"]\n  properties: {\n    hydrophobicity: number;  // Kyte-Doolittle scale (-4.5 to 4.5)\n    charge: \"positive\" | \"negative\" | \"neutral\";\n    polarity: \"polar\" | \"nonpolar\";\n    aromaticity: boolean;\n    size: number;          // Molecular weight (Da)\n    pI: number;            // Isoelectric point\n    volume: number;        // Van der Waals volume (Å³)\n  };\n  category: \"hydrophobic\" | \"polar\" | \"positive\" | \"negative\" | \"special\";\n  color_schemes: {\n    default: string;      // Hex color\n    rasmol: string;       // RasMol scheme\n    taylor: string;       // Taylor scheme\n    hydrophobicity: string;\n    chemistry: string;\n  };\n}\n```\n\n## Color Schemes\n\n### 1. Default Scheme (Property-Based)\nGroups by chemical properties:\n- **Hydrophobic** (orange): A, V, L, I, M, F, W, P\n- **Polar** (green): S, T, N, Q, C, Y\n- **Positive** (blue): K, R, H\n- **Negative** (red): D, E\n- **Special** (gray): G, P\n\n### 2. RasMol Scheme (Classic)\nBased on RasMol molecular viewer:\n- **Acidic** (red): D, E\n- **Basic** (blue): K, R\n- **Hydrophobic** (white): A, V, L, I, M, F, W, P\n- **Polar** (green): S, T, N, Q\n- **Special**: C (yellow), G (gray), H (pale blue), Y (cyan)\n\n### 3. Taylor Scheme (Diverse)\nMaximum visual distinction:\n- Each AA has unique color\n- Optimized for visibility\n- Common in structure visualization\n\n### 4. Hydrophobicity Gradient\nContinuous color scale:\n- **Hydrophobic** (orange-red): High Kyte-Doolittle score\n- **Neutral** (white): Near 0\n- **Hydrophilic** (blue): Low/negative score\n\n### 5. Chemistry Scheme\nBy functional group:\n- **Aliphatic** (gray): G, A, V, L, I\n- **Aromatic** (purple): F, Y, W\n- **Sulfur** (yellow): C, M\n- **Hydroxyl** (blue): S, T\n- **Amide** (green): N, Q\n- **Basic** (light blue): K, R, H\n- **Acidic** (red): D, E\n- **Imino** (orange): P\n\n## Display Layout\n\n### Main Grid (5x4 layout)\n```\n┌─────────────────────────────────────────┐\n│ Amino Acid Color Key                    │\n├─────────────────────────────────────────┤\n│ Hydrophobic (Nonpolar)                  │\n│ [A] [V] [L] [I] [M] [F] [W] [P]        │\n│ Ala Val Leu Ile Met Phe Trp Pro        │\n│                                          │\n│ Polar (Uncharged)                        │\n│ [S] [T] [N] [Q] [C] [Y]                │\n│ Ser Thr Asn Gln Cys Tyr                │\n│                                          │\n│ Positive (Basic)                         │\n│ [K] [R] [H]                             │\n│ Lys Arg His                             │\n│                                          │\n│ Negative (Acidic)                        │\n│ [D] [E]                                 │\n│ Asp Glu                                 │\n│                                          │\n│ Special                                  │\n│ [G] [P]                                 │\n│ Gly Pro                                 │\n│                                          │\n│ [Scheme: Default ▼] [Export]           │\n└─────────────────────────────────────────┘\n```\n\n### Color Swatch\nEach AA displayed as:\n```\n┌─────┐\n│  A  │ ← Large single-letter code\n│ Ala │ ← Three-letter code\n└─────┘\n  ^\n  Color background\n```\n\n### Detailed Info Panel (on hover/click)\n```\n┌──────────────────────────────────┐\n│ Alanine (A, Ala)                 │\n├──────────────────────────────────┤\n│ Codons: GCT, GCC, GCA, GCG (4)   │\n│ Category: Hydrophobic            │\n│ Hydrophobicity: 1.8              │\n│ Charge: Neutral                  │\n│ Polarity: Nonpolar               │\n│ Molecular Weight: 89.09 Da       │\n│ pI: 6.00                         │\n│ Volume: 88.6 Å³                  │\n│ Aromaticity: No                  │\n└──────────────────────────────────┘\n```\n\n## Property Definitions\n\n### Hydrophobicity Scales\nMultiple scales available:\n1. **Kyte-Doolittle**: -4.5 (hydrophilic) to 4.5 (hydrophobic)\n2. **Eisenberg**: Normalized consensus scale\n3. **Hopp-Woods**: Hydrophilicity for antigen prediction\n4. **Cornette**: Membrane protein scale\n\n### Charge\nAt physiological pH (7.4):\n- **Positive**: K, R, H (basic side chains)\n- **Negative**: D, E (acidic side chains)\n- **Neutral**: All others\n\n### Polarity\n- **Polar**: Form H-bonds (S, T, N, Q, C, Y, K, R, H, D, E)\n- **Nonpolar**: Hydrophobic (A, V, L, I, M, F, W, P, G)\n\n### Size\n- **Tiny**: G, A, S (MW \u003c 100)\n- **Small**: C, D, N, P, T, V (MW 100-130)\n- **Medium**: E, Q, H, I, L, K, M (MW 130-150)\n- **Large**: F, R, Y, W (MW \u003e 150)\n\n### Special Categories\n- **Aromatic**: F, Y, W (contain benzene ring)\n- **Sulfur-containing**: C, M (thiol or thioether)\n- **Hydroxyl**: S, T (OH group)\n- **Amide**: N, Q (CONH2 group)\n- **Imino**: P (secondary amine)\n\n## Interactive Features\n\n### Hover Effects\n- Highlight AA swatch\n- Show detailed info panel\n- Display codons and properties\n\n### Click Actions\n- Pin info panel (stays open)\n- Copy AA code to clipboard\n- Filter: Show only this AA in other overlays\n\n### Scheme Selector\nDropdown menu:\n- Default (Property-based)\n- RasMol (Classic)\n- Taylor (Diverse)\n- Hydrophobicity (Gradient)\n- Chemistry (Functional groups)\n\nPreview scheme before applying.\n\n### Search/Filter\n- Type AA name or code to highlight\n- Filter by property (e.g., \"show only hydrophobic\")\n- Sort by property value\n\n## Educational Content\n\n### Property Explanations\nBrief descriptions:\n- **Hydrophobicity**: Tendency to avoid water, crucial for protein folding\n- **Charge**: Electrical charge at pH 7.4, affects protein interactions\n- **Aromaticity**: Contains aromatic ring, involved in π-stacking\n- **Polarity**: Ability to form hydrogen bonds\n\n### Usage Guide\n\"Color schemes are used in:\"\n- Translation viewer (ORF overlay)\n- Phase portrait overlay (AA composition)\n- Structure prediction overlays\n\n### Mnemonics\nHelp remember AA codes:\n- **I**: Isoleucine (I is for Island - branched)\n- **L**: Leucine (L is for Leader - common)\n- **V**: Valine (V for Valence - branched)\n- etc.\n\n## Export Functionality\n\n### Export Formats\n1. **PNG/SVG**: Reference image\n2. **PDF**: Printable reference card\n3. **CSV**: AA properties table\n4. **JSON**: Machine-readable data\n\n### Reference Card\nPrintable 1-page summary:\n- All 20 AAs with colors\n- Property categories\n- Codon table\n- Hydrophobicity scale\n\n## Integration with Other Overlays\n\n### Translation Viewer\n- Use same color scheme\n- Consistent AA coloring\n- Link to key for reference\n\n### Phase Portrait Overlay\n- Colors indicate AA properties\n- Key explains interpretation\n\n### Codon Usage Overlay\n- Show which codons encode which AAs\n- Link codon bias to AA usage\n\n## Biological Context\n\n### Essential vs Non-Essential\nAnnotate which AAs are:\n- **Essential** (9): F, H, I, K, L, M, T, V, W\n- **Conditionally essential**: C, Y, Q, R, G, P\n- **Non-essential**: A, D, E, N, S\n\n### Rarity in Proteins\nAverage frequency in proteins:\n- **Common**: L (9.7%), A (8.3%), S (6.6%)\n- **Rare**: W (1.1%), C (1.4%), H (2.3%)\n\n### Codon Degeneracy\n- **1 codon**: M, W (no degeneracy)\n- **2 codons**: F, Y, C, H, Q, E, D, K, N\n- **3 codons**: I (AUU, AUC, AUA)\n- **4 codons**: V, P, T, A, G\n- **6 codons**: L, S, R (most degenerate)\n\n## Performance\n- Static data (no worker needed)\n- Fast rendering (simple UI)\n- Minimal memory footprint\n\n## Testing Considerations\n- Verify color accuracy (accessibility)\n- Test color schemes for color-blind users\n- Validate property values against literature\n- Check codon mappings","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T13:08:25.071897-05:00","updated_at":"2025-12-09T11:35:13.019742-05:00","closed_at":"2025-12-09T11:35:13.019742-05:00","dependencies":[{"issue_id":"phage_explorer-bjoz.18","depends_on_id":"phage_explorer-bjoz","type":"parent-child","created_at":"2025-12-08T13:08:25.073166-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-bjoz.18","depends_on_id":"phage_explorer-qiaq","type":"blocks","created_at":"2025-12-08T13:08:25.074633-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-bjoz.19","title":"AALegend - Compact amino acid legend component","description":"Implement compact, reusable amino acid legend component for embedding in other overlays.\n\n## Purpose\nProvide a small, inline amino acid color reference that can be embedded in any overlay that displays amino acid sequences or properties. Unlike AAKeyOverlay (full reference panel), this is a minimal, space-efficient legend.\n\n## Use Cases\n- **Translation viewer**: Show AA colors while viewing ORFs\n- **Phase portrait overlay**: Legend for AA property colors\n- **Codon usage overlays**: Map codons to AAs with colors\n- **Any overlay displaying protein sequences**\n\n## Visualization Type\nCompact horizontal or vertical strip:\n- **Minimal mode**: Just colored boxes with single-letter codes\n- **Standard mode**: Boxes + codes + tooltips\n- **Expanded mode**: Boxes + codes + property category labels\n\n## Implementation Details\n\n### Files to Create\n1. `src/tui/components/AALegend.tsx`\n   - Reusable React component\n   - Configurable size (compact, standard, expanded)\n   - Configurable orientation (horizontal, vertical)\n   - Color scheme prop (match parent overlay)\n   - Tooltip support\n   - Responsive sizing\n\n2. `src/tui/components/AALegend.module.css`\n   - Styling for legend component\n   - Responsive layouts\n   - Hover effects\n\n### Component API\n```typescript\ninterface AALegendProps {\n  colorScheme?: \"default\" | \"rasmol\" | \"taylor\" | \"hydrophobicity\" | \"chemistry\";\n  size?: \"compact\" | \"standard\" | \"expanded\";\n  orientation?: \"horizontal\" | \"vertical\";\n  groupByProperty?: boolean;  // Group AAs by category\n  showLabels?: boolean;       // Show 1-letter codes\n  showTooltips?: boolean;     // Enable hover tooltips\n  onAAClick?: (aa: string) =\u003e void;  // Callback when AA clicked\n}\n```\n\n## Display Modes\n\n### Compact Mode (Minimal)\nTiny colored boxes, single-letter codes:\n```\n[A][R][N][D][C][Q][E][G][H][I][L][K][M][F][P][S][T][W][Y][V]\n```\nSize: ~300px × 20px (horizontal)\n\n### Standard Mode (Default)\nLarger boxes with tooltips:\n```\n┌─┐┌─┐┌─┐┌─┐┌─┐┌─┐┌─┐┌─┐┌─┐┌─┐\n│A││R││N││D││C││Q││E││G││H││I│\n└─┘└─┘└─┘└─┘└─┘└─┘└─┘└─┘└─┘└─┘\n┌─┐┌─┐┌─┐┌─┐┌─┐┌─┐┌─┐┌─┐┌─┐┌─┐\n│L││K││M││F││P││S││T││W││Y││V│\n└─┘└─┘└─┘└─┘└─┘└─┘└─┘└─┘└─┘└─┘\n```\nSize: ~300px × 40px (horizontal, 2 rows)\n\n### Expanded Mode (With Categories)\nGrouped by property with labels:\n```\nHydrophobic: [A][V][L][I][M][F][W][P]\nPolar:       [S][T][N][Q][C][Y]\nPositive:    [K][R][H]\nNegative:    [D][E]\nSpecial:     [G][P]\n```\nSize: ~400px × 80px (vertical grouping)\n\n## Layout Options\n\n### Horizontal Layout (Default)\nAll AAs in one or two rows:\n- **1 row**: All 20 AAs (requires ~400px width)\n- **2 rows**: 10 AAs per row (requires ~250px width)\n- **Adaptive**: Wraps based on container width\n\n### Vertical Layout\nStacked boxes for narrow spaces:\n```\n[A]\n[R]\n[N]\n[D]\n...\n[V]\n```\nSize: ~30px × 400px\n\n### Grouped Layout\nOrganized by property categories:\n- Each category gets a section\n- Category labels optional\n- Helps users understand color meanings\n\n## Color Schemes\nMatch parent overlay's scheme:\n- **Default**: Property-based (hydrophobic=orange, polar=green, etc.)\n- **RasMol**: Classic molecular viewer colors\n- **Taylor**: Maximum distinction colors\n- **Hydrophobicity**: Gradient (blue→white→red)\n- **Chemistry**: Functional group based\n\n## Interactive Features\n\n### Hover Tooltips\nShow on hover:\n```\n┌───────────────────────┐\n│ Alanine (Ala)         │\n│ Hydrophobic, Nonpolar │\n│ Codons: GCT, GCC,     │\n│         GCA, GCG      │\n└───────────────────────┘\n```\n\n### Click Actions\nOptional callback when AA clicked:\n- Highlight that AA in parent overlay\n- Filter to show only that AA\n- Show detailed properties\n- Copy code to clipboard\n\n### Keyboard Navigation\n- Tab through AAs\n- Arrow keys to move\n- Enter to select\n\n## Styling\n\n### Box Style\n- **Background**: AA color from scheme\n- **Border**: Subtle border for definition\n- **Size**: 16-32px square (depending on mode)\n- **Text**: Single-letter code, centered\n- **Font**: Monospace, bold\n\n### Hover State\n- Slight scale increase (1.1×)\n- Box shadow\n- Tooltip appears\n\n### Selected State (if clickable)\n- Thicker border\n- Glow effect\n- Maintains selection until clicked again\n\n## Responsive Behavior\n\n### Container Width Adaptations\n- **≥400px**: Single row, all 20 AAs\n- **250-400px**: Two rows, 10 per row\n- **\u003c250px**: Vertical layout (stacked)\n\n### Font Size Scaling\n- **Compact**: 10px\n- **Standard**: 12px\n- **Expanded**: 14px\n\n## Integration Examples\n\n### In Translation Viewer\n```tsx\n\u003cdiv className=\"translation-viewer\"\u003e\n  \u003cAALegend \n    colorScheme=\"default\"\n    size=\"standard\"\n    orientation=\"horizontal\"\n    showTooltips={true}\n  /\u003e\n  \u003cProteinSequence sequence={protein} /\u003e\n\u003c/div\u003e\n```\n\n### In Phase Portrait Overlay\n```tsx\n\u003cdiv className=\"phase-portrait\"\u003e\n  \u003cScatterPlot data={pcaData} /\u003e\n  \u003cAALegend \n    colorScheme=\"hydrophobicity\"\n    size=\"compact\"\n    groupByProperty={true}\n  /\u003e\n\u003c/div\u003e\n```\n\n### In Codon Usage Overlay\n```tsx\n\u003cdiv className=\"codon-usage\"\u003e\n  \u003cCodonTable /\u003e\n  \u003cAALegend \n    colorScheme=\"default\"\n    size=\"expanded\"\n    onAAClick={handleAAClick}\n  /\u003e\n\u003c/div\u003e\n```\n\n## Accessibility\n\n### ARIA Labels\n- `role=\"list\"` for legend container\n- `role=\"listitem\"` for each AA box\n- `aria-label` with full AA name\n\n### Keyboard Support\n- Tab navigation through AAs\n- Enter/Space to select\n- Escape to deselect\n\n### Color Contrast\n- Ensure text readable on colored backgrounds\n- WCAG AA compliance (4.5:1 contrast)\n- Provide text alternative (data attribute)\n\n## Performance\n- Pure CSS for styling (no canvas)\n- Memoize component (React.memo)\n- No re-renders unless props change\n- Lightweight DOM (20 elements max)\n\n## Data Source\nShares data with AAKeyOverlay:\n```typescript\nimport { aminoAcids, colorSchemes } from '@/data/amino-acids';\n\nfunction AALegend({ colorScheme = \"default\", ...props }) {\n  const colors = colorSchemes[colorScheme];\n  return (\n    \u003cdiv className=\"aa-legend\"\u003e\n      {aminoAcids.map(aa =\u003e (\n        \u003cAABox \n          key={aa.code1}\n          aa={aa}\n          color={colors[aa.code1]}\n          {...props}\n        /\u003e\n      ))}\n    \u003c/div\u003e\n  );\n}\n```\n\n## Testing Considerations\n- Test all size modes (compact, standard, expanded)\n- Test both orientations (horizontal, vertical)\n- Test all color schemes\n- Verify tooltips work correctly\n- Check responsive behavior at different widths\n- Validate accessibility (screen reader, keyboard nav)\n- Test click callbacks\n- Ensure consistent with AAKeyOverlay colors\n\n## Customization Options\n\n### Theme Integration\n- Respect light/dark mode\n- Adjust colors for theme\n- Maintain contrast\n\n### Custom Colors\nAllow override:\n```tsx\n\u003cAALegend \n  colorScheme=\"default\"\n  customColors={{ A: \"#ff0000\", R: \"#00ff00\" }}\n/\u003e\n```\n\n### Subset Display\nShow only specific AAs:\n```tsx\n\u003cAALegend \n  aminoAcids={[\"A\", \"R\", \"N\", \"D\"]}  // Only show these 4\n  size=\"compact\"\n/\u003e\n```\n\n## Documentation\nInclude JSDoc comments:\n```typescript\n/**\n * Compact amino acid legend component for displaying AA color schemes.\n * \n * @example\n * \u003cAALegend \n *   colorScheme=\"default\"\n *   size=\"standard\"\n *   orientation=\"horizontal\"\n * /\u003e\n */\nexport function AALegend(props: AALegendProps) { ... }\n```\n\n## Future Enhancements\n- Animation on hover (subtle pulse)\n- Search/filter within legend\n- Export legend as image\n- Copy all codes to clipboard\n- Custom grouping (user-defined categories)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T13:09:12.986652-05:00","updated_at":"2025-12-08T17:03:35.657409-05:00","closed_at":"2025-12-08T17:03:35.657409-05:00","dependencies":[{"issue_id":"phage_explorer-bjoz.19","depends_on_id":"phage_explorer-bjoz","type":"parent-child","created_at":"2025-12-08T13:09:12.991222-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-bjoz.19","depends_on_id":"phage_explorer-qiaq","type":"blocks","created_at":"2025-12-08T13:09:12.995464-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-bjoz.2","title":"BiasDecompositionOverlay - Codon bias PCA decomposition","description":"Implement overlay for decomposing codon usage bias into principal components to reveal evolutionary pressures and adaptation strategies.\n\n## Biological Significance\nCodon usage bias reflects:\n- Host tRNA pool adaptation (translation efficiency)\n- Mutational biases (GC pressure, DNA repair mechanisms)\n- Expression levels (highly expressed genes more optimized)\n- Gene age and acquisition history\n- Selection vs drift balance\n\nPCA of codon usage separates these overlapping factors into interpretable axes.\n\n## Visualization Type\nMulti-panel interactive visualization:\n- **Main panel**: 2D scatter plot of genes in PC1/PC2 space\n- **Loading panel**: Bar chart showing codon contributions to each PC\n- **Trajectory panel**: Gene position along PC1 (genome position vs bias)\n- **tRNA panel**: Predicted host tRNA correlation with PC axes\n\n## Worker Integration\nCreate `workers/bias-decomposition-worker.ts`:\n- Calculate 59-dimensional codon usage vectors (excluding stop codons)\n- Apply relative synonymous codon usage (RSCU) normalization\n- Compute PCA decomposition\n- Calculate effective number of codons (ENC)\n- Predict host tRNA availability correlation\n- Identify genes with atypical bias (outliers)\n- Calculate codon adaptation index (CAI) if host reference available\n\n## Implementation Details\n\n### Files to Create\n1. `src/tui/overlays/BiasDecompositionOverlay.tsx`\n   - Multi-panel layout with scatter plot (ScatterCanvas)\n   - Loading vector visualization\n   - Genome trajectory plot\n   - tRNA correlation display\n   - Interactive gene selection\n\n2. `src/workers/bias-decomposition-worker.ts`\n   - Codon counting and RSCU calculation\n   - PCA implementation for codon usage\n   - ENC calculation\n   - tRNA prediction/matching algorithms\n   - CAI calculation\n   - Outlier detection\n\n### Dependencies\n- **Requires**: Visualization primitives task (ScatterCanvas.tsx)\n- Set dependency after primitives task is created\n\n### Keyboard Shortcut\n- **Alt+B** - Toggle bias decomposition overlay\n\n### Data Flow\n1. User activates overlay (Alt+B)\n2. Worker receives all ORF sequences\n3. Worker computes for each ORF:\n   - Codon frequency counts\n   - RSCU values (normalized by amino acid)\n   - ENC (effective number of codons, 20-61 scale)\n4. Worker applies PCA to RSCU matrix\n5. Worker calculates:\n   - PC scores for each gene\n   - Loading vectors (codon contributions)\n   - Variance explained\n   - Host tRNA correlation (if host known)\n6. UI renders multi-panel display\n7. User interactions:\n   - Select gene in scatter to highlight in genome\n   - View specific codon loadings\n   - Compare to host optimal codons\n\n## Display Panels\n\n### 1. Main Scatter Plot (PC1 vs PC2)\n- Each point = one ORF\n- Color by: functional class, ENC, or expression\n- Axes show variance explained\n- Outliers highlighted\n\n### 2. Loading Vectors\n- Bar chart of codon contributions to selected PC\n- Group by amino acid\n- Highlight host-optimal codons (if known)\n\n### 3. Genome Trajectory\n- X-axis: Genome position\n- Y-axis: PC1 score (primary bias axis)\n- Reveals regional bias patterns\n- Identifies HGT candidates\n\n### 4. tRNA Correlation\n- Match PC axes to predicted host tRNA availability\n- Show correlation coefficients\n- List top correlated tRNAs\n\n## Biological Interpretation\n\n### PC1 typically represents:\n- GC3 content (GC% at third codon position)\n- Mutational bias (AT → GC or GC → AT pressure)\n\n### PC2 typically represents:\n- Translation efficiency (tRNA adaptation)\n- Expression level effects\n\n### Outliers indicate:\n- Recent horizontal gene transfer\n- Genes with unusual expression patterns\n- Artifacts or pseudogenes\n\n## Metrics Displayed\n- **ENC**: Effective number of codons (20 = extreme bias, 61 = no bias)\n- **CAI**: Codon adaptation index (if host reference available)\n- **RSCU**: Relative synonymous codon usage per gene\n- **Variance explained**: % of bias variation captured by each PC\n\n## Testing Considerations\n- Compare with known biased genes (ribosomal proteins)\n- Validate PC1 correlation with GC3%\n- Check outliers against known HGT events\n- Test with phages of different host ranges","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T12:59:58.877186-05:00","updated_at":"2025-12-09T08:16:04.882009-05:00","closed_at":"2025-12-09T08:16:04.882009-05:00","dependencies":[{"issue_id":"phage_explorer-bjoz.2","depends_on_id":"phage_explorer-bjoz","type":"parent-child","created_at":"2025-12-08T12:59:58.878704-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-bjoz.2","depends_on_id":"phage_explorer-bjoz.7","type":"blocks","created_at":"2025-12-08T13:09:47.366712-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-bjoz.3","title":"HGTOverlay - Horizontal gene transfer island detection","description":"Implement overlay for detecting and visualizing horizontal gene transfer (HGT) islands and mobile genetic elements in phage genomes.\n\n## Biological Significance\nHorizontal gene transfer is a major driver of phage evolution, enabling:\n- Acquisition of toxin genes, antibiotic resistance, or virulence factors\n- Rapid adaptation to new hosts\n- Immune evasion strategies\n- Metabolic augmentation (AMGs - auxiliary metabolic genes)\n\nThis overlay identifies genomic regions with atypical compositional properties suggesting recent acquisition from other organisms.\n\n## Visualization Type\nMulti-track genome browser with:\n- **Island track**: Highlighted regions with HGT probability scores\n- **Feature track**: GC% deviation from genome average\n- **Bias track**: Codon usage deviation (PC1 from bias decomposition)\n- **Similarity track**: BLAST hit density to non-phage organisms\n- **Arc diagram**: Connections between islands and putative sources\n\n## Worker Integration\nCreate `workers/hgt-worker.ts`:\n- Calculate GC% in sliding windows, identify deviations\n- Compute codon usage deviation from genome average\n- Perform compositional segmentation (change-point detection)\n- Integrate with external BLAST results (if available)\n- Score HGT probability using multiple features\n- Predict island boundaries and source organisms\n- Identify mobile element signatures (integrases, recombinases)\n\n## Implementation Details\n\n### Files to Create\n1. `src/tui/overlays/HGTOverlay.tsx`\n   - Multi-track visualization using GenomeTrack primitive\n   - Island highlighting with probability scores\n   - Arc diagram for source connections (ArcDiagram primitive)\n   - Interactive island selection\n   - Source organism prediction display\n\n2. `src/workers/hgt-worker.ts`\n   - Sliding window GC% and codon usage analysis\n   - Change-point detection algorithms (PELT, binary segmentation)\n   - Compositional deviation scoring\n   - Mobile element detection (integrase, recombinase motifs)\n   - HGT probability modeling\n   - BLAST result parsing (optional)\n\n### Dependencies\n- **Requires**: Visualization primitives task (GenomeTrack.tsx, ArcDiagram.tsx)\n- Set dependency after primitives task is created\n\n### Keyboard Shortcut\n- **Alt+H** - Toggle HGT overlay\n\n### Data Flow\n1. User activates overlay (Alt+H)\n2. Worker receives genome sequence and ORF annotations\n3. Worker analyzes:\n   - Sliding window GC% (500bp windows)\n   - Per-gene codon usage deviation\n   - Dinucleotide frequency anomalies\n   - Mobile element signatures (HMMs or regex patterns)\n4. Worker performs segmentation:\n   - Identify change points in compositional features\n   - Merge nearby change points into islands\n   - Score each island for HGT probability\n5. Worker predicts sources:\n   - Compare island composition to known organisms\n   - Identify similar sequences in databases (if BLAST available)\n6. UI renders multi-track display with islands highlighted\n7. User can:\n   - Click island for detailed stats\n   - View predicted source organisms\n   - Export island coordinates\n\n## HGT Probability Scoring\nComposite score based on:\n- **GC% deviation** (30%): |island_GC - genome_GC| \u003e 5%\n- **Codon usage deviation** (30%): Mahalanobis distance in PC space\n- **Dinucleotide bias** (20%): ρ-statistic (Karlin signature)\n- **Mobile elements** (20%): Presence of integrases, recombinases, IS elements\n\nScore 0-100, threshold \u003e60 for likely HGT.\n\n## Display Tracks\n\n### 1. Island Track\n- Colored regions: Green (low), Yellow (medium), Red (high HGT probability)\n- Height proportional to confidence score\n- Click for details popup\n\n### 2. GC% Deviation Track\n- Line graph showing (local_GC - genome_GC)\n- Shaded regions where |deviation| \u003e 5%\n\n### 3. Codon Usage Deviation Track\n- Bar graph of per-gene PC1 deviation\n- Correlates with bias decomposition overlay\n\n### 4. Mobile Element Track\n- Markers for detected integrases, recombinases\n- Gene names annotated\n\n### 5. Arc Diagram (if BLAST data available)\n- Arcs connect islands to predicted source organisms\n- Arc color indicates similarity strength\n\n## Island Details Popup\nWhen clicking an island, display:\n- Coordinates (start-end)\n- HGT probability score\n- GC% (island vs genome)\n- Predicted source organisms (top 3)\n- Genes in island (with functional annotations)\n- Mobile element signatures detected\n\n## Testing Considerations\n- Validate with phages containing known prophages\n- Test with Mu-like phages (obligate HGT)\n- Compare with established HGT detection tools (Alien_hunter, IslandViewer)\n- Check false positive rate in well-characterized phages","status":"closed","priority":2,"issue_type":"task","assignee":"GreenBear","created_at":"2025-12-08T12:59:59.051831-05:00","updated_at":"2025-12-09T08:28:23.305513-05:00","closed_at":"2025-12-09T08:28:23.305513-05:00","dependencies":[{"issue_id":"phage_explorer-bjoz.3","depends_on_id":"phage_explorer-bjoz","type":"parent-child","created_at":"2025-12-08T12:59:59.052454-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-bjoz.3","depends_on_id":"phage_explorer-bjoz.7","type":"blocks","created_at":"2025-12-08T13:09:48.630622-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-bjoz.4","title":"CRISPROverlay - CRISPR spacer mapping and visualization","description":"Implement overlay for mapping CRISPR spacers to phage genomes and visualizing host immune targeting patterns.\n\n## Biological Significance\nCRISPR-Cas systems provide bacteria with adaptive immunity against phages. This overlay:\n- Maps known CRISPR spacers to phage genome positions\n- Reveals targeted regions (often essential genes)\n- Shows evolutionary arms race signatures\n- Identifies anti-CRISPR (Acr) protein candidates\n- Predicts host range based on CRISPR resistance\n\nUnderstanding CRISPR targeting helps predict:\n- Which hosts this phage can infect\n- Selective pressure on phage genes\n- Evolution of escape mutations\n\n## Visualization Type\nMulti-component display:\n- **Genome track**: Linear genome with spacer match positions\n- **Arc diagram**: Connections from spacers to genome targets\n- **Heatmap**: Spacer match density across genome\n- **Target gene list**: Sorted by number of spacer matches\n- **Host resistance panel**: Predicted CRISPR-sensitive hosts\n\n## Worker Integration\nCreate `workers/crispr-worker.ts`:\n- Search for CRISPR spacer matches (exact and fuzzy)\n- Allow up to 2 mismatches (escape mutations)\n- Identify protospacer adjacent motifs (PAMs) near matches\n- Calculate spacer coverage across genome\n- Detect anti-CRISPR protein candidates (Acr HMMs)\n- Integrate with CRISPRCasdb or other spacer databases\n- Predict host susceptibility based on spacer matches\n\n## Implementation Details\n\n### Files to Create\n1. `src/tui/overlays/CRISPROverlay.tsx`\n   - Genome track with spacer match markers (GenomeTrack)\n   - Arc diagram linking spacers to targets (ArcDiagram)\n   - Heatmap of spacer density (HeatmapCanvas)\n   - Targeted gene table\n   - Host resistance predictions panel\n\n2. `src/workers/crispr-worker.ts`\n   - Spacer sequence search (Boyer-Moore or FM-index)\n   - Fuzzy matching with mismatches\n   - PAM identification (regex patterns for different Cas types)\n   - Acr protein detection (HMM scanning or profile matching)\n   - Database integration (fetch spacers from CRISPRCasdb API)\n   - Host range prediction logic\n\n3. `src/data/spacer-db.ts` (optional)\n   - Local cache of common CRISPR spacers\n   - Fallback if external API unavailable\n\n### Dependencies\n- **Requires**: Visualization primitives task (GenomeTrack, ArcDiagram, HeatmapCanvas)\n- Set dependency after primitives task is created\n\n### Keyboard Shortcut\n- **Alt+C** - Toggle CRISPR overlay\n\n### Data Flow\n1. User activates overlay (Alt+C)\n2. If online: Worker queries CRISPRCasdb API with phage genus/species\n3. If offline: Worker uses local spacer database (if available)\n4. Worker receives spacer sequences and host information\n5. Worker searches phage genome:\n   - Exact matches (perfect complementarity)\n   - 1-mismatch tolerance (common escape mutations)\n   - 2-mismatch tolerance (rare escape variants)\n6. Worker identifies PAMs adjacent to matches:\n   - 5'-NGG-3' for SpyCas9\n   - 5'-YTN-3' for SauCas9\n   - Other PAMs for different Cas types\n7. Worker calculates:\n   - Spacer match density per 1kb window\n   - Target gene vulnerability scores\n   - Anti-CRISPR protein predictions\n8. UI renders all visualization components\n9. User can:\n   - Hover spacer arc to see host source\n   - Click target gene for details\n   - Toggle mismatch tolerance (0/1/2)\n   - Export spacer match table\n\n## Display Components\n\n### 1. Genome Track with Spacer Matches\n- Vertical markers at each match position\n- Color by mismatch count: Blue (0), Green (1), Yellow (2)\n- Marker height = match quality score\n\n### 2. Arc Diagram\n- Arcs connect spacer source (top) to genome target (bottom)\n- Color by host organism\n- Thickness by match quality\n- Grouped by host species\n\n### 3. Spacer Density Heatmap\n- Sliding window (1kb) spacer match density\n- Reveals hotspots (highly targeted regions)\n- Color scale: White (0) → Red (high density)\n\n### 4. Targeted Gene Table\n| Gene | Position | Spacers | Hosts | Function |\n|------|----------|---------|-------|----------|\n| MCP  | 12345    | 15      | 8     | Major capsid |\n| TerL | 23456    | 12      | 6     | Terminase    |\n\nSorted by spacer count.\n\n### 5. Host Resistance Panel\n- List of hosts with spacers targeting this phage\n- Predicted infection outcome:\n  - ✓ Resistant (many spacers, essential genes targeted)\n  - ~ Partial (few spacers, non-essential targets)\n  - ✗ Susceptible (no spacers or Acr proteins present)\n\n### 6. Anti-CRISPR Detection\n- If Acr proteins predicted, highlight genes\n- Link to Acr family annotations\n\n## Spacer Match Scoring\nFor each match, calculate quality score:\n```\nscore = 100 - (mismatches × 25) + (PAM_present × 20)\n```\n- Perfect match + PAM: 120\n- 1 mismatch + PAM: 95\n- 2 mismatches + PAM: 70\n- Perfect match, no PAM: 100\n\n## Biological Interpretation\n\n### Highly Targeted Genes\nEssential genes (DNA polymerase, terminase, major capsid) often have many spacers, indicating strong selective pressure.\n\n### Spacer-Free Regions\nRegions with no spacer matches may:\n- Contain non-essential genes\n- Have high mutation rates (escape)\n- Be recently acquired (HGT)\n\n### Acr Proteins\nPresence of anti-CRISPR proteins suggests:\n- Phage can evade CRISPR immunity\n- Arms race with specific host lineages\n- Broader host range potential\n\n## Testing Considerations\n- Validate with well-characterized phage-CRISPR interactions (E. coli K12 vs phages)\n- Check PAM detection accuracy\n- Compare Acr predictions with experimental data\n- Test performance with large spacer databases (\u003e10K spacers)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T13:00:00.311741-05:00","updated_at":"2025-12-09T11:35:13.020524-05:00","closed_at":"2025-12-09T11:35:13.020524-05:00","dependencies":[{"issue_id":"phage_explorer-bjoz.4","depends_on_id":"phage_explorer-bjoz","type":"parent-child","created_at":"2025-12-08T13:00:00.31252-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-bjoz.4","depends_on_id":"phage_explorer-bjoz.7","type":"blocks","created_at":"2025-12-08T13:09:49.697639-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-bjoz.5","title":"SyntenyOverlay - Gene order conservation blocks","description":"Implement overlay for detecting and visualizing synteny (conserved gene order) blocks between the current phage and related genomes.\n\n## Biological Significance\nSynteny analysis reveals:\n- Conserved functional modules (gene cassettes)\n- Genome rearrangements and recombination events\n- Evolutionary relationships between phages\n- Mosaic genome architecture\n- Essential vs flexible genomic regions\n\nPhages often share syntenic blocks (e.g., structural module, replication module) even when overall similarity is low, reflecting modular evolution.\n\n## Visualization Type\nInteractive comparison view:\n- **Main panel**: Dot plot matrix (self vs reference genomes)\n- **Alignment tracks**: Linear synteny blocks with ribbons connecting homologs\n- **Rearrangement diagram**: Inversions, translocations, duplications\n- **Conservation heatmap**: Per-gene synteny conservation score\n\n## Worker Integration\nCreate `workers/synteny-worker.ts`:\n- Perform all-vs-all gene similarity searches (DIAMOND-like local alignment)\n- Identify collinear gene clusters (syntenic blocks)\n- Detect genome rearrangements (inversions, transpositions)\n- Calculate synteny conservation scores\n- Cluster phages by synteny patterns\n- Generate dot plot matrices\n\n## Implementation Details\n\n### Files to Create\n1. `src/tui/overlays/SyntenyOverlay.tsx`\n   - Dot plot visualization (HeatmapCanvas for matrix)\n   - Linear synteny track display (GenomeTrack + ribbons)\n   - Rearrangement diagram\n   - Reference genome selector\n   - Conservation score display\n\n2. `src/workers/synteny-worker.ts`\n   - Gene-to-gene similarity scoring (Smith-Waterman or BLAST-like)\n   - Syntenic block detection (MCScanX-like algorithm)\n   - Collinearity scoring\n   - Rearrangement classification\n   - Dot plot generation\n   - Multi-genome comparison support\n\n3. `src/data/reference-genomes.ts` (optional)\n   - Curated set of reference phage genomes\n   - Common phage families (T4-like, T7-like, lambda-like, etc.)\n\n### Dependencies\n- **Requires**: Visualization primitives task (HeatmapCanvas, GenomeTrack)\n- Set dependency after primitives task is created\n\n### Keyboard Shortcut\n- **Alt+S** - Toggle synteny overlay\n\n### Data Flow\n1. User activates overlay (Alt+S)\n2. UI prompts for reference genome selection:\n   - Upload custom genome file\n   - Select from built-in references\n   - Query NCBI for related phages\n3. Worker receives both genomes (query + reference)\n4. Worker performs all-vs-all gene comparison:\n   - Extract protein sequences\n   - Local alignment (Smith-Waterman)\n   - E-value filtering (\u003c 1e-5)\n   - % identity and coverage thresholds\n5. Worker detects syntenic blocks:\n   - Find chains of collinear homologs\n   - Require ≥3 consecutive genes\n   - Allow gaps (up to 2 intervening genes)\n6. Worker classifies rearrangements:\n   - Inversions (reverse strand order)\n   - Translocations (position changes)\n   - Duplications (copy number \u003e 1)\n7. Worker generates visualizations:\n   - Dot plot matrix\n   - Synteny ribbons\n   - Conservation scores\n8. UI renders comparison view\n9. User can:\n   - Pan/zoom dot plot\n   - Click synteny block for gene details\n   - Toggle multiple reference genomes\n   - Export synteny block coordinates\n\n## Visualization Panels\n\n### 1. Dot Plot Matrix\n- X-axis: Query genome position\n- Y-axis: Reference genome position\n- Dots: Gene homologs\n- Diagonal lines: Syntenic blocks\n- Off-diagonal: Rearrangements\n- Color by % identity\n\n### 2. Linear Synteny Tracks\n```\nQuery:    [gene1] [gene2] [gene3] ─────── [gene4] [gene5]\n             │       │       │                │       │\n             └───────┴───────┘                └───────┘\nReference:[gene1] [gene2] [gene3] [geneX] [gene4] [gene5]\n```\nRibbons connect homologous genes. Width = % identity.\n\n### 3. Rearrangement Diagram\nVisual representation of:\n- **Inversions**: Curved arcs with direction arrows\n- **Translocations**: Crossed ribbons\n- **Duplications**: Branching ribbons\n- **Deletions**: Gaps in reference\n\n### 4. Conservation Heatmap\nPer-gene bar chart showing:\n- Synteny conservation score (0-100)\n- Number of syntenic references\n- Color gradient: Red (unique) → Green (highly conserved)\n\n## Synteny Block Scoring\nFor each block, calculate conservation score:\n```\nscore = (num_collinear_genes / block_length) × \n        (avg_pairwise_identity / 100) × \n        (1 - gap_penalty)\n```\n- Perfect collinearity, 100% ID, no gaps: 100\n- Partial conservation: 50-90\n- Weak synteny: 20-50\n\n## Biological Interpretation\n\n### Strong Synteny\n- Conserved functional modules (replication, packaging)\n- Essential gene order (operons, regulatory coupling)\n- Recent common ancestry\n\n### Rearrangements\n- Inversions: Often neutral, genome plasticity\n- Translocations: Recombination, horizontal exchange\n- Duplications: Gene family expansion, functional redundancy\n\n### Mosaic Structure\nPhages with multiple syntenic blocks from different sources indicate:\n- Modular evolution\n- Recombination hotspots\n- Hybrid genome architecture\n\n## Reference Genome Sources\nBuilt-in references (examples):\n- **T4-like**: Myoviridae, large genome, complex structure\n- **T7-like**: Podoviridae, small genome, simple\n- **Lambda-like**: Siphoviridae, temperate, integration\n- **User-uploaded**: Custom comparison\n\n## Performance Optimization\n- Pre-compute common reference comparisons\n- Cache gene similarity matrices\n- Incremental dot plot rendering for large genomes\n- Web Worker offloading for alignment calculations\n\n## Testing Considerations\n- Validate with known syntenic phage pairs (T4 vs T4-like)\n- Test rearrangement detection (T7 vs T3)\n- Compare with established tools (MCScanX, SyMAP)\n- Check performance with divergent genomes","status":"closed","priority":2,"issue_type":"task","assignee":"LilacPond","created_at":"2025-12-08T13:00:02.028256-05:00","updated_at":"2025-12-09T11:27:44.308725-05:00","closed_at":"2025-12-09T11:27:44.308725-05:00","dependencies":[{"issue_id":"phage_explorer-bjoz.5","depends_on_id":"phage_explorer-bjoz","type":"parent-child","created_at":"2025-12-08T13:00:02.029077-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-bjoz.5","depends_on_id":"phage_explorer-bjoz.7","type":"blocks","created_at":"2025-12-08T13:09:50.563742-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-bjoz.6","title":"TropismOverlay - Host receptor predictions","description":"Implement overlay for predicting host tropism (host range) based on receptor-binding protein analysis and host factor requirements.\n\n## Biological Significance\nHost tropism determines:\n- Which bacterial species/strains a phage can infect\n- Receptor specificity (LPS, pili, flagella, proteins)\n- Therapeutic applications (target specificity for phage therapy)\n- Ecological niche and biogeography\n- Evolutionary constraints on host switching\n\nThis overlay analyzes receptor-binding proteins (RBPs) and auxiliary host recognition factors to predict host range.\n\n## Visualization Type\nMulti-panel dashboard:\n- **RBP structure diagram**: Predicted receptor-binding protein domains\n- **Host prediction table**: Ranked list of potential hosts with confidence\n- **Receptor type radar chart**: Predicted specificity (LPS, pili, OmpC, etc.)\n- **Host phylogeny tree**: Mapped predicted host range\n- **Confidence heatmap**: Per-host-species infection probability\n\n## Worker Integration\nCreate `workers/tropism-worker.ts`:\n- Identify receptor-binding proteins (tail fibers, tail spikes, baseplate proteins)\n- Predict protein domains using HMMs (Pfam, custom phage RBP profiles)\n- Match domains to known receptor specificities\n- Analyze auxiliary host factors (DNA modifications, restriction systems)\n- Query host-phage interaction databases (PHASTER, Millard database)\n- Calculate host range predictions with confidence scores\n- Consider host defense systems (R-M, CRISPR)\n\n## Implementation Details\n\n### Files to Create\n1. `src/tui/overlays/TropismOverlay.tsx`\n   - Multi-panel dashboard layout\n   - RBP domain visualization (modular protein diagram)\n   - Host prediction table with sorting\n   - Receptor radar chart\n   - Phylogenetic tree with host mapping\n   - Confidence heatmap\n\n2. `src/workers/tropism-worker.ts`\n   - RBP identification (regex + HMMs)\n   - Domain prediction and classification\n   - Receptor specificity database matching\n   - Host range prediction algorithm\n   - Defense system compatibility check\n   - Phylogenetic mapping\n\n3. `src/data/rbp-profiles.ts`\n   - HMM profiles for common RBP domains\n   - Receptor specificity annotations\n   - Known phage-host interaction database\n\n4. `src/data/host-phylogeny.ts` (optional)\n   - Bacterial phylogenetic tree structure\n   - Host taxonomy database\n\n### Keyboard Shortcut\n- **Alt+T** - Toggle tropism overlay\n\n### Data Flow\n1. User activates overlay (Alt+T)\n2. Worker receives genome sequence and ORF annotations\n3. Worker identifies RBP candidates:\n   - Search for tail fiber proteins (T4-like, T7-like)\n   - Identify tail spike proteins (P22-like)\n   - Find baseplate proteins (Myoviridae)\n   - Detect pili/flagella binding proteins\n4. Worker predicts domains:\n   - Scan RBP sequences with HMM profiles\n   - Classify domains (pectin lyase, endosialidase, carbohydrate-binding, etc.)\n   - Map to receptor specificities\n5. Worker queries databases:\n   - Match RBP signatures to known phage-host interactions\n   - Check compatibility with host defense systems\n6. Worker calculates host predictions:\n   - Rank hosts by likelihood (0-100 score)\n   - Aggregate evidence from multiple sources\n7. UI renders dashboard with predictions\n8. User can:\n   - View RBP domain details\n   - Sort hosts by confidence\n   - Export host range predictions\n   - Compare with experimental data (if available)\n\n## Prediction Algorithm\nHost range score calculated from:\n- **RBP domain match (40%)**: Direct domain-to-receptor mapping\n- **Homolog database (30%)**: Similarity to phages with known hosts\n- **Auxiliary factors (20%)**: DNA modification compatibility, lack of CRISPR spacers\n- **Phylogenetic proximity (10%)**: Evolutionary distance from known hosts\n\nFinal score: 0-100 (\u003e70 = high confidence, 50-70 = medium, \u003c50 = low)\n\n## Display Panels\n\n### 1. RBP Structure Diagram\nModular visualization of receptor-binding protein:\n```\n[Signal] [Shaft] [Neck] [Head] [Binding Domain]\n  (aa 1-50) (50-300) (300-400) (400-600) (600-800)\n                                        │\n                                  [Pectin Lyase]\n                                  → LPS receptor\n```\nDomains color-coded by function.\n\n### 2. Host Prediction Table\n| Host Species | Confidence | Receptor | Evidence |\n|--------------|------------|----------|----------|\n| E. coli K12  | 95         | LPS O-antigen | RBP domain + DB match |\n| Salmonella   | 78         | LPS core | RBP homology |\n| Shigella     | 65         | OmpA | Weak domain match |\n\nSortable by confidence.\n\n### 3. Receptor Type Radar Chart\nPolar chart showing predicted specificity for:\n- LPS (lipopolysaccharide)\n- Pili (F-pili, Type IV pili)\n- Flagella\n- Outer membrane proteins (OmpC, OmpF, etc.)\n- Capsule polysaccharides\n- Other receptors\n\n### 4. Host Phylogeny Tree\nPhylogenetic tree of bacteria with:\n- Predicted hosts highlighted (color by confidence)\n- Known hosts marked (if data available)\n- Evolutionary context for host range\n\n### 5. Confidence Heatmap\nMatrix showing infection probability:\n- Rows: Bacterial species\n- Columns: Evidence types (RBP, DB, Defense)\n- Color intensity: Confidence (0-100)\n\n## RBP Domain Types\nCommon domains and their receptor targets:\n- **Pectin lyase**: LPS O-antigen\n- **Endosialidase**: Sialic acid (capsule)\n- **Carbohydrate-binding**: Polysaccharide receptors\n- **Pili-binding**: F-pili, Type IV pili\n- **OmpC/F-binding**: Outer membrane proteins\n- **Baseplate**: Complex multi-receptor binding\n\n## Evidence Sources\n1. **Direct domain match**: RBP domain has known receptor\n2. **Homolog database**: Similar phages infect these hosts\n3. **Defense compatibility**: No CRISPR spacers, compatible R-M\n4. **Phylogenetic inference**: Close relatives of known hosts\n5. **Experimental data**: Published host range (if available)\n\n## Biological Interpretation\n\n### Narrow Host Range\n- Highly specific RBP domains\n- Stringent auxiliary factor requirements\n- Example: Lambda (E. coli K12 only)\n\n### Broad Host Range\n- Generic receptors (common OMPs)\n- Flexible auxiliary factor tolerance\n- Multiple RBPs or modular binding\n- Example: T4 (many E. coli strains)\n\n### Host Switching Potential\n- RBP domain plasticity\n- Low defense system barriers\n- Mosaic RBP structure (recombination)\n\n## Testing Considerations\n- Validate with phages of known host range (T4, T7, Lambda)\n- Compare predictions with experimental plating assays\n- Check sensitivity/specificity of RBP domain detection\n- Test with polyvalent phages (multiple hosts)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T13:00:04.209758-05:00","updated_at":"2025-12-09T11:35:13.021298-05:00","closed_at":"2025-12-09T11:35:13.021298-05:00","dependencies":[{"issue_id":"phage_explorer-bjoz.6","depends_on_id":"phage_explorer-bjoz","type":"parent-child","created_at":"2025-12-08T13:00:04.211733-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-bjoz.7","title":"Create reusable visualization primitives","description":"Create a set of reusable, high-performance canvas-based visualization primitives that will be shared across multiple overlay components in Phase 3.\n\n## Purpose\nProvide consistent, performant rendering components for complex genomic visualizations including heatmaps, scatter plots, arc diagrams, genome tracks, and gel simulations.\n\n## Components to Create\n\n### 1. HeatmapCanvas.tsx\n- Generic 2D heatmap renderer with configurable color scales\n- Support for rectangular and triangular matrices\n- Mouse interaction (hover, tooltips, selection)\n- Color interpolation and legend integration\n- Used by: DotPlotOverlay, SyntenyOverlay, StructureConstraintOverlay\n\n### 2. ScatterCanvas.tsx\n- High-performance scatter plot renderer for large point clouds\n- PCA/dimensionality reduction visualization support\n- Point clustering and selection\n- Axis labels, gridlines, and legends\n- Used by: PhasePortraitOverlay, BiasDecompositionOverlay\n\n### 3. ArcDiagram.tsx\n- Arc/chord diagram for relational data\n- Bezier curve rendering for connections\n- Bundling and collision detection\n- Used by: HGTOverlay, CRISPROverlay, structural feature connections\n\n### 4. GenomeTrack.tsx\n- Linear genome track visualization component\n- Support for multiple track types (bars, lines, regions)\n- Scrolling/panning with position synchronization\n- Used by: Multiple overlays showing positional data\n\n### 5. GelCanvas.tsx\n- Virtual gel electrophoresis simulation renderer\n- Band rendering with intensity gradients\n- Size marker integration\n- Used by: GelOverlay\n\n## Technical Requirements\n- TypeScript with strict typing\n- Canvas-based rendering for performance\n- WebGL fallback for very large datasets\n- Consistent event handling interface\n- Theme-aware color schemes\n- Accessibility considerations (ARIA labels)\n\n## File Structure\n```\nsrc/tui/overlays/primitives/\n  ├── HeatmapCanvas.tsx\n  ├── ScatterCanvas.tsx\n  ├── ArcDiagram.tsx\n  ├── GenomeTrack.tsx\n  ├── GelCanvas.tsx\n  └── types.ts (shared types and interfaces)\n```\n\n## Performance Targets\n- 60 FPS rendering for interactive updates\n- Support for 10K+ data points in scatter plots\n- Efficient canvas updates using dirty regions\n- RequestAnimationFrame for smooth animations\n\n## Dependencies\n- Depends on Phase 2 worker infrastructure completion\n- Required by most Phase 3 overlay components","notes":"PinkMountain working on visualization primitives; auditing primitives dirs and aligning overlays","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-08T13:00:57.555398-05:00","updated_at":"2025-12-09T00:56:38.288431-05:00","closed_at":"2025-12-09T00:56:38.288431-05:00","dependencies":[{"issue_id":"phage_explorer-bjoz.7","depends_on_id":"phage_explorer-bjoz","type":"parent-child","created_at":"2025-12-08T13:00:57.557031-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-bjoz.7","depends_on_id":"phage_explorer-qiaq","type":"blocks","created_at":"2025-12-08T13:00:57.559939-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-bjoz.8","title":"PackagingPressureOverlay - DNA packaging constraints","description":"Implement overlay for visualizing DNA packaging pressure and constraints in phage capsids.\n\n## Biological Significance\nDNA packaging in phages is one of the most physically demanding processes in biology. The viral genome is compressed to near-crystalline densities, creating internal pressures of tens of atmospheres. This overlay reveals:\n- Regions under high torsional stress during packaging\n- AT-rich vs GC-rich content effects on packaging efficiency\n- Predicted packaging motor pause sites\n- Capsid filling progression and pressure buildup\n\n## Visualization Type\nMulti-track canvas visualization with:\n- Linear pressure gradient track (0-100% genome position)\n- Local GC% correlation to packaging resistance\n- Predicted portal motor pause sites (vertical markers)\n- Cumulative pressure curve\n- Color coding: Green (low pressure) → Yellow → Red (high pressure)\n\n## Worker Integration\nCreate `workers/packaging-worker.ts`:\n- Calculate local DNA bend angles and flexibility\n- Compute cumulative torsional stress\n- Predict packaging motor pause sites based on sequence features\n- Estimate internal capsid pressure at different filling stages\n- Uses thermodynamic models (e.g., Kindt et al. 2001)\n\n## Implementation Details\n\n### Files to Create\n1. `src/tui/overlays/PackagingPressureOverlay.tsx`\n   - Main overlay component with canvas rendering\n   - Pressure track visualization\n   - Interactive position selection\n   - Legend and scale indicators\n\n2. `src/workers/packaging-worker.ts`\n   - DNA mechanics calculations\n   - Torsional stress modeling\n   - Pause site prediction algorithms\n\n### Keyboard Shortcut\n- **Alt+P** - Toggle packaging pressure overlay\n\n### Data Flow\n1. User activates overlay (Alt+P)\n2. Worker receives genome sequence\n3. Worker calculates:\n   - Sliding window GC% and AT% composition\n   - Local DNA bend angles (using dinucleotide parameters)\n   - Cumulative packaging resistance\n   - Motor pause probability at each position\n4. UI renders multi-track visualization\n5. User can hover for position-specific pressure values\n\n## Scientific References\n- Kindt et al. (2001) DNA packaging and ejection forces\n- Smith et al. (2001) Single-molecule packaging dynamics\n- Evilevitch et al. (2003) Internal capsid pressure measurements\n\n## Testing Considerations\n- Validate with known high-pressure phages (T4, lambda)\n- Check correlation with experimental packaging rates\n- Verify pause site predictions match biochemical data","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T13:00:59.033222-05:00","updated_at":"2025-12-09T11:35:13.021976-05:00","closed_at":"2025-12-09T11:35:13.021976-05:00","dependencies":[{"issue_id":"phage_explorer-bjoz.8","depends_on_id":"phage_explorer-bjoz","type":"parent-child","created_at":"2025-12-08T13:00:59.033939-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-bjoz.8","depends_on_id":"phage_explorer-qiaq","type":"blocks","created_at":"2025-12-08T13:00:59.035471-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-bjoz.9","title":"VirionStabilityOverlay - Virion structural stability predictions","description":"Implement overlay for predicting and visualizing virion structural stability based on capsid protein properties and genome features.\n\n## Biological Significance\nVirion stability determines:\n- Environmental persistence (temperature, pH, desiccation resistance)\n- Host range constraints (survival in mucus, digestive systems)\n- Therapeutic applications (phage therapy viability)\n- Evolutionary fitness in different ecological niches\n\nThis overlay integrates capsid protein predictions with genome features to estimate overall virion robustness.\n\n## Visualization Type\nComposite dashboard with:\n- Radial stability gauge (0-100 stability score)\n- Protein hydrophobicity heatmap for major capsid protein\n- Predicted disulfide bond network diagram\n- Environmental tolerance ranges (pH, temperature)\n- Comparison to known stable/fragile phages\n\n## Worker Integration\nCreate `workers/stability-worker.ts`:\n- Predict major capsid protein structure using sequence motifs\n- Calculate hydrophobic moments and surface charge distribution\n- Identify potential disulfide bonds (cysteine pairs)\n- Estimate isoelectric point and thermal stability\n- Integrate genome features (terminal repeats, DNA modifications)\n- Compare against database of characterized phages\n\n## Implementation Details\n\n### Files to Create\n1. `src/tui/overlays/VirionStabilityOverlay.tsx`\n   - Dashboard layout with multiple panels\n   - Radial gauge component for overall stability\n   - Protein structure visualization\n   - Environmental tolerance charts\n\n2. `src/workers/stability-worker.ts`\n   - Capsid protein prediction and analysis\n   - Hydrophobicity calculations (Kyte-Doolittle scale)\n   - Disulfide bond prediction algorithms\n   - Stability scoring model\n   - Database comparison logic\n\n### Keyboard Shortcut\n- **Alt+V** - Toggle virion stability overlay\n\n### Data Flow\n1. User activates overlay (Alt+V)\n2. Worker receives genome sequence and ORF predictions\n3. Worker identifies major capsid protein (MCP):\n   - Search for conserved HK97-fold domain\n   - Identify by size and gene position heuristics\n4. Worker analyzes MCP:\n   - Hydrophobicity profile\n   - Cysteine positions for disulfide bonds\n   - Charged residue distribution\n   - Predicted pI and thermal stability\n5. Worker generates composite stability score\n6. UI renders dashboard with all panels\n\n## Stability Scoring Model\nWeighted composite of:\n- **Capsid protein stability (40%)**: Hydrophobic core strength, disulfide bonds\n- **Genome packaging (30%)**: Terminal repeats, modified bases, internal pressure\n- **Environmental factors (30%)**: pI, predicted pH tolerance, thermal stability\n\n## Display Panels\n1. **Overall Stability Gauge**: 0-100 score with classification\n2. **Protein Hydrophobicity Heatmap**: Residue-level visualization\n3. **Disulfide Network**: Graph diagram of predicted bonds\n4. **Environmental Tolerance**: Bar charts for pH, temperature ranges\n5. **Similar Phages**: Top 3 matches with known stability data\n\n## Testing Considerations\n- Validate with experimentally characterized stable phages (T4, P22)\n- Compare with fragile phages (temperate phages with reduced stability)\n- Check correlation with known environmental persistence data","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T13:01:00.538706-05:00","updated_at":"2025-12-09T11:35:13.022923-05:00","closed_at":"2025-12-09T11:35:13.022923-05:00","dependencies":[{"issue_id":"phage_explorer-bjoz.9","depends_on_id":"phage_explorer-bjoz","type":"parent-child","created_at":"2025-12-08T13:01:00.543963-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-bjoz.9","depends_on_id":"phage_explorer-qiaq","type":"blocks","created_at":"2025-12-08T13:01:00.545002-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-bkb","title":"[WEB-P1] Add state migration function for schema changes","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-07T16:58:38.345084-05:00","updated_at":"2025-12-07T17:55:03.741325-05:00","closed_at":"2025-12-07T17:55:03.741325-05:00","dependencies":[{"issue_id":"phage_explorer-bkb","depends_on_id":"phage_explorer-mul","type":"blocks","created_at":"2025-12-07T17:04:47.227688-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-bkg0","title":"Create Analysis Deep-Dive Tour definition","description":"Tour introducing analysis overlays: how to open analyses, reading GC skew plots, understanding complexity, interpreting promoter predictions. Links to relevant modules for background. Approximately 10-12 steps. Stored in tours/analysis.json.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-09T11:47:12.257795-05:00","updated_at":"2025-12-09T11:47:12.257795-05:00","dependencies":[{"issue_id":"phage_explorer-bkg0","depends_on_id":"phage_explorer-bbf4","type":"blocks","created_at":"2025-12-09T11:47:19.531128-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-bp9","title":"Advanced: Codon Economy \u0026 tRNA Adaptation Dashboard","description":"Model adaptation to different hosts' tRNA pools. Compute RSCU/CAI/tAI against host-specific tRNA atlases. Delta adaptation between hosts; flag regions with poor match. Per-gene bars colored by adaptation; switch host profile live; side-by-side host A vs B strips. Novelty: Medium-high, Pedagogical: High (translational selection).","notes":"## CODON/AA ADAPTATION LANDSCAPE WITH HOST tRNA SUPPLY\n\n**Full Implementation from Roadmap**\n\n### Concept\nModel how well each phage gene is adapted to different hosts' tRNA pools. Compute RSCU/CAI/tAI against host-specific tRNA atlases and show adaptation gradients.\n\n### How to Build\n\n**tRNA Atlas Ingest:**\n- Import per-host tRNA copy numbers and anticodon pools\n- Sources: GtRNAdb, tRNAscan-SE outputs, metagenome predictions\n- Store in SQLite with host taxonomy\n\n**Metrics Computed:**\n- **RSCU** (Relative Synonymous Codon Usage): Σ(observed/expected)\n- **CAI** (Codon Adaptation Index): geometric mean of w_i values\n- **tAI** (tRNA Adaptation Index): accounts for wobble and tRNA abundance\n- **CPB** (Codon-Pair Bias): di-codon frequencies vs expectation\n\n**Sliding-Window Adaptation:**\n- Per-gene and per-window scores\n- Rust+WASM for speed if needed\n- Delta adaptation between two hosts\n\n**Flagging:**\n- Regions with poor host match\n- Potential imported islands (host-mismatched CPB)\n- Module summaries (structural/replication/lysis)\n\n### TUI Features\n- Per-gene bars colored by adaptation score\n- Switch host profile live with immediate recompute\n- Side-by-side host A vs host B adaptation strips\n- Hover shows gene CAI/tAI for selected host\n- Stacked bars per gene colored by 'best host'\n- Host-switch candidates glow\n\n### Why It's Good\n- Connects translational efficiency to host preference\n- Highlights adaptation mismatches and imported islands\n- Aids host prediction and engineering decisions\n- Shows why context matters for gene expression\n\n### Implementation Stack\n- TS for metrics (RSCU, CAI, tAI, CPB)\n- Optional Rust+WASM for batch scoring many hosts\n- SQLite cache of host tRNA pools and per-gene scores\n- Ink UI with stacked bars and host selector\n\nNovelty: 8/10, Pedagogical: 9/10, Wow Factor: 8/10","status":"in_progress","priority":2,"issue_type":"feature","created_at":"2025-12-06T23:19:11.419742-05:00","updated_at":"2025-12-08T22:47:20.97443-05:00","dependencies":[{"issue_id":"phage_explorer-bp9","depends_on_id":"phage_explorer-54g","type":"blocks","created_at":"2025-12-06T23:19:11.421645-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-bqw2","title":"[WEB-P6] Create TUI mode theme variant","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-07T17:02:14.641326-05:00","updated_at":"2025-12-08T00:41:04.145051-05:00","closed_at":"2025-12-08T00:41:04.145051-05:00","dependencies":[{"issue_id":"phage_explorer-bqw2","depends_on_id":"phage_explorer-yrsg","type":"blocks","created_at":"2025-12-07T17:09:28.407612-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-bsnf","title":"InfectionKineticsVisualizer - SIR population dynamics","description":"","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-09T00:38:19.534128-05:00","updated_at":"2025-12-09T00:38:19.534128-05:00","dependencies":[{"issue_id":"phage_explorer-bsnf","depends_on_id":"phage_explorer-m49v","type":"blocks","created_at":"2025-12-09T00:38:43.241456-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-bvu","title":"[WEB-P1] Implement checkCache and loadFromCache methods","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-07T16:58:16.990599-05:00","updated_at":"2025-12-07T17:51:04.40574-05:00","closed_at":"2025-12-07T17:51:04.40574-05:00","dependencies":[{"issue_id":"phage_explorer-bvu","depends_on_id":"phage_explorer-qlo","type":"blocks","created_at":"2025-12-07T17:04:43.035856-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-c2xh","title":"[WEB-P6] Create high contrast theme","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-07T17:01:55.89913-05:00","updated_at":"2025-12-07T22:29:37.572117-05:00","closed_at":"2025-12-07T22:29:37.572117-05:00","dependencies":[{"issue_id":"phage_explorer-c2xh","depends_on_id":"phage_explorer-2xt","type":"blocks","created_at":"2025-12-07T17:09:10.790651-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-c2xh","depends_on_id":"phage_explorer-l39j","type":"blocks","created_at":"2025-12-07T17:10:03.886712-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-c3j","title":"Layer 2: Genomic Signature PCA (Tetranucleotide Frequency)","description":"Compute tetranucleotide (4-mer) frequencies for all phages (256 dimensions) and project into 2D using PCA for alignment-free phylogenetics. Clustering reveals family relationships, host adaptation patterns, and outliers. PC1 typically correlates with GC content (30-50% variance), PC2 with purine/pyrimidine bias. O(n) per genome computation. Interactive scatter plot with clustering annotations. Novelty: 7/10, Pedagogical: 9/10, Cool Factor: 8/10.","notes":"## GENOMIC SIGNATURE PCA (TETRANUCLEOTIDE FREQUENCY)\n\n**Comprehensive Feature Specification from Roadmap**\n\n### Concept\nEvery genome has a characteristic \"signature\" - unique k-mer frequency pattern reflecting evolutionary history, GC content, codon usage. By computing tetranucleotide frequencies for all phages and projecting via PCA, visualize phylogenetic relationships WITHOUT sequence alignment.\n\n**Power of Genomic Signatures**:\n- Alignment-free comparison - works even for divergent sequences\n- Captures global composition, not just individual gene homology\n- Robust to rearrangements, insertions, deletions\n- Fast: O(n) per genome\n\n**What PCA Reveals**:\n- Clustering by family: Related phages cluster together\n- Host adaptation: Phages infecting same host cluster (shared codon biases)\n- Outliers: Unusual or chimeric genomes stand out\n- GC islands: Horizontally transferred regions have different signatures\n\n### Mathematical Foundations\n\n**Tetranucleotide Frequency Vector**:\nFor genome S of length L:\n- Count each 4-mer: freq(AAAA), freq(AAAC), ..., freq(TTTT)\n- Total 4-mers: 4^4 = 256 possibilities\n- Normalize: f(k) = count(k) / (L - 3)\n\n**Principal Component Analysis**:\nGiven N phages, each with 256-dim frequency vector:\nData matrix X: N x 256\n\n1. Center: X_centered = X - mean(X, axis=0)\n2. Covariance: C = (1/N) * X_centered^T * X_centered [256 x 256]\n3. Eigendecomposition: C = V * Lambda * V^T\n4. Project to 2D: PC1 = X_centered * v1, PC2 = X_centered * v2\n\n**Variance Explained**:\nVariance by PCk = lambda_k / sum(lambda_i)\nTypically:\n- PC1: 30-50% (often correlates with GC content)\n- PC2: 10-20% (often reflects purine/pyrimidine bias)\n\n**Distance in PCA Space**:\nd(i,j) = sqrt((PC1_i - PC1_j)^2 + (PC2_i - PC2_j)^2)\nCorrelates with taxonomic distance, host range overlap, divergence time\n\n### Implementation\n\n**Core Interfaces**:\n```typescript\ninterface KmerVector {\n  phageId: number;\n  name: string;\n  frequencies: Float32Array;  // 256 elements\n  gcContent: number;\n}\n\ninterface PCAResult {\n  projections: { phageId: number; name: string; pc1: number; pc2: number }[];\n  eigenvalues: number[];\n  varianceExplained: number[];\n  loadings: Float32Array[];  // Which 4-mers contribute to each PC\n}\n```\n\n**computeKmerFrequencies()**: Single pass through sequence, encode 4-mers as indices 0-255, count and normalize\n\n**computePCA()**: Center data, power iteration for top eigenvectors, project data\n\n**renderPCAPlot()**: ASCII scatter plot with axes, point labels, cluster annotations\n\n### TUI Visualization\n\n```\n╭───────────────────────────────────────────────────────────────────────────╮\n│  GENOMIC SIGNATURE PCA: Tetranucleotide Frequencies                      │\n├───────────────────────────────────────────────────────────────────────────┤\n│                                                                           │\n│  PC1 (43.2% variance) vs PC2 (16.7% variance)                            │\n│                                                                           │\n│  PC2 ↑                                                                    │\n│      │                                                                    │\n│  0.3 │                    ●T7                                             │\n│      │                   ● ●                   ●Phi29                     │\n│  0.2 │                  ●   (T7-like)            ●                        │\n│      │                 ●                                                  │\n│  0.1 │                                                                    │\n│      │  ●MS2                                                              │\n│  0.0 │───────────────────────────────────●Lambda───────────────→ PC1     │\n│      │       ●PhiX174                        ●                            │\n│ -0.1 │         (ssDNA cluster)              ●P22                          │\n│      │      ●M13                                                          │\n│ -0.2 │                                                                    │\n│      │                                        ◉ YOU ARE HERE              │\n│ -0.3 │                           ●T4           (T4-like cluster)          │\n│      │                          ●SPbeta ●T5                               │\n│ -0.4 └──────────────────────────────────────────────────────────          │\n│     -0.4  -0.3  -0.2  -0.1   0.0   0.1   0.2   0.3   0.4   0.5            │\n│                                                                           │\n│  Clusters: T7-like (high GC) | T4-like (AT-rich) | ssDNA | Lambda-like   │\n│  [Click] Inspect  [Z] Zoom  [3] Add PC3  [E] Export  [ESC] Exit          │\n╰───────────────────────────────────────────────────────────────────────────╯\n```\n\n### Assessment\n- Novelty: 7/10 - Technique known but rarely in user-facing phage tools, TUI scatter novel\n- Pedagogical: 9/10 - Teaches PCA, genomic signatures, alignment-free methods, multivariate stats\n- Cool Factor: 8/10 - Proximity = relatedness is satisfying visualization\n\n### Files\n- packages/tui/src/components/PCAView.tsx\n- packages/core/src/analysis/kmer-frequencies.ts\n- packages/core/src/analysis/pca.ts","status":"in_progress","priority":2,"issue_type":"feature","created_at":"2025-12-06T23:15:45.104077-05:00","updated_at":"2025-12-08T02:22:09.323193-05:00","dependencies":[{"issue_id":"phage_explorer-c3j","depends_on_id":"phage_explorer-54g","type":"blocks","created_at":"2025-12-06T23:15:45.105973-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-c79i","title":"[WEB-P6] Add performance monitoring (web vitals)","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-07T17:01:42.98026-05:00","updated_at":"2025-12-07T22:32:38.258184-05:00","closed_at":"2025-12-07T22:32:38.258184-05:00","dependencies":[{"issue_id":"phage_explorer-c79i","depends_on_id":"phage_explorer-5a2","type":"blocks","created_at":"2025-12-07T17:08:59.2616-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-c79i","depends_on_id":"phage_explorer-ibeh","type":"blocks","created_at":"2025-12-07T17:10:02.193732-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-c7iz","title":"[WEB-P4] Add snapshot save/restore buttons","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-07T17:02:31.492291-05:00","updated_at":"2025-12-07T18:42:47.664842-05:00","closed_at":"2025-12-07T18:42:47.664842-05:00","dependencies":[{"issue_id":"phage_explorer-c7iz","depends_on_id":"phage_explorer-mila","type":"blocks","created_at":"2025-12-07T17:08:29.09984-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-c95","title":"Layer 2: Virtual Agarose Gel Electrophoresis","description":"Classic molecular biology technique in terminal. Select restriction enzymes, digest phage genomes in silico, visualize DNA fragments as ASCII gel bands with size ladder and log-linear migration. Features enzyme database (EcoRI, HindIII, BamHI, etc.), cut site mapping, double digest support, multi-genome comparison. Bridges wet lab and dry lab - predict gel results before experiments. Novelty: 6/10, Pedagogical: 8/10, Cool Factor: 7/10.","notes":"## VIRTUAL AGAROSE GEL ELECTROPHORESIS\n\n**Comprehensive Feature Specification from Roadmap**\n\n### Concept\nClassic molecular biology technique brought to terminal. Select restriction enzymes, digest phage genomes in silico, visualize fragments as bands on virtual gel with size ladder and realistic migration.\n\n**Why for Phage Research**:\n- Experimental planning: Predict gel before spending reagents\n- Strain verification: Restriction patterns as phage fingerprints\n- Genetic mapping: Quick localization technique\n- Cloning design: Find suitable restriction sites\n- Teaching: Visualize sequence-to-fragment relationship\n\n**Physics**: DNA negative charge (phosphate) migrates to positive electrode. Agarose sieve - small fragments faster. Migration ~ linear with log(size).\n\n### Mathematical Foundations\n\n**Restriction Site Finding**:\n- Match recognition sequence with cut offset\n- Handle palindromic sequences\n- Degenerate bases (N, Y, R, W, S, K, M)\n- Common enzymes: EcoRI (GAATTC), HindIII (AAGCTT), BamHI (GGATCC), NotI (GCGGCCGC), HaeIII (GGCC)\n\n**Fragment Generation**:\nLinear: fragments between cuts plus ends\nCircular: last fragment wraps to first cut\n\nDouble digest: merge cut sites, sort, generate fragments\n\n**Migration (Ogston Model)**:\nlog10(L) = a - b * d\nd = (a - log10(L)) / b\n\nTypical 1% agarose: a ~ 4.5, b ~ 0.05\n\nResolution limits: \u003c200bp poor, \u003e20kb compress (need PFGE)\n\n**Band Intensity**:\nI proportional to mass (copies x length)\nSingle digest: all fragments equal copy, I ~ length\n\n**Expected Fragments**:\n6-cutter: ~4096bp average spacing\nLambda 48.5kb: ~12 EcoRI fragments expected\n\n### Implementation\n\n**Enzyme Database**:\nRestrictionEnzyme: name, recognitionSite, cutOffset, overhang (5/3/blunt), frequency\n\nIUPAC degenerate base regex conversion\n\n**Digestion Engine**:\ndigestGenome(sequence, enzymeName, circular): DigestResult with cutSites[], fragments[], mapData\n\ngenerateCutMap(): Text-based scale with cut position markers\n\n**Gel Renderer**:\nGelConfig: width, height, lanes[], ladder[], concentration\n\nrenderGel(): ASCII gel with wells, ladder bands, sample bands\n- Ladder: reference sizes with thin bands\n- Samples: band width proportional to log(size) for intensity\n- Lane labels below\n\n### TUI Visualization\n\nMain view:\n- Enzyme selector dropdown\n- Cut map showing positions on genome\n- Virtual gel with ladder and sample lanes\n- Fragment table (sizes sorted)\n\nDouble digest view:\n- Side-by-side single and double digest\n- Shows increased resolution with more fragments\n\n### Assessment\n- Novelty: 6/10 - Virtual gel exists but TUI + ASCII art novel\n- Pedagogical: 8/10 - Restriction enzymes, log-linear, gel interpretation\n- Cool Factor: 7/10 - Satisfying to see virtual gel appear in terminal\n\n### Files\n- packages/tui/src/components/GelView.tsx\n- packages/core/src/analysis/restriction-digest.ts\n- packages/core/src/data/restriction-enzymes.ts","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-06T23:15:45.679687-05:00","updated_at":"2025-12-08T01:08:25.667603-05:00","closed_at":"2025-12-08T01:08:25.667603-05:00","dependencies":[{"issue_id":"phage_explorer-c95","depends_on_id":"phage_explorer-54g","type":"blocks","created_at":"2025-12-06T23:15:45.680152-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-cgd","title":"Layer 1: Promoter/RBS Strength Overlay [P key]","description":"Layer 1 overlay (P key): Display predicted promoter (-35/-10 boxes) and RBS (Shine-Dalgarno) strength annotations. Pattern matching against consensus sequences. Understanding gene expression timing. Priority: P2.","notes":"Promoter/RBS overlay implemented (P): motif scan, density sparkline, overlay stack, Esc/P close","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-06T23:10:41.106532-05:00","updated_at":"2025-12-07T13:00:39.414832-05:00","closed_at":"2025-12-07T13:00:39.414835-05:00","dependencies":[{"issue_id":"phage_explorer-cgd","depends_on_id":"phage_explorer-2g5","type":"blocks","created_at":"2025-12-06T23:10:41.108052-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-cgh","title":"Layer 3: Plaque Growth Cellular Automata","description":"Cellular automaton simulating phage plaque formation on bacterial lawns. Input phage parameters (burst size, latent period, lysogeny probability, diffusion rate) and watch virtual plaques grow in real-time. Models reaction-diffusion: bacteria grow, phages infect, cells lyse after latent period releasing burst, phages diffuse. Explains clear vs turbid plaques, size determinants. Novelty: 9/10, Pedagogical: 9/10, Cool Factor: 10/10.","notes":"## PLAQUE MORPHOLOGY CELLULAR AUTOMATA\n\n**Comprehensive Feature Specification from Roadmap**\n\n### Concept\nSimulate phage plaque formation using cellular automaton, connecting genotype (molecular parameters) to phenotype (observable plaque morphology).\n\n**Biology of Plaque Formation**:\n- Bacteria grow as lawn on solid media\n- Single phage infects one bacterium\n- After latent period, cell lyses releasing burst_size new phages\n- Phages diffuse outward, infect neighbors\n- Process repeats, creating expanding dead zone (plaque)\n\n**What Determines Morphology**:\n- Clear plaques: Virulent phages that always lyse\n- Turbid plaques: Temperate phages, lysogens survive in center\n- Large plaques: Long latent period (more diffusion time before lysis)\n- Small plaques: Short latent period (lysis before diffusion)\n- Halo plaques: Phages with depolymerase activity\n\n### Mathematical Foundations\n\n**Reaction-Diffusion Model**:\nState variables at (x,y,t):\n- B(x,y,t) = bacteria density [0,1]\n- I(x,y,t) = infected cell count\n- P(x,y,t) = free phage particles\n\nEquations:\ndB/dt = r*B*(1-B) - k*B*P        [growth - infection]\ndI/dt = k*B*P - (1/tau)*I        [infection - lysis]\ndP/dt = D*grad^2(P) + b*(1/tau)*I - delta*P  [diffusion + burst - decay]\n\nParameters: r=growth, k=adsorption, tau=latent period, b=burst size, D=diffusion, delta=decay\n\n**Cellular Automaton Simplification**:\nEach cell per tick:\n- BACTERIA: if adjacent PHAGE, become INFECTED with prob p; else stay/divide\n- INFECTED: age++; if age \u003e= latent_period: LYSED, spawn burst_size phages nearby\n- LYSED: stay dead\n- LYSOGEN: immune, can grow (temperate phages)\n\n**Plaque Size Prediction**:\nR ~ sqrt(4 * D * T * efficiency)\nPlaque area proportional to (burst_size * latent_period * D) / adsorption\n\n### Implementation\n\n**Core Interfaces**:\n```typescript\ntype CellState = 'empty' | 'bacteria' | 'infected' | 'lysed' | 'lysogen';\n\ninterface PlaqueSimConfig {\n  gridSize: number;           // NxN grid\n  burstSize: number;          // Phages per lysis\n  latentPeriod: number;       // Ticks until lysis\n  diffusionRate: number;      // Phage movement\n  adsorptionProb: number;     // Infection probability\n  lysogenyProb: number;       // Lysogen probability (temperate)\n  bacteriaGrowthRate: number; // Division probability\n}\n\ninterface SimulationCell {\n  state: CellState;\n  phageCount: number;\n  infectionAge: number;\n}\n```\n\n**initializePlaqueSim()**: Create grid of bacteria, seed single phage at center\n\n**simulateTick()**: \n- Process each cell by state\n- Handle infection, lysis, phage release\n- Diffuse phages to neighbors\n- Update grid\n\n**distributePhages()**: Spread burst_size phages in random directions within 3-cell radius\n\n**renderPlaque()**: Convert cell states to ASCII: bacteria=block, infected=dark shade, lysed=space, lysogen=light shade\n\n### TUI Visualization\n\n```\n╭───────────────────────────────────────────────────────────────────────────╮\n│  PLAQUE MORPHOLOGY SIMULATOR: Lambda Phage                               │\n├───────────────────────────────────────────────────────────────────────────┤\n│                                                                           │\n│  Parameters:         Time: 00:45    Generation: 3                        │\n│  ├─ Burst size: 100                                                       │\n│  ├─ Latent period: 45 min                                                 │\n│  ├─ Lysogeny: 50%                                                         │\n│  └─ Diffusion: Medium                                                     │\n│                                                                           │\n│  ┌─────────────────────────────────────────────────────────────────────┐  │\n│  │█████████████████████████████████████████████████████████████████████│  │\n│  │████████████████████████████▓▓▓██████████████████████████████████████│  │\n│  │██████████████████████████▓▓   ▓▓████████████████████████████████████│  │\n│  │████████████████████████▓▓  ▒▒  ▓▓██████████████████████████████████│  │\n│  │███████████████████████▓  ▒    ▒  ▓█████████████████████████████████│  │\n│  │██████████████████████▓ ▒  ▒▒▒  ▒ ▓█████████████████████████████████│  │\n│  │█████████████████████▓ ▒ ▒     ▒ ▒ ▓████████████████████████████████│  │\n│  │█████████████████████▓ ▒   ▒▒▒  ▒  ▓████████████████████████████████│  │\n│  │██████████████████████▓ ▒ ▒   ▒ ▒ ▓█████████████████████████████████│  │\n│  │███████████████████████▓  ▒▒▒▒▒  ▓██████████████████████████████████│  │\n│  │████████████████████████▓▓     ▓▓███████████████████████████████████│  │\n│  │██████████████████████████▓▓▓▓▓█████████████████████████████████████│  │\n│  │█████████████████████████████████████████████████████████████████████│  │\n│  └─────────────────────────────────────────────────────────────────────┘  │\n│                                                                           │\n│  Legend: █ Bacteria | ▓ Infected | (space) Lysed | ▒ Lysogen             │\n│                                                                           │\n│  Morphology: TURBID (lysogens surviving in center)                       │\n│  Predicted size: Medium (2.1 mm at 24h)                                  │\n│                                                                           │\n│  [Space] Pause  [B/L/D] Adjust params  [R] Reset  [V] Virulent  [ESC]    │\n╰───────────────────────────────────────────────────────────────────────────╯\n```\n\n### Assessment\n- Novelty: 9/10 - Cellular automata for plaques exists in research but never in phage tools, real-time TUI unique\n- Pedagogical: 9/10 - Teaches phage lifecycle, population dynamics, mathematical biology, emergence\n- Cool Factor: 10/10 - Essentially a video game, watching infection spread is addictive\n\n### Files\n- packages/tui/src/components/PlaqueSimView.tsx\n- packages/core/src/simulation/plaque-automata.ts\n- packages/core/src/simulation/plaque-config.ts","status":"closed","priority":3,"issue_type":"feature","created_at":"2025-12-06T23:17:07.628557-05:00","updated_at":"2025-12-07T13:39:06.264546-05:00","closed_at":"2025-12-07T13:39:06.264546-05:00","dependencies":[{"issue_id":"phage_explorer-cgh","depends_on_id":"phage_explorer-ojb","type":"blocks","created_at":"2025-12-06T23:17:07.629569-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-chdb","title":"Task: Add beginnerMode state to Zustand store","description":"Add to packages/state/src/store.ts: beginnerModeEnabled (boolean, default false), glossarySidebarOpen (boolean), activeTourId (string|null), completedModules (string[]), completedTours (string[]). Add actions: toggleBeginnerMode(), openGlossary(), closeSidebar(), startTour(id), completeTour(id), completeModule(id). Persist beginner mode preference to localStorage.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-09T11:42:51.816643-05:00","updated_at":"2025-12-10T00:43:16.216910682-06:00","closed_at":"2025-12-09T23:57:10.100445764-06:00","dependencies":[{"issue_id":"phage_explorer-chdb","depends_on_id":"phage_explorer-ty1n","type":"blocks","created_at":"2025-12-09T11:42:51.818299-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-cl2","title":"[WEB-P0] Implement useTheme hook with localStorage persistence","description":"Create React hook for theme management with localStorage persistence and theme switching","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-07T16:58:28.737151-05:00","updated_at":"2025-12-07T17:28:00.370826-05:00","closed_at":"2025-12-07T17:28:00.370826-05:00","dependencies":[{"issue_id":"phage_explorer-cl2","depends_on_id":"phage_explorer-2q8","type":"blocks","created_at":"2025-12-07T17:04:39.089348-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-cl2","depends_on_id":"phage_explorer-67t","type":"blocks","created_at":"2025-12-07T17:05:05.738425-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-cla","title":"[WEB-P1] Create prepared statement pool for common queries","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-07T16:57:58.54673-05:00","updated_at":"2025-12-07T17:50:54.209812-05:00","closed_at":"2025-12-07T17:50:54.209812-05:00","dependencies":[{"issue_id":"phage_explorer-cla","depends_on_id":"phage_explorer-pmb","type":"blocks","created_at":"2025-12-07T17:04:39.909798-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-cmjq","title":"[WEB-P6] Ensure focus indicators visible everywhere","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-07T17:01:56.931873-05:00","updated_at":"2025-12-07T22:14:30.554696-05:00","closed_at":"2025-12-07T22:14:30.554696-05:00","dependencies":[{"issue_id":"phage_explorer-cmjq","depends_on_id":"phage_explorer-2xt","type":"blocks","created_at":"2025-12-07T17:09:12.345747-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-csy","title":"[WEB-P0] Create KeyboardManager class with event handling","description":"Build core KeyboardManager class for capturing and routing keyboard events","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-07T16:58:36.520077-05:00","updated_at":"2025-12-07T17:31:29.654027-05:00","closed_at":"2025-12-07T17:31:29.654027-05:00","dependencies":[{"issue_id":"phage_explorer-csy","depends_on_id":"phage_explorer-ows","type":"blocks","created_at":"2025-12-07T17:04:41.258394-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-cu3","title":"Advanced: Metagenomic Co-Occurrence \u0026 Niche Profiler","description":"Infer ecological niches and co-occurring taxa from metagenomic abundance tables. SparCC/FlashWeave-like compositional correlations + NMF for latent niche vectors. Co-occurrence network colored by niches, habitat filters, significance thresholds. Adds real-world context to host predictions. Novelty: Medium-high, Pedagogical: High (compositional stats, niche ecology).","notes":"## METAGENOMIC CO-OCCURRENCE \u0026 ECOLOGICAL NICHE PROFILER\n\n### Concept\nInfer ecological niches and co-occurring taxa from metagenomic abundance tables; derive niche vectors and networks.\n\n### How to Build\n- **Input**: BIOM/TSV + sample metadata\n- **Correlations**: SparCC/FlashWeave-like compositional inference in Rust+WASM (ndarray + rayon)\n- **Niche factors**: NMF/PMF in TS for latent \"niche vectors\"\n- **Metadata mapping**: Attach habitats/hosts to factors; cache per phage\n- **UI**: Co-occurrence network colored by niches; stacked niche bars per phage; filters by habitat\n\n### Why It's Good\nAdds real-world context to host predictions; complements CRISPR/prophage evidence.\n\n### Implementation Stack\nRust+WASM for correlations; TS NMF; SQLite cache of niche vectors; BIOM parser in TS.\n\n### TUI Visualization\nNetwork with niche colors; press 'n' to repaint bars; tooltips show top co-occurring taxa/habitats; toggle significance threshold live.\n\n### Files\n- packages/core/src/analysis/metagenomic-niche.ts\n- packages/tui/src/components/NicheNetworkView.tsx","status":"open","priority":3,"issue_type":"feature","created_at":"2025-12-06T23:51:11.070369-05:00","updated_at":"2025-12-07T00:15:39.340902-05:00","dependencies":[{"issue_id":"phage_explorer-cu3","depends_on_id":"phage_explorer-54g","type":"blocks","created_at":"2025-12-06T23:56:51.160196-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-cuip","title":"RibosomeTrafficVisualizer - TASEP ribosome flow","description":"","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-09T00:38:14.549442-05:00","updated_at":"2025-12-09T00:38:14.549442-05:00","dependencies":[{"issue_id":"phage_explorer-cuip","depends_on_id":"phage_explorer-m49v","type":"blocks","created_at":"2025-12-09T00:38:42.426106-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-czbm","title":"[WEB-P5] Create CollaborationManager class","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-07T17:02:00.873531-05:00","updated_at":"2025-12-07T22:33:49.971139-05:00","closed_at":"2025-12-07T22:33:49.971139-05:00","dependencies":[{"issue_id":"phage_explorer-czbm","depends_on_id":"phage_explorer-8kpa","type":"blocks","created_at":"2025-12-07T17:07:55.926353-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-d265","title":"[WEB-P6] Add \"Report Bug\" action with context","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-07T17:02:29.285286-05:00","updated_at":"2025-12-07T21:12:24.649239-05:00","closed_at":"2025-12-07T21:12:24.649239-05:00","dependencies":[{"issue_id":"phage_explorer-d265","depends_on_id":"phage_explorer-ojh6","type":"blocks","created_at":"2025-12-07T17:09:41.475626-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-d2p","title":"Advanced: Regulatory Signal Constellations","description":"Scan promoters/terminators/RBS/operators; render co-occurring motifs as constellations. PWMs + co-occurrence graphs. Evidence score combining spacing, orientation, strength into operon-likelihood. Starfield strip above genes; motifs as glyphs; toggle inferred operons. Novelty: Medium, Pedagogical: High.","notes":"## REGULATORY SIGNAL CONSTELLATIONS\n\n**Full Implementation from Roadmap**\n\n### Concept\nScan promoters/terminators/RBS/operators and render co-occurring regulatory motifs as 'constellations' to reveal operons and control logic.\n\n### How to Build\n\n**Motif Scans:**\n- PWMs for sigma factors (σ70, σ32, σ54, σS)\n- Rho-independent terminator detection (stem-loop + poly-U)\n- RBS (Shine-Dalgarno) scoring\n- Operator palindrome detection\n- Run in TS (fast) or Rust+WASM for batch\n\n**Co-occurrence Graph:**\n- Build small graph of motifs per region\n- Detect motif 'motifs' (regulatory patterns):\n  - Promoter + operator + terminator spacing\n  - Dual promoters (divergent)\n  - Antitermination signals\n\n**Evidence Score:**\n- Combine spacing, orientation, and strength\n- Operon-likelihood per gene cluster\n- Regulatory complexity score\n\n**Link to Genes:**\n- Tie regulatory regions to downstream ORFs\n- Annotate likely operons and regulons\n\n### TUI Features\n- Starfield strip above genes (motifs as glyphs)\n- Edges show spacing relationships\n- Hover shows PWM score for each motif\n- Press 'o' to toggle inferred operon highlighting\n- ORF blocks colored by regulatory context\n- Legend showing motif glyph meanings\n\n### Why It's Good\n- Surfaces regulatory architecture beyond genes\n- Shows how multiple motifs compose control logic\n- Aids understanding of temporal expression\n- Spacing and phase matter for function\n\n### Implementation Stack\n- TS PWM scanning\n- Optional Rust+WASM for speed on large genomes\n- SQLite motif hit cache\n- Ink starfield rendering with braille and symbols\n\nNovelty: 8/10, Pedagogical: 9/10, Wow Factor: 8/10","status":"in_progress","priority":3,"issue_type":"feature","created_at":"2025-12-07T00:18:16.627038-05:00","updated_at":"2025-12-07T17:48:55.796179-05:00","dependencies":[{"issue_id":"phage_explorer-d2p","depends_on_id":"phage_explorer-ojb","type":"blocks","created_at":"2025-12-07T00:20:54.703298-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-d547","title":"Mobile 3D touch controls with gestures","description":"","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-09T00:40:31.3905-05:00","updated_at":"2025-12-09T00:40:31.3905-05:00","dependencies":[{"issue_id":"phage_explorer-d547","depends_on_id":"phage_explorer-ba4h","type":"blocks","created_at":"2025-12-09T00:40:51.792531-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-dahn","title":"Feature tour onboarding system","description":"","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-09T00:39:49.458172-05:00","updated_at":"2025-12-09T00:39:49.458172-05:00","dependencies":[{"issue_id":"phage_explorer-dahn","depends_on_id":"phage_explorer-rhs0","type":"blocks","created_at":"2025-12-09T00:40:10.847321-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-de4o","title":"Fix 3D viewer zoom-to-extents auto-fit","description":"","notes":"# Fix 3D Viewer Zoom-to-Extents (Auto-Fit)\n\n## Problem Statement\n\nThis is the **THIRD TIME** this has been requested. The 3D viewer does not properly auto-fit molecules to the viewport.\n\n**What should happen:** When a 3D structure loads, the camera should automatically position itself so the entire molecule is visible with a small margin (~10% padding).\n\n**What currently happens:** The camera distance calculation exists but doesn't produce the correct result. Molecules either appear too small or too large, requiring manual zoom.\n\n## Technical Background\n\n\"Zoom to extents\" (also called \"fit to screen\" or \"auto-fit\") is a standard feature in all professional 3D viewers:\n- PyMOL: `zoom` command\n- ChimeraX: `view` command\n- VMD: \"Reset View\" button\n- Blender: Numpad . (period)\n\nThe algorithm:\n1. Compute bounding box/sphere of the molecule\n2. Calculate optimal camera distance: `dist = radius / tan(FOV/2)`\n3. Add padding factor (typically 1.1-1.2)\n4. Position camera at that distance, looking at center\n\n## Current Code Analysis\n\n**File:** `/packages/web/src/components/Model3DView.tsx`\n**Lines:** 376-394\n\n```tsx\n// ZOOM TO EXTENTS: Calculate optimal camera distance\nconst fovRad = (camera.fov * Math.PI) / 180;\nconst optimalDist = (structureData.radius / Math.tan(fovRad / 2)) * 1.2;\nconst dist = Math.max(optimalDist, structureData.radius * 1.5);\n\ncamera.position.set(\n  dist * 0.7,  // ← PROBLEM: These factors reduce the actual distance\n  dist * 0.5,\n  dist * 0.7\n);\n```\n\nThe issue is in the camera positioning. While `dist` is calculated correctly, the position is set at `(0.7, 0.5, 0.7)` of that distance, which is closer than intended.\n\n## Solution\n\n1. Calculate the actual distance needed for the angled view:\n   ```tsx\n   const actualDist = dist / Math.sqrt(0.7*0.7 + 0.5*0.5 + 0.7*0.7);\n   ```\n\n2. Or use the correct magnitude:\n   ```tsx\n   const angle = new Vector3(1, 0.7, 1).normalize();\n   camera.position.copy(angle.multiplyScalar(dist));\n   ```\n\n3. Consider aspect ratio in the calculation:\n   ```tsx\n   const aspect = camera.aspect;\n   const vFov = fovRad;\n   const hFov = 2 * Math.atan(Math.tan(vFov/2) * aspect);\n   const fovToUse = Math.min(vFov, hFov);  // Use tighter FOV\n   ```\n\n## Testing Checklist\n\n- [ ] Load phiX174 (small, ~5k atoms) - should fill ~80-90% of viewport\n- [ ] Load T4 (large, ~170k atoms) - should fill ~80-90% of viewport\n- [ ] Load Lambda (medium) - should fill ~80-90% of viewport\n- [ ] Resize window - molecule should refit appropriately\n- [ ] Different render modes should all auto-fit correctly\n\n## Definition of Done\n\n- [ ] All molecules auto-fit to viewport with 10% margin\n- [ ] Works across all render modes (Ball-Stick, Ribbon, Surface)\n- [ ] Works on initial load AND when switching phages\n- [ ] No manual zoom required to see entire structure","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-09T11:25:47.477472-05:00","updated_at":"2025-12-09T11:39:59.16124-05:00","closed_at":"2025-12-09T11:39:59.16124-05:00","dependencies":[{"issue_id":"phage_explorer-de4o","depends_on_id":"phage_explorer-vru3","type":"blocks","created_at":"2025-12-09T11:26:23.495098-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-dhoi","title":"[WEB-P4] Create analysis.worker.ts with WASM init","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-07T17:01:43.44936-05:00","updated_at":"2025-12-07T18:42:45.51962-05:00","closed_at":"2025-12-07T18:42:45.51962-05:00","dependencies":[{"issue_id":"phage_explorer-dhoi","depends_on_id":"phage_explorer-ru4","type":"blocks","created_at":"2025-12-07T17:07:30.038439-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-dhoi","depends_on_id":"phage_explorer-baxt","type":"blocks","created_at":"2025-12-07T17:08:59.786418-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-dmu","title":"[WEB-P1] Add runtime detection in db-runtime/index.ts","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-07T16:57:56.373494-05:00","updated_at":"2025-12-07T17:51:12.760759-05:00","closed_at":"2025-12-07T17:51:12.760759-05:00","dependencies":[{"issue_id":"phage_explorer-dmu","depends_on_id":"phage_explorer-pmb","type":"blocks","created_at":"2025-12-07T17:04:39.750646-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-dr7","title":"Advanced: Amino-Acid Property Phase Portraits","description":"Slide across proteins computing property vectors (hydropathy, charge, aromaticity, disorder). Project trajectories via PCA/UMAP. Compare homologous proteins between phages. ASCII scatter/trajectory; cursor shows window position; color by property dominance. Novelty: Medium-high, Pedagogical: High.","notes":"## AMINO-ACID PROPERTY PHASE PORTRAITS\n\n**Full TypeScript Implementation from Roadmap**\n\n### Concept\nCreate compositional landscape visualizations by computing property trajectories along proteins and projecting to 2D phase portraits that reveal domain structure.\n\n### Mathematical Foundations\n\n**Window Property Vector:**\n```\nP(w) = [H(w), Q(w), A(w), F(w), D(w)]\n\n- H(w): Mean hydropathy (Kyte-Doolittle)\n- Q(w): Net charge ((K+R) - (D+E)) / W\n- A(w): Aromaticity (F+W+Y) / W\n- F(w): Flexibility (B-factor proxy)\n- D(w): Disorder propensity\n```\n\n**PCA Projection:**\n```\n1. Center: P_centered = P - mean(P)\n2. Covariance: C = P^T × P / (n-1)\n3. Power iteration for eigenvectors\n4. Project: P_2D = P_centered × [v1, v2]\n```\n\n**Fréchet Distance:**\n```\nd_F(A, B) = min_{α,β} max_t ||A(α(t)) - B(β(t))||\n```\n\n### Complete TypeScript Implementation\n\n- `PropertyVector` (hydropathy, charge, aromaticity, flexibility, disorder)\n- `ProteinWindow` with properties and 2D projection\n- `ProteinTrajectory` with windows and detected domains\n- `DetectedDomain` (name, dominant property, centroid)\n- `HYDROPATHY` Kyte-Doolittle scale (I:4.5 to R:-4.5)\n- `FLEXIBILITY` B-factor proxy scale\n- `DISORDER_PROPENSITY` IUPred-like scale\n- `computePropertyVector()` per window\n- `computeTrajectory()` sliding window (30 aa, step 5)\n- `matrixMean()`, `centerMatrix()`, `computeCovariance()`\n- `powerIteration()` for top 2 eigenvectors with deflation\n- `projectToPCA()` apply projection\n- `detectDomains()` clustering by dominant property\n- `getDominantProperty()` with normalization\n- `analyzePhasePortraits()` main pipeline\n\n### Braille Rendering\n- `BRAILLE_BASE = 0x2800`\n- `BRAILLE_DOTS[4][2]` dot encoding\n- `renderPhasePortrait()` trajectory as braille scatter\n- `renderDomainBar()` with domain-specific characters:\n  - ▓ Hydrophobic core\n  - ± Charged region\n  - ◆ Aromatic cluster\n  - ~ Flexible linker\n  - ? Disordered region\n\n### TUI Features\n- Braille scatter plot (40×12 grid)\n- N-term → C-term trajectory path\n- PC loadings display (which properties drive each axis)\n- Explained variance percentages\n- Domain map bar under trajectory\n- Domain annotations with boundaries\n- [←/→] Navigate proteins, [C] Compare, [D] Jump to domain\n\nNovelty: 8/10, Pedagogical: 9/10, Wow Factor: 8/10","status":"closed","priority":3,"issue_type":"feature","created_at":"2025-12-07T00:17:46.481224-05:00","updated_at":"2025-12-07T14:09:25.219916-05:00","closed_at":"2025-12-07T14:09:25.219916-05:00","dependencies":[{"issue_id":"phage_explorer-dr7","depends_on_id":"phage_explorer-ojb","type":"blocks","created_at":"2025-12-07T00:20:52.745862-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-dx3","title":"Foundation: UI Design System \u0026 Visual Language","description":"## UI Design System \u0026 Visual Language\n\nEstablishes coherent visual language across all 31 features to maintain consistency.\n\n### Color Semantics\n- Green (#22c55e): Good, conserved, stable, similar\n- Yellow (#eab308): Caution, moderate, neutral\n- Red (#ef4444): Warning, divergent, unstable, different\n- Blue (#3b82f6): Informational, cool metrics\n- Purple (#a855f7): Special, unique, notable\n- Gray (#6b7280): Inactive, background, reference\n\n### Graph/Sparkline Standards\n- Height: 3-5 character rows for overlays\n- Width: Full terminal width\n- Scale: Auto-normalize, show min/max in labels\n- Style: Braille dots for high resolution\n\n### Panel/Modal Standards\n- Border: Single line box drawing\n- Header: Bold, centered, with close hint\n- Padding: 1 character on all sides\n- Max width: 80 characters (or terminal width - 4)\n\nThis is the foundational design system that all features must follow.","status":"closed","priority":0,"issue_type":"epic","created_at":"2025-12-06T23:35:34.98277-05:00","updated_at":"2025-12-06T23:58:14.201697-05:00","closed_at":"2025-12-06T23:58:14.201697-05:00"}
{"id":"phage_explorer-dxv","title":"Advanced: Pan-Phage Graph Pangenome \u0026 Structural Variant Cards","description":"Build graph pangenome over bundled phages via Rust petgraph + minimap2 bindings. Compress bubbles into variant records (SNP/indel/structural). Per-bubble metadata in SQLite. Mini ASCII graph ribbon with bubbles; press enter for variant card showing diff stats, donor lineage bar, overlapped genes. Shows modular mosaicism and reassortment. Novelty: High.","notes":"## PAN-PHAGE GRAPH PANGENOME \u0026 STRUCTURAL VARIANT CARDS\n\n**Full Implementation from Roadmap**\n\n### Concept\nBuild a graph pangenome over all bundled phages to expose conserved cores, accessory modules, recombination breakpoints, and mosaicism. Per-variant 'cards' show local diff, donor lineage hints, and functional impact.\n\n### How to Build\n\n**Graph Construction:**\n- Rust (petgraph + rayon) for rGFA-like graph\n- Align genomes with minimap2 bindings or rust-bio aligners\n- Compress bubbles into variant records (SNP/indel/structural)\n\n**Annotation Linkage:**\n- Map genes, AMGs, defense/anti-defense loci onto graph nodes\n- Tag breakpoints with recombination evidence\n\n**Variant Cards:**\n- Per-bubble metadata in SQLite:\n  - Size, gene overlap, GC shift, donor similarity\n- Query via WASM-compiled graph summaries\n\n### TUI Features\n- Mini ASCII graph ribbon with bubbles highlighted\n- Press enter to pop 'variant card':\n  - Diff stats (size, gene count)\n  - Donor lineage bar\n  - Overlapped genes list\n- Jump sequence grid to variant locus\n- Filter by: size, function, donor\n- Core vs accessory genome coloring\n\n### Why It's Good\n- Shows modular mosaicism and reassortment\n- Surfaces hotspots for host range or defense evasion\n- Reveals conserved backbone vs exchanged islands\n- Goes beyond linear diffs to real evolutionary story\n\n### Implementation Stack\n- Rust+WASM graph builder (petgraph, rust-bio)\n- minimap2 binding for alignments\n- SQLite for variant cards\n- TS/Ink UI for bubble strips and drilldowns\n\nNovelty: 9/10, Pedagogical: 9/10, Wow Factor: 9/10","status":"open","priority":3,"issue_type":"feature","created_at":"2025-12-07T00:17:39.546693-05:00","updated_at":"2025-12-07T13:21:59.58273-05:00","dependencies":[{"issue_id":"phage_explorer-dxv","depends_on_id":"phage_explorer-ojb","type":"blocks","created_at":"2025-12-07T00:20:52.133844-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-e8og","title":"Phase 5: Simulations","description":"Build interactive simulation modules for infection kinetics and packaging motor dynamics with real-time visualization and Web Worker execution.","status":"open","priority":2,"issue_type":"epic","created_at":"2025-12-08T12:56:29.230594-05:00","updated_at":"2025-12-08T12:56:29.230594-05:00"}
{"id":"phage_explorer-e8og.1","title":"Create SimulationView container","description":"Build unified view container for active simulation with parameter controls UI, real-time state display panel, and integration with TimeControls component. Support multiple simulation types (infection kinetics, packaging motor) with consistent interface. Include play/pause/step/reset controls.","notes":"Extended SimulationView routing + visualizers: added infection-kinetics and packaging-motor visualizers; normalized sim ids from SimulationHub to core ids; fallback visualizer shows state JSON. Tests/lint pass.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-08T12:57:05.96782-05:00","updated_at":"2025-12-08T15:49:58.149686-05:00","closed_at":"2025-12-08T15:36:59.574759-05:00","dependencies":[{"issue_id":"phage_explorer-e8og.1","depends_on_id":"phage_explorer-e8og","type":"parent-child","created_at":"2025-12-08T12:57:05.968694-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-e8og.1","depends_on_id":"phage_explorer-7y69","type":"blocks","created_at":"2025-12-08T12:57:05.969223-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-e8og.2","title":"Implement InfectionKineticsVisualizer","description":"Create visualization for infection kinetics simulation with population dynamics curves (susceptible, infected, lysed cells over time), phase plane portrait showing system trajectories, and interactive rate parameter sliders (adsorption rate, latent period, burst size). Use canvas-based rendering for smooth updates.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T12:57:12.592663-05:00","updated_at":"2025-12-08T20:19:12.808438-05:00","closed_at":"2025-12-08T20:19:12.808438-05:00","dependencies":[{"issue_id":"phage_explorer-e8og.2","depends_on_id":"phage_explorer-e8og","type":"parent-child","created_at":"2025-12-08T12:57:12.593071-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-e8og.2","depends_on_id":"phage_explorer-e8og.1","type":"blocks","created_at":"2025-12-08T12:57:12.594433-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-e8og.3","title":"Implement PackagingMotorVisualizer","description":"Create visualization for DNA packaging motor simulation showing DNA progress into capsid (animated bar/circular gauge), motor force dynamics graph over time, and stall detection indicator. Include parameter controls for motor velocity, capsid pressure, and DNA length. Display real-time metrics (packaging percentage, current force, time to completion).","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T12:57:19.806233-05:00","updated_at":"2025-12-08T20:19:18.685116-05:00","closed_at":"2025-12-08T20:19:18.685116-05:00","dependencies":[{"issue_id":"phage_explorer-e8og.3","depends_on_id":"phage_explorer-e8og","type":"parent-child","created_at":"2025-12-08T12:57:19.806859-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-e8og.3","depends_on_id":"phage_explorer-e8og.1","type":"blocks","created_at":"2025-12-08T12:57:19.80761-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-e8og.4","title":"Wire simulations to Web Workers","description":"Connect simulation engines to Web Workers for non-blocking execution. Implement state synchronization between worker and UI using message passing. Handle play/pause/step/reset controls with proper worker lifecycle management. Add error handling and recovery for worker failures. Implement performance monitoring and frame rate limiting.","status":"in_progress","priority":3,"issue_type":"task","created_at":"2025-12-08T12:57:27.275895-05:00","updated_at":"2025-12-08T20:21:21.957603-05:00","dependencies":[{"issue_id":"phage_explorer-e8og.4","depends_on_id":"phage_explorer-e8og","type":"parent-child","created_at":"2025-12-08T12:57:27.276517-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-e8og.4","depends_on_id":"phage_explorer-e8og.2","type":"blocks","created_at":"2025-12-08T12:57:27.27702-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-e8og.4","depends_on_id":"phage_explorer-e8og.3","type":"blocks","created_at":"2025-12-08T12:57:27.277427-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-ea3","title":"Foundation: Depth Layers UI Philosophy \u0026 Keybinding Conventions","description":"## Depth Layers UI Philosophy \u0026 Keybinding Conventions\n\n### Core Philosophy\n\nPhage Explorer must serve two audiences:\n1. **Newcomers** who need simplicity and discoverability\n2. **Power users** who need speed and comprehensive access\n\nThe solution: **Depth Layers** — a progressive disclosure system where features are organized by access frequency and complexity.\n\n### The Five Layers\n\n```\nLayer 0: Sacred Surface (12 core controls)\n  ↓ Always visible, never change\nLayer 1: Quick Overlays (5 single-key toggles)\n  ↓ One keypress, instant visual augmentation\nLayer 2: Analysis Menu (A key)\n  ↓ Categorized selection, ~15 analyses\nLayer 3: Simulation Hub (Shift+S)\n  ↓ Interactive simulations, 5 tools\nLayer 4: Command Palette (: or Ctrl+P)\n  ↓ Fuzzy search everything, 31+ features\n```\n\n### Layer 0: Sacred Surface (NEVER CHANGE)\n\nThese 12 controls are the foundation. New users learn these first.\n\n```\nNAVIGATION:\n  ↑/↓       Navigate phages\n  ←/→       Scroll sequence\n  PgUp/PgDn Fast scroll\n  Home/End  Jump to start/end\n\nVIEW CONTROLS:\n  N/C/Space Toggle DNA/AA view\n  F         Cycle reading frame (AA mode)\n  T         Cycle theme\n  D         Toggle diff mode\n  M         Toggle 3D model\n\nMETA:\n  ?         Help overlay\n  S or /    Search phages\n  Q         Quit\n```\n\n**RULE**: These keys MUST remain unchanged forever. Any new feature uses other keys.\n\n### Layer 1: Quick Overlays\n\nSingle-key toggles for visual augmentation. These overlay information on the main sequence view.\n\n```\nG - GC Skew curve (replication origin)\nX - Complexity sparkline (HGT regions)\nB - Bendability track (packaging signals)\nP - Promoter/RBS annotations\nR - Repeat/palindrome markers\n```\n\n**Design Principle**: One key = one overlay. Toggle on/off. Max 3 active overlays.\n\n**Precomputation**: All overlay data computed on phage selection, not on key press. This makes overlays feel instant.\n\n### Layer 2: Analysis Menu\n\nPress `A` to open categorized analysis menu:\n\n```\n╭─────────── Analysis Menu ───────────╮\n│                                      │\n│  WHOLE GENOME                        │\n│  [1] GC Skew Analysis                │\n│  [2] Chaos Game Representation       │\n│  [3] Hilbert Curve Atlas             │\n│  [4] Self-Homology Dot Plot          │\n│  [5] Tetranucleotide PCA             │\n│                                      │\n│  EVOLUTION                           │\n│  [6] dN/dS Selection Pressure        │\n│  [7] Recombination Hotspots          │\n│  [8] Protein Domain Chord Plot       │\n│                                      │\n│  FUNCTION                            │\n│  [9] Codon Adaptation Dashboard      │\n│  [a] Host Range Predictor            │\n│  [b] Arms Race Scanner               │\n│  ...                                 │\n│                                      │\n│  [/] Search   [ESC] Cancel           │\n╰──────────────────────────────────────╯\n```\n\n**Design Principle**: Organized by category, numbered shortcuts, fuzzy search.\n\n### Layer 3: Simulation Hub\n\nPress `Shift+S` to open interactive simulation selector:\n\n```\n╭────────── Simulation Hub ───────────╮\n│                                      │\n│  INTERACTIVE SIMULATIONS             │\n│                                      │\n│  [1] Lysogeny Decision Circuit       │\n│      ODE model of lysis/lysogeny     │\n│      switch with MOI and UV params   │\n│                                      │\n│  [2] Ribosome Traffic Jam            │\n│      Translation particle simulation │\n│      showing codon effects           │\n│                                      │\n│  [3] Plaque Growth Automata          │\n│      2D cellular automaton of        │\n│      plaque formation                │\n│                                      │\n│  [4] Temporal Evolution Replay       │\n│      Animated phylogenetic time-     │\n│      lapse with mutation events      │\n│                                      │\n│  [5] Packaging Motor Pressure        │\n│      60 atm inside the capsid!       │\n│                                      │\n│  [ESC] Cancel                        │\n╰──────────────────────────────────────╯\n```\n\n**Design Principle**: Full-screen takeover, common controls (Space=pause, R=reset, arrows=speed).\n\n### Layer 4: Command Palette\n\nPress `:` or `Ctrl+P` for fuzzy search of ALL features:\n\n```\n╭────────────────────────────────────────────────────────────────────╮\n│ :gc skew                                                     [ESC] │\n├────────────────────────────────────────────────────────────────────┤\n│ ▶ GC Skew Replication Origin        [G]       Overlay             │\n│   Chaos Game Representation         [A→2]     Analysis            │\n│   Genomic Signature PCA             [A→5]     Analysis            │\n│   GC Content Display                [built-in]                     │\n╰────────────────────────────────────────────────────────────────────╯\n```\n\n**Design Principle**: Type anything, find everything. Show shortcut paths.\n\n### Keystroke Budget\n\n```\nLAYER 0 (reserved, untouchable):\n  ↑↓←→ PgUp PgDn Home End\n  N C Space F T D M ? S / Q\n\nLAYER 1 (quick overlays):\n  G X B P R  (5 keys)\n\nLAYER 2 (menu trigger):\n  A\n\nLAYER 3 (simulation trigger):\n  Shift+S\n\nLAYER 4 (command palette):\n  : or Ctrl+P\n\nLAYER 2+ FEATURES (accessed via menu):\n  W (comparison - already exists)\n  K (AA key - already exists)\n  \nRESERVED FOR FUTURE:\n  E I O U Y  (vowels for mnemonic features)\n  H J L Z    (vim-like navigation if needed)\n  1-9        (quick phage selection?)\n```\n\n### Risk Mitigation Strategies\n\n**Risk: Feature bloat slows main loop**\n- Mitigation: Lazy-load analysis components (`React.lazy`)\n- Mitigation: Precompute in background on phage selection\n- Mitigation: Cache aggressively in SQLite\n\n**Risk: Users get lost in menus**\n- Mitigation: ESC always returns to main view\n- Mitigation: Breadcrumb trail in status bar\n- Mitigation: \"Back\" action in every modal\n\n**Risk: Small terminal breaks layouts**\n- Mitigation: Detect terminal size, hide overlays if too small\n- Mitigation: Stack overlays vertically if narrow\n- Mitigation: Minimum viable mode = Layer 0 only\n\n**Risk: Keybinding conflicts**\n- Mitigation: Layer 0 = unmodified lowercase (sacred)\n- Mitigation: Layer 1 = specific lowercase (G, X, B, P, R)\n- Mitigation: Layer 2/3 = Shift+letter or menu selection\n- Mitigation: Layer 4 = `:` prefix (command mode)\n\n### Accessibility Metrics\n\n```\nTotal keystrokes to any feature: 1-3\nVisible complexity for new users: 12 controls\nAvailable power for experts: 31+ features\n```\n\n### Implementation Checklist\n\n- [ ] Document Layer 0 keys in help overlay\n- [ ] Implement overlay manager (max 3 active)\n- [ ] Create ModalMenu component for Layer 2/3\n- [ ] Build CommandRegistry singleton\n- [ ] Implement fuzzy search for palette\n- [ ] Add breadcrumb to status bar\n- [ ] Precompute overlay data on phage selection\n- [ ] Test on 80x24 minimum terminal\n\n### This Epic Blocks\n\nAll UI-related features depend on this philosophy being established and documented.","status":"closed","priority":0,"issue_type":"epic","created_at":"2025-12-06T23:56:39.998888-05:00","updated_at":"2025-12-07T00:00:03.714089-05:00","closed_at":"2025-12-07T00:00:03.714089-05:00"}
{"id":"phage_explorer-eb06","title":"[WEB-P5] Implement DNA/amino character sets","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-07T17:02:30.15857-05:00","updated_at":"2025-12-08T00:22:18.588334-05:00","closed_at":"2025-12-08T00:22:18.588334-05:00","dependencies":[{"issue_id":"phage_explorer-eb06","depends_on_id":"phage_explorer-l1lc","type":"blocks","created_at":"2025-12-07T17:08:20.171303-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-eb06","depends_on_id":"phage_explorer-xhw0","type":"blocks","created_at":"2025-12-07T17:08:43.84279-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-eb51","title":"[WEB-P3] Add z-index management and sorting","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-07T17:02:25.336008-05:00","updated_at":"2025-12-07T18:27:08.459382-05:00","closed_at":"2025-12-07T18:27:08.459382-05:00","dependencies":[{"issue_id":"phage_explorer-eb51","depends_on_id":"phage_explorer-zld6","type":"blocks","created_at":"2025-12-07T17:07:36.698121-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-ee1","title":"[WEB-P3] Overlays \u0026 Panels: UI Component System","description":"# Phase 3: Overlays \u0026 Panels (Target: Weeks 5-7)\n\n## Purpose\nBuild the interactive UI layer that sits atop the visualization. Command palette, analysis menus, overlays, and help systems.\n\n## Why This Matters\nThe keyboard-first design requires a sophisticated command palette and hotkey system. Analysis overlays are how users extract insights from sequences. Without this layer, the app is just a viewer, not an explorer.\n\n## Design Principles\n1. **Every action has a hotkey** - No mouse-required features\n2. **Fuzzy search everywhere** - Command palette, search, menus\n3. **Modal consistency** - All panels behave the same way\n4. **Layer stacking** - Multiple overlays can be active\n\n## Deliverables\n1. **Command Palette** - Fuzzy search, keyboard navigation, `:` trigger\n2. **Analysis Menu** - Drawer with all analysis options\n3. **Simulation Hub** - Modal launcher for simulations\n4. **Layer 1 Overlays** - GC, complexity, bendability, promoter, repeat\n5. **Multi-Overlay Manager** - Stack management, z-index, focus trap\n6. **Help Overlay** - Dynamic hotkey reference\n\n## Component Architecture\n\n### Command Palette\n```\nFeatures:\n- Fuzzy search with highlighting\n- Category grouping (theme:, overlay:, sim:, export:)\n- Recent commands\n- Keyboard navigation (↑↓, Enter, Tab complete)\n- Cyberpunk styling (glow, scanlines)\n```\n\n### Overlay Stack Manager\n```typescript\nclass OverlayStackManager {\n  push(overlay): void      // Add overlay to stack\n  pop(id?): void           // Remove overlay\n  toggle(overlay): void    // Toggle overlay visibility\n  getTopmost(): Overlay    // For focus management\n  hasBlockingModal(): bool // Prevent background interaction\n}\n```\n\n### Panel System\n```\nPositions: left, right, bottom, center\nSizes: sm, md, lg, xl, full\nFeatures:\n- Focus trapping\n- Escape to close\n- Spring animations\n- Scanline overlay decoration\n```\n\n## Acceptance Criteria\n- [ ] All hotkeys from TUI work in web app\n- [ ] Command palette with fuzzy search\n- [ ] Overlays toggle correctly with hotkeys\n- [ ] Multiple overlays can stack visually\n- [ ] Panel animations are smooth (60fps)\n- [ ] Help overlay shows all current hotkeys\n- [ ] Focus trap works for modals\n\n## Hotkey Parity Checklist\n```\nNavigation: ↑↓←→, hjkl, gg, G, Ctrl+g\nView: Space, 1/2/3, f, t, T, d, m, M, z\nOverlays: g, x, b, p, r, J, L, V, Y, 0\nPanels: a/A, S, :, w/W, /, s, ?, Ctrl+p\n```\n\n## Risks \u0026 Mitigations\n- **Risk**: Fuzzy search performance with many commands\n  - **Mitigation**: Use efficient algorithm (fzy/fzf-style)\n- **Risk**: Focus management complexity\n  - **Mitigation**: Use React focus trap library, test thoroughly\n- **Risk**: Animation performance\n  - **Mitigation**: Use CSS transforms, avoid layout thrashing\n\n## Dependencies\n- Phase 0 (keyboard manager)\n- Phase 2 (core visualization to overlay on)","status":"closed","priority":0,"issue_type":"epic","created_at":"2025-12-07T16:56:15.528715-05:00","updated_at":"2025-12-07T21:09:35.227829-05:00","closed_at":"2025-12-07T21:09:35.227829-05:00","dependencies":[{"issue_id":"phage_explorer-ee1","depends_on_id":"phage_explorer-87z","type":"blocks","created_at":"2025-12-07T17:04:32.337246-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-ee1","depends_on_id":"phage_explorer-10p","type":"blocks","created_at":"2025-12-07T17:04:33.281302-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-eju4","title":"Web App TUI Feature Parity","description":"## Vision\n\nTransform the web application from a static landing page into a **complete replica of the TUI** with all features, but with **superior visualizations** using Canvas/WebGL instead of ASCII art.\n\n## Background \u0026 Rationale\n\nThe TUI (Terminal User Interface) is a sophisticated genome exploration application with:\n- **31 overlay types** for analysis, visualization, and navigation\n- **6 simulation engines** (lysogeny, ribosome traffic, plaque formation, evolution, infection kinetics, packaging motor)\n- **Vim-style keyboard navigation** with modal modes (NORMAL, SEARCH, COMMAND)\n- **Progressive disclosure** (novice → intermediate → power user tiers)\n\nThe web package already has excellent infrastructure (~60+ components/utilities), but the main App.tsx was simplified to a static landing page. This epic restores and enhances the full functionality.\n\n## Why This Matters\n\n1. **Accessibility**: Not everyone has a terminal environment or wants to install a CLI tool\n2. **Discoverability**: A web app is shareable via URL and searchable\n3. **Visual Excellence**: Canvas/WebGL enables visualizations impossible in ASCII\n4. **Cross-Platform**: Works on any device with a browser\n\n## Success Criteria\n\n- [ ] All 31 overlay types from TUI are available\n- [ ] All keyboard shortcuts work identically\n- [ ] All 6 simulations are runnable\n- [ ] Genome comparison fully functional\n- [ ] 3D model viewing available\n- [ ] Performance meets targets (60fps scrolling, \u003c3s TTI)\n- [ ] Works offline after initial load\n\n## Technical Approach\n\n- Use `sql.js` for SQLite in browser (WebPhageRepository)\n- Leverage existing `@phage-explorer/state` Zustand store\n- Web Workers for analysis computation (ComputeOrchestrator exists)\n- Canvas-based rendering for all visualizations\n- WebGL/Three.js for 3D protein structures\n\n## Reference\n\nSee: PLAN_TO_MAKE_WEB_APP_MIRROR_ALL_FUNCTIONALITY_FROM_TUI.md","status":"in_progress","priority":1,"issue_type":"epic","created_at":"2025-12-08T12:52:46.049548-05:00","updated_at":"2025-12-08T17:41:19.162738-05:00"}
{"id":"phage_explorer-elbv","title":"Rename AA to Amino Acids in UI","description":"","notes":"# Rename \"AA\" to \"Amino Acids\" in UI\n\n## Problem Statement\n\nThe abbreviation \"AA\" is used throughout the web app's UI to refer to \"Amino Acids.\" This creates confusion for non-specialists who may not know this abbreviation.\n\nPotential misinterpretations of \"AA\":\n- \"Alcoholics Anonymous\"\n- \"Associate in Arts\" (degree)\n- \"American Airlines\"\n- \"Automobile Association\"\n- \"Anti-Aircraft\"\n\n## Current Occurrences\n\n### SequenceView.tsx (lines 148, 262-273)\n```tsx\nconst viewModeLabel = viewMode === 'dna' ? 'DNA' : viewMode === 'aa' ? 'AA' : 'Dual';\n//                                                                         ^^^^\n\n\u003cbutton onClick={toggleViewMode}\u003e\n  {viewModeLabel}  // Shows \"AA\"\n\u003c/button\u003e\n```\n\n### Store/Types\n```typescript\ntype ViewMode = 'dna' | 'aa' | 'dual';\n//                       ^^^^\n```\n\n## Solution\n\nReplace all user-facing instances of \"AA\" with \"Amino Acids\" or context-appropriate full text:\n\n### UI Labels\n- \"AA\" → \"Amino Acids\"\n- \"DNA/AA view\" → \"DNA/Amino Acids view\"\n- \"AA mode\" → \"Amino Acid mode\"\n\n### Button Text\n- Short form: \"Amino Acids\" (fits in most buttons)\n- If space-constrained: \"Amino\" (still clearer than \"AA\")\n\n### Accessibility Labels\n```tsx\naria-label=\"Toggle between DNA and Amino Acid view\"\n```\n\n## Implementation\n\n### SequenceView.tsx Changes\n\n```tsx\n// Before\nconst viewModeLabel = viewMode === 'dna' ? 'DNA' : viewMode === 'aa' ? 'AA' : 'Dual';\n\n// After\nconst viewModeLabel = viewMode === 'dna'\n  ? 'DNA'\n  : viewMode === 'aa'\n    ? 'Amino Acids'\n    : 'Dual';\n```\n\n### Footer Hints\n\n```tsx\n// Before\n\u003cspan\u003ev view\u003c/span\u003e\n\n// After\n\u003cspan\u003e\n  \u003ckbd\u003ev\u003c/kbd\u003e toggle DNA/Amino Acids\n\u003c/span\u003e\n```\n\n### Screen Reader Description\n\n```tsx\n// Before\nSequence view in {viewModeLabel} mode\n\n// After\nSequence view showing {viewMode === 'dna' ? 'DNA nucleotide' : 'amino acid'} sequence\n```\n\n## Files to Modify\n\n1. `/packages/web/src/components/SequenceView.tsx`\n   - Line 148: Change viewModeLabel\n   - Lines 359-367: Update footer hints\n   - Lines 371-375: Update screen reader text\n\n2. Search for other occurrences:\n   ```bash\n   grep -r '\"AA\"' packages/web/src/\n   grep -r \"'AA'\" packages/web/src/\n   grep -r \"AA view\" packages/web/src/\n   ```\n\n## Notes\n\n- The internal type `ViewMode = 'dna' | 'aa' | 'dual'` can remain unchanged (developers know this)\n- Only user-facing strings need to change\n- Consider adding a glossary/tooltip for first-time users\n\n## Testing\n\n- [ ] All \"AA\" references in UI replaced\n- [ ] Screen reader announces \"Amino Acids\" not \"AA\"\n- [ ] Button text fits without overflow\n- [ ] Consistent terminology throughout app\n\n## Definition of Done\n\n- [ ] No user-facing \"AA\" abbreviations remain\n- [ ] \"Amino Acids\" spelled out in all UI text\n- [ ] Accessibility labels updated\n- [ ] Footer hints updated","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-09T11:25:52.720252-05:00","updated_at":"2025-12-09T11:44:26.035538-05:00","closed_at":"2025-12-09T11:44:26.035538-05:00","dependencies":[{"issue_id":"phage_explorer-elbv","depends_on_id":"phage_explorer-8mgm","type":"blocks","created_at":"2025-12-09T11:26:24.091769-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-enf","title":"[WEB-P2] Pre-render amino acid characters (20+stop)","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-07T16:58:14.782042-05:00","updated_at":"2025-12-07T18:01:23.068058-05:00","closed_at":"2025-12-07T18:01:23.068058-05:00","dependencies":[{"issue_id":"phage_explorer-enf","depends_on_id":"phage_explorer-53f","type":"blocks","created_at":"2025-12-07T17:05:05.86519-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-eob","title":"[WEB-P0] Setup React 19 with concurrent features","description":"Configure React 19 with concurrent rendering, transitions, and automatic batching","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-07T16:58:10.497345-05:00","updated_at":"2025-12-07T17:20:34.890412-05:00","closed_at":"2025-12-07T17:20:34.890412-05:00","dependencies":[{"issue_id":"phage_explorer-eob","depends_on_id":"phage_explorer-94x","type":"blocks","created_at":"2025-12-07T17:04:37.122052-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-ew9a","title":"Phase 7: Polish \u0026 Optimization","description":"## Overview\n\nFinal polish phase focusing on performance optimization, accessibility, progressive disclosure, and overall user experience refinement.\n\n## Why This Phase\n\nAfter core features are implemented, users will discover:\n- Performance bottlenecks with large genomes\n- Accessibility gaps for keyboard-only users\n- Feature overwhelm for new users\n- Edge cases and rough edges\n\nThis phase addresses these real-world usage issues.\n\n## Technical Components\n\n### 1. Performance Optimization\n\n**Virtual Scrolling**:\n- Ensure PhageList handles 10,000+ phages smoothly\n- Optimize SequenceGrid for megabase genomes\n- Minimize re-renders with proper memoization\n\n**Memory Management**:\n- Unload analysis results when overlays close\n- Clear canvas buffers when views change\n- Implement LRU cache for computed data\n\n**Worker Load Balancing**:\n- Multiple workers for parallel analysis\n- Priority queue for user-visible computations\n- Cancel stale requests when user navigates\n\n**Lazy Loading**:\n- Code-split overlay components\n- Load simulation workers on-demand\n- Progressive database loading (index first, sequences on-demand)\n\n### 2. Accessibility\n\n**Keyboard Navigation**:\n- Full app usable without mouse\n- Focus management in overlays\n- Tab order makes sense\n- Escape closes overlays\n\n**Screen Reader Support**:\n- ARIA labels on interactive elements\n- Announce analysis results\n- Describe visualizations textually\n\n**Reduced Motion**:\n- Respect prefers-reduced-motion\n- Disable animations for sensitive users\n- Static alternatives for dynamic content\n\n**Color Accessibility**:\n- Ensure sufficient contrast\n- Don't rely on color alone\n- Colorblind-friendly palettes\n\n### 3. Progressive Disclosure\n\n**User Tiers**:\n```\nNovice (0-5 sessions):\n  - Show basic overlays only\n  - Prominent help hints\n  - Simplified keyboard shortcuts\n\nIntermediate (5-20 sessions):\n  - Unlock more overlays\n  - Show keyboard hints on hover\n  - Introduce simulations\n\nPower User (20+ sessions):\n  - All features available\n  - Minimal hints\n  - Full keyboard shortcut set\n```\n\n**Tier Detection**:\n- Track session count in localStorage\n- Manual tier selection in settings\n- Reset option\n\n**Feature Gating**:\n- Dim unavailable overlays in menu\n- Tooltip explains how to unlock\n- Celebration on tier promotion\n\n### 4. Error Handling\n\n**Graceful Degradation**:\n- Fallback if WebGL unavailable\n- Handle failed database loads\n- Recover from worker crashes\n\n**User Feedback**:\n- Clear error messages (not technical jargon)\n- Suggested actions for common errors\n- Report issue link\n\n### 5. Testing \u0026 Validation\n\n**Performance Metrics**:\n| Metric | Target |\n|--------|--------|\n| First Contentful Paint | \u003c 1.5s |\n| Time to Interactive | \u003c 3s |\n| Database Load | \u003c 5s |\n| Sequence Scroll | 60fps |\n| Analysis Compute | \u003c 2s |\n\n**Test Coverage**:\n- Unit tests for analysis functions\n- Component tests for overlays\n- Integration tests for user flows\n- E2E tests with Playwright\n\n## Dependencies\n\n- **Depends on**: All previous phases (this is polish)\n- **Blocks**: None (final phase)\n\n## Success Criteria\n\n- [ ] App loads in \u003c 3 seconds\n- [ ] Sequence scrolls at 60fps\n- [ ] All features keyboard-accessible\n- [ ] WCAG 2.1 AA compliance\n- [ ] Progressive disclosure implemented\n- [ ] Error states handled gracefully\n\n## Files to Modify\n\n```\npackages/web/src/\n├── hooks/useAccessibility.ts        # NEW\n├── hooks/useProgressiveDisclosure.ts # NEW\n├── components/**/*.tsx              # Add ARIA, optimize renders\n├── styles/                          # Accessibility improvements\n└── utils/performance.ts             # NEW\n```\n\n## Estimated Complexity: Medium\n\nThis phase is distributed across the codebase rather than concentrated in new files. It requires attention to detail more than new architecture.","status":"open","priority":3,"issue_type":"epic","created_at":"2025-12-08T12:55:05.727066-05:00","updated_at":"2025-12-08T12:55:05.727066-05:00","dependencies":[{"issue_id":"phage_explorer-ew9a","depends_on_id":"phage_explorer-bjoz","type":"blocks","created_at":"2025-12-08T12:55:23.042703-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-ew9a","depends_on_id":"phage_explorer-5a7j","type":"blocks","created_at":"2025-12-08T12:55:23.136195-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-ew9a","depends_on_id":"phage_explorer-upat","type":"blocks","created_at":"2025-12-08T12:55:23.22536-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-ew9a","depends_on_id":"phage_explorer-mkpk","type":"blocks","created_at":"2025-12-08T12:55:23.303367-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-f4t","title":"[WEB-P3] Command Palette: Fuzzy Search \u0026 Keyboard Navigation","description":"Build command palette with fuzzy search, keyboard navigation (↑↓ Enter Tab Esc), command categories, recent commands, and cyberpunk styling with glow effects.","status":"closed","priority":0,"issue_type":"feature","created_at":"2025-12-07T17:01:21.585432-05:00","updated_at":"2025-12-07T21:09:23.046253-05:00","closed_at":"2025-12-07T21:09:23.046253-05:00","dependencies":[{"issue_id":"phage_explorer-f4t","depends_on_id":"phage_explorer-ee1","type":"blocks","created_at":"2025-12-07T17:07:09.587355-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-f4t","depends_on_id":"phage_explorer-zld6","type":"blocks","created_at":"2025-12-07T17:07:47.055146-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-f5cw","title":"Phase 4: Comparison System","description":"Implement comprehensive genome comparison interface with diff visualization, multi-metric analysis, and Web Worker integration for performance.","status":"open","priority":2,"issue_type":"epic","created_at":"2025-12-08T12:56:23.936503-05:00","updated_at":"2025-12-08T12:56:23.936503-05:00"}
{"id":"phage_explorer-f5cw.1","title":"Implement ComparisonOverlay","description":"Create full comparison interface with phage A/B selection dropdowns, tabbed results panel (Summary, K-mer, Info, Correlation, Biological, Genes), integration with @phage-explorer/comparison package, and Web Worker execution for performance. Include loading states and error handling.","status":"in_progress","priority":2,"issue_type":"feature","created_at":"2025-12-08T12:56:53.698949-05:00","updated_at":"2025-12-08T20:19:20.165366-05:00","dependencies":[{"issue_id":"phage_explorer-f5cw.1","depends_on_id":"phage_explorer-f5cw","type":"parent-child","created_at":"2025-12-08T12:56:53.699822-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-f5cw.1","depends_on_id":"phage_explorer-qiaq","type":"blocks","created_at":"2025-12-08T12:56:53.701553-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-f5cw.2","title":"Implement diff mode highlighting","description":"Create DiffHighlighter component for SequenceGrid that color-codes insertions (green), deletions (red), and mismatches (yellow). Implement diff navigation controls to jump between differences with keyboard shortcuts. Add statistics panel showing total changes, match percentage, and diff summary.","status":"in_progress","priority":2,"issue_type":"feature","created_at":"2025-12-08T12:56:59.147243-05:00","updated_at":"2025-12-08T17:24:18.275991-05:00","dependencies":[{"issue_id":"phage_explorer-f5cw.2","depends_on_id":"phage_explorer-f5cw","type":"parent-child","created_at":"2025-12-08T12:56:59.148206-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-f5cw.2","depends_on_id":"phage_explorer-f5cw.1","type":"blocks","created_at":"2025-12-08T12:56:59.150221-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-fd3","title":"[WEB-P2] Create CanvasSequenceGridRenderer class structure","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-07T16:57:59.878328-05:00","updated_at":"2025-12-07T18:01:42.477608-05:00","closed_at":"2025-12-07T18:01:42.477608-05:00","dependencies":[{"issue_id":"phage_explorer-fd3","depends_on_id":"phage_explorer-ltg","type":"blocks","created_at":"2025-12-07T17:04:58.774833-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-fdq","title":"[WEB-P1] Service Worker: Workbox Offline Support","description":"Configure Workbox for precaching app shell. StaleWhileRevalidate for database. CacheFirst for WASM and fonts. Create offline fallback page.","status":"closed","priority":0,"issue_type":"feature","created_at":"2025-12-07T16:57:46.5373-05:00","updated_at":"2025-12-07T17:53:56.576764-05:00","closed_at":"2025-12-07T17:53:56.576764-05:00","dependencies":[{"issue_id":"phage_explorer-fdq","depends_on_id":"phage_explorer-pml","type":"blocks","created_at":"2025-12-07T17:04:27.134-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-fdq","depends_on_id":"phage_explorer-sad","type":"blocks","created_at":"2025-12-07T17:04:59.598835-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-fno","title":"Layer 2: Chaos Game Representation (CGR) Fractal Fingerprints","description":"Transform DNA sequences into 2D fractal fingerprints using Chaos Game Representation (CGR). An Iterated Function System maps nucleotides to unit square corners, creating unique visual signatures that encode complete k-mer frequency spectra. Features Braille-character TUI rendering (8x resolution), interactive zoom into k-mer space, side-by-side comparison, and reveals CpG suppression, codon bias, and horizontal gene transfer signatures. Novelty: 9/10, Pedagogical: 9/10, Cool Factor: 10/10.","notes":"## CHAOS GAME REPRESENTATION (CGR) FRACTAL FINGERPRINTS\n\n**Comprehensive Feature Specification from Roadmap**\n\n### Concept\nThe Chaos Game Representation transforms a linear DNA sequence into a 2D fractal image encoding the complete k-mer frequency spectrum in a single visual fingerprint. Based on H. Joel Jeffrey's 1990 algorithm using an Iterated Function System (IFS):\n\n**Algorithm**: Assign nucleotides to unit square corners (A=top-left, T=top-right, G=bottom-right, C=bottom-left). Start at center. For each nucleotide, move halfway toward its corner and place a point. After k steps, point location uniquely encodes the last k nucleotides.\n\n**Biological Insights Revealed**:\n- CpG suppression (void in CG corner region - methylation signature)\n- Codon bias (highly expressed genes cluster in preferred codon regions)\n- Repetitive elements (unusually bright spots = high local k-mer frequency)\n- Horizontal gene transfer (texture discontinuities = mosaic ancestry)\n- Strand asymmetry (leading vs lagging strand preferences)\n\n### Mathematical Foundations\n\n**CGR Iteration Map**:\nGiven corners: A=(0,0), T=(1,0), C=(0,1), G=(1,1)\nStarting: P0 = (0.5, 0.5)\nFor each nucleotide ni: Pi = (Pi-1 + corner(ni)) / 2\n\n**K-mer to Coordinate Mapping (Bijective)**:\nx = sum(i=1 to k) xi / 2^i   (xi = corner_x(si))\ny = sum(i=1 to k) yi / 2^i   (yi = corner_y(si))\nEvery point in [0,1]^2 corresponds to a unique infinite k-mer.\n\n**Frequency CGR (FCGR)**:\nDiscretize unit square into 2^k x 2^k grid. Each cell counts k-mer occurrences:\n- k=3: 8x8 = 64 cells (trinucleotides)\n- k=4: 16x16 = 256 cells (tetranucleotides)\n\n**Fractal Dimension**: D2 = lim(e-\u003e0) log(C(e)) / log(e)\n- Random: D2 ~ 2 (fills plane)\n- Repetitive: D2 \u003c 2 (attractors)\n\n**Comparison Metrics**: Euclidean, Pearson correlation, KL divergence, Cosine similarity\n\n### Implementation\n\n**Core Interfaces**: CGRConfig (resolution, normalize, logScale, smoothing), CGRResult (grid: Float32Array, resolution, maxCount, totalPoints, emptyFraction, entropy)\n\n**computeCGR()**: O(n) iteration, corner lookup, grid increment, entropy calculation\n\n**compareCGR()**: Euclidean distance, Pearson correlation, cosine similarity\n\n**Braille TUI Rendering**: Unicode Braille (0x2800 base) for 8x resolution boost. Heat map coloring.\n\n**Interactive**: Zoom k-mer space, Pan, K-mer lookup, Side-by-side comparison\n\n### Assessment\n- Novelty: 9/10 - CGR + TUI + Braille + interactive zoom unprecedented\n- Pedagogical: 9/10 - IFS, bijective mappings, information theory, chaos\n- Cool Factor: 10/10 - Beautiful fractals from DNA\n\n### Files\n- packages/tui/src/components/CGRView.tsx\n- packages/core/src/analysis/cgr.ts\n- packages/core/src/analysis/cgr-compare.ts","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-06T23:14:47.023731-05:00","updated_at":"2025-12-08T00:31:21.341205-05:00","closed_at":"2025-12-08T00:31:21.341205-05:00","dependencies":[{"issue_id":"phage_explorer-fno","depends_on_id":"phage_explorer-54g","type":"blocks","created_at":"2025-12-06T23:14:47.025541-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-fv8u","title":"Redesign DNA/Amino Acid toggle button","description":"","notes":"# Redesign DNA/Amino Acid Toggle Button\n\n## Problem Statement\n\nThe current DNA/Amino Acid toggle button is:\n1. Too small and subtle\n2. Not visually distinct enough to indicate current mode\n3. Doesn't clearly communicate what it does to new users\n4. Located among other controls without visual hierarchy\n\n## Current Implementation\n\n**File:** `/packages/web/src/components/SequenceView.tsx`\n**Lines:** 259-273\n\n```tsx\n\u003cbutton\n  onClick={toggleViewMode}\n  style={{\n    fontSize: '0.75rem',\n    padding: '0.15rem 0.4rem',\n    borderRadius: '3px',\n    border: `1px solid ${colors.borderLight}`,\n    background: viewMode === 'aa' || viewMode === 'dual'\n      ? colors.accent\n      : colors.backgroundAlt,\n    color: viewMode === 'aa' || viewMode === 'dual' ? '#000' : colors.text,\n    cursor: 'pointer',\n  }}\n\u003e\n  {viewModeLabel}\n\u003c/button\u003e\n```\n\n## Design Requirements\n\n### Visual Prominence\n- Larger than other controls\n- Higher visual contrast\n- Clear indication of current state\n\n### Clarity\n- Show both options (DNA / Amino Acids)\n- Visually indicate which is active\n- Icon + text for quick recognition\n\n### Touch-Friendly\n- Minimum 44x44px touch target\n- Easy to tap on mobile\n\n## Proposed Design: Segmented Control\n\nA two-segment toggle (like iOS segmented control):\n\n```\n┌────────────────────────────────────┐\n│   DNA   │   Amino Acids   │\n└────────────────────────────────────┘\n     ^- active (highlighted)\n```\n\n### Visual States\n\n**DNA Active:**\n```\n┌─────────────────────────────────────┐\n│  🧬 DNA  ║  Amino Acids            │\n└─────────────────────────────────────┘\n   ^^^^^^^^\n   Highlighted, bold\n```\n\n**Amino Acids Active:**\n```\n┌─────────────────────────────────────┐\n│   DNA   ║  🔬 Amino Acids          │\n└─────────────────────────────────────┘\n            ^^^^^^^^^^^^^^^\n            Highlighted, bold\n```\n\n## Implementation\n\n### Component\n\n```tsx\ninterface ViewModeToggleProps {\n  value: 'dna' | 'aa';\n  onChange: (mode: 'dna' | 'aa') =\u003e void;\n}\n\nfunction ViewModeToggle({ value, onChange }: ViewModeToggleProps) {\n  return (\n    \u003cdiv className=\"view-mode-toggle\" role=\"radiogroup\" aria-label=\"Sequence view mode\"\u003e\n      \u003cbutton\n        role=\"radio\"\n        aria-checked={value === 'dna'}\n        className={`toggle-segment ${value === 'dna' ? 'active' : ''}`}\n        onClick={() =\u003e onChange('dna')}\n      \u003e\n        \u003cspan className=\"toggle-icon\"\u003e🧬\u003c/span\u003e\n        \u003cspan className=\"toggle-label\"\u003eDNA\u003c/span\u003e\n      \u003c/button\u003e\n      \u003cbutton\n        role=\"radio\"\n        aria-checked={value === 'aa'}\n        className={`toggle-segment ${value === 'aa' ? 'active' : ''}`}\n        onClick={() =\u003e onChange('aa')}\n      \u003e\n        \u003cspan className=\"toggle-icon\"\u003e🔬\u003c/span\u003e\n        \u003cspan className=\"toggle-label\"\u003eAmino Acids\u003c/span\u003e\n      \u003c/button\u003e\n    \u003c/div\u003e\n  );\n}\n```\n\n### Styling\n\n```css\n.view-mode-toggle {\n  display: inline-flex;\n  border-radius: 8px;\n  background: var(--color-background-alt);\n  padding: 4px;\n  gap: 4px;\n}\n\n.toggle-segment {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  padding: 8px 16px;\n  min-height: 44px;  /* Touch target */\n  border-radius: 6px;\n  border: none;\n  background: transparent;\n  cursor: pointer;\n  font-size: 0.9rem;\n  font-weight: 500;\n  color: var(--color-text-muted);\n  transition: all 150ms ease;\n}\n\n.toggle-segment.active {\n  background: var(--color-accent);\n  color: var(--color-text-on-accent);\n  font-weight: 600;\n  box-shadow: 0 2px 4px rgba(0,0,0,0.1);\n}\n\n.toggle-segment:hover:not(.active) {\n  background: var(--color-background-hover);\n}\n\n.toggle-icon {\n  font-size: 1.1em;\n}\n```\n\n## Placement\n\nMove the toggle to a more prominent position:\n- **Option A:** Above the sequence canvas (current location, but larger)\n- **Option B:** In a sticky header that remains visible while scrolling\n- **Option C:** Floating control bar at bottom of sequence view\n\n## Animation\n\nAdd smooth transition when switching modes:\n- Sliding highlight indicator\n- Subtle scale effect on active segment\n- Color transition over 150ms\n\n## Files to Modify\n\n1. `/packages/web/src/components/SequenceView.tsx`\n   - Replace inline button with ViewModeToggle component\n   - Update state handling\n\n2. **New:** `/packages/web/src/components/ViewModeToggle.tsx`\n   - New component for the segmented control\n\n3. `/packages/web/src/styles.css` (or CSS modules)\n   - Add toggle styles\n\n## Testing\n\n- [ ] Toggle is visually prominent\n- [ ] Current mode is clearly indicated\n- [ ] Touch target is 44x44px minimum\n- [ ] Works on mobile devices\n- [ ] Keyboard accessible (Tab, Enter, Arrow keys)\n- [ ] Screen reader announces mode changes\n\n## Definition of Done\n\n- [ ] Segmented control implemented\n- [ ] \"Amino Acids\" spelled out (not \"AA\")\n- [ ] Touch-friendly size\n- [ ] Clear visual indication of active mode\n- [ ] Smooth animation on toggle","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-09T11:25:52.838219-05:00","updated_at":"2025-12-09T11:32:58.681001-05:00","dependencies":[{"issue_id":"phage_explorer-fv8u","depends_on_id":"phage_explorer-elbv","type":"blocks","created_at":"2025-12-09T11:26:24.237569-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-fwyc","title":"[WEB-P5] Implement GPU k-mer count shader","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-07T17:01:50.756079-05:00","updated_at":"2025-12-08T00:46:51.331808-05:00","closed_at":"2025-12-08T00:46:51.331808-05:00","dependencies":[{"issue_id":"phage_explorer-fwyc","depends_on_id":"phage_explorer-9vj","type":"blocks","created_at":"2025-12-07T17:07:43.90234-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-g179","title":"[WEB-P5] Port transcription flow overlay [Y key]","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-07T17:01:41.001951-05:00","updated_at":"2025-12-07T21:07:07.486598-05:00","closed_at":"2025-12-07T21:07:07.486598-05:00","dependencies":[{"issue_id":"phage_explorer-g179","depends_on_id":"phage_explorer-971","type":"blocks","created_at":"2025-12-07T17:07:34.9749-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-g27d","title":"[WEB-P4] Create density heatmap overlay","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-07T17:01:57.223354-05:00","updated_at":"2025-12-07T18:43:08.137083-05:00","closed_at":"2025-12-07T18:43:08.137083-05:00","dependencies":[{"issue_id":"phage_explorer-g27d","depends_on_id":"phage_explorer-z3eq","type":"blocks","created_at":"2025-12-07T17:07:44.468244-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-g4ez","title":"Handle empty sequences in dot plot","description":"computeDotPlot returned window\u003e0 even when sequence empty, overlay would render nonsense; add early-return empty result and overlay message.","notes":"Early-return empty grid when sequence len=0; overlay shows friendly message instead of blank braille.","status":"closed","priority":3,"issue_type":"bug","created_at":"2025-12-08T02:10:08.216251-05:00","updated_at":"2025-12-08T02:10:13.576849-05:00","closed_at":"2025-12-08T02:10:13.576903-05:00"}
{"id":"phage_explorer-gc36","title":"Welcome modal with experience selection","description":"","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-09T00:39:50.277097-05:00","updated_at":"2025-12-09T00:39:50.277097-05:00","dependencies":[{"issue_id":"phage_explorer-gc36","depends_on_id":"phage_explorer-rhs0","type":"blocks","created_at":"2025-12-09T00:40:10.981191-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-ge4","title":"[WEB-P1] Configure WASM CacheFirst with long TTL","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-07T16:58:28.37452-05:00","updated_at":"2025-12-07T17:53:55.436612-05:00","closed_at":"2025-12-07T17:53:55.436612-05:00","dependencies":[{"issue_id":"phage_explorer-ge4","depends_on_id":"phage_explorer-fdq","type":"blocks","created_at":"2025-12-07T17:04:45.050605-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-gi8m","title":"[WEB-P6] Add scanline intensity control","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-07T17:02:15.802885-05:00","updated_at":"2025-12-08T00:40:04.615121-05:00","closed_at":"2025-12-08T00:40:04.615121-05:00","dependencies":[{"issue_id":"phage_explorer-gi8m","depends_on_id":"phage_explorer-yrsg","type":"blocks","created_at":"2025-12-07T17:09:29.455466-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-gl7l","title":"Pillar 7: UI Integration \u0026 Polish","description":"Final integration of Beginner Mode into main app UI. Includes: Settings panel toggle, status indicator when active, Learn menu in nav, Command palette entries for tours/modules, consistent visual styling for educational content, responsive design for mobile, accessibility (screen reader support for tours). Also includes onboarding flow suggesting Beginner Mode to first-time users based on usage patterns.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-09T11:42:40.541826-05:00","updated_at":"2025-12-09T11:42:40.541826-05:00","dependencies":[{"issue_id":"phage_explorer-gl7l","depends_on_id":"phage_explorer-ty1n","type":"blocks","created_at":"2025-12-09T11:42:40.543922-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-gl7l","depends_on_id":"phage_explorer-0weo","type":"blocks","created_at":"2025-12-09T11:42:40.546573-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-gl7l","depends_on_id":"phage_explorer-vs9k","type":"blocks","created_at":"2025-12-09T11:42:40.548466-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-glkb","title":"[WEB-P4] Lysogeny Circuit Simulation: CI/Cro Decision","description":"Simulate lysis/lysogeny decision circuit. Stochastic gene expression, regulatory dynamics. Parameter exploration UI.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-07T17:01:25.81865-05:00","updated_at":"2025-12-07T18:43:06.972432-05:00","closed_at":"2025-12-07T18:43:06.972432-05:00","dependencies":[{"issue_id":"phage_explorer-glkb","depends_on_id":"phage_explorer-sft","type":"blocks","created_at":"2025-12-07T17:07:11.022141-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-glkb","depends_on_id":"phage_explorer-ru4","type":"blocks","created_at":"2025-12-07T17:08:38.074529-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-glkb","depends_on_id":"phage_explorer-mila","type":"blocks","created_at":"2025-12-07T17:08:47.09597-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-gop5","title":"[WEB-P3] Style with cyberpunk glow and scanlines","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-07T17:01:42.313683-05:00","updated_at":"2025-12-08T00:16:25.446795-05:00","closed_at":"2025-12-08T00:16:25.446795-05:00","dependencies":[{"issue_id":"phage_explorer-gop5","depends_on_id":"phage_explorer-f4t","type":"blocks","created_at":"2025-12-07T17:07:30.62192-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-gpoe","title":"Create ReadingFrameVisualizer component","description":"Demonstrates 3 reading frames on each strand (6 total). Input sequence shows different protein outputs per frame. Highlights why start codons matter. Visual demonstration of frameshift mutations and their effects.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-09T11:46:13.001305-05:00","updated_at":"2025-12-09T11:46:13.001305-05:00","dependencies":[{"issue_id":"phage_explorer-gpoe","depends_on_id":"phage_explorer-owsv","type":"blocks","created_at":"2025-12-09T11:46:22.610553-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-gqs","title":"[WEB-P2] Add reduced motion detection and bypass","description":"","notes":"Centralized prefers-reduced-motion hook; CRT overlay and post-processing now honor it; hook initializes safely after mount.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-07T16:59:02.058058-05:00","updated_at":"2025-12-07T22:24:54.230516-05:00","closed_at":"2025-12-07T22:24:54.230519-05:00","dependencies":[{"issue_id":"phage_explorer-gqs","depends_on_id":"phage_explorer-wl9","type":"blocks","created_at":"2025-12-07T17:05:24.731152-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-gqz7","title":"[WEB-P5] Handle reconnection and cleanup","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-07T17:02:06.282194-05:00","updated_at":"2025-12-08T00:11:47.404198-05:00","closed_at":"2025-12-08T00:11:47.404198-05:00","dependencies":[{"issue_id":"phage_explorer-gqz7","depends_on_id":"phage_explorer-8kpa","type":"blocks","created_at":"2025-12-07T17:08:01.388307-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-gtfd","title":"[WEB-P4] Create PlaqueAutomataCanvas renderer","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-07T17:02:10.934991-05:00","updated_at":"2025-12-07T18:42:57.005132-05:00","closed_at":"2025-12-07T18:42:57.005132-05:00","dependencies":[{"issue_id":"phage_explorer-gtfd","depends_on_id":"phage_explorer-os7j","type":"blocks","created_at":"2025-12-07T17:08:03.147606-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-gtfd","depends_on_id":"phage_explorer-j74s","type":"blocks","created_at":"2025-12-07T17:09:09.546842-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-gu8m","title":"[WEB-P4] Add speed control slider","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-07T17:02:29.800664-05:00","updated_at":"2025-12-07T18:42:47.668935-05:00","closed_at":"2025-12-07T18:42:47.668935-05:00","dependencies":[{"issue_id":"phage_explorer-gu8m","depends_on_id":"phage_explorer-mila","type":"blocks","created_at":"2025-12-07T17:08:26.72244-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-gwhv","title":"[WEB-P6] Documentation: User \u0026 Developer Guides","description":"User guide covering all features, keyboard shortcut reference, developer documentation for contributing.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-07T17:01:28.993049-05:00","updated_at":"2025-12-08T00:10:09.915245-05:00","closed_at":"2025-12-08T00:10:09.915245-05:00","dependencies":[{"issue_id":"phage_explorer-gwhv","depends_on_id":"phage_explorer-zsi","type":"blocks","created_at":"2025-12-07T17:07:23.95011-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-h6r","title":"Advanced: Environmental \u0026 Geospatial Provenance Map","description":"Map each phage to nearest metagenomic hits across biomes/locations to infer habitat and novelty. Adds ecological context and highlights novel clades or constrained niches.\n\n**Build Plan:**\n- Import sketch indexes (Mash/FracMinHash) of public metagenomes (IMG/VIROME, MGnify) prebuilt offline\n- At runtime, query sketches in Rust → WASM\n- Store top hits with biome/geo metadata in SQLite\n- Compute novelty score (1 - max containment)\n\n**Why It's Good:**\n- Ecological context for phage origin and distribution\n- Highlights truly novel clades vs well-characterized families\n- Shows metagenomic surveillance and containment vs identity\n\n**TUI Visualization:**\n- Mini world/biome map with hit density\n- Novelty badge prominently displayed\n- Press 'e' to cycle habitats and see containment bars\n\n**Implementation Stack:** Rust+WASM for sketch queries, prebuilt Mash/FracMinHash indexes, SQLite caching, braille/block char world map.\n\nNovelty: 8/10, Pedagogical: 8/10, Cool Factor: 9/10.","notes":"## ENVIRONMENTAL \u0026 GEOSPATIAL PROVENANCE MAP\n\n**Comprehensive Feature Specification from Roadmap**\n\n### Concept\nMap each phage to nearest metagenomic hits across biomes/locations to infer habitat, ecological niche, and novelty. Contextualizes phages within the broader viral ecology.\n\n**What This Feature Does:**\n- Queries prebuilt sketch indexes of public metagenomes\n- Identifies where similar phages have been found\n- Computes novelty score based on containment\n- Maps hits to biomes and geographic locations\n\n### Build Plan\n\n**Step 1: Prebuilt Indexes**\n```bash\n# Offline: Build Mash/FracMinHash indexes\nmash sketch -p 16 -s 10000 -o imgvr_sketches imgvr_seqs/*.fasta\nmash sketch -p 16 -s 10000 -o mgnify_sketches mgnify_seqs/*.fasta\n```\n\n**Step 2: Runtime Queries (Rust+WASM)**\n```rust\nfn query_metagenome_sketches(\n    query_sketch: \u0026MinHashSketch,\n    indexes: \u0026[SketchIndex],\n) -\u003e Vec\u003cMetagenomeHit\u003e {\n    indexes.par_iter()\n        .flat_map(|idx| idx.query(query_sketch, 0.7)) // min containment\n        .filter(|hit| hit.containment \u003e threshold)\n        .collect()\n}\n```\n\n**Step 3: Novelty Scoring**\n```typescript\n// Novelty = 1 - max_containment\n// High novelty = not seen in metagenomes before\nconst novelty = 1 - Math.max(...hits.map(h =\u003e h.containment));\n```\n\n### TUI Visualization\n\n```\n╭─────────────────────────────────────────────────────────────────────────────╮\n│  ENVIRONMENTAL PROVENANCE: Lambda Phage                                     │\n├─────────────────────────────────────────────────────────────────────────────┤\n│                                                                             │\n│  Novelty Score: 0.23 (WELL-CHARACTERIZED)                                   │\n│                                                                             │\n│  ┌─────────────────────────────────────────────────────────────────────┐    │\n│  │  BIOME DISTRIBUTION                                                 │    │\n│  │                                                                     │    │\n│  │  Gut          ████████████████░░░░  72%                            │    │\n│  │  Freshwater   ███████░░░░░░░░░░░░░  34%                            │    │\n│  │  Soil         ████░░░░░░░░░░░░░░░░  18%                            │    │\n│  │  Marine       ██░░░░░░░░░░░░░░░░░░   8%                            │    │\n│  │  Hot Spring   ░░░░░░░░░░░░░░░░░░░░   0%                            │    │\n│  │                                                                     │    │\n│  └─────────────────────────────────────────────────────────────────────┘    │\n│                                                                             │\n│  ┌─ GEOGRAPHIC HITS ────────────────────────────────────────────────────┐   │\n│  │    ·   ·       ·                  ·                                 │   │\n│  │  ·    ●   ·         ●     ·          ·    ·                        │   │\n│  │     ·      ·    ●      ·      ●   ·        ·                       │   │\n│  │        ·        ·  ·                   ·                           │   │\n│  │  ● = High containment  · = Low containment                          │   │\n│  └─────────────────────────────────────────────────────────────────────┘    │\n│                                                                             │\n│  Top Metagenome Sources:                                                    │\n│  ├─ IMG/VR: Human gut (USA)     Containment: 0.77                          │\n│  ├─ MGnify: Wastewater (EU)     Containment: 0.65                          │\n│  └─ MGnify: River sediment (CN) Containment: 0.52                          │\n│                                                                             │\n│  [E] Cycle habitats  [G] Geographic focus  [N] Novelty details  [ESC]      │\n╰─────────────────────────────────────────────────────────────────────────────╯\n```\n\n### Why It's Good\n\n1. **Ecological Context**: Places phages within their natural habitat\n2. **Novelty Detection**: Identifies truly novel vs well-studied phages\n3. **Surveillance Integration**: Shows where similar phages circulate globally\n4. **Therapy Considerations**: Gut vs environmental origin affects safety profile","status":"open","priority":3,"issue_type":"feature","created_at":"2025-12-07T13:04:28.752178-05:00","updated_at":"2025-12-07T13:05:38.055918-05:00","dependencies":[{"issue_id":"phage_explorer-h6r","depends_on_id":"phage_explorer-ojb","type":"blocks","created_at":"2025-12-07T13:06:05.612928-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-hg7","title":"[WEB-P3] Analysis Menu: Drawer Component","description":"Full-width drawer with all analysis options organized by category. Keyboard shortcuts displayed. Experience-level aware visibility.","status":"closed","priority":0,"issue_type":"feature","created_at":"2025-12-07T17:01:22.944234-05:00","updated_at":"2025-12-08T00:17:46.977747-05:00","closed_at":"2025-12-08T00:17:46.977747-05:00","dependencies":[{"issue_id":"phage_explorer-hg7","depends_on_id":"phage_explorer-ee1","type":"blocks","created_at":"2025-12-07T17:07:10.870032-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-hg7","depends_on_id":"phage_explorer-zld6","type":"blocks","created_at":"2025-12-07T17:07:48.183656-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-hifr","title":"[WEB-P5] Add FASTA format export","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-07T17:02:19.240669-05:00","updated_at":"2025-12-08T00:08:35.610457-05:00","closed_at":"2025-12-08T00:08:35.610457-05:00","dependencies":[{"issue_id":"phage_explorer-hifr","depends_on_id":"phage_explorer-plt8","type":"blocks","created_at":"2025-12-07T17:08:09.015123-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-hq2d","title":"[WEB-P3] Create useOverlayStack React hook","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-07T17:02:27.115278-05:00","updated_at":"2025-12-07T18:27:08.465143-05:00","closed_at":"2025-12-07T18:27:08.465143-05:00","dependencies":[{"issue_id":"phage_explorer-hq2d","depends_on_id":"phage_explorer-zld6","type":"blocks","created_at":"2025-12-07T17:07:36.955737-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-hq2d","depends_on_id":"phage_explorer-wosg","type":"blocks","created_at":"2025-12-07T17:07:59.396008-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-hto","title":"Advanced: Functional Synteny Elastic Alignment","description":"Align gene order between phages using dynamic time warping on gene family sequences. MMseqs2 clustering offline. Synteny continuity scores, module conservation metrics. Dual gene bars with elastic bands linking orthologous modules; breakpoint markers. Highlights rearrangements beyond sequence identity. Novelty: Medium-high.","notes":"## FUNCTIONAL SYNTENY ELASTIC ALIGNMENT\n\n**Full TypeScript Implementation from Roadmap**\n\n### Concept\nUse Dynamic Time Warping to align gene orders between phages, revealing conserved synteny blocks, rearrangement breakpoints, and module boundaries.\n\n### Mathematical Foundations\n\n**Gene Family Encoding:**\n```\nS_p = [F(g1), F(g2), ..., F(gn)]\n\nwhere F(g) = protein family ID from clustering (MMseqs2)\n```\n\n**Dynamic Time Warping:**\n```\nDTW(i, j) = d(ai, bj) + min(\n  DTW(i-1, j) + 0.5,    // gap in B\n  DTW(i, j-1) + 0.5,    // gap in A\n  DTW(i-1, j-1)         // match/mismatch\n)\n\nwhere d(ai, bj) = 0 if same family, 1 otherwise\n```\n\n**Synteny Continuity Score:**\n```\nSCS = matched_pairs_in_order / max(|A|, |B|)\n\nRange: 0 (shuffled) to 1 (perfect synteny)\n```\n\n### Complete TypeScript Implementation\n\n- `SyntenyBlock` (phageA/B ranges, genes, score)\n- `SyntenyAnalysis` (DTW distance, synteny score, blocks, breakpoints)\n- `dtw()` Dynamic Time Warping with traceback:\n  - DP matrix initialization\n  - Cost computation with gap penalties\n  - Path traceback for alignment\n- `alignSynteny()` main function:\n  - Encode genes as family sequences\n  - Run DTW alignment\n  - Extract conserved blocks (≥2 genes)\n  - Calculate synteny score\n  - Identify breakpoints\n\n### Conserved Block Detection\n- Consecutive matches in DTW path\n- Minimum block size threshold\n- Block score = coverage fraction\n- Module annotation (replication, morphogenesis, tail)\n\n### TUI Features\n- Dual gene bars (T4 top, T7 bottom)\n- Elastic bands linking orthologous modules\n- Conserved blocks highlighted (█)\n- Rearrangement markers (╳)\n- Block detail table with positions and module assignments\n- Rearrangement summary (inversions, insertions)\n- [B] Jump to block, [R] Show rearrangements, [M] Module view\n\n### Why It's Valuable\n- Beyond sequence similarity to organizational conservation\n- Module discovery via synteny\n- Rearrangement history reconstruction\n- Engineering guidance (genes that must stay together)\n\nNovelty: 8/10, Pedagogical: 9/10, Wow Factor: 8/10","status":"closed","priority":3,"issue_type":"feature","created_at":"2025-12-07T00:18:15.661616-05:00","updated_at":"2025-12-07T17:31:21.648283-05:00","closed_at":"2025-12-07T17:31:21.648283-05:00","dependencies":[{"issue_id":"phage_explorer-hto","depends_on_id":"phage_explorer-ojb","type":"blocks","created_at":"2025-12-07T00:20:54.60057-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-i2kz","title":"Fix NonBDNA overlay import mismatch","description":"NonBDNAOverlay imports analyzeNonBStructures, but core exports analyzeNonBDNA; results in runtime undefined function. Fix import.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-08T01:10:04.443186-05:00","updated_at":"2025-12-08T01:10:24.657538-05:00","closed_at":"2025-12-08T01:10:24.657538-05:00"}
{"id":"phage_explorer-i5y3","title":"[WEB-P5] Implement video export via WebCodecs","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-07T17:02:20.147302-05:00","updated_at":"2025-12-08T00:44:50.457678-05:00","closed_at":"2025-12-08T00:44:50.457678-05:00","dependencies":[{"issue_id":"phage_explorer-i5y3","depends_on_id":"phage_explorer-plt8","type":"blocks","created_at":"2025-12-07T17:08:09.93225-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-i5y3","depends_on_id":"phage_explorer-qn3k","type":"blocks","created_at":"2025-12-07T17:08:42.907366-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-i8w7","title":"Create TranslationVisualizer component","description":"Animated visualization of protein synthesis: ribosome moving along mRNA, tRNA bringing amino acids, growing polypeptide chain. Step-by-step mode with pause/play. Color-coded amino acids matching AAKeyOverlay scheme.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-09T11:46:08.564387-05:00","updated_at":"2025-12-09T11:46:08.564387-05:00","dependencies":[{"issue_id":"phage_explorer-i8w7","depends_on_id":"phage_explorer-owsv","type":"blocks","created_at":"2025-12-09T11:46:22.397295-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-ibeh","title":"[WEB-P6] Optimize bundle size (target \u003c200KB initial)","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-07T17:01:38.913865-05:00","updated_at":"2025-12-07T22:32:41.741895-05:00","closed_at":"2025-12-07T22:32:41.741895-05:00","dependencies":[{"issue_id":"phage_explorer-ibeh","depends_on_id":"phage_explorer-5a2","type":"blocks","created_at":"2025-12-07T17:08:53.98837-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-ibeh","depends_on_id":"phage_explorer-7vdx","type":"blocks","created_at":"2025-12-07T17:10:01.038582-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-id76","title":"[WEB-P6] Implement minimal chrome layout","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-07T17:02:16.708812-05:00","updated_at":"2025-12-08T00:39:45.160788-05:00","closed_at":"2025-12-08T00:39:45.160788-05:00","dependencies":[{"issue_id":"phage_explorer-id76","depends_on_id":"phage_explorer-yrsg","type":"blocks","created_at":"2025-12-07T17:09:30.343434-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-idhh","title":"Touch scroll momentum and inertia tuning","description":"# Task: Touch scroll momentum and inertia tuning\n\n## Problem\nThe current touch scrolling works but feels \"off\" compared to native iOS/Android scrolling. Issues:\n- Momentum decay is too linear\n- Edge bounce effect missing\n- Scroll snapping to positions would help for codon alignment\n\n## Solution\nImprove VirtualScroller touch handling to feel native:\n\n### Momentum Physics\n```typescript\n// Natural feeling momentum using exponential decay\nprivate applyMomentum() {\n  const FRICTION = 0.95;  // Higher = longer coast\n  const MIN_VELOCITY = 0.5;  // Stop threshold\n  \n  const decay = () =\u003e {\n    this.velocity *= FRICTION;\n    this.scrollPosition += this.velocity;\n    \n    // Clamp to bounds with rubber-band effect\n    if (this.scrollPosition \u003c 0) {\n      this.scrollPosition *= 0.5;  // Rubber band\n      this.velocity *= -0.3;  // Bounce back\n    }\n    \n    if (Math.abs(this.velocity) \u003e MIN_VELOCITY) {\n      requestAnimationFrame(decay);\n    } else {\n      this.snapToNearestCodon();  // Optional snapping\n    }\n  };\n  \n  requestAnimationFrame(decay);\n}\n```\n\n### Codon Snapping (Optional)\nAfter scroll ends, optionally snap to nearest codon boundary:\n```typescript\nprivate snapToNearestCodon() {\n  if (!this.snapEnabled) return;\n  const codonSize = this.cellWidth * 3;\n  const nearestCodon = Math.round(this.scrollPosition / codonSize) * codonSize;\n  this.animateTo(nearestCodon, 150);  // 150ms snap animation\n}\n```\n\n### Overscroll Effect\nAdd iOS-style overscroll at boundaries:\n- Allow scrolling 50px past boundaries\n- Spring back with elastic animation\n- Subtle visual cue (glow or color shift)\n\n## Parameters to Tune\n\n| Parameter | Current | Proposed | Effect |\n|-----------|---------|----------|--------|\n| friction | 0.92 | 0.95 | Longer coast |\n| rubberBand | none | 0.5 | Edge elasticity |\n| snapEnabled | false | optional | Codon alignment |\n| minVelocity | 1.0 | 0.5 | Smoother stop |\n\n## Files to Modify\n\n- `/packages/web/src/rendering/VirtualScroller.ts` - Core momentum physics\n- `/packages/web/src/hooks/useSequenceGrid.ts` - Expose snap preference\n- `/packages/web/src/components/SequenceView.tsx` - Add snap toggle to settings\n\n## Testing\n\n1. Compare side-by-side with native iOS scroll\n2. Test on various devices (touch sensitivity differs)\n3. Performance test: ensure 60fps during momentum\n4. Test with accessibility settings (reduced motion)\n","status":"in_progress","priority":2,"issue_type":"task","created_at":"2025-12-09T00:35:15.962673-05:00","updated_at":"2025-12-09T00:56:06.241848-05:00","dependencies":[{"issue_id":"phage_explorer-idhh","depends_on_id":"phage_explorer-5ozb","type":"blocks","created_at":"2025-12-09T00:40:30.902744-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-idsb","title":"Task: Create DNABasics module","description":"Educational module: DNA basics for engineers. Covers 4-base alphabet, double helix structure, base pairing rules, directionality (5-prime to 3-prime), complementary strands. Include animated base pairing, interactive helix, binary comparison.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-09T11:44:15.299296-05:00","updated_at":"2025-12-09T11:44:15.299296-05:00","dependencies":[{"issue_id":"phage_explorer-idsb","depends_on_id":"phage_explorer-ao55","type":"blocks","created_at":"2025-12-09T11:44:15.301684-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-idsb","depends_on_id":"phage_explorer-3zpa","type":"blocks","created_at":"2025-12-09T11:44:15.306213-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-ifxr","title":"[WEB-P4] Build parameter configuration UI","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-07T17:02:07.978019-05:00","updated_at":"2025-12-07T18:43:06.970622-05:00","closed_at":"2025-12-07T18:43:06.970622-05:00","dependencies":[{"issue_id":"phage_explorer-ifxr","depends_on_id":"phage_explorer-glkb","type":"blocks","created_at":"2025-12-07T17:07:53.647183-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-igmn","title":"Orientation-aware grid layout hook","description":"","status":"in_progress","priority":1,"issue_type":"task","created_at":"2025-12-09T00:35:33.034797-05:00","updated_at":"2025-12-09T01:10:31.375188-05:00","dependencies":[{"issue_id":"phage_explorer-igmn","depends_on_id":"phage_explorer-5ozb","type":"blocks","created_at":"2025-12-09T00:40:30.604721-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-ihk","title":"Advanced: Dinucleotide \u0026 Codon Bias Tensor Decomposition","description":"Decompose di-/tri-nucleotide and codon-usage patterns into latent bias modes via NMF/PCA. Correlate components with metadata (host, lifecycle, genome type). 2D latent map with phages as points; bar chart of contributing k-mers. Exposes hidden biases tied to biology. Novelty: Medium.","notes":"Bias PCA overlay implemented with caching, scatter, codon mode; typecheck/lint clean.","status":"closed","priority":3,"issue_type":"feature","created_at":"2025-12-07T00:18:14.634815-05:00","updated_at":"2025-12-07T17:17:16.71033-05:00","closed_at":"2025-12-07T17:17:16.710349-05:00","dependencies":[{"issue_id":"phage_explorer-ihk","depends_on_id":"phage_explorer-ojb","type":"blocks","created_at":"2025-12-07T00:20:54.493414-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-ik0h","title":"[WEB-P4] Implement job queuing with priorities","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-07T17:01:41.394915-05:00","updated_at":"2025-12-07T18:43:20.392685-05:00","closed_at":"2025-12-07T18:43:20.392685-05:00","dependencies":[{"issue_id":"phage_explorer-ik0h","depends_on_id":"phage_explorer-ru4","type":"blocks","created_at":"2025-12-07T17:07:27.863752-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-j0i","title":"[WEB-P2] Implement current position indicator","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-07T16:58:36.164255-05:00","updated_at":"2025-12-07T18:03:55.868586-05:00","closed_at":"2025-12-07T18:03:55.868586-05:00","dependencies":[{"issue_id":"phage_explorer-j0i","depends_on_id":"phage_explorer-rvg","type":"blocks","created_at":"2025-12-07T17:05:15.086457-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-j4ra","title":"Create full-feature modal for all operations","description":"","notes":"# Create Full-Feature Modal for All Operations\n\n## Overview\n\nThe full-feature modal is a searchable, categorized list of ALL features available in Phage Explorer. It serves as the comprehensive control center accessible via the action drawer's \"Show All Features\" button or FAB long-press.\n\n## Design Goals\n\n1. **Discoverability**: Users can find any feature\n2. **Learnability**: Shows keyboard shortcuts alongside actions\n3. **Speed**: Fuzzy search for power users\n4. **Completeness**: Every feature accessible here\n\n## Layout\n\n```\n┌─────────────────────────────────────────────────┐\n│  ╳  All Features                                │\n├─────────────────────────────────────────────────┤\n│  🔍 Search features...                   [...]  │\n├─────────────────────────────────────────────────┤\n│                                                 │\n│  ▼ Navigation                                   │\n│  ┌───────────────────────────────────────────┐  │\n│  │ ◀ Previous phage                      k   │  │\n│  │ ▶ Next phage                          j   │  │\n│  │ ⏮ Go to start                      Home   │  │\n│  │ ⏭ Go to end                         End   │  │\n│  │ 🔍 Search phages                  / or S  │  │\n│  └───────────────────────────────────────────┘  │\n│                                                 │\n│  ▼ View Options                                 │\n│  ┌───────────────────────────────────────────┐  │\n│  │ 🧬 DNA view                           v   │  │\n│  │ 🔬 Amino Acids view                   v   │  │\n│  │ ↻ Cycle reading frame                 f   │  │\n│  │ ⇄ Toggle diff mode                    d   │  │\n│  │ 🎨 Cycle theme                        t   │  │\n│  └───────────────────────────────────────────┘  │\n│                                                 │\n│  ▼ Analysis Overlays                            │\n│  ┌───────────────────────────────────────────┐  │\n│  │ 📊 GC Skew                            g   │  │\n│  │ 📈 Complexity                         x   │  │\n│  │ 🧪 K-mer Anomaly                          │  │\n│  │ ...                                       │  │\n│  └───────────────────────────────────────────┘  │\n│                                                 │\n│  ▼ 3D Structure                                 │\n│  ┌───────────────────────────────────────────┐  │\n│  │ ⚛️ Ball \u0026 Stick mode                      │  │\n│  │ 〰️ Ribbon mode                            │  │\n│  │ 🫧 Surface mode                           │  │\n│  │ ⏸ Toggle rotation                         │  │\n│  │ 📸 Save screenshot                         │  │\n│  │ ⛶ Fullscreen                          f   │  │\n│  └───────────────────────────────────────────┘  │\n│                                                 │\n│  ▼ Simulations                                  │\n│  └── [Simulation options...]                    │\n│                                                 │\n└─────────────────────────────────────────────────┘\n```\n\n## Feature Registry\n\nAll features should be registered in a central registry:\n\n```typescript\ninterface Feature {\n  id: string;\n  label: string;\n  description?: string;\n  category: FeatureCategory;\n  icon?: string;\n  shortcuts?: string[];  // Multiple possible shortcuts\n  action: () =\u003e void;\n  isActive?: () =\u003e boolean;\n  isEnabled?: () =\u003e boolean;  // Conditional availability\n  tags?: string[];  // For search\n}\n\ntype FeatureCategory =\n  | 'navigation'\n  | 'view'\n  | 'analysis'\n  | '3d'\n  | 'simulation'\n  | 'comparison'\n  | 'settings';\n\nconst FEATURE_REGISTRY: Feature[] = [\n  {\n    id: 'nav.prev',\n    label: 'Previous phage',\n    category: 'navigation',\n    icon: '◀',\n    shortcuts: ['k'],\n    action: () =\u003e store.prevPhage(),\n    tags: ['back', 'up', 'navigate'],\n  },\n  // ... all features\n];\n```\n\n## Fuzzy Search\n\nImplement fuzzy matching for the search:\n\n```typescript\nfunction searchFeatures(query: string): Feature[] {\n  if (!query.trim()) return FEATURE_REGISTRY;\n\n  const lowerQuery = query.toLowerCase();\n\n  return FEATURE_REGISTRY\n    .map(feature =\u003e ({\n      feature,\n      score: fuzzyScore(feature, lowerQuery),\n    }))\n    .filter(({ score }) =\u003e score \u003e 0)\n    .sort((a, b) =\u003e b.score - a.score)\n    .map(({ feature }) =\u003e feature);\n}\n\nfunction fuzzyScore(feature: Feature, query: string): number {\n  let score = 0;\n\n  // Exact label match\n  if (feature.label.toLowerCase().includes(query)) score += 10;\n\n  // Shortcut match\n  if (feature.shortcuts?.some(s =\u003e s.toLowerCase() === query)) score += 20;\n\n  // Tag match\n  if (feature.tags?.some(t =\u003e t.toLowerCase().includes(query))) score += 5;\n\n  // Category match\n  if (feature.category.toLowerCase().includes(query)) score += 3;\n\n  return score;\n}\n```\n\n## Component Implementation\n\n```tsx\nfunction FullFeatureModal({ isOpen, onClose }: Props) {\n  const [searchQuery, setSearchQuery] = useState('');\n  const [expandedCategories, setExpandedCategories] = useState\u003cSet\u003cstring\u003e\u003e(\n    new Set(['navigation', 'view'])  // Initially expanded\n  );\n\n  const filteredFeatures = searchFeatures(searchQuery);\n  const groupedFeatures = groupByCategory(filteredFeatures);\n\n  const handleFeatureClick = (feature: Feature) =\u003e {\n    feature.action();\n    onClose();  // Close modal after action\n  };\n\n  return (\n    \u003cDialog open={isOpen} onClose={onClose}\u003e\n      \u003cdiv className=\"feature-modal\"\u003e\n        \u003cheader className=\"modal-header\"\u003e\n          \u003ch2\u003eAll Features\u003c/h2\u003e\n          \u003cbutton onClick={onClose} aria-label=\"Close\"\u003e×\u003c/button\u003e\n        \u003c/header\u003e\n\n        \u003cdiv className=\"search-bar\"\u003e\n          \u003cinput\n            type=\"text\"\n            placeholder=\"Search features...\"\n            value={searchQuery}\n            onChange={e =\u003e setSearchQuery(e.target.value)}\n            autoFocus\n          /\u003e\n        \u003c/div\u003e\n\n        \u003cdiv className=\"feature-list\"\u003e\n          {Object.entries(groupedFeatures).map(([category, features]) =\u003e (\n            \u003cCategorySection\n              key={category}\n              category={category}\n              features={features}\n              expanded={expandedCategories.has(category)}\n              onToggle={() =\u003e toggleCategory(category)}\n              onFeatureClick={handleFeatureClick}\n            /\u003e\n          ))}\n        \u003c/div\u003e\n      \u003c/div\u003e\n    \u003c/Dialog\u003e\n  );\n}\n```\n\n## Keyboard Navigation\n\nSupport keyboard navigation within the modal:\n\n```typescript\nconst handleKeyDown = (e: KeyboardEvent) =\u003e {\n  switch (e.key) {\n    case 'ArrowDown':\n      focusNextFeature();\n      break;\n    case 'ArrowUp':\n      focusPrevFeature();\n      break;\n    case 'Enter':\n      activateFocusedFeature();\n      break;\n    case 'Escape':\n      onClose();\n      break;\n  }\n};\n```\n\n## Styling\n\n```css\n.feature-modal {\n  width: 100%;\n  max-width: 500px;\n  max-height: 80vh;\n  background: var(--color-surface);\n  border-radius: 12px;\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n}\n\n.modal-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 16px;\n  border-bottom: 1px solid var(--color-border);\n}\n\n.search-bar {\n  padding: 8px 16px;\n  border-bottom: 1px solid var(--color-border);\n}\n\n.search-bar input {\n  width: 100%;\n  padding: 8px 12px;\n  border-radius: 8px;\n  border: 1px solid var(--color-border);\n  background: var(--color-background);\n  font-size: 16px;  /* Prevents iOS zoom */\n}\n\n.feature-list {\n  flex: 1;\n  overflow-y: auto;\n  padding: 8px;\n}\n\n.feature-item {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  padding: 12px;\n  border-radius: 8px;\n  cursor: pointer;\n  min-height: 44px;\n}\n\n.feature-item:hover {\n  background: var(--color-background-hover);\n}\n\n.feature-shortcut {\n  margin-left: auto;\n  padding: 2px 8px;\n  background: var(--color-background-alt);\n  border-radius: 4px;\n  font-family: monospace;\n  font-size: 12px;\n}\n```\n\n## Files to Create\n\n1. `/packages/web/src/components/controls/FullFeatureModal.tsx`\n2. `/packages/web/src/components/controls/FullFeatureModal.css`\n3. `/packages/web/src/lib/featureRegistry.ts`\n\n## Dependencies\n\n- Depends on Action Drawer (phage_explorer-wd9q) for integration\n- Uses existing keyboard shortcut definitions\n\n## Testing\n\n- [ ] Modal opens from action drawer\n- [ ] Modal opens from FAB long-press\n- [ ] Search filters features correctly\n- [ ] Categories expand/collapse\n- [ ] Actions execute correctly\n- [ ] Keyboard navigation works\n- [ ] Escape closes modal\n- [ ] Touch-friendly item sizes\n- [ ] Screen reader accessible\n\n## Definition of Done\n\n- [ ] Complete feature registry with all actions\n- [ ] Fuzzy search implemented\n- [ ] Category grouping and expand/collapse\n- [ ] Keyboard shortcuts displayed\n- [ ] Touch-optimized list items\n- [ ] Accessible (ARIA labels, keyboard nav)","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-09T11:25:49.96461-05:00","updated_at":"2025-12-09T11:32:55.042295-05:00","dependencies":[{"issue_id":"phage_explorer-j4ra","depends_on_id":"phage_explorer-wd9q","type":"blocks","created_at":"2025-12-09T11:26:24.002811-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-j57i","title":"Align NonB naming across store, overlay, menu","description":"Confirm overlay id for non-b DNA is consistent (non-b-dna) across store, NonBDNAOverlay, NonBDNAView, and AnalysisMenu.","notes":"Naming aligned: menu opens non-b-dna; overlay close uses same id; store includes non-b-dna.","status":"closed","priority":3,"issue_type":"chore","created_at":"2025-12-08T02:07:59.51381-05:00","updated_at":"2025-12-08T02:08:09.793067-05:00","closed_at":"2025-12-08T02:08:09.793073-05:00"}
{"id":"phage_explorer-j6d","title":"[WEB-P0] Self-host JetBrains Mono font with subset","description":"Download and self-host JetBrains Mono font with optimized subset for web performance","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-07T16:59:22.476368-05:00","updated_at":"2025-12-07T17:24:34.750998-05:00","closed_at":"2025-12-07T17:24:34.750998-05:00","dependencies":[{"issue_id":"phage_explorer-j6d","depends_on_id":"phage_explorer-aq6","type":"blocks","created_at":"2025-12-07T17:04:45.103135-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-j74s","title":"[WEB-P4] Port plaque automata logic to worker","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-07T17:02:10.051522-05:00","updated_at":"2025-12-07T18:43:09.466716-05:00","closed_at":"2025-12-07T18:43:09.466716-05:00","dependencies":[{"issue_id":"phage_explorer-j74s","depends_on_id":"phage_explorer-os7j","type":"blocks","created_at":"2025-12-07T17:08:01.529234-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-jawc","title":"[WEB-P4] Implement codon timing visualization","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-07T17:01:55.126784-05:00","updated_at":"2025-12-07T18:43:08.134508-05:00","closed_at":"2025-12-07T18:43:08.134508-05:00","dependencies":[{"issue_id":"phage_explorer-jawc","depends_on_id":"phage_explorer-z3eq","type":"blocks","created_at":"2025-12-07T17:07:42.34039-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-jfnu","title":"[WEB-P4] Add playback time controls","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-07T17:02:12.779694-05:00","updated_at":"2025-12-07T18:43:12.161232-05:00","closed_at":"2025-12-07T18:43:12.161232-05:00","dependencies":[{"issue_id":"phage_explorer-jfnu","depends_on_id":"phage_explorer-os7j","type":"blocks","created_at":"2025-12-07T17:08:05.174619-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-jfnu","depends_on_id":"phage_explorer-mila","type":"blocks","created_at":"2025-12-07T17:09:14.807243-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-ji2","title":"Advanced: Epistasis \u0026 Fitness Landscape Explorer","description":"Map pairwise epistasis for key proteins (capsid/tail/polymerase) via ESM single-mutant scores + Potts/EVcouplings model. Find robust vs fragile regions and likely escape routes. Braille heatmap (pos×pos) with Δfitness cells, mutant cards, protein selector. Anticipates escape; guides stable engineering. Novelty: High, Pedagogical: High (fitness landscapes, robustness).","notes":"## EPISTASIS \u0026 FITNESS LANDSCAPE EXPLORER (IN SILICO DMS)\n\n**Full Implementation from Roadmap**\n\n### Mathematical Foundations\n\n**Potts Model for Sequence Distributions:**\n```\nP(A₁, ..., Aₗ) = (1/Z) × exp(Σᵢ hᵢ(Aᵢ) + Σᵢ\u003cⱼ Jᵢⱼ(Aᵢ, Aⱼ))\n\nwhere:\n- Aᵢ: Amino acid at position i\n- hᵢ(a): Single-site field (preference for amino acid a)\n- Jᵢⱼ(a,b): Coupling between positions i,j for amino acids a,b\n- Z: Partition function (normalization)\n```\n\n**Direct Information (DI) for Coupling Strength:**\n```\nDI(i,j) = Σₐ,ᵦ P_dir(a,b|i,j) × log(P_dir(a,b|i,j) / (fᵢ(a) × fⱼ(b)))\n```\n\n**Epistasis Score:**\n```\nε_ij(a,b) = ΔΔG = (G_wt - G_mut_i - G_mut_j + G_double)\n\nPositive ε: Antagonistic (compensatory - double better than expected)\nNegative ε: Synergistic (double worse than expected)\n```\n\n**Single-Mutant Fitness from Pseudo-Likelihood:**\n```\nΔG_mut ≈ -log(P_ESM(mut) / P_ESM(wt))\nUsing BLOSUM62 as proxy for evolutionary constraint\n```\n\n### Complete TypeScript Implementation\n\n- `SingleMutantEffect` interface (position, wt, mut, ΔFitness, uncertainty, structural context)\n- `EpistasisPair` with pos1/2, single effects, double effect, epistasis score, type, significance\n- `PottsModel` (fields, couplings, directInfo matrices)\n- `FitnessLandscape` per protein (single mutants, epistasis pairs, robust/fragile regions, escape routes)\n- `computePseudoLikelihood()` BLOSUM62-based scoring with context\n- `BLOSUM62` substitution matrix\n- `computeDirectInfo()` from sequence frequencies (pairwise MI proxy)\n- `predictSingleMutants()` for all positions × 20 amino acids\n- `computeEpistasis()` for position pairs with high DI\n- `identifyRegions()` robust vs fragile via sliding window\n- `analyzeFitnessLandscape()` full pipeline for key proteins\n- `renderEpistasisHeatmap()` ASCII block visualization\n\n### Key Proteins Analyzed\n- Capsid (coat proteins)\n- Tail fibers\n- Portal\n- Polymerase\n\n### TUI Features\n- Epistasis Heatmap (position × position) with block characters\n- Selected Pair details: wt/mut, single effects, double effect, ε score\n- Interpretation: synergistic, antagonistic, additive\n- Region Summary: robust (stable) vs fragile (sensitive) regions\n- Escape Routes: compensatory mutation pairs\n- [←/→] Move selection, [P] Select protein, [T] Threshold slider\n\n### Implementation Stack\n- Offline LM scoring (ESM2/ProtT5 via Python) cached\n- Rust+WASM for Potts model fitting (ndarray + statrs)\n- SQLite matrix cache for epistasis scores\n- TS/Ink UI for heatmap and mutant cards\n\nNovelty: 9/10, Pedagogical: 9/10, Wow Factor: 8/10","status":"open","priority":3,"issue_type":"feature","created_at":"2025-12-06T23:54:34.192624-05:00","updated_at":"2025-12-07T13:24:38.729265-05:00","dependencies":[{"issue_id":"phage_explorer-ji2","depends_on_id":"phage_explorer-54g","type":"blocks","created_at":"2025-12-06T23:56:51.449633-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-jjq5","title":"Epic: Web App UX Polish \u0026 Feature Completion","description":"","status":"open","priority":0,"issue_type":"epic","created_at":"2025-12-09T11:25:06.594145-05:00","updated_at":"2025-12-09T11:25:06.594145-05:00"}
{"id":"phage_explorer-jmv8","title":"Task: Create GlossaryPanel sidebar component","description":"Create collapsible sidebar panel for glossary. Features: search/filter, category tabs, alphabetical index, expandable term entries, links to related terms, keyboard navigation. Should slide in from right, dismissible. Mobile-responsive.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-09T11:43:57.686948-05:00","updated_at":"2025-12-09T11:43:57.686948-05:00","dependencies":[{"issue_id":"phage_explorer-jmv8","depends_on_id":"phage_explorer-0weo","type":"blocks","created_at":"2025-12-09T11:43:57.688625-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-jmv8","depends_on_id":"phage_explorer-chdb","type":"blocks","created_at":"2025-12-09T11:43:57.691919-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-jon5","title":"[WEB-P6] Implement progressive discovery tooltips","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-07T17:02:08.63388-05:00","updated_at":"2025-12-08T00:14:27.118477-05:00","closed_at":"2025-12-08T00:14:27.118477-05:00","dependencies":[{"issue_id":"phage_explorer-jon5","depends_on_id":"phage_explorer-as5q","type":"blocks","created_at":"2025-12-07T17:09:22.205441-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-jq2t","title":"[WEB-P3] Add experience-level filtering","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-07T17:01:52.387444-05:00","updated_at":"2025-12-08T00:17:33.53212-05:00","closed_at":"2025-12-08T00:17:33.53212-05:00","dependencies":[{"issue_id":"phage_explorer-jq2t","depends_on_id":"phage_explorer-hg7","type":"blocks","created_at":"2025-12-07T17:07:31.857385-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-jre","title":"[WEB-P0] Configure Bun as runtime and package manager","description":"Setup Bun for package management and runtime. Configure bun.lockb and package.json scripts","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-07T16:58:15.177563-05:00","updated_at":"2025-12-07T17:20:34.986926-05:00","closed_at":"2025-12-07T17:20:34.986926-05:00","dependencies":[{"issue_id":"phage_explorer-jre","depends_on_id":"phage_explorer-94x","type":"blocks","created_at":"2025-12-07T17:04:37.21272-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-jvl7","title":"Feature: Touch-Optimized Control Palette","description":"","notes":"# Feature: Touch-Optimized Control Palette\n\n## Problem Statement\n\nThe web app currently requires keyboard shortcuts to access all advanced features. This makes the app inaccessible to:\n- Mobile users (no physical keyboard)\n- Tablet users (on-screen keyboard blocks view)\n- Touchscreen laptop users\n- Users with motor disabilities affecting keyboard use\n- Casual users who won't memorize shortcuts\n\n## Design Philosophy\n\nThe control palette should follow mobile-first design principles:\n1. **Thumb-reachable**: Primary controls in bottom 1/3 of screen\n2. **Progressive disclosure**: Simple options first, advanced on demand\n3. **Touch targets**: Minimum 44x44px tap targets (Apple HIG)\n4. **Visual feedback**: Clear pressed/active states\n5. **Gesture-aware**: Support for swipe, pinch, long-press\n\n## Proposed Architecture\n\n### Layer 1: Floating Action Button (FAB)\nA persistent button in the bottom-right corner that opens the action drawer.\n\n```\n┌─────────────────────────────────────┐\n│                                     │\n│       [Main Content Area]           │\n│                                     │\n│                                     │\n│                                ⚙️   │ ← FAB\n└─────────────────────────────────────┘\n```\n\n### Layer 2: Action Drawer\nA bottom sheet that slides up with categorized quick actions.\n\n```\n┌─────────────────────────────────────┐\n│       [Main Content]                │\n├─────────────────────────────────────┤\n│  ═══════════════════  (drag handle) │\n│                                     │\n│  VIEW          ANALYSIS      3D     │\n│  ┌──────┐     ┌──────┐   ┌──────┐  │\n│  │DNA   │     │GC    │   │Ball  │  │\n│  │      │     │Skew  │   │Stick │  │\n│  └──────┘     └──────┘   └──────┘  │\n│  ┌──────┐     ┌──────┐   ┌──────┐  │\n│  │Amino │     │Kmer  │   │Ribbon│  │\n│  │Acids │     │      │   │      │  │\n│  └──────┘     └──────┘   └──────┘  │\n│                                     │\n│  [⋯ More]                           │\n└─────────────────────────────────────┘\n```\n\n### Layer 3: Full Feature Modal\nAccessed via \"More\" button or long-press on FAB.\n\n```\n┌─────────────────────────────────────┐\n│  ╳  All Features                    │\n├─────────────────────────────────────┤\n│  🔍 Search features...              │\n├─────────────────────────────────────┤\n│  ▼ Navigation                       │\n│    • Next phage (j)                 │\n│    • Previous phage (k)             │\n│    • Go to start (Home)             │\n│    • Go to end (End)                │\n├─────────────────────────────────────┤\n│  ▼ View Options                     │\n│    • DNA view (v)                   │\n│    • Amino acid view (v)            │\n│    • Cycle reading frame (f)        │\n│    • Toggle diff mode (d)           │\n├─────────────────────────────────────┤\n│  ▼ Analysis Overlays                │\n│    • GC Skew (g)                    │\n│    • Complexity (x)                 │\n│    • ...                            │\n└─────────────────────────────────────┘\n```\n\n## Component Breakdown\n\n### 1. FloatingActionButton (FAB)\n- Position: fixed, bottom-right\n- Icon: Gear or menu icon\n- States: normal, pressed, expanded\n- Haptic feedback on tap\n\n### 2. ActionDrawer\n- Uses CSS transforms for smooth animation\n- Drag-to-dismiss with velocity detection\n- Backdrop blur/dim when open\n- Categories from keyboard shortcut registry\n\n### 3. FullFeatureModal\n- Fuzzy search across all actions\n- Grouped by category\n- Shows keyboard shortcuts as hints\n- Touch-optimized list items\n\n## State Management\n\n```typescript\ninterface ControlPaletteState {\n  fabPosition: { x: number; y: number };\n  drawerOpen: boolean;\n  drawerHeight: 'collapsed' | 'half' | 'full';\n  modalOpen: boolean;\n  recentActions: string[];  // For quick access\n}\n```\n\n## Accessibility Requirements\n\n- ARIA labels on all interactive elements\n- Focus management when drawer/modal opens\n- Support for external keyboard when connected\n- Reduced motion support (instant transitions)\n- High contrast mode support\n\n## Dependencies\n\n- phage_explorer-tp98: FAB implementation\n- phage_explorer-wd9q: Action drawer\n- phage_explorer-j4ra: Full modal\n- phage_explorer-zuiv: Gesture support\n\n## Definition of Done\n\n- [ ] FAB visible and functional on mobile\n- [ ] Action drawer provides quick access to common features\n- [ ] Full modal lists ALL available features\n- [ ] Works on iOS Safari, Android Chrome\n- [ ] Touch targets meet 44x44px minimum\n- [ ] Smooth 60fps animations","status":"open","priority":1,"issue_type":"feature","created_at":"2025-12-09T11:25:49.692639-05:00","updated_at":"2025-12-09T11:32:54.706763-05:00","dependencies":[{"issue_id":"phage_explorer-jvl7","depends_on_id":"phage_explorer-jjq5","type":"blocks","created_at":"2025-12-09T11:26:24.380857-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-k041","title":"[WEB-P3] Port promoter/RBS overlay [P key]","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-07T17:02:12.345961-05:00","updated_at":"2025-12-07T18:31:17.418409-05:00","closed_at":"2025-12-07T18:31:17.418409-05:00","dependencies":[{"issue_id":"phage_explorer-k041","depends_on_id":"phage_explorer-7wzv","type":"blocks","created_at":"2025-12-07T17:07:35.196776-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-k3l5","title":"Add functional group visualization in 3D","description":"","notes":"# Add Functional Group Visualization in 3D\n\n## Problem Statement\n\nIn large molecular structures, atoms appear as \"a big tangled mass\" without clear visual organization. Functional groups (collections of atoms with specific biological/chemical purpose) should be visually distinguished to help users understand molecular architecture.\n\n## What Are Functional Groups?\n\nIn proteins and nucleic acids, functional groups are recognizable substructures:\n\n### Amino Acid Side Chains\n- **Aromatic rings** (Phe, Tyr, Trp): 6-membered carbon rings\n- **Sulfur bridges** (Cys-Cys): Disulfide bonds\n- **Charged groups** (Lys, Arg, Asp, Glu): Ionizable at physiological pH\n- **Hydroxyl groups** (Ser, Thr, Tyr): -OH groups\n\n### Nucleic Acid Components\n- **Phosphate backbone**: PO4 groups in DNA/RNA\n- **Sugar rings**: Ribose (RNA) or deoxyribose (DNA)\n- **Bases**: Adenine, Guanine, Cytosine, Thymine/Uracil\n\n### Prosthetic Groups\n- **Heme groups**: Iron-containing porphyrin\n- **Metal centers**: Zinc fingers, calcium binding sites\n\n## Proposed Visualization Approaches\n\n### Option 1: Outline/Highlight Method\nDraw a subtle outline or glow around atoms belonging to the same functional group:\n\n```typescript\ninterface FunctionalGroup {\n  type: 'aromatic' | 'disulfide' | 'phosphate' | 'heme' | 'metal_center';\n  atomIndices: number[];\n  color: Color;\n  highlightStyle: 'outline' | 'glow' | 'halo';\n}\n```\n\n### Option 2: Bounding Shape Method\nRender translucent bounding shapes (ellipsoids, boxes) around functional groups:\n\n```typescript\nfunction buildFunctionalGroupBounds(\n  atoms: AtomRecord[],\n  groups: FunctionalGroup[]\n): Group {\n  const meshes = groups.map(group =\u003e {\n    const groupAtoms = group.atomIndices.map(i =\u003e atoms[i]);\n    const centroid = computeCentroid(groupAtoms);\n    const bounds = computeBoundingEllipsoid(groupAtoms);\n    return createTranslucentEllipsoid(centroid, bounds, group.color);\n  });\n  return new Group().add(...meshes);\n}\n```\n\n### Option 3: Connection Line Method\nDraw lines connecting atoms in the same functional group:\n\n```typescript\nfunction buildFunctionalGroupConnections(\n  atoms: AtomRecord[],\n  groups: FunctionalGroup[]\n): Group {\n  // Draw thin lines between atoms in each group\n  // Different colors per group type\n}\n```\n\n## Detection Algorithms\n\n### Aromatic Ring Detection\n```typescript\nfunction detectAromaticRings(atoms: AtomRecord[], bonds: Bond[]): number[][] {\n  // Find 6-membered carbon rings\n  // Check planarity (dihedral angles)\n  // Return atom indices for each ring\n}\n```\n\n### Disulfide Bond Detection\n```typescript\nfunction detectDisulfideBonds(atoms: AtomRecord[]): [number, number][] {\n  // Find pairs of sulfur atoms (from Cys residues)\n  // Check distance (typical S-S bond: 2.0-2.1 Å)\n}\n```\n\n### Phosphate Group Detection\n```typescript\nfunction detectPhosphateGroups(atoms: AtomRecord[]): number[][] {\n  // Find P atoms bonded to 4 O atoms\n  // Return phosphate group atom indices\n}\n```\n\n## UI Integration\n\nAdd a toggle or dropdown to enable functional group highlighting:\n\n```tsx\n\u003cbutton onClick={() =\u003e setShowFunctionalGroups(!showFunctionalGroups)}\u003e\n  Show Groups\n\u003c/button\u003e\n\n\u003cselect value={highlightStyle} onChange={setHighlightStyle}\u003e\n  \u003coption value=\"none\"\u003eNone\u003c/option\u003e\n  \u003coption value=\"outline\"\u003eOutline\u003c/option\u003e\n  \u003coption value=\"glow\"\u003eGlow\u003c/option\u003e\n  \u003coption value=\"bounds\"\u003eBounding Shapes\u003c/option\u003e\n\u003c/select\u003e\n```\n\n## Performance Considerations\n\n- Functional group detection should be cached per structure\n- Highlight rendering should use instanced meshes\n- Consider LOD: hide details at far zoom levels\n\n## Dependencies\n\n- Requires improved atom coloring (phage_explorer-qm08) to be complete first\n- Group detection needs accurate bond information\n\n## Definition of Done\n\n- [ ] Aromatic rings visually distinguishable\n- [ ] Disulfide bridges highlighted\n- [ ] Phosphate groups (if present) highlighted\n- [ ] Toggle to enable/disable group visualization\n- [ ] Performance acceptable on structures with 10k+ atoms","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-09T11:25:47.65109-05:00","updated_at":"2025-12-09T11:32:53.250209-05:00","dependencies":[{"issue_id":"phage_explorer-k3l5","depends_on_id":"phage_explorer-qm08","type":"blocks","created_at":"2025-12-09T11:26:23.690228-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-kcr1","title":"[WEB-P3] Organize by category with icons","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-07T17:02:37.981002-05:00","updated_at":"2025-12-08T00:18:59.598863-05:00","closed_at":"2025-12-08T00:18:59.598863-05:00","dependencies":[{"issue_id":"phage_explorer-kcr1","depends_on_id":"phage_explorer-m31q","type":"blocks","created_at":"2025-12-07T17:07:38.624752-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-kgw","title":"[WEB-P0] Setup typography scale and monospace font stack","description":"Define typography scale, line heights, and monospace font stack for code display","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-07T16:59:18.225797-05:00","updated_at":"2025-12-07T17:24:34.656177-05:00","closed_at":"2025-12-07T17:24:34.656177-05:00","dependencies":[{"issue_id":"phage_explorer-kgw","depends_on_id":"phage_explorer-aq6","type":"blocks","created_at":"2025-12-07T17:04:44.922718-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-kul","title":"Layer 2: Sequence Logo Generator","description":"Create information-theoretic sequence logos from multiple sequence alignments. Compute Shannon entropy per position, letter heights proportional to frequency × information content. Standard for visualizing conserved motifs (promoters, RBS, binding sites). Supports both DNA (max 2 bits) and protein (max 4.3 bits) alphabets. ASCII art stacked letters with bit scale. Novelty: 6/10, Pedagogical: 9/10, Cool Factor: 7/10.","notes":"## SEQUENCE LOGO GENERATOR\n\n**Comprehensive Feature Specification from Roadmap**\n\n### Concept\nCreate information-theoretic sequence logos from multiple sequence alignments. The standard visualization for conserved motifs in promoters, ribosome binding sites, transcription factor binding sites.\n\n**What sequence logos show**:\n- Height of stack at each position = total information content (bits)\n- Height of each letter within stack = that base's contribution\n- Highly conserved positions have tall stacks (near 2 bits for DNA)\n- Variable positions have short stacks (near 0 bits)\n\n### Mathematical Foundations\n\n**Information Content**:\nFor DNA: max_bits = 2 (log2(4) nucleotides)\nFor protein: max_bits = 4.3 (log2(20) amino acids)\n\n**Shannon Entropy at position p**:\nH(p) = -sum(f(b,p) * log2(f(b,p))) for all bases b\n\nwhere f(b,p) = frequency of base b at position p\n\n**Information Content**:\nR(p) = max_bits - H(p) - e(n)\n\nwhere e(n) = small sample correction = (s-1) / (2 * ln(2) * n)\ns = number of symbols, n = number of sequences\n\n**Letter Heights**:\nheight(b,p) = f(b,p) * R(p)\n\nLetters stacked smallest at bottom, largest on top.\n\n### Implementation\n\n**Core Interface**:\n```typescript\ninterface LogoColumn {\n  position: number;\n  totalBits: number;  // Information content\n  letters: { char: string; height: number }[];  // Sorted by height\n}\n\nfunction generateLogo(alignment: string[], type: 'dna' | 'protein'): LogoColumn[]\n```\n\n**Key Functions**:\n- Count frequencies at each position\n- Calculate Shannon entropy\n- Compute information content per position\n- Sort letters by height for stacking\n- Render as ASCII art with scaled heights\n\n### TUI Visualization\n\n```\nPromoter -10 box consensus logo:\n\nBits\n 2.0 |     T\n     |     T A A A\n 1.5 |     T A A A T\n     |   T T A A A T\n 1.0 |   T T A A A T\n     |   T T A A A T\n 0.5 | T T T A A A T A\n     | T T T A A A T A T\n 0.0 +-+-+-+-+-+-+-+-+-+-\n       1 2 3 4 5 6 7 8 9\n\nConsensus: TATAAT (Pribnow box)\nInformation content: 8.2 bits (highly conserved)\n```\n\n### Assessment\n- Novelty: 6/10 - Standard bioinformatics tool, but TUI rendering is useful\n- Pedagogical: 9/10 - Teaches information theory, conservation, motif structure\n- Cool Factor: 7/10 - Seeing letter stacks is intuitive and satisfying\n\n### Files\n- packages/tui/src/components/LogoView.tsx\n- packages/core/src/analysis/sequence-logo.ts\n- packages/core/src/analysis/alignment-utils.ts","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-06T23:12:45.391548-05:00","updated_at":"2025-12-08T00:56:56.084056-05:00","closed_at":"2025-12-08T00:56:56.084056-05:00","dependencies":[{"issue_id":"phage_explorer-kul","depends_on_id":"phage_explorer-54g","type":"blocks","created_at":"2025-12-06T23:12:45.393178-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-kvoh","title":"[WEB-P3] Create HelpOverlay component","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-07T17:02:36.00318-05:00","updated_at":"2025-12-08T00:18:21.538644-05:00","closed_at":"2025-12-08T00:18:21.538644-05:00","dependencies":[{"issue_id":"phage_explorer-kvoh","depends_on_id":"phage_explorer-m31q","type":"blocks","created_at":"2025-12-07T17:07:38.367622-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-l0e6","title":"[WEB-P5] Create state sync data channel","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-07T17:02:04.116164-05:00","updated_at":"2025-12-08T00:15:18.018736-05:00","closed_at":"2025-12-08T00:15:18.018736-05:00","dependencies":[{"issue_id":"phage_explorer-l0e6","depends_on_id":"phage_explorer-8kpa","type":"blocks","created_at":"2025-12-07T17:07:58.95819-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-l0e6","depends_on_id":"phage_explorer-pt19","type":"blocks","created_at":"2025-12-07T17:08:41.07-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-l1lc","title":"[WEB-P5] Matrix Rain Effect: Background Animation","description":"Canvas-based matrix rain using DNA/amino acid characters. Configurable density, triggered during loading/idle.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-07T17:01:28.465444-05:00","updated_at":"2025-12-07T18:47:37.956135-05:00","closed_at":"2025-12-07T18:47:37.956135-05:00","dependencies":[{"issue_id":"phage_explorer-l1lc","depends_on_id":"phage_explorer-zkp","type":"blocks","created_at":"2025-12-07T17:07:17.888188-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-l1p","title":"[WEB-P1] Add persist middleware to phage store","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-07T16:58:36.550379-05:00","updated_at":"2025-12-07T17:55:03.730035-05:00","closed_at":"2025-12-07T17:55:03.730035-05:00","dependencies":[{"issue_id":"phage_explorer-l1p","depends_on_id":"phage_explorer-mul","type":"blocks","created_at":"2025-12-07T17:04:46.962341-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-l39j","title":"[WEB-P6] Add reduced motion support (prefers-reduced-motion)","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-07T17:01:54.748679-05:00","updated_at":"2025-12-08T00:19:49.566314-05:00","closed_at":"2025-12-08T00:19:49.566314-05:00","dependencies":[{"issue_id":"phage_explorer-l39j","depends_on_id":"phage_explorer-2xt","type":"blocks","created_at":"2025-12-07T17:09:09.889891-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-l3q6","title":"Create InfectionCycleVisualizer component","description":"Animated phage lifecycle: attachment to host, DNA injection, genome takeover, replication, assembly, lysis. Lytic vs lysogenic pathways. Timeline scrubber for exploration. Integrates with PhageLifecycle module content.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-09T11:46:11.733794-05:00","updated_at":"2025-12-09T11:46:11.733794-05:00","dependencies":[{"issue_id":"phage_explorer-l3q6","depends_on_id":"phage_explorer-owsv","type":"blocks","created_at":"2025-12-09T11:46:22.541048-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-l5vo","title":"Remove SQLite/Zustand loading message from UI","description":"","notes":"# Remove SQLite/Zustand Loading Message\n\n## Problem Statement\n\nThe web app currently displays: \"SQLite loaded via sql.js. Data flows into the shared Zustand store.\"\n\nThis is a **severe UX anti-pattern** for several reasons:\n1. End users don't know what SQLite, sql.js, or Zustand are\n2. It wastes valuable screen real estate\n3. It makes the app look unprofessional/unfinished\n4. It provides zero actionable information to users\n\n## Location\n\n**File:** `/packages/web/src/App.tsx`\n**Lines:** 258-265\n\n```tsx\n{repository \u0026\u0026 !error ? (\n  \u003cdiv className=\"db-status-bar\" aria-label=\"Database status\"\u003e\n    \u003cspan className=\"db-status-icon\"\u003e✓\u003c/span\u003e\n    \u003cspan className=\"db-status-text\"\u003e\n      SQLite loaded via sql.js. Data flows into the shared Zustand store.\n    \u003c/span\u003e\n    {isCached \u0026\u0026 \u003cspan className=\"badge badge-small\"\u003eCached\u003c/span\u003e}\n  \u003c/div\u003e\n) : (\n```\n\n## Solution\n\nRemove the entire `db-status-bar` div when the database is successfully loaded. The status should be implicit - if the app is working, the database is loaded.\n\n**Option A (Minimal):** Simply remove lines 258-265\n**Option B (Better UX):** Replace with a subtle loading indicator that disappears once data loads\n\n## Implementation Notes\n\n- The `isCached` badge is useful during development but meaningless to end users\n- Keep the error state display (lines 267-285) for actual error handling\n- Consider moving database status to a developer tools panel (e.g., accessible via Shift+D)\n\n## Testing\n\n1. Load the web app\n2. Verify no \"SQLite loaded\" message appears\n3. Verify error states still display correctly\n4. Verify functionality is unaffected\n\n## Definition of Done\n\n- [ ] No developer-facing messages visible in production UI\n- [ ] Error states still display when database fails to load\n- [ ] Page layout unchanged (no gaps where message was)","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-09T11:25:20.945827-05:00","updated_at":"2025-12-09T11:38:14.724697-05:00","closed_at":"2025-12-09T11:38:14.724697-05:00","dependencies":[{"issue_id":"phage_explorer-l5vo","depends_on_id":"phage_explorer-jjq5","type":"blocks","created_at":"2025-12-09T11:26:24.556485-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-l63","title":"[WEB-P1] Implement Brotli compression (quality 11)","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-07T16:58:07.578075-05:00","updated_at":"2025-12-07T17:52:24.634569-05:00","closed_at":"2025-12-07T17:52:24.634569-05:00","dependencies":[{"issue_id":"phage_explorer-l63","depends_on_id":"phage_explorer-sad","type":"blocks","created_at":"2025-12-07T17:04:41.771418-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-l63","depends_on_id":"phage_explorer-pal","type":"blocks","created_at":"2025-12-07T17:05:03.582394-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-l8y","title":"[WEB-P1] Configure database StaleWhileRevalidate strategy","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-07T16:58:27.469167-05:00","updated_at":"2025-12-07T17:53:55.440996-05:00","closed_at":"2025-12-07T17:53:55.440996-05:00","dependencies":[{"issue_id":"phage_explorer-l8y","depends_on_id":"phage_explorer-fdq","type":"blocks","created_at":"2025-12-07T17:04:44.879417-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-l931","title":"[WEB-P4] Add phylogenetic tree context","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-07T17:02:26.784104-05:00","updated_at":"2025-12-07T18:43:10.631294-05:00","closed_at":"2025-12-07T18:43:10.631294-05:00","dependencies":[{"issue_id":"phage_explorer-l931","depends_on_id":"phage_explorer-6vqr","type":"blocks","created_at":"2025-12-07T17:08:16.626649-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-ld7x","title":"[WEB-P6] Add ARIA labels to all interactive elements","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-07T17:01:51.617157-05:00","updated_at":"2025-12-07T22:14:56.796256-05:00","closed_at":"2025-12-07T22:14:56.796256-05:00","dependencies":[{"issue_id":"phage_explorer-ld7x","depends_on_id":"phage_explorer-2xt","type":"blocks","created_at":"2025-12-07T17:09:06.522015-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-ldc4","title":"[WEB-P5] Add presence/cursor indicators","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-07T17:02:05.214087-05:00","updated_at":"2025-12-08T00:15:30.836445-05:00","closed_at":"2025-12-08T00:15:30.836445-05:00","dependencies":[{"issue_id":"phage_explorer-ldc4","depends_on_id":"phage_explorer-8kpa","type":"blocks","created_at":"2025-12-07T17:07:59.913206-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-ldc4","depends_on_id":"phage_explorer-l0e6","type":"blocks","created_at":"2025-12-07T17:08:42.016785-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-lgad","title":"Create InfoButton component","description":"Small info icon button that appears next to technical terms/features when beginner mode active. Click reveals contextual tooltip or opens relevant module. Non-intrusive styling that doesnt clutter the UI. Uses existing overlay z-index system.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-09T11:46:37.457468-05:00","updated_at":"2025-12-09T11:46:37.457468-05:00","dependencies":[{"issue_id":"phage_explorer-lgad","depends_on_id":"phage_explorer-owsv","type":"blocks","created_at":"2025-12-09T11:46:54.505729-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-ljv","title":"[WEB-P2] Add dirty region tracking for partial updates","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-07T16:58:04.451027-05:00","updated_at":"2025-12-07T18:01:42.493834-05:00","closed_at":"2025-12-07T18:01:42.493834-05:00","dependencies":[{"issue_id":"phage_explorer-ljv","depends_on_id":"phage_explorer-ltg","type":"blocks","created_at":"2025-12-07T17:05:02.496414-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-ltg","title":"[WEB-P2] Canvas Sequence Grid: Main Rendering Engine","description":"Build CanvasSequenceGridRenderer with high-DPI support, OffscreenCanvas double-buffering, dirty region tracking, color batching. Target 60fps.","status":"closed","priority":0,"issue_type":"feature","created_at":"2025-12-07T16:57:45.517407-05:00","updated_at":"2025-12-07T18:02:34.255802-05:00","closed_at":"2025-12-07T18:02:34.255802-05:00","dependencies":[{"issue_id":"phage_explorer-ltg","depends_on_id":"phage_explorer-10p","type":"blocks","created_at":"2025-12-07T17:04:52.874584-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-ltg","depends_on_id":"phage_explorer-53f","type":"blocks","created_at":"2025-12-07T17:05:25.620916-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-ltg","depends_on_id":"phage_explorer-11b","type":"blocks","created_at":"2025-12-07T17:05:26.555462-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-ltm","title":"Advanced: Host-Phage Protein Interaction \u0026 Docking Map","description":"Predict host targets of phage effectors (anti-defense, RBPs) via ESM/ProtT5 embedding similarity, PFAM domain filtering, and optional coarse docking. Bipartite graph UI with confidence edges, residue tooltips. Generates mechanistic host-range and anti-defense hypotheses beyond BLAST. Novelty: High, Pedagogical: High (embeddings, docking, domain-function).","notes":"## HOST-PHAGE PROTEIN INTERACTION \u0026 EFFECTOR DOCKING MAP\n\n**Full Implementation from Roadmap**\n\n### Mathematical Foundations\n\n**Embedding Similarity:**\n```\nsim_embed(p, h) = cos(e_p, e_h) = (e_p · e_h) / (||e_p|| × ||e_h||)\n```\n\n**Domain Compatibility Score:**\n```\nsim_domain(p, h) = Σᵢⱼ P(interact | domain_i, domain_j) × I(domain_i ∈ p) × I(domain_j ∈ h)\n```\n\n**Docking Score Transformation:**\n```\nP(bind | E_dock) = 1 / (1 + exp((E_dock - E_threshold) / kT))\n```\n\n**Bayesian Evidence Fusion:**\n```\nlog P(interact | embed, domain, dock) =\n    w₁ × log(sim_embed) + w₂ × log(sim_domain) + w₃ × log(P_dock) + prior\nConfidence = σ(log_odds)\n```\n\n### Complete TypeScript Implementation\n\n- `ProteinEmbedding` interface (1280-dim ESM2 vectors)\n- `DomainHit` with functional categories (receptor, defense, metabolism)\n- `PredictedInteraction` with evidence scores and confidence\n- `HostProtein` database entry structure\n- `cosineSimilarity()` embedding comparison\n- `DOMAIN_INTERACTION_PRIORS` Map (Phage_tail_fiber↔LPS, Anti_CRISPR↔CRISPR_Cas, etc.)\n- `domainCompatibility()` with supporting pair tracking\n- `classifyInteractionType()` (anti-defense, receptor-binding, metabolic)\n- `fuseEvidence()` Bayesian confidence calculation\n- `buildInteractionNetwork()` main network construction\n\n### TUI Features\n- Bipartite graph: phage proteins ↔ host targets\n- Edge thickness = confidence level\n- Interaction type filtering: [F]unction (receptor, defense, metabolism)\n- Evidence panel showing embedding sim, domain match, docking score\n- Top receptor candidates with confidence percentages\n- Host Range Breadth indicator\n\n### Implementation Stack\n- Python (ESM/ProtT5) for embeddings, export to ONNX\n- ONNX Runtime in Bun for inference\n- HMMER precompute for domain annotations\n- SQLite caching for embedding vectors\n- Braille/block bipartite graph visualization\n\nNovelty: 9/10, Pedagogical: 9/10, Wow Factor: 9/10","status":"open","priority":3,"issue_type":"feature","created_at":"2025-12-06T23:50:09.694441-05:00","updated_at":"2025-12-07T13:20:32.29099-05:00","dependencies":[{"issue_id":"phage_explorer-ltm","depends_on_id":"phage_explorer-54g","type":"blocks","created_at":"2025-12-06T23:56:51.05269-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-lvx5","title":"Task: Create TermTooltip component","description":"Hover tooltip for glossary terms. Shows short definition on hover, click opens full panel. Auto-positions to avoid screen edges. Links recognized terms in educational content automatically.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-09T11:43:57.962931-05:00","updated_at":"2025-12-09T11:43:57.962931-05:00","dependencies":[{"issue_id":"phage_explorer-lvx5","depends_on_id":"phage_explorer-0weo","type":"blocks","created_at":"2025-12-09T11:43:57.963896-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-m0kg","title":"[WEB-P4] Create RibosomeTrafficView component","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-07T17:01:54.212712-05:00","updated_at":"2025-12-07T18:43:08.131638-05:00","closed_at":"2025-12-07T18:43:08.131638-05:00","dependencies":[{"issue_id":"phage_explorer-m0kg","depends_on_id":"phage_explorer-z3eq","type":"blocks","created_at":"2025-12-07T17:07:41.126869-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-m0kg","depends_on_id":"phage_explorer-1lqy","type":"blocks","created_at":"2025-12-07T17:09:07.686002-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-m31q","title":"[WEB-P3] Help Overlay: Dynamic Hotkey Reference","description":"Help modal [?] showing all available hotkeys organized by category. Context-sensitive (shows relevant shortcuts).","status":"closed","priority":0,"issue_type":"feature","created_at":"2025-12-07T17:01:28.563617-05:00","updated_at":"2025-12-08T00:18:03.965884-05:00","closed_at":"2025-12-08T00:18:03.965884-05:00","dependencies":[{"issue_id":"phage_explorer-m31q","depends_on_id":"phage_explorer-ee1","type":"blocks","created_at":"2025-12-07T17:07:14.984417-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-m31q","depends_on_id":"phage_explorer-zld6","type":"blocks","created_at":"2025-12-07T17:07:49.86471-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-m49v","title":"Pillar 4: Simulation Visualizer Parity","description":"","status":"open","priority":1,"issue_type":"feature","created_at":"2025-12-09T00:35:50.558-05:00","updated_at":"2025-12-09T00:35:50.558-05:00","dependencies":[{"issue_id":"phage_explorer-m49v","depends_on_id":"phage_explorer-xivy","type":"blocks","created_at":"2025-12-09T00:37:14.480528-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-mila","title":"[WEB-P4] Time Controls: Unified Playback UI","description":"Reusable time control component for all simulations. Play/pause/step, speed control, scrubbing, loop options.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-07T17:01:29.387669-05:00","updated_at":"2025-12-07T18:43:12.159467-05:00","closed_at":"2025-12-07T18:43:12.159467-05:00","dependencies":[{"issue_id":"phage_explorer-mila","depends_on_id":"phage_explorer-sft","type":"blocks","created_at":"2025-12-07T17:07:13.698783-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-mkpk","title":"Phase 6: 3D Visualization","description":"## Overview\n\nImplement WebGL-based 3D protein structure visualization to replace the TUI's ASCII 3D rendering.\n\n## Why 3D Matters\n\nThe TUI has an ASCII 3D model viewer that renders protein structures using characters. This is impressive for terminal art but limited in:\n- Resolution and detail\n- Smooth rotation/zoom\n- Surface rendering modes\n- Lighting and depth perception\n\nWebGL enables true 3D visualization with:\n- Smooth rotation via mouse/touch\n- Multiple rendering modes (ribbon, surface, ball-and-stick)\n- Real-time lighting\n- High-resolution detail\n\n## Technical Components\n\n### 1. WebGL Model Viewer\n\n**Technology options**:\n- **Three.js** - Full-featured 3D library, large but capable\n- **BabylonJS** - Alternative, similar capabilities\n- **Raw WebGL** - Smallest bundle, most control, most work\n\n**Recommendation**: Three.js with tree-shaking for reasonable bundle size\n\n**Features**:\n- Load PDB/mmCIF structure files\n- Multiple render modes:\n  - Ribbon (secondary structure)\n  - Surface (solvent-accessible)\n  - Ball-and-stick (atomic detail)\n  - Cartoon (simplified)\n- Color schemes:\n  - By element\n  - By residue type\n  - By chain\n  - By B-factor\n  - Custom gradients\n- Controls:\n  - Orbit (rotate around center)\n  - Pan (translate view)\n  - Zoom (scroll wheel)\n  - Reset (return to default view)\n\n### 2. Fullscreen Mode\n\n**What**: Dedicated fullscreen view for detailed structure exploration\n\n**Features**:\n- Full viewport rendering\n- Keyboard controls (arrow keys for rotation)\n- Quality presets (low/medium/high/ultra)\n- Screenshot export\n- Animation support (morph between conformations)\n\n### 3. Structure Data Integration\n\n**Sources**:\n- PDB files bundled with database\n- Fetch from RCSB PDB API\n- AlphaFold predictions\n- Local structure predictions\n\n**Caching**: Cache fetched structures in IndexedDB\n\n## Performance Considerations\n\n3D rendering is GPU-intensive:\n- Use instanced rendering for large structures\n- LOD (Level of Detail) for distant views\n- Throttle updates during rotation\n- Quality presets for different devices\n\n**Quality Presets**:\n| Preset | Target | Settings |\n|--------|--------|----------|\n| Low | Mobile, old laptops | Low poly, no shadows |\n| Medium | Average laptops | Medium detail, basic lighting |\n| High | Desktop | Full detail, shadows |\n| Ultra | Gaming PCs | Max detail, SSAO, anti-aliasing |\n\n## Dependencies\n\n- **Depends on**: Phase 1 (database for structure references)\n- **Blocks**: None (nice-to-have feature)\n\n## Success Criteria\n\n- [ ] 3D model loads and renders\n- [ ] Can rotate/zoom/pan with mouse\n- [ ] Multiple rendering modes available\n- [ ] Fullscreen mode works\n- [ ] Keyboard navigation in fullscreen\n- [ ] Performance meets 30fps minimum\n\n## Files to Create\n\n```\npackages/web/src/\n├── components/\n│   └── Model3DView.tsx              # NEW\n├── visualization/\n│   └── structure/\n│       ├── StructureRenderer.ts     # NEW (Three.js wrapper)\n│       ├── structureLoader.ts       # NEW (PDB/mmCIF parsing)\n│       └── renderModes.ts           # NEW (ribbon, surface, etc.)\n```\n\n## Estimated Complexity: High\n\n3D graphics programming is specialized. Three.js helps but there's still significant work in structure parsing, render modes, and performance optimization.","status":"open","priority":3,"issue_type":"epic","created_at":"2025-12-08T12:55:03.80212-05:00","updated_at":"2025-12-08T12:55:03.80212-05:00","dependencies":[{"issue_id":"phage_explorer-mkpk","depends_on_id":"phage_explorer-7y69","type":"blocks","created_at":"2025-12-08T12:55:22.932043-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-ml9f","title":"[WEB-P6] Build experience level selector","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-07T17:02:05.267447-05:00","updated_at":"2025-12-07T22:26:28.579457-05:00","closed_at":"2025-12-07T22:26:28.579457-05:00","dependencies":[{"issue_id":"phage_explorer-ml9f","depends_on_id":"phage_explorer-as5q","type":"blocks","created_at":"2025-12-07T17:09:19.386484-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-ml9f","depends_on_id":"phage_explorer-7roq","type":"blocks","created_at":"2025-12-07T17:10:04.821696-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-mngg","title":"[WEB-P5] Build signaling edge function","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-07T17:02:01.831959-05:00","updated_at":"2025-12-08T00:11:27.392509-05:00","closed_at":"2025-12-08T00:11:27.392509-05:00","dependencies":[{"issue_id":"phage_explorer-mngg","depends_on_id":"phage_explorer-8kpa","type":"blocks","created_at":"2025-12-07T17:07:56.782312-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-mq1","title":"[WEB-P2] Implement high-DPI canvas scaling","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-07T16:58:00.8353-05:00","updated_at":"2025-12-07T18:01:42.482893-05:00","closed_at":"2025-12-07T18:01:42.482893-05:00","dependencies":[{"issue_id":"phage_explorer-mq1","depends_on_id":"phage_explorer-ltg","type":"blocks","created_at":"2025-12-07T17:04:59.885029-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-mquh","title":"[WEB-P3] Create AnalysisDrawer component","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-07T17:01:49.145188-05:00","updated_at":"2025-12-08T00:16:36.74006-05:00","closed_at":"2025-12-08T00:16:36.74006-05:00","dependencies":[{"issue_id":"phage_explorer-mquh","depends_on_id":"phage_explorer-hg7","type":"blocks","created_at":"2025-12-07T17:07:31.617403-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-mul","title":"[WEB-P1] Zustand Persistence: Browser-Safe State Hydration","description":"Add persist middleware to Zustand store. Partialize state for localStorage (only preferences, not data). Add migration logic for schema changes.","status":"closed","priority":0,"issue_type":"feature","created_at":"2025-12-07T16:57:47.505822-05:00","updated_at":"2025-12-07T17:55:04.935553-05:00","closed_at":"2025-12-07T17:55:04.935553-05:00","dependencies":[{"issue_id":"phage_explorer-mul","depends_on_id":"phage_explorer-pml","type":"blocks","created_at":"2025-12-07T17:04:28.262976-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-myrb","title":"Create Learn menu in header","description":"New top-level Learn menu item visible when Beginner Mode active. Dropdown shows: Foundational Modules, Glossary, Start Tour options. Uses consistent styling with existing header menus. Keyboard navigable.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-09T11:47:36.267428-05:00","updated_at":"2025-12-09T11:47:36.267428-05:00","dependencies":[{"issue_id":"phage_explorer-myrb","depends_on_id":"phage_explorer-owsv","type":"blocks","created_at":"2025-12-09T11:47:56.236398-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-n0rn","title":"Experience level gating for overlay hotkeys","description":"","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-09T00:39:48.913287-05:00","updated_at":"2025-12-09T00:39:48.913287-05:00","dependencies":[{"issue_id":"phage_explorer-n0rn","depends_on_id":"phage_explorer-rhs0","type":"blocks","created_at":"2025-12-09T00:40:10.708415-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-n28x","title":"Contextual help tooltips by experience level","description":"","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-09T00:39:53.944142-05:00","updated_at":"2025-12-09T00:39:53.944142-05:00","dependencies":[{"issue_id":"phage_explorer-n28x","depends_on_id":"phage_explorer-rhs0","type":"blocks","created_at":"2025-12-09T00:40:11.120383-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-n96","title":"[WEB-P1] Create browser.ts adapter in db-runtime","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-07T16:57:55.553536-05:00","updated_at":"2025-12-07T17:50:54.22115-05:00","closed_at":"2025-12-07T17:50:54.22115-05:00","dependencies":[{"issue_id":"phage_explorer-n96","depends_on_id":"phage_explorer-pmb","type":"blocks","created_at":"2025-12-07T17:04:39.655825-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-necy","title":"Implement amino acid touch HUD with details","description":"","notes":"# Implement Amino Acid Touch HUD with Details\n\n## Problem Statement\n\nWhen users view the amino acid sequence, they see single-letter codes (M, D, L, A, K, etc.) without any context. Non-specialists don't know what these letters mean or what properties each amino acid has.\n\nOn mobile/touch devices, tapping on an amino acid should display a rich information overlay (HUD = Heads-Up Display) for the duration of the touch.\n\n## User Story\n\n\u003e As a biology student viewing a phage protein sequence,\n\u003e When I tap and hold on any amino acid letter,\n\u003e I want to see detailed information about that amino acid,\n\u003e So that I can understand its properties and role in the protein.\n\n## HUD Content Requirements\n\nThe HUD should display the following information for each amino acid:\n\n### Basic Information\n- **Full Name**: e.g., \"Methionine\" (not just \"Met\" or \"M\")\n- **3-Letter Code**: e.g., \"Met\"\n- **1-Letter Code**: e.g., \"M\"\n\n### Physical Properties\n- **Molecular Weight**: e.g., \"149.21 g/mol\"\n- **Molecular Formula**: e.g., \"C₅H₁₁NO₂S\"\n- **pI (Isoelectric Point)**: e.g., \"5.74\"\n\n### Chemical Classification\n- **Type**: Hydrophobic / Polar / Acidic / Basic / Special\n- **Charge at pH 7**: Neutral / Positive / Negative\n- **Aromaticity**: Yes / No\n- **Contains Sulfur**: Yes / No\n\n### Biological Context\n- **Essential**: Yes / No (for humans)\n  - If essential: \"Must be obtained from diet\"\n  - If non-essential: \"Can be synthesized by the body\"\n- **Energy to Synthesize**: ATP equivalents (e.g., \"~31 ATP\")\n\n### Genetic Encoding\n- **Codon Count**: e.g., \"1 codon\" (unique) or \"6 codons\" (degenerate)\n- **Codons**: List of all codons encoding this AA\n  - e.g., \"AUG (also start codon)\"\n  - e.g., \"UUU, UUC\" for Phenylalanine\n\n## Visual Design\n\n```\n┌─────────────────────────────────────┐\n│  ┌───┐                              │\n│  │ M │  METHIONINE                  │\n│  └───┘  Met · Sulfur-containing     │\n├─────────────────────────────────────┤\n│  Molecular Weight    149.21 g/mol   │\n│  Formula             C₅H₁₁NO₂S      │\n│  Classification      Hydrophobic    │\n├─────────────────────────────────────┤\n│  Essential Amino Acid               │\n│  Must be obtained from diet         │\n│  Synthesis Cost: ~31 ATP            │\n├─────────────────────────────────────┤\n│  Encoded by: AUG                    │\n│  (Also serves as START codon)       │\n│  Codon Uniqueness: 1/1 (unique)     │\n└─────────────────────────────────────┘\n```\n\n## Technical Implementation\n\n### Data Structure\n\n```typescript\ninterface AminoAcidInfo {\n  code1: string;        // M\n  code3: string;        // Met\n  name: string;         // Methionine\n  formula: string;      // C5H11NO2S\n  molecularWeight: number;\n  pI: number;\n  classification: 'hydrophobic' | 'polar' | 'acidic' | 'basic' | 'special';\n  chargeAtPh7: 'neutral' | 'positive' | 'negative';\n  isAromatic: boolean;\n  containsSulfur: boolean;\n  isEssential: boolean;\n  synthesisAtp: number;\n  codons: string[];\n  specialNotes?: string;  // e.g., \"Start codon\" for Met\n}\n\nconst AMINO_ACID_DATABASE: Record\u003cstring, AminoAcidInfo\u003e = {\n  M: {\n    code1: 'M',\n    code3: 'Met',\n    name: 'Methionine',\n    formula: 'C₅H₁₁NO₂S',\n    molecularWeight: 149.21,\n    pI: 5.74,\n    classification: 'hydrophobic',\n    chargeAtPh7: 'neutral',\n    isAromatic: false,\n    containsSulfur: true,\n    isEssential: true,\n    synthesisAtp: 31,\n    codons: ['AUG'],\n    specialNotes: 'Also serves as the universal START codon',\n  },\n  // ... all 20 amino acids\n};\n```\n\n### Touch Event Handling\n\n```typescript\nfunction handleTouchStart(event: TouchEvent, position: number) {\n  const aminoAcid = getAminoAcidAtPosition(position);\n  if (!aminoAcid) return;\n\n  // Show HUD at touch position\n  showAminoAcidHUD(aminoAcid, {\n    x: event.touches[0].clientX,\n    y: event.touches[0].clientY,\n  });\n}\n\nfunction handleTouchEnd() {\n  hideAminoAcidHUD();\n}\n```\n\n### Position Detection\n\nNeed to map touch coordinates to sequence position:\n\n```typescript\nfunction getAminoAcidAtPosition(\n  touchX: number,\n  touchY: number,\n  gridLayout: GridLayout\n): string | null {\n  const cellIndex = gridLayout.getCellAtPoint(touchX, touchY);\n  if (cellIndex === null) return null;\n\n  // Account for reading frame\n  const codonIndex = Math.floor(cellIndex / 3);\n  const aaSequence = translateSequence(dnaSequence, readingFrame);\n\n  return aaSequence[codonIndex] ?? null;\n}\n```\n\n## HUD Component\n\n```tsx\nfunction AminoAcidHUD({ aminoAcid, position, visible }: Props) {\n  if (!visible || !aminoAcid) return null;\n\n  const info = AMINO_ACID_DATABASE[aminoAcid];\n\n  return (\n    \u003cdiv\n      className=\"aa-hud\"\n      style={{\n        position: 'fixed',\n        left: position.x,\n        top: position.y - 200,  // Above touch point\n        transform: 'translateX(-50%)',\n      }}\n    \u003e\n      \u003cdiv className=\"aa-hud-header\"\u003e\n        \u003cspan className=\"aa-symbol\"\u003e{info.code1}\u003c/span\u003e\n        \u003cdiv\u003e\n          \u003cdiv className=\"aa-name\"\u003e{info.name}\u003c/div\u003e\n          \u003cdiv className=\"aa-subtext\"\u003e{info.code3} · {info.classification}\u003c/div\u003e\n        \u003c/div\u003e\n      \u003c/div\u003e\n      {/* ... rest of HUD content */}\n    \u003c/div\u003e\n  );\n}\n```\n\n## Files to Create/Modify\n\n1. **New:** `/packages/core/src/data/amino-acid-database.ts`\n   - Complete database of all 20 amino acids\n\n2. **New:** `/packages/web/src/components/AminoAcidHUD.tsx`\n   - HUD component with styling\n\n3. **Modify:** `/packages/web/src/components/SequenceView.tsx`\n   - Add touch event handlers for HUD\n\n4. **Modify:** `/packages/web/src/hooks/useSequenceGrid.ts`\n   - Add position-to-amino-acid mapping\n\n## Testing\n\n- [ ] Tap and hold shows HUD\n- [ ] Release dismisses HUD\n- [ ] All 20 amino acids have complete data\n- [ ] HUD positions correctly (above finger, not obscured)\n- [ ] Works on iOS Safari and Android Chrome\n- [ ] Smooth show/hide animation\n- [ ] Data is scientifically accurate\n\n## Definition of Done\n\n- [ ] Touch HUD functional on mobile devices\n- [ ] All 20 amino acids have complete information\n- [ ] HUD is visually polished and readable\n- [ ] Scientific accuracy verified\n- [ ] No interference with normal scrolling","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-09T11:25:52.966266-05:00","updated_at":"2025-12-09T11:52:35.375403-05:00","closed_at":"2025-12-09T11:52:35.375403-05:00","dependencies":[{"issue_id":"phage_explorer-necy","depends_on_id":"phage_explorer-8mgm","type":"blocks","created_at":"2025-12-09T11:26:24.161822-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-nm9","title":"Advanced: High-Resolution K-mer Anomaly Cartography","description":"Map localized k-mer rarity via z-scores vs reference corpus. Sliding window with Welford variance + LOF. Fuse with GC skew and coding density. Scrolling heat-strip under sequence grid; hotspots pulse; side panel shows top k-mers and genes. Flags HGT/AMG/defense islands. Novelty: Medium-high.","notes":"## HIGH-RESOLUTION K-MER ANOMALY CARTOGRAPHY\n\n**Full Implementation from Roadmap**\n\n### Concept\nMap localized k-mer rarity/novelty (z-scores vs a reference corpus) to expose atypical islands (HGT, AMGs, anti-defense loci) and couple with GC/AT skew and coding density.\n\n### How to Build\n\n**Background Model:**\n- Global corpus k-mer frequencies (k=3/5/7/9) precomputed\n- Store means/variances per k\n- Sources: all known phage genomes\n\n**Sliding Windows:**\n- Rust+WASM streaming k-mer counter\n- Welford's online variance algorithm\n- Per-window z-scores and LOF (Local Outlier Factor)\n- Cache per phage in SQLite\n\n**Composite Score:**\n```\nanomaly = w₁×z_kmer + w₂×GC_skew + w₃×(1-coding_density)\n```\n- Weights configurable by user\n- Higher score = more anomalous\n\n**Drill-Down:**\n- Link anomalous windows to nearby genes\n- Show top contributing k-mers\n- Motif and function predictions\n\n### TUI Features\n- Scrolling heat-strip under sequence grid\n- Hotspots pulse/glow\n- Press 'enter' to open side panel with:\n  - Top-k unusual k-mers\n  - Nearby genes\n  - Putative function\n- Anomaly threshold slider\n\n### Why It's Good\n- Flags HGT, defense, AMG islands that annotation misses\n- Prioritizes 'what's weird here?'\n- Alignment-free detection\n- Compositional biology insights\n\n### Implementation Stack\n- Rust+WASM sliding k-mer stats\n- TS/Ink heat-strip visualization\n- SQLite window cache\n- Optional LOF in Rust with kd-tree\n\nNovelty: 8/10, Pedagogical: 8/10, Wow Factor: 8/10","status":"in_progress","priority":3,"issue_type":"feature","created_at":"2025-12-07T00:17:45.217066-05:00","updated_at":"2025-12-07T13:27:18.933998-05:00","dependencies":[{"issue_id":"phage_explorer-nm9","depends_on_id":"phage_explorer-ojb","type":"blocks","created_at":"2025-12-07T00:20:52.603582-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-nmi","title":"[WEB-P1] Create offline.html fallback page","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-07T16:58:29.441559-05:00","updated_at":"2025-12-07T17:53:55.445034-05:00","closed_at":"2025-12-07T17:53:55.445034-05:00","dependencies":[{"issue_id":"phage_explorer-nmi","depends_on_id":"phage_explorer-fdq","type":"blocks","created_at":"2025-12-07T17:04:45.297385-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-nob1","title":"[WEB-P6] Reduce animations in TUI mode","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-07T17:02:17.894749-05:00","updated_at":"2025-12-08T00:39:18.528415-05:00","closed_at":"2025-12-08T00:39:18.528415-05:00","dependencies":[{"issue_id":"phage_explorer-nob1","depends_on_id":"phage_explorer-yrsg","type":"blocks","created_at":"2025-12-07T17:09:31.507702-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-o31y","title":"EvolutionReplayVisualizer - Mutation accumulation","description":"","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-09T00:38:15.206396-05:00","updated_at":"2025-12-09T00:38:15.206396-05:00","dependencies":[{"issue_id":"phage_explorer-o31y","depends_on_id":"phage_explorer-m49v","type":"blocks","created_at":"2025-12-09T00:38:42.713236-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-obvk","title":"PlaqueAutomataVisualizer - Cellular automaton plaque growth","description":"","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-09T00:38:14.134153-05:00","updated_at":"2025-12-09T00:38:14.134153-05:00","dependencies":[{"issue_id":"phage_explorer-obvk","depends_on_id":"phage_explorer-m49v","type":"blocks","created_at":"2025-12-09T00:38:42.142591-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-oby2","title":"[WEB-P3] Port GC skew overlay [G key]","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-07T17:02:08.932842-05:00","updated_at":"2025-12-07T18:28:00.318275-05:00","closed_at":"2025-12-07T18:28:00.318275-05:00","dependencies":[{"issue_id":"phage_explorer-oby2","depends_on_id":"phage_explorer-7wzv","type":"blocks","created_at":"2025-12-07T17:07:34.929306-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-oe8w","title":"Add Beginner Mode toggle to Settings","description":"Add toggle switch in Settings panel to enable/disable Beginner Mode. Shows brief explanation of what it provides. Persists preference to localStorage. Updates Zustand store state. Clean integration with existing settings UI.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-09T11:47:35.162629-05:00","updated_at":"2025-12-09T11:47:35.162629-05:00","dependencies":[{"issue_id":"phage_explorer-oe8w","depends_on_id":"phage_explorer-chdb","type":"blocks","created_at":"2025-12-09T11:47:56.093261-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-ofm","title":"Foundation: Help System Redesign (Contextual Layered Help)","description":"## Help System Redesign (Contextual Layered Help)\n\nReplace single help overlay with contextual, layered help system.\n\n### New Help Layout\n- Two-column layout: Navigation/View Controls\n- Overlays section (G/X/B/P/R toggles)\n- Search section\n- Advanced section (A menu, Shift+S hub, : palette)\n\n### Progressive Disclosure\n- Press ? once: Essential controls only\n- Press ? twice: Detailed docs with feature explanations\n- Context-sensitive: Show relevant shortcuts based on current view\n\n### Features\n- Each overlay explained\n- Each analysis tool described\n- Keyboard shortcut cheatsheet\n- ESC always exits\n\nDepends on: UI Design System (phage_explorer-dx3)","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-06T23:35:35.397685-05:00","updated_at":"2025-12-07T00:04:19.099563-05:00","closed_at":"2025-12-07T00:04:19.099563-05:00","dependencies":[{"issue_id":"phage_explorer-ofm","depends_on_id":"phage_explorer-2g5","type":"blocks","created_at":"2025-12-06T23:35:35.399184-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-ofm","depends_on_id":"phage_explorer-dx3","type":"blocks","created_at":"2025-12-06T23:39:00.284879-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-ohgn","title":"[WEB-P6] Build ErrorRecovery UI","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-07T17:02:27.15018-05:00","updated_at":"2025-12-07T21:12:11.490326-05:00","closed_at":"2025-12-07T21:12:11.490326-05:00","dependencies":[{"issue_id":"phage_explorer-ohgn","depends_on_id":"phage_explorer-ojh6","type":"blocks","created_at":"2025-12-07T17:09:39.331857-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-oicc","title":"[WEB-P3] Port bendability overlay [B key]","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-07T17:02:11.110904-05:00","updated_at":"2025-12-07T18:31:17.417268-05:00","closed_at":"2025-12-07T18:31:17.417268-05:00","dependencies":[{"issue_id":"phage_explorer-oicc","depends_on_id":"phage_explorer-7wzv","type":"blocks","created_at":"2025-12-07T17:07:35.117402-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-oit","title":"Advanced: Transcription Flow \u0026 Promoter Strength Explorer","description":"Predict promoter/terminator strengths and simulate transcriptional flow to identify bottlenecks or overexpression risks. Bridges sequence-level regulatory signals to expression realism.\n\n**Build Plan:**\n- Promoter/terminator scoring via motif/HMM + CNN-lite (ONNX in Bun)\n- Simple queue/flow model in TS or Rust+WASM to propagate polymerase flux\n- Consider pauses, terminators, and sigma factor preferences\n- Link to gene functions to flag likely expression imbalances\n\n**Why It's Good:**\n- Shows interplay of promoter strength, termination efficiency, and transcriptional bottlenecks\n- Aids redesign and synthetic biology applications\n- Identifies potential expression problems before wet lab\n\n**TUI Visualization:**\n- 'Flow meter' overlay with thickness proportional to predicted transcription\n- Paused regions glow/highlight\n- Toggle σ-factor presets to redraw map live\n\n**Implementation Stack:** ONNX Runtime for CNN models, TypeScript flow simulator, Rust+WASM for heavy motif scans, SQLite caching.\n\nNovelty: 9/10, Pedagogical: 9/10, Cool Factor: 8/10.","notes":"Transcription flow overlay (Y): heuristic promoter/terminator flow, sparkline + top regions, overlay stack integration, Esc/Y close, menu/help entries","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-07T13:04:30.5481-05:00","updated_at":"2025-12-07T13:50:51.54123-05:00","closed_at":"2025-12-07T13:50:51.541247-05:00","dependencies":[{"issue_id":"phage_explorer-oit","depends_on_id":"phage_explorer-ojb","type":"blocks","created_at":"2025-12-07T13:06:05.732256-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-ojb","title":"Foundation: Simulation Framework","description":"Create common infrastructure for 5 interactive simulations: Lysogeny Circuit, Ribosome Traffic, Plaque Automata, Evolution Replay, Packaging Motor. Implement Simulation interface with init/step/render lifecycle. Common controls: Space=pause, R=reset, arrows=speed.","notes":"Simulation framework implemented: registry for 5 sims, SimulationHub overlay (Shift+S) to launch, SimulationView with controls (pause/step/reset/speed), store tracks simulation state. Sim types: lysogeny circuit, ribosome traffic, plaque automata, evolution replay, packaging motor.","status":"closed","priority":0,"issue_type":"epic","created_at":"2025-12-06T23:08:59.749642-05:00","updated_at":"2025-12-07T13:24:15.377629-05:00","closed_at":"2025-12-07T13:24:15.377637-05:00"}
{"id":"phage_explorer-ojh6","title":"[WEB-P6] Error Handling: Boundaries \u0026 Recovery","description":"React error boundaries, graceful degradation, recovery UI, telemetry integration, \"Report Bug\" action.","status":"closed","priority":0,"issue_type":"feature","created_at":"2025-12-07T17:01:27.555268-05:00","updated_at":"2025-12-08T00:10:26.438506-05:00","closed_at":"2025-12-08T00:10:26.438506-05:00","dependencies":[{"issue_id":"phage_explorer-ojh6","depends_on_id":"phage_explorer-zsi","type":"blocks","created_at":"2025-12-07T17:07:22.998049-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-okyj","title":"[WEB-P4] Visualize mutation events on sequence","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-07T17:02:25.75235-05:00","updated_at":"2025-12-07T18:42:55.764366-05:00","closed_at":"2025-12-07T18:42:55.764366-05:00","dependencies":[{"issue_id":"phage_explorer-okyj","depends_on_id":"phage_explorer-6vqr","type":"blocks","created_at":"2025-12-07T17:08:15.802726-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-oqh","title":"Layer 2: Selection Pressure Chromosome Painter (dN/dS Landscape)","description":"Layer 2 Analysis: Compute dN/dS (omega) across genes, paint chromosome by selection pressure. Blue=purifying (essential), Red=positive (arms race), Gray=neutral. Nei-Gojobori method with JC correction. Requires comparison phage. Pedagogical: 10/10.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-06T23:11:46.057601-05:00","updated_at":"2025-12-08T00:38:34.026686-05:00","closed_at":"2025-12-08T00:38:34.026686-05:00","dependencies":[{"issue_id":"phage_explorer-oqh","depends_on_id":"phage_explorer-54g","type":"blocks","created_at":"2025-12-06T23:11:46.060136-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-oqh","depends_on_id":"phage_explorer-2g5","type":"blocks","created_at":"2025-12-06T23:39:30.270014-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-os7j","title":"[WEB-P4] Plaque Automata: Cellular Automaton Growth","description":"Cellular automaton simulating plaque growth on bacterial lawn. Diffusion model, canvas renderer, time controls.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-07T17:01:27.201514-05:00","updated_at":"2025-12-07T18:43:09.469353-05:00","closed_at":"2025-12-07T18:43:09.469353-05:00","dependencies":[{"issue_id":"phage_explorer-os7j","depends_on_id":"phage_explorer-sft","type":"blocks","created_at":"2025-12-07T17:07:11.847873-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-os7j","depends_on_id":"phage_explorer-ru4","type":"blocks","created_at":"2025-12-07T17:08:39.02212-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-os7j","depends_on_id":"phage_explorer-mila","type":"blocks","created_at":"2025-12-07T17:08:47.902861-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-ows","title":"[WEB-P0] Keyboard Manager: Hotkey Registration \u0026 Modal System","description":"Build keyboard manager supporting vim-style modal patterns (NORMAL, SEARCH, COMMAND, VISUAL). Register hotkeys with priorities. Handle conflicts.","status":"closed","priority":0,"issue_type":"feature","created_at":"2025-12-07T16:57:49.014189-05:00","updated_at":"2025-12-07T17:31:35.643039-05:00","closed_at":"2025-12-07T17:31:35.643039-05:00","dependencies":[{"issue_id":"phage_explorer-ows","depends_on_id":"phage_explorer-87z","type":"blocks","created_at":"2025-12-07T17:04:24.444471-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-ows","depends_on_id":"phage_explorer-94x","type":"blocks","created_at":"2025-12-07T17:04:55.237844-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-owsv","title":"Task: Create useBeginnerMode hook","description":"Create packages/web/src/education/hooks/useBeginnerMode.ts with: isEnabled (boolean), toggle(), showContextFor(topic), hasCompletedModule(id), hasCompletedTour(id). Should be memoized and performant since many components will use it.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-09T11:43:07.701492-05:00","updated_at":"2025-12-10T00:43:13.58669429-06:00","closed_at":"2025-12-09T23:58:55.119203594-06:00","dependencies":[{"issue_id":"phage_explorer-owsv","depends_on_id":"phage_explorer-chdb","type":"blocks","created_at":"2025-12-09T11:43:07.70295-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-owy","title":"Layer 2: Host Range Predictor (CRISPR Spacer Matching)","description":"Fuse CRISPR spacer hits with receptor-binding motif classifiers. Score per host lineage with evidence (spacer alignments, RBP motif hits). MinHash/LSH index for spacers + HMMER for RBP families. Bayesian fusion scoring. Evidence table per host with strict/permissive thresholds, host cloud sized by probability. Novelty: High, Pedagogical: High.","notes":"## HOST-RANGE INFERENCE VIA CRISPR SPACERS + RECEPTOR MOTIFS\n\n**Full Implementation from Roadmap**\n\n### Concept\nFuse CRISPR spacer hits with receptor-binding motif classifiers to predict host range. Score per host lineage and display evidence.\n\n### How to Build\n\n**Spacer DB Ingest:**\n- Parse spacer FASTAs/TSVs from CRISPRdb, IMG/VR, CRISPR-Cas++\n- Build MinHash/LSH index (Rust+WASM) for fast lookup\n- Fall back to banded alignments for top hits\n- Store spacer→host mappings with confidence\n\n**Motif/RBP Typing:**\n- HMMER precompute for RBP families (beta-helix, depolymerase, etc.)\n- TS classifier on receptor-binding domain signatures\n- Link RBP domains to known receptors (LPS, OmpA, FhuA, etc.)\n\n**Fusion Scoring:**\n```\nlog P(host | spacer, motif) = w₁ × spacer_score + w₂ × motif_score + prior\nConfidence = σ(log_odds)\n```\n\n**Evidence Types:**\n- Spacer alignments with mismatches\n- RBP domain hits with E-values\n- Known receptor associations\n\n### TUI Features\n- Host leaderboard with confidence bars\n- Press host to see spacer hit list and RBP motif hits\n- 'Host cloud' ASCII plot sized by probability\n- Toggle 'strict vs permissive' thresholds\n- Evidence drilldown per candidate\n\n### Why It's Good\n- Combines complementary evidence types\n- Tightens weak host predictions\n- Points to mechanisms (which receptor, which spacer)\n- Guides experimental validation\n\n### Implementation Stack\n- Rust+WASM LSH for spacer queries\n- HMMER precompute for RBP domains\n- Fusion/scoring in TS\n- SQLite cache for hits and scores\n- Ink UI tables and plots\n\nNovelty: 9/10, Pedagogical: 9/10, Wow Factor: 8/10","status":"in_progress","priority":2,"issue_type":"feature","created_at":"2025-12-06T23:12:45.734-05:00","updated_at":"2025-12-08T20:58:17.503429-05:00","dependencies":[{"issue_id":"phage_explorer-owy","depends_on_id":"phage_explorer-54g","type":"blocks","created_at":"2025-12-06T23:12:45.735205-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-owy","depends_on_id":"phage_explorer-2g5","type":"blocks","created_at":"2025-12-06T23:39:32.636107-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-pal","title":"[WEB-P1] Add VACUUM and REINDEX optimization step","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-07T16:58:06.585268-05:00","updated_at":"2025-12-07T17:52:23.080803-05:00","closed_at":"2025-12-07T17:52:23.080803-05:00","dependencies":[{"issue_id":"phage_explorer-pal","depends_on_id":"phage_explorer-sad","type":"blocks","created_at":"2025-12-07T17:04:41.68111-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-pdv","title":"[WEB-P2] Implement color batching for nucleotides/amino acids","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-07T16:58:03.488875-05:00","updated_at":"2025-12-07T18:01:42.50143-05:00","closed_at":"2025-12-07T18:01:42.50143-05:00","dependencies":[{"issue_id":"phage_explorer-pdv","depends_on_id":"phage_explorer-ltg","type":"blocks","created_at":"2025-12-07T17:05:01.65726-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-pdv","depends_on_id":"phage_explorer-fd3","type":"blocks","created_at":"2025-12-07T17:05:29.322863-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-plt8","title":"[WEB-P5] Export Capabilities: Multi-Format Output","description":"Rich clipboard copy (HTML+text), FASTA export, video export via WebCodecs, File System Access API for direct saves.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-07T17:01:26.464433-05:00","updated_at":"2025-12-07T18:47:36.807594-05:00","closed_at":"2025-12-07T18:47:36.807594-05:00","dependencies":[{"issue_id":"phage_explorer-plt8","depends_on_id":"phage_explorer-zkp","type":"blocks","created_at":"2025-12-07T17:07:17.001435-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-pmb","title":"[WEB-P1] sql.js Integration: Browser SQLite Adapter","description":"Create browser adapter for sql.js in db-runtime package. Add runtime detection (Node vs Browser). Setup prepared statements for common queries. Test parity with TUI queries.","status":"closed","priority":0,"issue_type":"feature","created_at":"2025-12-07T16:57:43.592933-05:00","updated_at":"2025-12-07T17:51:23.055817-05:00","closed_at":"2025-12-07T17:51:23.055817-05:00","dependencies":[{"issue_id":"phage_explorer-pmb","depends_on_id":"phage_explorer-pml","type":"blocks","created_at":"2025-12-07T17:04:23.769034-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-pml","title":"[WEB-P1] Data Layer: Browser SQLite \u0026 Offline Support","description":"# Phase 1: Data Layer (Target: Weeks 2-3)\n\n## Purpose\nEnable the web app to access the phage database and work completely offline. This phase bridges the gap between our SQLite-based TUI and the browser environment.\n\n## Why This Matters\nThe phage database is the core data asset. Without efficient browser access to this data, the web app cannot function. Offline support means researchers can use the app in field conditions, on planes, or anywhere without connectivity.\n\n## Strategic Approach\nWe use **sql.js** (SQLite compiled to WebAssembly) rather than a backend API because:\n1. No server infrastructure to maintain\n2. Works offline after initial load\n3. Same database file as TUI (consistency)\n4. Near-native query performance via WASM\n\n## Deliverables\n1. **sql.js Integration** - Browser adapter in `db-runtime` package\n2. **Database Build Pipeline** - Compression, optimization, manifest\n3. **IndexedDB Caching** - Store database locally for fast reload\n4. **Service Worker** - Workbox-based offline support\n5. **State Persistence** - Browser-safe Zustand hydration\n\n## Technical Details\n\n### Database Pipeline\n```\nphage.db (source) → Optimize → Brotli compress → Chunk → manifest.json\n```\n- Target compressed size: ~10-15MB (from ~50MB)\n- Brotli quality 11 for maximum compression\n\n### Caching Strategy\n1. First visit: Fetch compressed DB from CDN\n2. Decompress and initialize sql.js\n3. Cache raw DB in IndexedDB (faster than re-decompress)\n4. Subsequent visits: Load from IndexedDB\n5. Background check for updates\n\n### Service Worker Strategy\n- **App Shell**: Precached at build time\n- **Database**: StaleWhileRevalidate (use cached, update in background)\n- **WASM modules**: CacheFirst (immutable)\n- **Fonts**: CacheFirst with long TTL\n\n## Acceptance Criteria\n- [ ] Database loads and queries work (same results as TUI)\n- [ ] Second visit uses cached database (measurable speedup)\n- [ ] Offline mode fully functional\n- [ ] State persists across sessions\n- [ ] Database update mechanism works\n- [ ] Cold start with cached DB: \u003c1s\n\n## Risks \u0026 Mitigations\n- **Risk**: sql.js performance for large queries\n  - **Mitigation**: Precompute heavy queries, use prepared statements\n- **Risk**: IndexedDB storage limits\n  - **Mitigation**: Check quota, handle gracefully, compress if needed\n- **Risk**: Safari quirks with SharedArrayBuffer\n  - **Mitigation**: Feature detect, fall back to single-threaded mode\n\n## Dependencies\n- Phase 0 must be complete (app scaffold exists)\n- Existing `phage.db` database file","status":"closed","priority":0,"issue_type":"epic","created_at":"2025-12-07T16:56:12.864565-05:00","updated_at":"2025-12-08T01:03:08.196808-05:00","closed_at":"2025-12-08T01:03:08.196808-05:00","dependencies":[{"issue_id":"phage_explorer-pml","depends_on_id":"phage_explorer-87z","type":"blocks","created_at":"2025-12-07T17:04:29.513114-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-pt19","title":"[WEB-P5] Implement WebRTC peer connection setup","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-07T17:02:03.093393-05:00","updated_at":"2025-12-08T00:15:02.766253-05:00","closed_at":"2025-12-08T00:15:02.766253-05:00","dependencies":[{"issue_id":"phage_explorer-pt19","depends_on_id":"phage_explorer-8kpa","type":"blocks","created_at":"2025-12-07T17:07:57.897628-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-pt19","depends_on_id":"phage_explorer-czbm","type":"blocks","created_at":"2025-12-07T17:08:38.138621-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-pt19","depends_on_id":"phage_explorer-mngg","type":"blocks","created_at":"2025-12-07T17:08:40.234327-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-q3dv","title":"[WEB-P3] Add context-sensitive filtering","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-07T17:02:39.553424-05:00","updated_at":"2025-12-08T00:19:17.67293-05:00","closed_at":"2025-12-08T00:19:17.67293-05:00","dependencies":[{"issue_id":"phage_explorer-q3dv","depends_on_id":"phage_explorer-m31q","type":"blocks","created_at":"2025-12-07T17:07:38.758247-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-qeoy","title":"Bottom sheet overlays for mobile","description":"","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-09T00:40:11.677415-05:00","updated_at":"2025-12-09T00:40:11.677415-05:00","dependencies":[{"issue_id":"phage_explorer-qeoy","depends_on_id":"phage_explorer-th9r","type":"blocks","created_at":"2025-12-09T00:40:29.174585-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-qiaq","title":"Phase 2: Core Views","description":"## Overview\n\nImplement the main user-facing components that form the primary interface. These are the views users interact with directly when exploring phage genomes.\n\n## Why This Phase is Second\n\nOnce the infrastructure is in place (Phase 1), users need:\n1. A way to **browse** phages (PhageList)\n2. A way to **view sequences** (SequenceGrid)\n3. A way to **see gene structure** (GeneMap)\n4. **Context information** (Header/Footer)\n\nThese are the \"table stakes\" for a functional genome explorer.\n\n## Technical Components\n\n### 1. PhageList Component (NEW)\n\n**What**: A virtualized, keyboard-navigable list of phages from the database\n\n**Why virtualized**: The database contains thousands of phages; rendering all DOM nodes would be slow\n\n**Features**:\n- Virtual scrolling (react-window or similar)\n- Keyboard navigation (j/k, arrow keys, vim-style)\n- Search/filter integration\n- Current selection highlighting\n- Shows: name, host organism, genome length, GC%\n\n**Reference**: TUI's PhageList.tsx (packages/tui/src/components/PhageList.tsx)\n\n### 2. SequenceGrid Integration\n\n**What**: Wire the existing SequenceGridRenderer (canvas-based) to the state store\n\n**Already exists**: \n- `visualization/sequence/SequenceGridRenderer.ts` (canvas rendering)\n- `hooks/useSequenceGrid.ts` (hook interface)\n\n**Needs**:\n- Connection to store's current phage sequence\n- Scroll position synchronization with store\n- DNA/AA view mode toggle\n- Reading frame support (1, 2, 3, -1, -2, -3)\n- Diff mode highlighting for comparisons\n\n### 3. GeneMap Enhancement\n\n**What**: Complete the canvas-based gene visualization bar\n\n**Already exists**: `components/GeneMapCanvas.tsx` (partial)\n\n**Needs**:\n- Full gene data rendering (start, end, strand, name)\n- Click-to-jump functionality (click gene → scroll to position)\n- Current position indicator (vertical line showing scroll position)\n- Gene hover tooltips with detailed info\n- Proper scale bar\n\n### 4. Header/Footer Data Binding\n\n**What**: Connect existing Header/Footer layout components to live data\n\n**Header needs**:\n- Current phage name\n- Genome length\n- GC content percentage\n- Current mode indicator (NORMAL/SEARCH/COMMAND)\n\n**Footer needs**:\n- Keyboard hints (context-sensitive)\n- Pending key sequence display\n- Analysis progress indicator\n- Database load status\n\n## Dependencies\n\n- **Depends on**: Phase 1 (Core Infrastructure)\n- **Blocks**: Phase 3-7 (need core views before overlays)\n\n## Success Criteria\n\n- [ ] PhageList displays all phages with virtualized scrolling\n- [ ] Can navigate PhageList with j/k keys\n- [ ] Selecting a phage loads its sequence into SequenceGrid\n- [ ] Sequence renders smoothly at 60fps\n- [ ] Can toggle DNA/AA view with 'v' key\n- [ ] GeneMap shows genes with click-to-navigate\n- [ ] Header shows current phage info\n- [ ] Footer shows keyboard hints\n\n## Files to Create/Modify\n\n```\npackages/web/src/components/\n├── PhageList.tsx           # NEW\n├── SequenceView.tsx        # NEW (wrapper for SequenceGridRenderer)\n├── GeneMapCanvas.tsx       # ENHANCE\n├── layout/\n│   ├── Header.tsx          # MODIFY (add data binding)\n│   └── Footer.tsx          # MODIFY (add data binding)\n```\n\n## Estimated Complexity: High\n\nThis phase involves significant UI work and must feel snappy. The virtualization and canvas rendering are performance-critical.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-08T12:54:55.120129-05:00","updated_at":"2025-12-08T14:20:32.964787-05:00","closed_at":"2025-12-08T14:20:32.964787-05:00","dependencies":[{"issue_id":"phage_explorer-qiaq","depends_on_id":"phage_explorer-7y69","type":"blocks","created_at":"2025-12-08T12:55:22.665918-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-qiaq.1","title":"Implement PhageList component","description":"# Implement PhageList Component\n\n## Overview\nCreate a virtualized, keyboard-navigable list component for displaying and selecting phages. This component serves as the primary navigation interface for browsing the phage collection.\n\n## Component Location\n- **NEW**: `packages/web/src/components/PhageList.tsx`\n\n## Technical Requirements\n\n### Virtualization\n- Use `react-window` or `react-virtual` for efficient rendering of large lists\n- Only render visible items plus small buffer\n- Support dynamic list heights if needed\n- Handle smooth scrolling with keyboard navigation\n\n### Display Fields\nFor each phage entry, show:\n- **Name**: Primary identifier (bold/prominent)\n- **Host**: Host organism information\n- **Length**: Genome length in bp (formatted with commas)\n- **GC%**: GC content percentage (1 decimal place)\n\n### Keyboard Navigation\nImplement full keyboard control:\n- `j` / `↓`: Move selection down\n- `k` / `↑`: Move selection up\n- `g` + `g`: Jump to top\n- `G`: Jump to bottom\n- `Ctrl+d`: Page down (half screen)\n- `Ctrl+u`: Page up (half screen)\n- `Enter`: Confirm selection and load phage\n\n### Search/Filter Integration\n- Connect to search state from store\n- Filter list based on search query\n- Highlight matching text in results\n- Show \"no results\" state when filter yields empty list\n- Clear filter with `Esc` or search commands\n\n### Selection Highlighting\n- Visual distinction for currently selected item\n- Ensure selected item is always visible (auto-scroll)\n- Smooth scroll transitions\n- Persist selection in store state\n\n### Store Integration\n- Read phage list from Zustand store: `useAppStore(state =\u003e state.phages)`\n- Update current selection: `useAppStore(state =\u003e state.setCurrentPhageId)`\n- Read search/filter state: `useAppStore(state =\u003e state.searchQuery)`\n- Subscribe to keyboard events via store actions\n\n## UI/UX Considerations\n- Responsive layout that adapts to container size\n- Loading state while phage data is being fetched\n- Empty state when no phages loaded\n- Accessible (ARIA labels, semantic HTML)\n- Performance target: 60fps scrolling with 1000+ items\n\n## Testing Checklist\n- [ ] Renders large lists (1000+ items) without lag\n- [ ] All keyboard shortcuts work correctly\n- [ ] Search filtering updates list in real-time\n- [ ] Selection persists across re-renders\n- [ ] Scroll position maintains selected item visibility\n- [ ] Accessible via screen readers","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-08T12:58:12.940116-05:00","updated_at":"2025-12-08T14:17:28.7705-05:00","closed_at":"2025-12-08T14:17:28.7705-05:00","dependencies":[{"issue_id":"phage_explorer-qiaq.1","depends_on_id":"phage_explorer-qiaq","type":"parent-child","created_at":"2025-12-08T12:58:12.941164-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-qiaq.1","depends_on_id":"phage_explorer-7y69","type":"blocks","created_at":"2025-12-08T12:59:00.986554-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-qiaq.2","title":"Integrate SequenceGrid with store","description":"# Integrate SequenceGrid with Store\n\n## Overview\nWire the existing `SequenceGridRenderer` to the Zustand store, enabling it to display the current phage's sequence data and sync view state across the application.\n\n## Component Location\n- **MODIFY**: `packages/web/src/components/SequenceGridRenderer.tsx` (or related files)\n\n## Integration Requirements\n\n### Store Connection\nConnect SequenceGridRenderer to store state:\n```typescript\nconst currentPhage = useAppStore(state =\u003e state.currentPhage);\nconst viewMode = useAppStore(state =\u003e state.sequenceViewMode); // 'dna' | 'amino_acid'\nconst readingFrame = useAppStore(state =\u003e state.readingFrame); // 1, 2, 3, -1, -2, -3\nconst scrollPosition = useAppStore(state =\u003e state.sequenceScrollPosition);\n```\n\nUpdate store on user interactions:\n```typescript\nconst setViewMode = useAppStore(state =\u003e state.setSequenceViewMode);\nconst setReadingFrame = useAppStore(state =\u003e state.setReadingFrame);\nconst setScrollPosition = useAppStore(state =\u003e state.setSequenceScrollPosition);\n```\n\n### Sequence Data Flow\n- Read sequence data from `currentPhage.sequence`\n- If no phage selected, show empty/placeholder state\n- Handle sequence loading states\n- Update when current phage changes (reactive)\n\n### Scroll Position Synchronization\n- Persist scroll position (row, column) in store\n- Restore scroll position when returning to view\n- Update store on scroll events (debounced)\n- Sync with GeneMapCanvas current position\n- Handle programmatic scrolling (e.g., from search results)\n\n### DNA/AA View Mode Toggle\nImplement view mode switching:\n- **DNA mode**: Show raw nucleotide sequence (ATCG)\n- **AA mode**: Show translated amino acid sequence\n- View mode affects:\n  - Grid rendering (1 char vs 3 nucleotides per cell)\n  - Row calculations\n  - Position calculations\n  - Annotations display\n\n### Reading Frame Support\nAdd reading frame selector:\n- Frames: +1, +2, +3 (forward strand)\n- Frames: -1, -2, -3 (reverse complement)\n- Only applicable in AA mode\n- Affects amino acid translation starting position\n- Store frame setting globally\n- Visual indicator of current frame\n\n### Translation Logic\n- Use existing translation utilities from `packages/sequence/`\n- Cache translated sequences for performance\n- Handle start/stop codons appropriately\n- Display special characters for stop codons (*)\n\n## UI/UX Enhancements\n- Smooth transitions between modes\n- Visual feedback during mode switches\n- Preserve relative scroll position when switching modes\n- Keyboard shortcuts for mode toggle (e.g., `v` for view mode)\n- Frame selector shortcuts (1-6 keys or similar)\n\n## Performance Considerations\n- Memoize translated sequences\n- Debounce scroll position updates (100-200ms)\n- Avoid unnecessary re-renders\n- Efficient diffing for large sequences\n\n## Testing Checklist\n- [ ] SequenceGrid displays current phage sequence\n- [ ] View mode toggle works (DNA ↔ AA)\n- [ ] All 6 reading frames render correctly\n- [ ] Scroll position persists across view changes\n- [ ] Store updates propagate to component\n- [ ] Performance maintained with large sequences (\u003e100kb)\n- [ ] Sync with GeneMapCanvas position","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-08T12:58:13.991729-05:00","updated_at":"2025-12-08T14:19:23.410493-05:00","closed_at":"2025-12-08T14:19:23.410493-05:00","dependencies":[{"issue_id":"phage_explorer-qiaq.2","depends_on_id":"phage_explorer-qiaq","type":"parent-child","created_at":"2025-12-08T12:58:13.992131-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-qiaq.2","depends_on_id":"phage_explorer-7y69","type":"blocks","created_at":"2025-12-08T12:59:02.148561-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-qiaq.3","title":"Create SequenceView wrapper component","description":"# Create SequenceView Wrapper Component\n\n## Overview\nCreate a high-level wrapper component around `SequenceGridRenderer` that handles canvas sizing, window resize events, and keyboard shortcut bindings for sequence navigation.\n\n## Component Location\n- **NEW**: `packages/web/src/components/SequenceView.tsx`\n\n## Component Responsibilities\n\n### Canvas Sizing \u0026 Layout\n- Measure container dimensions using `ResizeObserver` or `useElementSize` hook\n- Pass dimensions to SequenceGridRenderer as props\n- Handle aspect ratio and responsive sizing\n- Ensure canvas fits within allocated space\n- Account for scrollbars and padding\n\n### Resize Event Handling\n- Listen for window resize events\n- Debounce resize handling (150-250ms)\n- Recalculate visible rows/columns on resize\n- Maintain scroll position relative to content\n- Smooth transitions during resize\n\n### Keyboard Shortcut Integration\nBind sequence navigation shortcuts:\n- `h/←`: Scroll left\n- `l/→`: Scroll right  \n- `j/↓`: Scroll down\n- `k/↑`: Scroll up\n- `Ctrl+f`: Page down\n- `Ctrl+b`: Page up\n- `g` + `g`: Jump to start\n- `G`: Jump to end\n- `/`: Enter search mode\n- `n`: Next search result\n- `N`: Previous search result\n- `v`: Toggle view mode (DNA/AA)\n- `1-6`: Select reading frame (in AA mode)\n\n### Store Connection\n```typescript\nconst setScrollPosition = useAppStore(state =\u003e state.setScrollPosition);\nconst toggleViewMode = useAppStore(state =\u003e state.toggleSequenceViewMode);\nconst setReadingFrame = useAppStore(state =\u003e state.setReadingFrame);\nconst jumpToPosition = useAppStore(state =\u003e state.jumpToPosition);\n```\n\n### Component Structure\n```typescript\ninterface SequenceViewProps {\n  className?: string;\n  onPositionChange?: (position: number) =\u003e void;\n}\n\nexport const SequenceView: React.FC\u003cSequenceViewProps\u003e = (props) =\u003e {\n  // Container ref for size measurement\n  const containerRef = useRef\u003cHTMLDivElement\u003e(null);\n  \n  // Measure container size\n  const { width, height } = useElementSize(containerRef);\n  \n  // Handle resize\n  useEffect(() =\u003e {\n    // Resize logic\n  }, [width, height]);\n  \n  // Keyboard shortcuts\n  useKeyboardShortcuts({\n    // Shortcut definitions\n  });\n  \n  return (\n    \u003cdiv ref={containerRef} className={props.className}\u003e\n      \u003cSequenceGridRenderer \n        width={width}\n        height={height}\n        // ... other props\n      /\u003e\n    \u003c/div\u003e\n  );\n};\n```\n\n## Integration Points\n- Wrap SequenceGridRenderer with sizing logic\n- Connect to keyboard event system\n- Integrate with layout system (Header/Footer/Sidebar)\n- Handle focus management\n\n## Edge Cases\n- Handle very small container sizes\n- Graceful degradation when no sequence loaded\n- Prevent shortcut conflicts with other views\n- Handle rapid resize events efficiently\n\n## Accessibility\n- Focus management for keyboard navigation\n- ARIA labels for screen readers\n- Skip-to-content functionality\n- Keyboard trap prevention\n\n## Testing Checklist\n- [ ] Canvas resizes correctly with window\n- [ ] All keyboard shortcuts work as expected\n- [ ] Shortcuts only active when component focused\n- [ ] Resize debouncing prevents performance issues\n- [ ] Scroll position maintained during resize\n- [ ] Component integrates with layout system\n- [ ] Focus states work correctly","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T12:58:16.393609-05:00","updated_at":"2025-12-08T14:19:23.484544-05:00","closed_at":"2025-12-08T14:19:23.484544-05:00","dependencies":[{"issue_id":"phage_explorer-qiaq.3","depends_on_id":"phage_explorer-qiaq","type":"parent-child","created_at":"2025-12-08T12:58:16.394119-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-qiaq.3","depends_on_id":"phage_explorer-7y69","type":"blocks","created_at":"2025-12-08T12:59:03.044664-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-qiaq.3","depends_on_id":"phage_explorer-qiaq.2","type":"blocks","created_at":"2025-12-08T12:59:04.617949-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-qiaq.4","title":"Enhance GeneMapCanvas","description":"# Enhance GeneMapCanvas\n\n## Overview\nEnhance the existing GeneMapCanvas component with full gene rendering, interactive features, and synchronization with the sequence view.\n\n## Component Location\n- **MODIFY**: `packages/web/src/components/GeneMapCanvas.tsx`\n\n## Enhancement Requirements\n\n### Full Gene Data Rendering\n- Display all genes from current phage's annotation\n- Render genes as directional arrows/blocks\n- Color coding by gene function/category (if available)\n- Forward strand genes above centerline\n- Reverse strand genes below centerline\n- Scale visualization to full genome length\n- Handle overlapping genes gracefully\n\n### Gene Visual Properties\nEach gene should show:\n- Direction (arrow pointing 5' → 3')\n- Length (proportional to sequence length)\n- Position (start/end coordinates)\n- Label (gene name, if space permits)\n- Color (by type: structural, replication, lysis, hypothetical, etc.)\n\n### Click-to-Jump Interaction\n- Click on gene: jump sequence view to gene start\n- Click on background: jump to clicked genomic position\n- Update store: `useAppStore(state =\u003e state.jumpToPosition(pos))`\n- Provide visual feedback on click (highlight, flash)\n- Cursor changes to pointer over clickable areas\n\n### Current Position Indicator\n- Show vertical line or marker at current scroll position\n- Sync with SequenceGrid scroll state\n- Read from store: `useAppStore(state =\u003e state.sequenceScrollPosition)`\n- Update indicator smoothly (60fps)\n- Distinguish indicator from gene features\n\n### Gene Hover Tooltips\nDisplay on hover:\n- Gene name/ID\n- Start - End position\n- Length in bp/aa\n- Strand (+/-)\n- Function/product description\n- E-value (if from annotation)\n\nTooltip implementation:\n- Use Portal for tooltip rendering\n- Position intelligently (avoid viewport edges)\n- Delay: ~300ms hover before showing\n- Dismiss on mouse out or scroll\n\n### Scale Bar\nAdd genomic position scale:\n- Show major ticks at regular intervals (e.g., every 5kb)\n- Label ticks with position (kb or bp)\n- Minor ticks between majors\n- Responsive tick spacing based on zoom/width\n- Position above or below gene map\n\n### Canvas Rendering\n- Use Canvas API for performance\n- Support high-DPI displays (devicePixelRatio)\n- Efficient redraw on state changes\n- Pan/zoom support (future)\n- Export as PNG/SVG option (future)\n\n## Store Integration\n```typescript\nconst currentPhage = useAppStore(state =\u003e state.currentPhage);\nconst genes = currentPhage?.genes || [];\nconst currentPosition = useAppStore(state =\u003e state.sequenceScrollPosition);\nconst jumpToPosition = useAppStore(state =\u003e state.jumpToPosition);\n```\n\n## Gene Data Model\nExpect gene objects with:\n```typescript\ninterface Gene {\n  id: string;\n  start: number;\n  end: number;\n  strand: '+' | '-';\n  name?: string;\n  product?: string;\n  function?: string;\n  type?: 'structural' | 'replication' | 'lysis' | 'hypothetical' | 'other';\n}\n```\n\n## Color Scheme\nSuggested color coding:\n- Structural genes: Blue (#3B82F6)\n- Replication: Green (#10B981)\n- Lysis: Red (#EF4444)\n- Hypothetical: Gray (#6B7280)\n- Other/Unknown: Purple (#8B5CF6)\n\n## Performance Optimization\n- Use requestAnimationFrame for smooth updates\n- Debounce position indicator updates\n- Cache rendered gene shapes\n- Only redraw changed regions when possible\n\n## Testing Checklist\n- [ ] All genes render correctly by strand\n- [ ] Click-to-jump navigation works\n- [ ] Position indicator syncs with SequenceGrid\n- [ ] Tooltips show correct gene information\n- [ ] Scale bar displays accurate positions\n- [ ] Performance maintained with 100+ genes\n- [ ] High-DPI displays render sharply\n- [ ] Handles edge cases (no genes, single gene, etc.)","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-08T12:58:17.29808-05:00","updated_at":"2025-12-08T14:19:23.547982-05:00","closed_at":"2025-12-08T14:19:23.547982-05:00","dependencies":[{"issue_id":"phage_explorer-qiaq.4","depends_on_id":"phage_explorer-qiaq","type":"parent-child","created_at":"2025-12-08T12:58:17.298695-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-qiaq.4","depends_on_id":"phage_explorer-7y69","type":"blocks","created_at":"2025-12-08T12:59:06.059016-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-qiaq.5","title":"Bind Header to store data","description":"# Bind Header to Store Data\n\n## Overview\nConnect the Header component to the Zustand store to display real-time information about the current phage and application state.\n\n## Component Location\n- **MODIFY**: `packages/web/src/components/layout/Header.tsx`\n\n## Display Requirements\n\n### Current Phage Information\nWhen a phage is selected, display:\n\n1. **Phage Name**\n   - Prominent position (left or center)\n   - Bold/larger font\n   - Truncate if too long with ellipsis\n   - Show full name on hover (tooltip)\n\n2. **Genome Length**\n   - Format: \"123,456 bp\"\n   - Use comma separators for readability\n   - Adjacent to phage name\n   - Icon or label: \"Length:\" or genome icon\n\n3. **GC Content**\n   - Format: \"45.2% GC\"\n   - 1 decimal place precision\n   - Color-code if extreme (\u003c30% or \u003e70%)\n   - Calculate from sequence if not in metadata\n\n### Mode Indicator\nDisplay current application mode (right side):\n- **NORMAL**: Default browsing mode (can be hidden or minimal)\n- **SEARCH**: Active search/filter mode (highlight)\n- **COMMAND**: Command palette open (highlight)\n- **INSERT**: Annotation mode (future)\n\nVisual treatment:\n- Distinct background color per mode\n- Uppercase text\n- Badge/pill style\n- Keyboard hint (e.g., \"Press ESC to exit\")\n\n### Layout Structure\n```\n┌─────────────────────────────────────────────────────────────┐\n│ 🦠 Phage_ABC | 52,145 bp | 38.7% GC          [SEARCH MODE] │\n└─────────────────────────────────────────────────────────────┘\n```\n\n## Store Integration\n```typescript\nconst currentPhage = useAppStore(state =\u003e state.currentPhage);\nconst mode = useAppStore(state =\u003e state.mode);\n\n// Calculate GC% if needed\nconst gcContent = useMemo(() =\u003e {\n  if (!currentPhage?.sequence) return null;\n  return calculateGC(currentPhage.sequence);\n}, [currentPhage?.sequence]);\n```\n\n## Empty State\nWhen no phage is selected:\n- Show app title/logo\n- Display \"No phage selected\" message\n- Show database stats (e.g., \"234 phages loaded\")\n- Or hide phage-specific info entirely\n\n## Styling Considerations\n- Responsive layout (stack on mobile)\n- High contrast for readability\n- Consistent with overall app theme\n- Smooth transitions when data changes\n- Truncation with tooltips for long names\n\n## Mode Color Scheme\nSuggested colors:\n- **NORMAL**: Default header color\n- **SEARCH**: Yellow/amber (#F59E0B)\n- **COMMAND**: Blue (#3B82F6)\n- **INSERT**: Green (#10B981)\n\n## Additional Features\n- Quick actions menu (dropdown)\n- Copy phage name to clipboard button\n- Share/export current view button\n- Settings/preferences icon\n\n## Testing Checklist\n- [ ] Displays correct phage name\n- [ ] Genome length formatted properly\n- [ ] GC% calculated and displayed accurately\n- [ ] Mode indicator shows current state\n- [ ] Empty state renders when no phage selected\n- [ ] Responsive layout works on narrow screens\n- [ ] Tooltips show on truncated text\n- [ ] Smooth updates when phage changes","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T12:58:17.500871-05:00","updated_at":"2025-12-08T14:19:31.653022-05:00","closed_at":"2025-12-08T14:19:31.653022-05:00","dependencies":[{"issue_id":"phage_explorer-qiaq.5","depends_on_id":"phage_explorer-qiaq","type":"parent-child","created_at":"2025-12-08T12:58:17.501519-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-qiaq.5","depends_on_id":"phage_explorer-7y69","type":"blocks","created_at":"2025-12-08T12:59:07.008267-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-qiaq.6","title":"Bind Footer to store data","description":"# Bind Footer to Store Data\n\n## Overview\nConnect the Footer component to the Zustand store to display context-sensitive information, keyboard hints, and application status.\n\n## Component Location\n- **MODIFY**: `packages/web/src/components/layout/Footer.tsx`\n\n## Display Requirements\n\n### Context-Sensitive Keyboard Hints\nShow keyboard shortcuts relevant to current mode/context:\n\n**Normal Mode:**\n```\n/ search  |  : command  |  j/k navigate  |  ? help\n```\n\n**Search Mode:**\n```\nESC cancel  |  ↵ select  |  n/N next/prev result\n```\n\n**Sequence View Focus:**\n```\ng/G jump  |  v toggle view  |  1-6 reading frame  |  / search\n```\n\n**Gene Map Focus:**\n```\nclick gene to jump  |  hover for info\n```\n\nDynamically update based on:\n- Current mode from store\n- Focused component/panel\n- Available actions in context\n\n### Pending Key Sequence Display\nShow partial command sequences (Vim-style):\n- User presses `g`: Show \"g\" in footer\n- Waiting for second key (`g` for top, others)\n- Clear after timeout (1-2 seconds) or completion\n- Distinct visual style (highlighted box)\n\nExample: `\"g█\"` or `\"d█\"` (pending)\n\n### Analysis Progress Indicator\nShow progress for long-running operations:\n- **Genome alignment**: Progress bar + percentage\n- **BLAST search**: Spinner + status message\n- **Annotation loading**: Progress indicator\n- **File parsing**: Current file + progress\n\nComponents:\n- Progress bar (0-100%)\n- Status text (e.g., \"Aligning genomes... 45%\")\n- Cancel button (if supported)\n- Estimated time remaining (optional)\n\n### Database Load Status\nDisplay database/data source information:\n- **Ready**: \"✓ 234 phages loaded\"\n- **Loading**: \"⟳ Loading database...\"\n- **Error**: \"⚠ Failed to load data\"\n- **Outdated**: \"⚠ Database needs refresh\"\n\nInclude:\n- Icon indicating status\n- Count of loaded phages\n- Last update timestamp (on hover)\n- Refresh action button\n\n## Layout Structure\n```\n┌──────────────────────────────────────────────────────────────────┐\n│ j/k navigate | / search | : command           ✓ 234 phages loaded │\n└──────────────────────────────────────────────────────────────────┘\n```\n\nWith progress:\n```\n┌──────────────────────────────────────────────────────────────────┐\n│ [████████░░░░] Aligning genomes... 65%         ✓ 234 phages ready │\n└──────────────────────────────────────────────────────────────────┘\n```\n\nWith pending key:\n```\n┌──────────────────────────────────────────────────────────────────┐\n│ j/k navigate | \"g█\" pending                   ✓ 234 phages loaded │\n└──────────────────────────────────────────────────────────────────┘\n```\n\n## Store Integration\n```typescript\nconst mode = useAppStore(state =\u003e state.mode);\nconst focusedPanel = useAppStore(state =\u003e state.focusedPanel);\nconst pendingKeys = useAppStore(state =\u003e state.pendingKeySequence);\nconst analysisProgress = useAppStore(state =\u003e state.analysisProgress);\nconst phageCount = useAppStore(state =\u003e state.phages.length);\nconst dbStatus = useAppStore(state =\u003e state.databaseStatus);\n```\n\n## Keyboard Hint Logic\nCreate mapping of contexts to hints:\n```typescript\nconst keyboardHints: Record\u003cMode | FocusPanel, string[]\u003e = {\n  normal: ['/ search', ': command', 'j/k navigate', '? help'],\n  search: ['ESC cancel', '↵ select', 'n/N next/prev'],\n  sequence: ['g/G jump', 'v toggle view', '1-6 frame'],\n  genemap: ['click gene to jump', 'hover for info'],\n  // ...\n};\n```\n\n## Progress State Model\n```typescript\ninterface AnalysisProgress {\n  active: boolean;\n  type: 'alignment' | 'blast' | 'annotation' | 'loading';\n  progress: number; // 0-100\n  message: string;\n  cancelable: boolean;\n}\n```\n\n## Database Status Model\n```typescript\ninterface DatabaseStatus {\n  state: 'loading' | 'ready' | 'error' | 'empty';\n  phageCount: number;\n  lastUpdate?: Date;\n  errorMessage?: string;\n}\n```\n\n## Styling Considerations\n- Fixed height footer\n- High contrast text for readability\n- Separator between sections (|)\n- Monospace font for key hints\n- Color coding for status (green=ready, red=error, yellow=loading)\n- Smooth transitions for content changes\n\n## Responsive Behavior\n- On narrow screens: prioritize most important info\n- Hide less critical hints\n- Stack sections vertically if needed\n- Abbreviate text (e.g., \"234 phages\" → \"234\")\n\n## Testing Checklist\n- [ ] Shows correct hints for each mode\n- [ ] Pending key sequences display properly\n- [ ] Progress indicator updates in real-time\n- [ ] Database status reflects current state\n- [ ] Responsive layout works on narrow screens\n- [ ] Hints update when focus changes\n- [ ] Progress cancellation works (if enabled)\n- [ ] Status icons render correctly","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T12:58:18.783578-05:00","updated_at":"2025-12-08T14:19:31.712689-05:00","closed_at":"2025-12-08T14:19:31.712689-05:00","dependencies":[{"issue_id":"phage_explorer-qiaq.6","depends_on_id":"phage_explorer-qiaq","type":"parent-child","created_at":"2025-12-08T12:58:18.784246-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-qiaq.6","depends_on_id":"phage_explorer-7y69","type":"blocks","created_at":"2025-12-08T12:59:08.266153-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-qlo","title":"[WEB-P1] IndexedDB Caching: Local Database Storage","description":"Store database in IndexedDB for fast subsequent loads. Implement cache invalidation via hash comparison. Handle storage quota gracefully.","status":"closed","priority":0,"issue_type":"feature","created_at":"2025-12-07T16:57:45.608999-05:00","updated_at":"2025-12-07T17:51:24.409848-05:00","closed_at":"2025-12-07T17:51:24.409848-05:00","dependencies":[{"issue_id":"phage_explorer-qlo","depends_on_id":"phage_explorer-pml","type":"blocks","created_at":"2025-12-07T17:04:26.074453-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-qlo","depends_on_id":"phage_explorer-pmb","type":"blocks","created_at":"2025-12-07T17:04:57.60713-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-qlo","depends_on_id":"phage_explorer-sad","type":"blocks","created_at":"2025-12-07T17:04:58.485467-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-qlu","title":"Layer 1: DNA Bendability/Curvature Overlay [B key]","description":"Calculate and visualize intrinsic DNA curvature and flexibility based on dinucleotide wedge model parameters (roll, tilt, twist). Reveals packaging signals, A-tract bends, and protein binding sites. Features curvature sparklines, flexibility gradients, A-tract detection, and 2D helix trajectory projection. Connects sequence to physical shape - essential for understanding capsid packaging. Novelty: 8/10, Pedagogical: 9/10, Cool Factor: 8/10.","notes":"Bendability overlay (B): AT proxy per window, sparkline, overlay stack, Esc/B close","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-06T23:10:40.824309-05:00","updated_at":"2025-12-07T13:00:47.094209-05:00","closed_at":"2025-12-07T13:00:47.094214-05:00","dependencies":[{"issue_id":"phage_explorer-qlu","depends_on_id":"phage_explorer-2g5","type":"blocks","created_at":"2025-12-06T23:10:40.825179-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-qm08","title":"Improve Ball-and-Stick CPK element coloring","description":"","notes":"# Improve Ball-and-Stick CPK Element Coloring\n\n## Problem Statement\n\nThe current ball-and-stick rendering makes all atoms appear too similar, making it hard to distinguish different elements. While element colors are defined in `structure-loader.ts`, the visual result on dark backgrounds can still look like \"a big tangled mass.\"\n\n## Current State Analysis\n\n**File:** `/packages/web/src/visualization/structure-loader.ts`\n**Lines:** 45-59\n\n```typescript\nconst ELEMENT_COLORS: Record\u003cstring, Color\u003e = {\n  H: new Color('#e0e0e0'),    // Light gray\n  C: new Color('#60a5fa'),    // Bright sky blue (NOT dark gray!)\n  N: new Color('#34d399'),    // Bright emerald green\n  O: new Color('#f87171'),    // Bright coral red\n  S: new Color('#fbbf24'),    // Bright amber\n  P: new Color('#c084fc'),    // Purple\n  MG: new Color('#4ade80'),   // Bright green\n  FE: new Color('#fb923c'),   // Orange\n  CA: new Color('#a3e635'),   // Lime\n  ZN: new Color('#7dd3fc'),   // Light blue\n  CL: new Color('#86efac'),   // Light green\n  NA: new Color('#fdba74'),   // Light orange\n};\n```\n\n## CPK Color Standard\n\nThe **CPK coloring scheme** (Corey-Pauling-Koltun) is the industry standard:\n\n| Element | CPK Color | Hex | Rationale |\n|---------|-----------|-----|-----------|\n| H | White | #FFFFFF | Smallest, most common |\n| C | Dark gray/black | #555555 | Carbon backbone |\n| N | Blue | #3050F8 | Nitrogen in proteins |\n| O | Red | #FF0D0D | Oxygen, polar |\n| S | Yellow | #FFFF30 | Sulfur bridges |\n| P | Orange | #FF8000 | Phosphate groups |\n| Cl | Green | #1FF01F | Halogen |\n| Fe | Orange-brown | #E06633 | Iron in heme |\n| Ca | Dark green | #3DFF00 | Calcium ions |\n| Mg | Dark green | #2A7800 | Magnesium |\n\n## Issues to Address\n\n1. **Carbon too bright:** Currently sky blue, should be darker gray\n2. **Low contrast between similar elements:** N and Cl both green-ish\n3. **Hydrogen too dark:** Should be brightest (white)\n4. **Need sphere scaling by element:** Hydrogen atoms should be smaller\n\n## Proposed Solution\n\n### 1. Update Color Palette to Modified CPK (Dark Theme Optimized)\n\n```typescript\nconst ELEMENT_COLORS: Record\u003cstring, Color\u003e = {\n  H: new Color('#f8fafc'),    // Almost white (bright on dark bg)\n  C: new Color('#64748b'),    // Slate gray (neutral backbone)\n  N: new Color('#3b82f6'),    // True blue (nitrogen)\n  O: new Color('#ef4444'),    // True red (oxygen)\n  S: new Color('#fde047'),    // Bright yellow (sulfur)\n  P: new Color('#fb923c'),    // Orange (phosphorus)\n  MG: new Color('#22c55e'),   // Green (magnesium)\n  FE: new Color('#ea580c'),   // Rust orange (iron)\n  CA: new Color('#16a34a'),   // Dark green (calcium)\n  ZN: new Color('#7c3aed'),   // Purple (zinc)\n  CL: new Color('#4ade80'),   // Lime green (chlorine)\n  NA: new Color('#a855f7'),   // Violet (sodium)\n};\n```\n\n### 2. Add Element-Based Sphere Scaling\n\n```typescript\nconst ELEMENT_RADII: Record\u003cstring, number\u003e = {\n  H: 0.25,   // Smallest\n  C: 0.40,   // Medium\n  N: 0.38,   // Slightly smaller than C\n  O: 0.35,   // Smaller than N\n  S: 0.50,   // Larger\n  P: 0.52,   // Larger\n  // ... etc\n};\n```\n\n### 3. Improve Material Properties\n\n```typescript\nconst atomMat = new MeshPhongMaterial({\n  vertexColors: true,\n  shininess: 100,        // Higher for more reflective spheres\n  specular: new Color('#ffffff'),  // White specular for better 3D feel\n});\n```\n\n## Files to Modify\n\n1. `/packages/web/src/visualization/structure-loader.ts`\n   - Update ELEMENT_COLORS\n   - Update ELEMENT_RADII\n   - Modify buildBallAndStick to use element-specific radii\n\n2. `/packages/web/src/components/Model3DView.tsx`\n   - Consider adding a color scheme selector (CPK/RasMol/Custom)\n\n## Testing\n\n- [ ] All common elements have distinct, recognizable colors\n- [ ] Works on both light and dark themes\n- [ ] Atoms are clearly distinguishable at default zoom\n- [ ] Larger structures remain readable\n\n## Definition of Done\n\n- [ ] CPK-derived color scheme implemented\n- [ ] Element-based sphere sizing\n- [ ] Clear visual distinction between C, N, O, S, P\n- [ ] Materials optimized for visibility on dark backgrounds","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-09T11:25:47.574575-05:00","updated_at":"2025-12-09T11:41:09.001156-05:00","closed_at":"2025-12-09T11:41:09.001156-05:00","dependencies":[{"issue_id":"phage_explorer-qm08","depends_on_id":"phage_explorer-vru3","type":"blocks","created_at":"2025-12-09T11:26:23.563205-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-qn3k","title":"[WEB-P5] Create fallback logic to WASM","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-07T17:01:51.633457-05:00","updated_at":"2025-12-08T00:11:16.295876-05:00","closed_at":"2025-12-08T00:11:16.295876-05:00","dependencies":[{"issue_id":"phage_explorer-qn3k","depends_on_id":"phage_explorer-9vj","type":"blocks","created_at":"2025-12-07T17:07:44.849563-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-qn3k","depends_on_id":"phage_explorer-6ubw","type":"blocks","created_at":"2025-12-07T17:08:34.937865-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-qnz1","title":"Task: Create PhageLifecycle module","description":"Educational module: Phage Lifecycle. Covers lytic cycle (attach, inject, replicate, lyse), lysogenic cycle (integrate, dormant, trigger), temperate vs virulent. Include animated infection cycle, Lambda decision diagram.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-09T11:44:15.610476-05:00","updated_at":"2025-12-09T11:44:15.610476-05:00","dependencies":[{"issue_id":"phage_explorer-qnz1","depends_on_id":"phage_explorer-ao55","type":"blocks","created_at":"2025-12-09T11:44:15.611132-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-qnz1","depends_on_id":"phage_explorer-3zpa","type":"blocks","created_at":"2025-12-09T11:44:15.611844-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-qss","title":"[WEB-P2] Implement getVisibleRange with overscan","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-07T16:58:24.283322-05:00","updated_at":"2025-12-07T18:01:31.809403-05:00","closed_at":"2025-12-07T18:01:31.809403-05:00","dependencies":[{"issue_id":"phage_explorer-qss","depends_on_id":"phage_explorer-11b","type":"blocks","created_at":"2025-12-07T17:05:08.633072-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-qzk","title":"Advanced: Tail Fiber Tropism \u0026 Receptor Atlas","description":"Predict receptor-binding specificity by clustering tail fiber/tip proteins and mapping them to known or candidate host receptors. Sharpens host-range hypotheses and engineering targets.\n\n**Build Plan:**\n- Embed tail fibers with ESM/ProtT5 (Python), cluster with HDBSCAN/UMAP\n- Optional AlphaFold2-lite batches for 3D hints\n- Match against receptor HMMs and host surface proteomes\n- Cache clusters and receptor likelihoods\n- Inference via ONNX Runtime in Bun for new sequences\n\n**Why It's Good:**\n- Connects sequence to receptor-binding lineage and host-range\n- Complements codon/tRNA signals with direct molecular evidence\n- Engineering targets for host-range expansion/restriction\n\n**Implementation Stack:** Python (ESM/ProtT5) for embeddings, ONNX Runtime for inference, HDBSCAN/UMAP clustering, Rust+WASM for fast matching, SQLite caching.\n\nNovelty: 9/10, Pedagogical: 8/10, Cool Factor: 9/10.","notes":"## TAIL FIBER TROPISM \u0026 RECEPTOR ATLAS\n\n**Comprehensive Feature Specification from Roadmap**\n\n### Concept\nPredict receptor-binding specificity by clustering tail fiber/tip proteins and mapping them to known or candidate host receptors. Centers on receptor-binding lineage and host-range prediction.\n\n**What This Feature Does:**\n- Embeds tail fiber proteins using protein language models (ESM/ProtT5)\n- Clusters similar fibers to identify tropism families\n- Maps clusters to known receptors (LPS, OmpA, FhuA, etc.)\n- Predicts host-range breadth from receptor diversity\n\n### Build Plan\n\n**Step 1: Protein Embedding**\n```python\nfrom esm import pretrained\nmodel, alphabet = pretrained.load_model_and_alphabet('esm2_t33_650M_UR50D')\n# Embed tail fiber sequences\nembeddings = model(tail_fiber_seqs)\n```\n\n**Step 2: Clustering**\n```python\nimport hdbscan\nimport umap\n\n# Reduce dimensions\nreducer = umap.UMAP(n_components=2, metric='cosine')\nembedding_2d = reducer.fit_transform(embeddings)\n\n# Cluster\nclusterer = hdbscan.HDBSCAN(min_cluster_size=5)\nlabels = clusterer.fit_predict(embedding_2d)\n```\n\n**Step 3: Receptor Matching**\n- HMM profiles for known receptor-binding domains\n- Host surface proteome database\n- Confidence scoring: embedding cosine + domain match + literature support\n\n### TUI Visualization\n\n```\n╭─────────────────────────────────────────────────────────────────────────────╮\n│  TAIL FIBER TROPISM \u0026 RECEPTOR ATLAS: Lambda Phage                          │\n├─────────────────────────────────────────────────────────────────────────────┤\n│                                                                             │\n│  Tail Fiber Cluster: LamB-family (87% confidence)                           │\n│                                                                             │\n│  ┌─────────────────────────────────────────────────────────────────────┐    │\n│  │  TROPISM MAP                                                        │    │\n│  │                                                                     │    │\n│  │     [LamB]──●──[OmpC]      Current phage: ●                        │    │\n│  │        ╲   │   ╱           Cluster members: ○                      │    │\n│  │         ╲  │  ╱                                                    │    │\n│  │   [FhuA]──○──○──[BtuB]     Edge = receptor overlap                │    │\n│  │           │   ╲                                                    │    │\n│  │           ○    ╲                                                   │    │\n│  │         ╱       [FepA]                                            │    │\n│  │      [Tsx]                                                        │    │\n│  │                                                                     │    │\n│  └─────────────────────────────────────────────────────────────────────┘    │\n│                                                                             │\n│  Predicted Receptors:                                                       │\n│  ├─ 1. LamB (maltoporin)        94% confidence  [E. coli K-12]             │\n│  ├─ 2. OmpC                     31% confidence  [Salmonella]               │\n│  └─ 3. Unknown porin            12% confidence  [Shigella]                 │\n│                                                                             │\n│  Host Range Breadth: NARROW (single primary receptor)                       │\n│                                                                             │\n│  [F] Filter by function  [H] Show host taxa  [C] Cluster details  [ESC]    │\n╰─────────────────────────────────────────────────────────────────────────────╯\n```\n\n### Why It's Good\n\n1. **Direct Molecular Evidence**: Goes beyond sequence similarity to predict actual binding partners\n2. **Engineering Targets**: Identifies fiber domains to modify for host-range changes\n3. **Complements Other Signals**: Works with codon/tRNA adaptation and CRISPR spacer evidence\n4. **Cluster Context**: Shows evolutionary relationships among receptor-binding proteins","status":"in_progress","priority":2,"issue_type":"feature","created_at":"2025-12-07T13:04:27.663149-05:00","updated_at":"2025-12-07T17:25:18.516407-05:00","dependencies":[{"issue_id":"phage_explorer-qzk","depends_on_id":"phage_explorer-ojb","type":"blocks","created_at":"2025-12-07T13:06:05.522106-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-r13s","title":"Add beginner hints to gene selection panel","description":"When gene selected in beginner mode, show additional hints explaining: what this gene product does, why certain stats matter, links to relevant modules. Integrates with existing GeneDetailPanel. Non-intrusive expandable section.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-09T11:47:43.747953-05:00","updated_at":"2025-12-09T11:47:43.747953-05:00","dependencies":[{"issue_id":"phage_explorer-r13s","depends_on_id":"phage_explorer-owsv","type":"blocks","created_at":"2025-12-09T11:47:56.999354-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-r1zi","title":"[WEB-P6] Add keyboard shortcut primer","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-07T17:02:07.435963-05:00","updated_at":"2025-12-07T22:26:33.91325-05:00","closed_at":"2025-12-07T22:26:33.91325-05:00","dependencies":[{"issue_id":"phage_explorer-r1zi","depends_on_id":"phage_explorer-as5q","type":"blocks","created_at":"2025-12-07T17:09:21.12252-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-r3ak","title":"[WEB-P4] Visualize CI/Cro concentration dynamics","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-07T17:02:08.948623-05:00","updated_at":"2025-12-07T18:43:06.968337-05:00","closed_at":"2025-12-07T18:43:06.968337-05:00","dependencies":[{"issue_id":"phage_explorer-r3ak","depends_on_id":"phage_explorer-glkb","type":"blocks","created_at":"2025-12-07T17:07:54.588157-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-r9fa","title":"[WEB-P4] Setup worker pool (analysis, simulation, wasm)","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-07T17:01:39.553155-05:00","updated_at":"2025-12-07T18:42:45.530076-05:00","closed_at":"2025-12-07T18:42:45.530076-05:00","dependencies":[{"issue_id":"phage_explorer-r9fa","depends_on_id":"phage_explorer-ru4","type":"blocks","created_at":"2025-12-07T17:07:25.941323-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-r9fa","depends_on_id":"phage_explorer-0mco","type":"blocks","created_at":"2025-12-07T17:08:56.621397-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-rac","title":"[WEB-P0] Create CSS reset and normalize styles","description":"Setup modern CSS reset removing browser defaults and establishing baseline styles","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-07T16:59:13.318162-05:00","updated_at":"2025-12-07T17:24:34.565586-05:00","closed_at":"2025-12-07T17:24:34.565586-05:00","dependencies":[{"issue_id":"phage_explorer-rac","depends_on_id":"phage_explorer-aq6","type":"blocks","created_at":"2025-12-07T17:04:44.751792-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-raxv","title":"[WEB-P4] Add collision detection display","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-07T17:01:56.204221-05:00","updated_at":"2025-12-07T18:43:08.135982-05:00","closed_at":"2025-12-07T18:43:08.135982-05:00","dependencies":[{"issue_id":"phage_explorer-raxv","depends_on_id":"phage_explorer-z3eq","type":"blocks","created_at":"2025-12-07T17:07:43.41263-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-rhs0","title":"Pillar 6: Progressive Disclosure UX","description":"","status":"open","priority":1,"issue_type":"feature","created_at":"2025-12-09T00:36:05.79719-05:00","updated_at":"2025-12-09T00:36:05.79719-05:00","dependencies":[{"issue_id":"phage_explorer-rhs0","depends_on_id":"phage_explorer-xivy","type":"blocks","created_at":"2025-12-09T00:37:33.160325-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-rhy7","title":"Create context content mapping","description":"JSON/TS mapping file defining which help content to show for each app context. Maps overlay IDs to relevant glossary terms, modules, and tips. Maps gene product types to explanations. Maps analysis types to interpretation guides. Extensible structure for future additions.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-09T11:46:38.52473-05:00","updated_at":"2025-12-09T11:46:38.52473-05:00","dependencies":[{"issue_id":"phage_explorer-rhy7","depends_on_id":"phage_explorer-3zpa","type":"blocks","created_at":"2025-12-09T11:46:54.685768-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-rlb","title":"[WEB-P0] Build useHotkey React hook","description":"Create React hook for registering hotkeys with priorities and automatic cleanup","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-07T16:58:51.728655-05:00","updated_at":"2025-12-07T17:31:29.96258-05:00","closed_at":"2025-12-07T17:31:29.96258-05:00","dependencies":[{"issue_id":"phage_explorer-rlb","depends_on_id":"phage_explorer-ows","type":"blocks","created_at":"2025-12-07T17:04:41.421623-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-rlb","depends_on_id":"phage_explorer-csy","type":"blocks","created_at":"2025-12-07T17:05:07.634443-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-ru4","title":"[WEB-P4] Worker Orchestration: ComputeOrchestrator System","description":"Main thread orchestrator managing worker pool (analysis, simulation, WASM). Type-safe communication via Comlink. Job queuing and progress streaming.","status":"closed","priority":0,"issue_type":"feature","created_at":"2025-12-07T17:01:22.991131-05:00","updated_at":"2025-12-07T18:42:45.534914-05:00","closed_at":"2025-12-07T18:42:45.534914-05:00","dependencies":[{"issue_id":"phage_explorer-ru4","depends_on_id":"phage_explorer-sft","type":"blocks","created_at":"2025-12-07T17:07:08.710134-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-rvg","title":"[WEB-P2] Gene Map Renderer: Canvas Genome Overview","description":"Canvas/SVG gene map showing gene positions, strands, density histogram. Current position indicator. Gene labels.","status":"closed","priority":0,"issue_type":"feature","created_at":"2025-12-07T16:57:48.866926-05:00","updated_at":"2025-12-07T18:03:57.093595-05:00","closed_at":"2025-12-07T18:03:57.093595-05:00","dependencies":[{"issue_id":"phage_explorer-rvg","depends_on_id":"phage_explorer-10p","type":"blocks","created_at":"2025-12-07T17:04:56.309377-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-rvg","depends_on_id":"phage_explorer-11b","type":"blocks","created_at":"2025-12-07T17:05:28.378745-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-ryd8","title":"Create Welcome Tour definition","description":"First-time user tour covering: genome viewer basics, navigation controls, gene selection, color coding, analysis menu. Approximately 8-10 steps. Ends with suggestion to explore Foundational modules. Stored in tours/welcome.json.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-09T11:47:10.139303-05:00","updated_at":"2025-12-09T11:47:10.139303-05:00","dependencies":[{"issue_id":"phage_explorer-ryd8","depends_on_id":"phage_explorer-bbf4","type":"blocks","created_at":"2025-12-09T11:47:19.250121-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-s9t7","title":"Task: Create CentralDogma module","description":"Educational module: The Central Dogma. Covers DNA to RNA to Protein pipeline, transcription, translation, why sequence predicts function. Include animated flow diagram, ribosome visualization.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-09T11:44:15.417693-05:00","updated_at":"2025-12-09T11:44:15.417693-05:00","dependencies":[{"issue_id":"phage_explorer-s9t7","depends_on_id":"phage_explorer-ao55","type":"blocks","created_at":"2025-12-09T11:44:15.418805-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-s9t7","depends_on_id":"phage_explorer-3zpa","type":"blocks","created_at":"2025-12-09T11:44:15.421362-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-sad","title":"[WEB-P1] Database Build Pipeline: Compression \u0026 Optimization","description":"Create build script that optimizes phage.db (VACUUM, reindex), compresses with Brotli, generates manifest.json with hash for cache invalidation.","status":"closed","priority":0,"issue_type":"feature","created_at":"2025-12-07T16:57:44.621949-05:00","updated_at":"2025-12-07T17:52:31.206564-05:00","closed_at":"2025-12-07T17:52:31.206564-05:00","dependencies":[{"issue_id":"phage_explorer-sad","depends_on_id":"phage_explorer-pml","type":"blocks","created_at":"2025-12-07T17:04:25.299472-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-sar","title":"[WEB] Phage Explorer Web Application Deployment","description":"# Master Epic: Phage Explorer Web Application Deployment\n\n## Vision\nTransform Phage Explorer from a terminal application into a browser-native experience that *amplifies* the cyberpunk aesthetic through GPU-accelerated visuals, while preserving—and enhancing—the keyboard-driven immediacy that makes the TUI feel alive.\n\n## Strategic Goals\n1. **Preserve** the keyboard-first, low-latency interaction model\n2. **Amplify** the cyberpunk aesthetic with GPU-accelerated effects (phosphor glow, scanlines, chromatic aberration)\n3. **Extend** capabilities with web-only features (collaboration, video export, offline)\n4. **Maintain** a single codebase for core logic and computation via shared packages\n5. **Deploy** seamlessly on Vercel with no backend infrastructure\n\n## Technical Approach\n- **Framework**: React 19 + Vite + Bun\n- **State**: Zustand (shared with TUI)\n- **Rendering**: Canvas 2D + WebGL for effects + WebGPU (experimental)\n- **Database**: sql.js (SQLite WASM) with IndexedDB caching\n- **Offline**: Service Worker with Workbox\n- **Deployment**: Vercel static hosting + edge functions\n\n## Architecture Overview\n```\npackages/\n├── core/              # Shared (existing)\n├── state/             # Shared (existing) + web persistence layer\n├── wasm-compute/      # Shared (existing)\n├── db-runtime/        # Extended with browser adapter\n├── web/               # NEW: Web application\n│   ├── src/\n│   │   ├── app/       # React app structure\n│   │   ├── components/\n│   │   ├── rendering/ # Canvas/WebGL renderers\n│   │   ├── workers/   # Web Workers\n│   │   └── service-worker/\n└── tui/               # Existing (preserved)\n```\n\n## Design Principles\n1. **Terminal Authenticity, Not Simulation** - We adopt the aesthetic vocabulary (monospace, scanlines, phosphor glow) while exploiting web's superpowers\n2. **Keyboard-First, Mouse-Aware** - Every action is keyboard-accessible, mouse/touch are accelerators\n3. **Instant Feedback** - \u003c16ms visual feedback, \u003c50ms action completion, \u003c150ms complex computations\n4. **Progressive Disclosure** - Novice→Intermediate→Power user journey\n5. **Offline-First** - Complete functionality after first load\n\n## Success Metrics\n- First Contentful Paint: \u003c1.0s\n- Time to Interactive: \u003c2.0s\n- Keypress to Paint: \u003c16ms\n- 60fps scrolling on 100k+ base sequences\n- 100% hotkey parity with TUI\n- 100% overlay parity with TUI\n- Full offline functionality\n\n## Phased Execution\n- **Phase 0**: Foundation (scaffold, themes, keyboard)\n- **Phase 1**: Data Layer (sql.js, caching, offline)\n- **Phase 2**: Core Visualization (canvas sequence grid, gene map, sparklines)\n- **Phase 3**: Overlays \u0026 Panels (command palette, analysis menu, overlays)\n- **Phase 4**: Simulations (worker orchestration, all sims)\n- **Phase 5**: Advanced Features (heavy analysis, WebGPU, collaboration)\n- **Phase 6**: Polish \u0026 Launch (performance, accessibility, onboarding)\n\n## References\n- See PLAN_TO_DEPLOY_PHAGE_EXPLORER_AS_WEBAPP.md for full technical specifications","status":"closed","priority":0,"issue_type":"epic","created_at":"2025-12-07T16:54:03.040434-05:00","updated_at":"2025-12-08T00:09:54.184757-05:00","closed_at":"2025-12-08T00:09:54.184757-05:00"}
{"id":"phage_explorer-sek","title":"Overlay caching, 3D pause keybinding, overlay legends","description":"Implement caching for overlays (complexity and others), add non-conflicting 3D pause key, add sparkline legends.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-07T00:11:53.52113-05:00","updated_at":"2025-12-07T00:14:21.56502-05:00","closed_at":"2025-12-07T00:14:21.56502-05:00"}
{"id":"phage_explorer-sft","title":"[WEB-P4] Simulations: Worker-Based Computation Engine","description":"# Phase 4: Simulations (Target: Weeks 7-9)\n\n## Purpose\nPort all simulation capabilities to the web, running in Web Workers to avoid blocking the UI thread.\n\n## Why This Matters\nSimulations are what make Phage Explorer educational and research-useful. They transform static sequence data into dynamic, explorable processes. Without them, the web version is significantly less valuable than the TUI.\n\n## Technical Strategy\nAll heavy computation runs in Web Workers:\n1. **Main Thread**: UI, user input, rendering coordination\n2. **Workers**: Simulation logic, WASM execution, analysis\n\nWe use **Comlink** for type-safe worker communication, avoiding raw postMessage complexity.\n\n## Deliverables\n1. **Worker Orchestration** - ComputeOrchestrator class\n2. **Ribosome Traffic Simulation** - Polysome dynamics\n3. **Lysogeny Circuit Simulation** - CI/Cro decision circuit\n4. **Plaque Automata** - Cellular automaton plaque growth\n5. **Evolution Replay** - Temporal mutation replay\n6. **Time Controls** - Unified playback UI\n\n## Worker Architecture\n```typescript\nclass ComputeOrchestrator {\n  workers: Map\u003cstring, Worker\u003e  // 'analysis', 'simulation', 'wasm'\n  \n  async runAnalysis\u003cT\u003e(type, data, options): Promise\u003cT\u003e\n  runWithProgress\u003cT\u003e(type, data, onProgress): Promise\u003cT\u003e\n}\n```\n\n### Worker Pool\n| Worker | Purpose |\n|--------|---------|\n| analysis | GC skew, complexity, k-mer analysis |\n| simulation | Ribosome, lysogeny, evolution |\n| wasm | WASM kernel execution |\n\n## Simulation Specifications\n\n### Ribosome Traffic\n- Models polysome collisions and stalling\n- Codon-by-codon translation timing\n- Visualizes ribosome density along mRNA\n\n### Lysogeny Circuit\n- CI/Cro regulatory dynamics\n- Stochastic gene expression\n- Predicts lysis vs lysogeny decision\n\n### Plaque Automata\n- Cellular automaton grid\n- Phage diffusion model\n- Visual plaque growth over time\n\n### Evolution Replay\n- Temporal sequence changes\n- Ancestral state reconstruction\n- Phylogenetic context\n\n## Acceptance Criteria\n- [ ] Simulations run without blocking UI (no frame drops)\n- [ ] Progress indicators work for long computations\n- [ ] Snapshots can be saved and restored\n- [ ] Deterministic with seed (reproducible)\n- [ ] Time controls work consistently across sims\n- [ ] Cancel button stops running simulations\n\n## Performance Targets\n| Operation | Target |\n|-----------|--------|\n| UI frame time during sim | \u003c16ms |\n| Simulation step | \u003c100ms |\n| Full ribosome sim (50kb) | \u003c10s |\n\n## Risks \u0026 Mitigations\n- **Risk**: Worker communication overhead\n  - **Mitigation**: Batch updates, use SharedArrayBuffer if supported\n- **Risk**: Memory pressure from long simulations\n  - **Mitigation**: Chunked processing, dispose old results\n- **Risk**: Different timing across browsers\n  - **Mitigation**: Use performance.now(), not Date.now()\n\n## Dependencies\n- Phase 2 (visualization for simulation output)\n- Phase 3 (simulation hub modal)\n- Existing simulation code in TUI packages","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-07T16:56:16.8656-05:00","updated_at":"2025-12-07T18:43:21.931631-05:00","closed_at":"2025-12-07T18:43:21.931631-05:00","dependencies":[{"issue_id":"phage_explorer-sft","depends_on_id":"phage_explorer-10p","type":"blocks","created_at":"2025-12-07T17:04:35.55988-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-sft","depends_on_id":"phage_explorer-ee1","type":"blocks","created_at":"2025-12-07T17:04:36.528588-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-si85","title":"Create DNAHelixVisualizer component","description":"Interactive 3D DNA double helix visualization showing: base pairing (A-T, G-C), major/minor grooves, sugar-phosphate backbone, 5' to 3' directionality. Animatable unwinding for replication explanation. Should integrate with renderer-3d package's existing WebGL infrastructure.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-09T11:46:07.784633-05:00","updated_at":"2025-12-09T11:46:07.784633-05:00","dependencies":[{"issue_id":"phage_explorer-si85","depends_on_id":"phage_explorer-owsv","type":"blocks","created_at":"2025-12-09T11:46:22.328884-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-sna3","title":"[WEB-P3] Implement focus trapping for modals","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-07T17:02:26.191128-05:00","updated_at":"2025-12-07T18:27:08.462652-05:00","closed_at":"2025-12-07T18:27:08.462652-05:00","dependencies":[{"issue_id":"phage_explorer-sna3","depends_on_id":"phage_explorer-zld6","type":"blocks","created_at":"2025-12-07T17:07:36.819571-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-sppd","title":"[WEB-P6] Implement skip navigation link","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-07T17:01:52.687483-05:00","updated_at":"2025-12-07T22:14:47.402378-05:00","closed_at":"2025-12-07T22:14:47.402378-05:00","dependencies":[{"issue_id":"phage_explorer-sppd","depends_on_id":"phage_explorer-2xt","type":"blocks","created_at":"2025-12-07T17:09:08.100303-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-t8sl","title":"[WEB-P4] Port lysogeny simulation to worker","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-07T17:01:58.091978-05:00","updated_at":"2025-12-07T18:43:06.962877-05:00","closed_at":"2025-12-07T18:43:06.962877-05:00","dependencies":[{"issue_id":"phage_explorer-t8sl","depends_on_id":"phage_explorer-glkb","type":"blocks","created_at":"2025-12-07T17:07:51.565243-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-t9j","title":"Advanced: Structural Epitope Clash Map","description":"## Structural Epitope Clash Map (Tail Fiber Host Range Analyzer)\n\n### Concept\nThe tail fiber is the phage's MOLECULAR KEY — its receptor-binding domain (RBD) determines host specificity. This feature combines:\n1. **Structural analysis**: ΔΔG alanine scans and electrostatics on predicted structures\n2. **Modular domain detection**: Identify N-anchor, shaft, and hypervariable RBD regions\n3. **Entropy-based variability mapping**: Find conserved vs rapidly-evolving positions\n4. **Host range prediction**: Infer likely hosts from RBD sequence features\n\n### Mathematical Foundations\n\n**Shannon entropy for per-position variability:**\nH(i) = -Σ p(a) × log₂(p(a)) for each alignment position\n- H(i) = 0: Perfectly conserved (functional constraint)\n- H(i) = 4.3: Maximum entropy (20 AA, no constraint)\nEntropy profile reveals low entropy in anchor/shaft (structural), high in RBD (host-range variability)\n\n**Domain boundary detection:**\nTail fibers have conserved modular structure: [N-anchor] — [Shaft repeats] — [RBD]\nDetect via:\n- Entropy gradient peaks (sudden variability change)\n- Hydropathy profile transitions\n- Secondary structure predictions (α-helix shaft → β-sheet RBD)\n- Recombination breakpoint detection\n\n**Structural stability (ΔΔG):**\nΔΔG = ΔG(wild-type) - ΔG(alanine mutant)\n- High ΔΔG = structurally important (core)\n- Low ΔΔG = surface-exposed, tolerant to mutation\n- Negative ΔΔG = destabilizing, likely under selection\n\n**Host range prediction features:**\nFor ML model: k-mer frequencies (k=3,4,5), AA composition, predicted secondary structure, isoelectric point, molecular weight, specific motifs (carbohydrate-binding, Ig-like folds)\n\n### Implementation\n- entropyProfile(alignment) → Float64Array of per-position entropy\n- detectDomainBoundaries(entropy, hydropathy, secondaryStructure) → DomainBoundary[]\n- predictHostRange(rbdSequence, knownRBDs) → HostPrediction[] with confidence\n- analyzeStructuralEpitopes(pdbId, sequence) → StructuralRisk[] (ΔΔG, surface area, charge)\n\n### TUI Visualization (Multi-Layer)\n- Domain structure bar: N-anchor | Shaft | RBD with conservation coloring\n- Entropy profile sparkline (low in anchor, high in RBD)\n- Structural risk profile (ΔΔG instability)\n- Host range prediction table with confidence bars\n- Chimera suggestion: \"Swap RBD (aa 850-1132) with P22 gpJ → Predicted new host: Salmonella\"\n- 3D ASCII model with epitope highlighting (charge/risk mode toggle)\n\n### Pedagogical Value: 9/10\nTeaches receptor-ligand biology, protein modularity, information theory (Shannon entropy), structural biology (surface exposure, electrostatics), evolution of specificity (arms race in molecular detail).\n\n### External Dependencies\n- AlphaFold DB or ESMFold for structure prediction\n- FoldX (or ML surrogate) for ΔΔG calculations\n- APBS for electrostatics\n\n### Priority: P4 (highest complexity)","status":"open","priority":4,"issue_type":"feature","created_at":"2025-12-06T23:21:06.440127-05:00","updated_at":"2025-12-06T23:31:50.332681-05:00","dependencies":[{"issue_id":"phage_explorer-t9j","depends_on_id":"phage_explorer-54g","type":"blocks","created_at":"2025-12-06T23:21:06.441895-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-t9q0","title":"Mobile-optimized 3D quality presets","description":"","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-09T00:40:33.805446-05:00","updated_at":"2025-12-09T00:40:33.805446-05:00","dependencies":[{"issue_id":"phage_explorer-t9q0","depends_on_id":"phage_explorer-ba4h","type":"blocks","created_at":"2025-12-09T00:40:54.236664-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-td5n","title":"[WEB-P6] Write developer contributing guide","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-07T17:02:38.078518-05:00","updated_at":"2025-12-08T00:42:47.082921-05:00","closed_at":"2025-12-08T00:42:47.082921-05:00","dependencies":[{"issue_id":"phage_explorer-td5n","depends_on_id":"phage_explorer-gwhv","type":"blocks","created_at":"2025-12-07T17:09:50.196949-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-tg5","title":"[WEB-P2] Add peak/valley detection markers","description":"","notes":"Sparkline draws peak/valley markers (configurable) in packages/web/src/components/charts/Sparkline.tsx.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-07T16:58:48.455771-05:00","updated_at":"2025-12-07T20:59:47.911597-05:00","closed_at":"2025-12-07T20:59:47.911597-05:00","dependencies":[{"issue_id":"phage_explorer-tg5","depends_on_id":"phage_explorer-w8e","type":"blocks","created_at":"2025-12-07T17:05:18.841412-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-th9r","title":"Pillar 2: Responsive Layout System","description":"","status":"open","priority":1,"issue_type":"feature","created_at":"2025-12-09T00:35:39.530853-05:00","updated_at":"2025-12-09T00:35:39.530853-05:00","dependencies":[{"issue_id":"phage_explorer-th9r","depends_on_id":"phage_explorer-xivy","type":"blocks","created_at":"2025-12-09T00:37:11.692402-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-tjen","title":"Collapsible sidebar for mobile","description":"","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-09T00:40:11.491867-05:00","updated_at":"2025-12-09T00:40:11.491867-05:00","dependencies":[{"issue_id":"phage_explorer-tjen","depends_on_id":"phage_explorer-th9r","type":"blocks","created_at":"2025-12-09T00:40:28.872597-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-tp98","title":"Implement floating action button FAB for mobile","description":"","notes":"# Implement Floating Action Button (FAB) for Mobile\n\n## Overview\n\nThe FAB is the entry point to the touch control palette. It provides a persistent, easily accessible button that opens the action drawer.\n\n## Design Specifications\n\n### Position\n- Fixed position: bottom-right corner\n- Offset from edges: 16px right, 16px bottom\n- Above any fixed footers\n\n### Size\n- Diameter: 56px (Material Design standard)\n- Touch target: extends 4px beyond visual bounds (64px effective)\n\n### Visual Style\n```css\n.fab {\n  width: 56px;\n  height: 56px;\n  border-radius: 50%;\n  background: var(--color-accent);\n  color: var(--color-text-on-accent);\n  border: none;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);\n\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  /* Smooth interactions */\n  transition: transform 200ms ease, box-shadow 200ms ease;\n}\n\n.fab:hover {\n  transform: scale(1.05);\n  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.4);\n}\n\n.fab:active {\n  transform: scale(0.95);\n}\n\n.fab.open {\n  transform: rotate(45deg);  /* X icon when open */\n}\n```\n\n### Icon\n- Default: Hamburger menu (☰) or gear (⚙️)\n- When drawer open: X (×) or close icon\n- Consider using SVG icons for crispness\n\n## Behavior\n\n### Tap\nOpens/closes the action drawer\n\n### Long Press\nOpens the full feature modal directly\n\n### Drag\nCould allow repositioning FAB (accessibility feature)\n\n### Hide on Scroll\nOption to hide FAB when scrolling down, show when scrolling up (saves screen space)\n\n## Component Implementation\n\n```tsx\ninterface FABProps {\n  isOpen: boolean;\n  onToggle: () =\u003e void;\n  onLongPress?: () =\u003e void;\n}\n\nexport function FloatingActionButton({\n  isOpen,\n  onToggle,\n  onLongPress,\n}: FABProps) {\n  const longPressRef = useRef\u003cnumber | null\u003e(null);\n\n  const handleTouchStart = () =\u003e {\n    if (onLongPress) {\n      longPressRef.current = window.setTimeout(onLongPress, 500);\n    }\n  };\n\n  const handleTouchEnd = () =\u003e {\n    if (longPressRef.current) {\n      clearTimeout(longPressRef.current);\n      longPressRef.current = null;\n    }\n  };\n\n  return (\n    \u003cbutton\n      className={`fab ${isOpen ? 'open' : ''}`}\n      onClick={onToggle}\n      onTouchStart={handleTouchStart}\n      onTouchEnd={handleTouchEnd}\n      aria-label={isOpen ? 'Close menu' : 'Open menu'}\n      aria-expanded={isOpen}\n      aria-haspopup=\"menu\"\n    \u003e\n      \u003cspan className=\"fab-icon\" aria-hidden=\"true\"\u003e\n        {isOpen ? '×' : '☰'}\n      \u003c/span\u003e\n    \u003c/button\u003e\n  );\n}\n```\n\n## Portal Rendering\n\nFAB should render outside the normal DOM hierarchy to avoid z-index issues:\n\n```tsx\nfunction FABPortal({ children }: { children: React.ReactNode }) {\n  const [mounted, setMounted] = useState(false);\n\n  useEffect(() =\u003e {\n    setMounted(true);\n  }, []);\n\n  if (!mounted) return null;\n\n  return createPortal(\n    children,\n    document.body\n  );\n}\n```\n\n## Responsive Behavior\n\n### Desktop (\u003e1024px)\n- FAB could be hidden (keyboard shortcuts sufficient)\n- Or shown at reduced size (48px)\n\n### Tablet (768-1024px)\n- Full 56px FAB\n- Position: bottom-right\n\n### Mobile (\u003c768px)\n- Full 56px FAB\n- Consider edge swipe gesture as alternative trigger\n\n## Accessibility\n\n```tsx\n\u003cbutton\n  aria-label={isOpen ? 'Close control menu' : 'Open control menu'}\n  aria-expanded={isOpen}\n  aria-haspopup=\"dialog\"\n  aria-controls=\"action-drawer\"\n\u003e\n```\n\n## Animation\n\n### Opening\n```css\n.fab {\n  animation: fab-appear 300ms ease-out;\n}\n\n@keyframes fab-appear {\n  from {\n    transform: scale(0);\n    opacity: 0;\n  }\n  to {\n    transform: scale(1);\n    opacity: 1;\n  }\n}\n```\n\n### State Change\n```css\n.fab-icon {\n  transition: transform 200ms ease;\n}\n\n.fab.open .fab-icon {\n  transform: rotate(45deg);\n}\n```\n\n## Files to Create\n\n1. `/packages/web/src/components/controls/FloatingActionButton.tsx`\n2. `/packages/web/src/components/controls/FloatingActionButton.css`\n\n## Testing\n\n- [ ] Tap opens drawer\n- [ ] Long press opens full modal\n- [ ] Visually appears in bottom-right\n- [ ] Z-index above all other content\n- [ ] Works on iOS Safari (no double-tap-to-zoom issue)\n- [ ] Works on Android Chrome\n- [ ] Smooth animations\n- [ ] Accessible via screen reader\n\n## Definition of Done\n\n- [ ] FAB component implemented\n- [ ] Opens action drawer on tap\n- [ ] Long press triggers full modal\n- [ ] Proper z-index management\n- [ ] Touch-friendly (no accidental triggers)\n- [ ] Animations smooth at 60fps","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-09T11:25:49.798684-05:00","updated_at":"2025-12-09T11:32:54.829127-05:00","dependencies":[{"issue_id":"phage_explorer-tp98","depends_on_id":"phage_explorer-jvl7","type":"blocks","created_at":"2025-12-09T11:26:23.757641-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-ty1n","title":"Pillar 1: Core Infrastructure \u0026 State Management","description":"## Foundation for Beginner Mode\n\n### What This Creates\n1. **State Management**\n   - Add `beginnerModeEnabled: boolean` to Zustand store\n   - Add `glossaryOpen: boolean` for sidebar state\n   - Add `currentTour: TourId | null` for guided tours\n   - Persist to localStorage\n\n2. **useBeginnerMode Hook**\n   - `isEnabled` - check if beginner mode is on\n   - `toggle()` - turn on/off\n   - `showContextFor(topic)` - display context panel\n   - Memoized for performance\n\n3. **Keyboard Shortcut**\n   - Ctrl+B to toggle beginner mode\n   - Register via existing hotkey system\n\n4. **Settings Panel Entry**\n   - Add toggle to settings/preferences\n   - Brief explanation of what it does\n\n### Files to Create\n- packages/web/src/hooks/useBeginnerMode.ts\n- packages/web/src/education/types.ts (shared types)\n- Updates to packages/state/src/store.ts\n\n### Why First\nAll other beginner mode features depend on this infrastructure being in place.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-09T11:32:18.938413-05:00","updated_at":"2025-12-10T00:43:15.132523866-06:00","closed_at":"2025-12-09T23:58:57.13251521-06:00","dependencies":[{"issue_id":"phage_explorer-ty1n","depends_on_id":"phage_explorer-2uo1","type":"blocks","created_at":"2025-12-09T11:32:18.939954-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-u8f","title":"Advanced: Capsid Packaging \u0026 Ejection Energetics Simulator","description":"Quantify physics of packing dsDNA into capsid and ejection: force-extension, internal pressure (up to ~60 atm), salt/GC effects. Worm-Like Chain elasticity + Debye-Hückel electrostatics + bending energy. Compare headful vs cos vs phi29 portal strategies. Interactive sliders for ionic strength, temperature; fill fraction animation. Bridges genome composition to biophysical feasibility. Novelty: High, Pedagogical: High.","notes":"## CAPSID PACKAGING \u0026 EJECTION ENERGETICS SIMULATOR\n\n**Full Implementation from Roadmap**\n\n### Mathematical Foundations\n\n**Worm-Like Chain (WLC) Model:**\n```\nF(x) = (k_B T / L_p) × [1/(4(1-x/L)²) - 1/4 + x/L]\n\nWhere:\n- L_p = persistence length (~50 nm for dsDNA)\n- L = contour length of DNA\n- x = end-to-end extension\n- k_B × T ≈ 4.1 pN·nm at 25°C\n```\n\n**Confinement Free Energy (Odijk regime):**\n```\nΔG_confinement = (k_B T × L) / (L_p^(1/3) × D^(2/3))\n```\n\n**Electrostatic Repulsion (Debye-Hückel):**\n```\nU_elec(r) = (q² / 4πε₀ε_r) × (e^(-κr) / r)\nκ = √(2 × N_A × e² × I / (ε₀ε_r k_B T))\n```\n\n**Internal Pressure:**\n```\nP = -(∂G/∂V) = (k_B T / V) × [N_segments + B₂ × N² / V + ...]\n```\n\n### Complete TypeScript Implementation\n\n- `PackagingEnergetics` interface with bending, confinement, electrostatic components\n- `CapsidGeometry` models: T4, Lambda, T7, Phi29, PhiX174\n- `MotorProperties` for different packaging systems\n- `calculateDebyeLength()`, `wlcForce()`, `calculateBendingEnergy()`\n- `calculateConfinementEntropy()`, `calculateElectrostaticEnergy()`\n- `calculateInternalPressure()`, `generateForceExtensionCurve()`\n- `simulateEjection()` with osmotic pressure opposition\n- `comparePackagingEnergetics()` for multi-phage comparison\n\n### Implementation Stack\n- **Physics Engine**: Rust + nalgebra + ndarray → WASM\n- **Caching**: SQLite stores precomputed force-extension curves\n- **UI**: Ink/React with Braille block plotting for smooth curves\n- **Animation**: requestAnimationFrame-like loop for ejection dynamics\n\n### TUI Features\n- Force vs Fill Fraction plot with motor stall line\n- Energy component breakdown (bending, confinement, electrostatic)\n- Capsid fill visualization with pressure gauge\n- Ejection dynamics timeline with velocity decay\n- Interactive sliders: [I]onic strength, [T]emperature, [S]trategy\n\nNovelty: 10/10, Pedagogical: 9/10, Wow Factor: 9/10","status":"closed","priority":3,"issue_type":"feature","created_at":"2025-12-06T23:48:08.831742-05:00","updated_at":"2025-12-07T13:24:38.29233-05:00","closed_at":"2025-12-07T13:24:38.29233-05:00","dependencies":[{"issue_id":"phage_explorer-u8f","depends_on_id":"phage_explorer-ojb","type":"blocks","created_at":"2025-12-06T23:56:50.829947-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-ubpc","title":"[WEB-P4] Add progress streaming for long computations","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-07T17:01:42.588743-05:00","updated_at":"2025-12-07T18:43:20.387367-05:00","closed_at":"2025-12-07T18:43:20.387367-05:00","dependencies":[{"issue_id":"phage_explorer-ubpc","depends_on_id":"phage_explorer-ru4","type":"blocks","created_at":"2025-12-07T17:07:29.020155-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-ubpc","depends_on_id":"phage_explorer-baxt","type":"blocks","created_at":"2025-12-07T17:08:58.788803-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-ufda","title":"[WEB-P3] Add keyboard navigation (↑↓ Enter Tab Esc)","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-07T17:01:41.113272-05:00","updated_at":"2025-12-07T22:15:38.89625-05:00","closed_at":"2025-12-07T22:15:38.89625-05:00","dependencies":[{"issue_id":"phage_explorer-ufda","depends_on_id":"phage_explorer-f4t","type":"blocks","created_at":"2025-12-07T17:07:30.544384-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-ufda","depends_on_id":"phage_explorer-a3ws","type":"blocks","created_at":"2025-12-07T17:07:57.068854-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-ug4","title":"Layer 2: Auxiliary Metabolic Gene (AMG) Pathway Mapper","description":"Detect AMGs via HMMER vs curated profiles, map to KEGG reactions, estimate pathway flux gains via Delta-FBA in target hosts. Template models for common hosts, Δflux per pathway. Turns annotations into quantitative metabolic impact; surfaces hijacking strategies. Novelty: Medium-high, Pedagogical: High (stoichiometry, metabolic control).","notes":"## AUXILIARY METABOLIC GENE (AMG) FLUX POTENTIAL ANALYZER\n\n**Full Implementation from Roadmap**\n\n### Mathematical Foundations\n\n**Flux Balance Analysis (FBA):**\n```\nMaximize: c^T × v (objective function, e.g., biomass)\nSubject to: S × v = 0 (steady-state)\n            v_min ≤ v ≤ v_max (flux bounds)\n```\n\n**Delta-FBA for AMG Impact:**\n```\nΔflux = v_with_AMG - v_without_AMG\n%Gain = (v_with - v_without) / v_without × 100\n```\n\n### Complete TypeScript Implementation\n\n- `HostModel` interface (metabolites, reactions, stoichiometry, objectives)\n- `AMGDetection` with KO mapping, HMM scores, coverage\n- `DeltaFBAResult` with pathway impacts and percent gains\n- `PathwayImpact` (affected reactions, total flux change)\n- `ECOLI_CORE_MODEL` with glycolysis, TCA, nucleotide synthesis\n- `AMG_PROFILES` Map (psbA/D photosynthesis, nrdA/B nucleotide, thyX, mazG, phoH)\n- `detectAMGs()` HMM-based detection\n- `calculateDeltaFBA()` flux change estimation\n- `analyzeAMGFluxPotential()` full analysis pipeline\n- `formatAMGAnalysisForTUI()` display formatting\n\n### TUI Features\n- Metabolic Map with pathway flow visualization\n- AMG positions marked with stars (★)\n- Flux Impact Summary table with gain bars\n- Host Comparison panel (Prochlorococcus, Synechococcus, E. coli, Bacillus)\n- Total Δ Objective and compatibility scores\n- Top Affected Pathways ranking\n- [←/→] Switch AMG, [H] Switch host, [P] Pathway detail\n\n### Implementation Stack\n- Rust+WASM for LP solver (delta-FBA)\n- HMMER precompute for AMG detection\n- KEGG reaction mapping\n- SQLite for pathway and AMG caches\n- TS/Ink UI for metabolic flow visualization\n\nNovelty: 8/10, Pedagogical: 9/10, Wow Factor: 8/10","status":"in_progress","priority":2,"issue_type":"feature","created_at":"2025-12-06T23:12:45.993704-05:00","updated_at":"2025-12-08T22:55:37.743789-05:00","dependencies":[{"issue_id":"phage_explorer-ug4","depends_on_id":"phage_explorer-54g","type":"blocks","created_at":"2025-12-06T23:12:45.995081-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-uiq1","title":"Mobile-first breakpoint system","description":"","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-09T00:40:11.317537-05:00","updated_at":"2025-12-09T00:40:11.317537-05:00","dependencies":[{"issue_id":"phage_explorer-uiq1","depends_on_id":"phage_explorer-th9r","type":"blocks","created_at":"2025-12-09T00:40:28.456259-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-ujh","title":"Advanced: Protein Domain Chord Plot","description":"## Protein Domain Chord Plot (Advanced Feature)\n\n### Concept\n\nPhage proteomes are **modular mosaics** — built from shuffled and recombined functional domains. The same DNA-binding domain might appear in the repressor of one phage and the anti-repressor of another. The same tail fiber receptor-binding domain might be swapped between distant phages to change host range.\n\nA **chord diagram** visualizes these domain-sharing relationships as arcs connecting phages. Each arc represents a shared domain, with thickness proportional to copy number or sequence identity. The result reveals:\n- **Core domains**: Present in all phages (structural essentials)\n- **Accessory domains**: Patchy distribution (niche adaptation)\n- **Domain promiscuity**: Domains appearing in unexpected combinations\n- **Convergent evolution**: Same domain, independent acquisitions\n\n### Mathematical Foundations\n\n**Domain Detection via HMM profiles:**\n```\nHMMER3 hmmscan workflow:\n  1. Query each protein against Pfam-A HMM database\n  2. For each domain hit:\n     - E-value \u003c 1e-5 (significant)\n     - Coverage \u003e 60% of HMM model\n     - No envelope overlap with higher-scoring hits\nOutput: domain annotations with Pfam accession, name, positions, bit score\n```\n\n**Domain occurrence matrix:**\n```\nLet D = {d₁, d₂, ..., dₘ} = all detected domains\nLet P = {p₁, p₂, ..., pₙ} = all phages\n\nOccurrence matrix O[m × n]:\n  O[i,j] = count of domain dᵢ in phage pⱼ\n\nPresence/absence matrix B[m × n]:\n  B[i,j] = 1 if O[i,j] \u003e 0, else 0\n```\n\n**Domain co-occurrence (for clustering):**\n```\nJaccard similarity between domains:\n  J(dᵢ, dⱼ) = |phages with both| / |phages with either|\n\nDomains with high Jaccard often function together.\nCluster with MCL (Markov Cluster Algorithm) to find domain modules.\n```\n\n**Chord diagram layout:**\n```\nPhages arranged on circle (0 to 2π): θᵢ = 2π × i / n\nFor each shared domain connecting phages pᵢ and pⱼ:\n  Draw Bezier curve from θᵢ to θⱼ\n  Control points at circle center (creates arc shape)\nArc thickness ∝ number of shared copies or sequence identity\n```\n\n### Implementation Approach\n\n**Domain hit storage:**\n```typescript\ninterface DomainHit {\n  pfamId: string;\n  pfamName: string;\n  clanId?: string;\n  proteinId: string;\n  phageId: number;\n  start: number;\n  end: number;\n  score: number;\n  eValue: number;\n  description: string;\n}\n```\n\n**Domain sharing computation:**\n```typescript\ninterface DomainSharing {\n  domain: string;\n  phageA: number;\n  phageB: number;\n  copiesA: number;\n  copiesB: number;\n  averageIdentity: number;\n}\n\n// Find all pairwise sharings across phages\n// Group by domain family for filtering\n```\n\n**MCL clustering for domain modules:**\n```typescript\ninterface DomainCluster {\n  id: number;\n  domains: string[];\n  name: string;  // Inferred function\n  phageCount: number;\n}\n\n// Build adjacency from co-occurrence Jaccard\n// MCL iterations: expand (matrix multiply) + inflate (element-wise power)\n// Extract clusters from converged matrix\n```\n\n**ASCII Braille chord renderer:**\n```typescript\n// Braille characters give 2x4 dots per cell = high resolution curves\n// placeBraillePoint() sets individual dots in character grid\n// Bezier curves drawn point-by-point through center\n// Result: smooth arcs connecting phages on outer ring\n```\n\n### TUI Visualization\n\n```\nProtein Domain Chord Plot: Lambda + T4 + T7 + P22 + Phi29\n═══════════════════════════════════════════════════════════════════════════════\n\n              Lambda\n                ╱╲\n              ╱    ╲\n           ⡠⠊      ⠑⡄\n         ⡰⠁          ⠑⡄\n       ⡠⠃              ⠘⡄\n      ⡜                  ⠘⡄           Selected: HTH_3 (Helix-turn-helix)\n    ⡰⠁                    ⠑⡄           Found in: Lambda (cI), P22 (c2)\n   ⡜                        ⠘⡄          Function: DNA-binding repressor\n  ⡜                          ⠘⡄\n ⡔    T4                 P22   ⠢⡀\n⡎      ⠑⢄                ⡠⠊      ⠱⡀\n⡇        ⠑⢄            ⡠⠊        ⠱⡀\n⡇          ⠑⢄        ⡠⠊          ⢱\n⡇            ⠑⢄    ⡠⠊            ⢱\n⡇              ⠑⢄⡠⠊              ⢱\n⠘⡄              ⡜               ⡰⠁\n ⠘⡄            ⡜               ⡰⠁\n  ⠘⡄          ⡜               ⡰⠁\n   ⠑⡄        ⡜              ⡰⠁\n    ⠑⡄      ⡜   Phi29     ⡠⠊\n     ⠑⡄    ⡜            ⡠⠊\n       ⠑⡄⡰⠁          ⡠⠊\n         ⠱⡀        ⡠⠊\n           T7───────⠁\n\n───────────────────────────────────────────────────────────────────────────────\n\nDomain Summary:\n┌─────────────┬──────────────────────────────┬────────┬─────────────────┐\n│ Domain      │ Phages                       │ Copies │ Function        │\n├─────────────┼──────────────────────────────┼────────┼─────────────────┤\n│ Phage_cap_E │ Lambda, T4, T7, P22, Phi29   │   8    │ Capsid protein  │\n│ HTH_3       │ Lambda, P22                  │   2    │ DNA binding     │\n│ Phage_tail  │ Lambda, T4, P22              │  12    │ Tail structure  │\n│ DNA_pol_B   │ T4, T7, Phi29                │   3    │ DNA replication │\n│ Peptidase_M │ Lambda, T4, T7, P22          │   4    │ Lysis           │\n└─────────────┴──────────────────────────────┴────────┴─────────────────┘\n\nLegend: ━ Core (all phages)  ─ Common (3-4)  ╌ Rare (2)\n\n[Tab] Cycle domains  [Enter] Show alignment  [F] Filter by clan  [ESC] Exit\n```\n\n### Why This Is Good\n\n1. **Domain-level evolution**: Genes evolve, but domains are truly modular units. Domain sharing reveals deeper relationships.\n2. **Function transfer mechanism**: Which domains spread through phage populations.\n3. **Protein engineering hints**: Domain X appears with domain Y = may function together.\n4. **Beautiful data reduction**: Thousands of genes → dozens of domains → one elegant visualization.\n5. **Novel TUI visualization**: Chord diagrams in terminals are rare; Braille curves push ASCII art boundaries.\n\n### Innovation Assessment\n\n**Novelty: HIGH** - Chord diagrams exist (Circos), but no TUI implementation. ASCII/Braille curve rendering is novel. Interactive domain filtering is new.\n\n**Pedagogical Value: 9/10** - Teaches protein domains, HMM profiles, modular evolution, network visualization.\n\n**Wow Factor: 9/10** - Smooth Braille curves connecting distant phages through shared domains is visually stunning.\n\n### Data Requirements\n- HMMER + Pfam-A database for domain detection (offline preprocessing)\n- Pre-computed domain_hits table in SQLite\n- ~50MB additional data for Pfam profiles","status":"open","priority":3,"issue_type":"feature","created_at":"2025-12-06T23:20:17.342284-05:00","updated_at":"2025-12-06T23:43:59.044724-05:00","dependencies":[{"issue_id":"phage_explorer-ujh","depends_on_id":"phage_explorer-54g","type":"blocks","created_at":"2025-12-06T23:20:17.344679-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-upat","title":"Phase 5: Simulations","description":"## Overview\n\nIntegrate the 6 simulation engines that model phage biology in real-time, allowing users to explore dynamic biological processes.\n\n## Why Simulations Matter\n\nStatic sequence analysis shows **what** a phage is. Simulations show **how** it behaves:\n\n1. **Lysogeny Decision** - Lambda switch between lysis and lysogeny\n2. **Ribosome Traffic** - Translation dynamics and codon effects\n3. **Plaque Formation** - Spatial spread through bacterial lawn\n4. **Evolution** - Mutation and selection over generations\n5. **Infection Kinetics** - Population dynamics during infection\n6. **Packaging Motor** - DNA packaging into capsid\n\nThese simulations make abstract genomic features tangible and educational.\n\n## Current State\n\n### Visualizers (Exist in web)\n- ✅ LysogenyVisualizer - CI/Cro concentration dynamics\n- ✅ RibosomeVisualizer - Ribosome traffic flow\n- ✅ PlaqueVisualizer - 2D cellular automata\n- ✅ EvolutionVisualizer - Phylogenetic replay\n- ✅ TimeControls - Play/pause/speed controls\n\n### Missing\n- ❌ InfectionKineticsVisualizer\n- ❌ PackagingMotorVisualizer\n- ❌ SimulationView - Unified container\n\n### Infrastructure (Exists)\n- ✅ useSimulation hook\n- ✅ SimulationHub overlay\n- ⚠️ Worker integration (partial)\n\n## Technical Components\n\n### 1. SimulationView Container\n\n**What**: Unified view for displaying active simulation\n\n**Features**:\n- Simulation selector (if not from hub)\n- Parameter controls (rate constants, initial conditions)\n- Real-time state display\n- Time controls (play/pause/speed/step)\n- Reset functionality\n\n### 2. Worker Integration\n\n**What**: Connect simulation engines to Web Workers\n\n**Why workers**: Simulations can be CPU-intensive; blocking the main thread kills UI responsiveness\n\n**Pattern**:\n```typescript\n// In worker\nconst sim = new LysogenySimulation(params);\nwhile (running) {\n  sim.step();\n  postMessage({ state: sim.getState() });\n  await sleep(16); // 60fps target\n}\n\n// In component\nconst state = useSimulation('lysogeny', params);\n```\n\n### 3. Missing Visualizers\n\n**InfectionKineticsVisualizer**:\n- Population curves (uninfected, infected, lysed, phage)\n- Phase plane portrait\n- Rate parameter sliders\n\n**PackagingMotorVisualizer**:\n- DNA progress into capsid\n- Motor force dynamics\n- Stall detection\n\n## Simulation Parameters\n\nEach simulation needs parameter UI:\n\n| Simulation | Key Parameters |\n|------------|----------------|\n| Lysogeny | CI/Cro synthesis rates, degradation rates, initial MOI |\n| Ribosome | Elongation rate, initiation rate, codon bias effects |\n| Plaque | Infection rate, burst size, diffusion constant |\n| Evolution | Mutation rate, selection coefficient, population size |\n| Infection | Adsorption rate, latent period, burst size |\n| Packaging | Motor force, friction, DNA length |\n\n## Dependencies\n\n- **Depends on**: Phase 1 (need sequence data for some simulations)\n- **Blocks**: None\n\n## Success Criteria\n\n- [ ] All 6 simulations accessible from SimulationHub\n- [ ] Simulations run in worker (smooth UI)\n- [ ] Can adjust parameters and see effects\n- [ ] TimeControls work (play/pause/speed)\n- [ ] Can reset simulation to initial state\n- [ ] State persists when switching views\n\n## Files to Create/Modify\n\n```\npackages/web/src/\n├── components/\n│   └── SimulationView.tsx                # NEW\n├── components/simulations/\n│   ├── InfectionKineticsVisualizer.tsx   # NEW\n│   └── PackagingMotorVisualizer.tsx      # NEW\n├── workers/\n│   └── simulationWorker.ts               # ENHANCE\n```\n\n## Estimated Complexity: Medium\n\nMost visualizers exist. The challenge is proper worker integration and state synchronization.","status":"open","priority":2,"issue_type":"epic","created_at":"2025-12-08T12:55:01.031175-05:00","updated_at":"2025-12-08T12:55:01.031175-05:00","dependencies":[{"issue_id":"phage_explorer-upat","depends_on_id":"phage_explorer-7y69","type":"blocks","created_at":"2025-12-08T12:55:22.844462-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-v0u5","title":"[WEB-P5] Integrate trigger contexts (loading, idle)","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-07T17:02:32.158573-05:00","updated_at":"2025-12-08T00:07:07.396902-05:00","closed_at":"2025-12-08T00:07:07.396902-05:00","dependencies":[{"issue_id":"phage_explorer-v0u5","depends_on_id":"phage_explorer-l1lc","type":"blocks","created_at":"2025-12-07T17:08:21.993912-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-vd6l","title":"[WEB-P3] Create SimulationHub modal component","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-07T17:01:58.564627-05:00","updated_at":"2025-12-08T00:20:22.061183-05:00","closed_at":"2025-12-08T00:20:22.061183-05:00","dependencies":[{"issue_id":"phage_explorer-vd6l","depends_on_id":"phage_explorer-7bsl","type":"blocks","created_at":"2025-12-07T17:07:33.413672-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-vjxf","title":"[WEB-P4] Implement play/pause/step controls","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-07T17:02:28.709391-05:00","updated_at":"2025-12-07T18:42:47.67411-05:00","closed_at":"2025-12-07T18:42:47.67411-05:00","dependencies":[{"issue_id":"phage_explorer-vjxf","depends_on_id":"phage_explorer-mila","type":"blocks","created_at":"2025-12-07T17:08:25.797829-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-vk9e","title":"[WEB-P6] Add preload hints for critical assets","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-07T17:01:40.934552-05:00","updated_at":"2025-12-07T22:28:58.112313-05:00","closed_at":"2025-12-07T22:28:58.112313-05:00","dependencies":[{"issue_id":"phage_explorer-vk9e","depends_on_id":"phage_explorer-5a2","type":"blocks","created_at":"2025-12-07T17:08:57.244415-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-vp9z","title":"[WEB-P4] Implement timeline scrubbing","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-07T17:02:30.670049-05:00","updated_at":"2025-12-07T18:43:12.163423-05:00","closed_at":"2025-12-07T18:43:12.163423-05:00","dependencies":[{"issue_id":"phage_explorer-vp9z","depends_on_id":"phage_explorer-mila","type":"blocks","created_at":"2025-12-07T17:08:28.250852-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-vru3","title":"Feature: 3D Rendering Overhaul","description":"","notes":"# Feature: 3D Rendering Overhaul\n\n## Executive Summary\n\nA comprehensive overhaul of the 3D molecular structure viewer to address critical usability and visual quality issues.\n\n## Current Problems\n\n1. **Zoom-to-Extents Broken**: Molecules don't auto-fit to viewport (THIRD TIME REQUESTED)\n2. **Poor Atom Coloring**: Ball-and-stick mode uses colors that are hard to distinguish\n3. **Redundant Render Mode**: Cartoon mode is nearly identical to Ribbon\n4. **Missing Phages**: Some catalog phages may not appear with 3D models\n\n## Sub-Tasks\n\n### P0 - Critical\n- `phage_explorer-de4o`: Fix zoom-to-extents auto-fit\n\n### P1 - High Priority\n- `phage_explorer-qm08`: Implement CPK element coloring\n- `phage_explorer-z49z`: Verify all phages have 3D models\n\n### P2 - Normal Priority\n- `phage_explorer-xkxf`: Remove redundant Cartoon mode\n- `phage_explorer-k3l5`: Add functional group visualization\n\n## Technical Context\n\n**File Locations:**\n- Model viewer: `/packages/web/src/components/Model3DView.tsx`\n- Structure loader: `/packages/web/src/visualization/structure-loader.ts`\n- Phage catalog: `/packages/data-pipeline/src/phage-catalog.ts`\n\n**Key Technologies:**\n- Three.js for WebGL rendering\n- React Query for structure fetching\n- RCSB PDB for structure data\n\n## Success Criteria\n\n- [ ] All molecules auto-fit to viewport on load\n- [ ] Atoms clearly distinguishable by element type\n- [ ] Only 3 render modes (Ball-Stick, Ribbon, Surface)\n- [ ] All 12 catalog phages have working 3D models\n- [ ] Functional groups highlighted in complex structures\n\n## Definition of Done\n\nAll sub-tasks completed and tested on multiple phages across different device sizes.","status":"open","priority":1,"issue_type":"feature","created_at":"2025-12-09T11:25:34.423964-05:00","updated_at":"2025-12-09T11:34:11.514737-05:00","dependencies":[{"issue_id":"phage_explorer-vru3","depends_on_id":"phage_explorer-jjq5","type":"blocks","created_at":"2025-12-09T11:26:24.298042-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-vs9k","title":"Pillar 5: Context-Aware Help System","description":"## Smart Explanations That Appear When Relevant\n\n### Philosophy\nInstead of requiring users to seek out help, context-aware explanations appear automatically based on what the user is viewing. This creates a 'just-in-time learning' experience.\n\n### How It Works\n1. **InfoButton Component** - Small [?] icons placed next to technical displays\n2. **ContextPanel Component** - Slides in with relevant explanation\n3. **useContextHelp Hook** - Determines what explanation to show based on current view\n\n### Context Triggers\n\n**When viewing DNA sequence:**\n- What are these letters? (A, T, G, C)\n- Why are some colored differently?\n- What does the position number mean?\n\n**When viewing amino acids:**\n- How did DNA become amino acids?\n- What do the colors represent?\n- What is a reading frame?\n\n**When viewing genes:**\n- What is a gene/ORF?\n- What do start/end positions mean?\n- What is a locus tag?\n\n**When using analysis overlays:**\n- GC Skew: Why does GC content vary? What does skew indicate?\n- Complexity: What is sequence entropy? Why does it matter?\n- Repeats: What are direct/inverted repeats? Why important?\n- HGT: What is horizontal gene transfer?\n- CRISPR: What is CRISPR? How do spacers work?\n- Synteny: What is gene order conservation?\n- Dot Plot: How do I read this matrix?\n\n### Implementation\n\n**ContextPanel Component:**\n- Slides in from right side\n- Title, explanation text, diagrams\n- Links to: glossary terms, full module, visualizer\n- Dismiss button, auto-dismiss on navigation\n\n**InfoButton Component:**\n- Consistent [?] icon style\n- Hover preview (short), click for full panel\n- Only visible in Beginner Mode\n\n**ContextProvider:**\n- Wraps app, tracks current context\n- Provides `showContext(topicId)` function\n- Manages panel open/close state\n\n### Content Structure\nEach context help entry has:\n- `id`: unique identifier\n- `title`: what is this?\n- `shortExplanation`: 1-2 sentences\n- `fullExplanation`: detailed (2-3 paragraphs)\n- `glossaryTerms`: linked terms\n- `relatedModule`: link to foundational module\n- `visualizer`: optional interactive element\n\n### Files to Create\n- packages/web/src/education/context/ContextPanel.tsx\n- packages/web/src/education/context/ContextProvider.tsx\n- packages/web/src/education/components/InfoButton.tsx\n- packages/web/src/education/context/topics/*.ts (content files)\n- packages/web/src/education/hooks/useContextHelp.ts\n\n### Integration Points\n- SequenceView: add info buttons for DNA/AA display\n- GeneMapCanvas: add info for gene annotations\n- Each overlay: add context explanation header\n- ComparisonOverlay: explain metrics\n\n### Why This Pillar Matters\nThis is the 'magic' of Beginner Mode—help appears exactly when needed without the user having to search. It transforms the app from 'tool for experts' to 'learning environment for everyone'.","status":"open","priority":1,"issue_type":"feature","created_at":"2025-12-09T11:41:56.750332-05:00","updated_at":"2025-12-09T11:41:56.750332-05:00","dependencies":[{"issue_id":"phage_explorer-vs9k","depends_on_id":"phage_explorer-ty1n","type":"blocks","created_at":"2025-12-09T11:41:56.751579-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-vs9k","depends_on_id":"phage_explorer-0weo","type":"blocks","created_at":"2025-12-09T11:41:56.753088-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-w71","title":"Layer 2: Prophage Excision Precision Mapper","description":"Layer 2 Analysis: Predict exact attL/attR sites for temperate phages. Find integrase, search for imperfect direct repeats at boundaries. Model excision product. Essential for temperate phage biology.","status":"in_progress","priority":2,"issue_type":"feature","created_at":"2025-12-06T23:13:38.973351-05:00","updated_at":"2025-12-08T20:57:33.429403-05:00","dependencies":[{"issue_id":"phage_explorer-w71","depends_on_id":"phage_explorer-54g","type":"blocks","created_at":"2025-12-06T23:13:38.974873-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-w8e","title":"[WEB-P2] Sparkline Components: Data Visualization","description":"Port sparkline components to canvas. Support thin/dots/waves styles. Peak/valley detection. Threshold highlighting. 5-color gradients.","notes":"Implemented canvas-based Sparkline component with line/dots/wave variants, peak/valley markers, threshold highlighting, 5-stop gradient from theme, and CSS hook; exported in web components.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-07T16:57:49.89983-05:00","updated_at":"2025-12-07T18:22:48.836275-05:00","closed_at":"2025-12-07T18:22:48.836287-05:00","dependencies":[{"issue_id":"phage_explorer-w8e","depends_on_id":"phage_explorer-10p","type":"blocks","created_at":"2025-12-07T17:04:57.030538-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-wae","title":"Advanced: Pan-Phage Latent Space Atlas","description":"Layer 2: Explore a 'phage universe' using genome embeddings that capture composition, motifs, and structural signals. Learn fixed-length vectors for phage genomes via contrastive encoders (BYOL/SimCLR-style), enabling fast nearest-neighbor search beyond ANI/k-mers.\n\n**Build Plan:**\n- Train/finetune contrastive encoder on large phage + host-viral corpora\n- Core in Python (PyTorch + bitsandbytes), export to ONNX\n- Run inference in Bun via ONNX Runtime Web or WASM\n- Precompute embeddings for bundled phages, cache to SQLite\n- Use UMAP/t-SNE (Rust+WASM via umap-js/tsne-rs) for on-device projection\n\n**Why It's Good:**\n- Captures higher-order signals (motif co-occurrence, periodicity, codon bias)\n- Enables 'find me things like this' beyond simple k-mer overlap\n- Shows latent space vs classic metrics (ANI, Mash)\n\n**TUI Visualization:**\n- Interactive 2D 'phage universe' scatter with density shading\n- Keyboard navigation to jump to nearest neighbors\n- Press 'l' to recenter on current phage with animated zoom\n- Hover tooltips show phage metadata\n\nNovelty: 9/10, Pedagogical: 9/10, Cool Factor: 10/10.","notes":"## PAN-PHAGE LATENT SPACE ATLAS (LLM-AUGMENTED)\n\n**Full Implementation from Roadmap**\n\n### Concept\nLearn joint embeddings for genomes and proteomes using k-mer sketches plus protein LM embeddings (ESM/ProtT5). Cluster phages by functional/evolutionary proximity; explain cluster membership with 'semantic diffs.'\n\n### How to Build\n\n**Embeddings:**\n- TS pipeline for k-mer MinHash sketches\n- Python/Rust sidecar for ESM2/ProtT5 protein embeddings (tail fibers, polymerases, repressors)\n- Cache vectors in SQLite/Parquet\n\n**Fusion:**\n- Concatenate or project via PCA/UMAP\n- Rust+WASM or TS (ml-js) for projection to 2D/3D\n- HNSW neighbor index (wasm-hnsw or Rust HNSW)\n\n**Explanations:**\n- For neighbor pairs, surface:\n  - Top k-mer deltas\n  - Domain differences\n  - Codon/AA usage deltas\n\n### TUI Features\n- ASCII UMAP scatterplot with live cursor\n- Select point to list nearest neighbors and 'why' (top domains/k-mers)\n- Glow outliers with novelty scores\n- Toggle layers: genome-only vs protein-LLM fused\n- [L] Recenter on current phage with animated zoom\n- Hover tooltips with phage metadata\n- Density shading for cluster visualization\n\n### Why It's Good\n- Maps 'phage space' blending sequence + functional signals\n- Fast neighbor lookup enables 'find similar' queries\n- Highlights outliers and novelty\n- Shows where different molecular layers agree or disagree\n\n### Implementation Stack\n- MinHash in TS\n- Embeddings via optional Python microservice (ESM2) cached to disk\n- HNSW in Rust+WASM for fast kNN\n- UMAP in Rust (umap-rs) or TS (umap-js)\n- Ink UI for interactive scatter\n\nNovelty: 9/10, Pedagogical: 9/10, Wow Factor: 10/10","status":"open","priority":3,"issue_type":"epic","created_at":"2025-12-06T23:19:10.733099-05:00","updated_at":"2025-12-07T13:22:00.720674-05:00","dependencies":[{"issue_id":"phage_explorer-wae","depends_on_id":"phage_explorer-2g5","type":"blocks","created_at":"2025-12-06T23:19:10.736323-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-wae","depends_on_id":"phage_explorer-54g","type":"blocks","created_at":"2025-12-06T23:19:10.738549-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-wd9q","title":"Build categorized action drawer for touch","description":"","notes":"# Build Categorized Action Drawer for Touch\n\n## Overview\n\nThe action drawer is a bottom sheet that slides up when the FAB is tapped. It provides quick access to common features organized by category.\n\n## Design Specifications\n\n### Container\n- Slides up from bottom of screen\n- Has a drag handle for resize/dismiss\n- Three height states: collapsed (hidden), half-screen, full-screen\n- Semi-transparent backdrop when open\n\n### Layout\n```\n┌─────────────────────────────────────┐\n│  ═══════════════════  (drag handle) │\n├─────────────────────────────────────┤\n│                                     │\n│  VIEW          ANALYSIS      3D     │\n│  ┌──────┐     ┌──────┐   ┌──────┐  │\n│  │ DNA  │     │  GC  │   │ Ball │  │\n│  │      │     │ Skew │   │Stick │  │\n│  └──────┘     └──────┘   └──────┘  │\n│  ┌──────┐     ┌──────┐   ┌──────┐  │\n│  │Amino │     │Kmer  │   │Ribbon│  │\n│  │Acids │     │      │   │      │  │\n│  └──────┘     └──────┘   └──────┘  │\n│  ┌──────┐     ┌──────┐   ┌──────┐  │\n│  │ Dual │     │ More │   │Surface│ │\n│  │      │     │  ⋯   │   │      │  │\n│  └──────┘     └──────┘   └──────┘  │\n│                                     │\n│  [Show All Features...]             │\n└─────────────────────────────────────┘\n```\n\n### Categories\n\n**VIEW (Navigation \u0026 Display)**\n- DNA View\n- Amino Acids View\n- Dual View\n- Cycle Reading Frame\n- Toggle Diff Mode\n\n**ANALYSIS (Overlays)**\n- GC Skew\n- Complexity\n- K-mer Anomaly\n- Promoter/RBS\n- More... (opens Analysis Menu)\n\n**3D (Structure)**\n- Ball \u0026 Stick\n- Ribbon\n- Surface\n- Toggle Rotation\n- Screenshot\n\n**NAVIGATION**\n- Previous Phage\n- Next Phage\n- Jump to Start\n- Jump to End\n- Search\n\n## Component Structure\n\n```tsx\ninterface ActionDrawerProps {\n  isOpen: boolean;\n  onClose: () =\u003e void;\n  onShowAllFeatures: () =\u003e void;\n}\n\ninterface ActionCategory {\n  id: string;\n  label: string;\n  icon?: string;\n  actions: Action[];\n}\n\ninterface Action {\n  id: string;\n  label: string;\n  icon?: string;\n  shortcut?: string;  // Keyboard hint\n  onClick: () =\u003e void;\n  active?: boolean;\n}\n```\n\n## Implementation\n\n### Drawer Container\n\n```tsx\nfunction ActionDrawer({ isOpen, onClose, onShowAllFeatures }: ActionDrawerProps) {\n  const [height, setHeight] = useState\u003c'half' | 'full'\u003e('half');\n  const dragStartY = useRef\u003cnumber\u003e(0);\n\n  const handleDragStart = (e: TouchEvent) =\u003e {\n    dragStartY.current = e.touches[0].clientY;\n  };\n\n  const handleDrag = (e: TouchEvent) =\u003e {\n    const delta = dragStartY.current - e.touches[0].clientY;\n    if (delta \u003e 100) setHeight('full');\n    if (delta \u003c -100) onClose();\n  };\n\n  return (\n    \u003c\u003e\n      {isOpen \u0026\u0026 \u003cdiv className=\"drawer-backdrop\" onClick={onClose} /\u003e}\n      \u003cdiv\n        className={`action-drawer ${isOpen ? 'open' : ''} height-${height}`}\n        role=\"dialog\"\n        aria-label=\"Quick actions\"\n      \u003e\n        \u003cdiv\n          className=\"drawer-handle\"\n          onTouchStart={handleDragStart}\n          onTouchMove={handleDrag}\n        \u003e\n          \u003cdiv className=\"handle-bar\" /\u003e\n        \u003c/div\u003e\n\n        \u003cdiv className=\"drawer-content\"\u003e\n          {categories.map(cat =\u003e (\n            \u003cActionCategory key={cat.id} {...cat} /\u003e\n          ))}\n        \u003c/div\u003e\n\n        \u003cbutton className=\"show-all-btn\" onClick={onShowAllFeatures}\u003e\n          Show All Features...\n        \u003c/button\u003e\n      \u003c/div\u003e\n    \u003c/\u003e\n  );\n}\n```\n\n### Action Button\n\n```tsx\nfunction ActionButton({ action }: { action: Action }) {\n  return (\n    \u003cbutton\n      className={`action-btn ${action.active ? 'active' : ''}`}\n      onClick={action.onClick}\n    \u003e\n      {action.icon \u0026\u0026 \u003cspan className=\"action-icon\"\u003e{action.icon}\u003c/span\u003e}\n      \u003cspan className=\"action-label\"\u003e{action.label}\u003c/span\u003e\n      {action.shortcut \u0026\u0026 (\n        \u003cspan className=\"action-shortcut\"\u003e{action.shortcut}\u003c/span\u003e\n      )}\n    \u003c/button\u003e\n  );\n}\n```\n\n## Styling\n\n```css\n.action-drawer {\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  background: var(--color-surface);\n  border-radius: 16px 16px 0 0;\n  box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.2);\n  transform: translateY(100%);\n  transition: transform 300ms ease-out;\n  z-index: 1000;\n  max-height: 80vh;\n  overflow-y: auto;\n}\n\n.action-drawer.open {\n  transform: translateY(0);\n}\n\n.action-drawer.height-half {\n  max-height: 50vh;\n}\n\n.action-drawer.height-full {\n  max-height: 85vh;\n}\n\n.drawer-handle {\n  padding: 12px;\n  cursor: grab;\n}\n\n.handle-bar {\n  width: 40px;\n  height: 4px;\n  background: var(--color-border);\n  border-radius: 2px;\n  margin: 0 auto;\n}\n\n.drawer-content {\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  gap: 16px;\n  padding: 0 16px 16px;\n}\n\n.action-btn {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 4px;\n  padding: 12px 8px;\n  min-height: 72px;\n  border-radius: 8px;\n  border: 1px solid var(--color-border);\n  background: var(--color-background);\n  cursor: pointer;\n}\n\n.action-btn.active {\n  background: var(--color-accent);\n  color: var(--color-text-on-accent);\n  border-color: var(--color-accent);\n}\n```\n\n## Gesture Handling\n\n### Swipe Down to Dismiss\nVelocity-based dismissal - if swipe velocity \u003e threshold, dismiss even if not at bottom.\n\n### Swipe Up to Expand\nExpand to full height when swiping up.\n\n### Tap Outside to Close\nBackdrop click closes the drawer.\n\n## Files to Create\n\n1. `/packages/web/src/components/controls/ActionDrawer.tsx`\n2. `/packages/web/src/components/controls/ActionDrawer.css`\n3. `/packages/web/src/components/controls/ActionCategory.tsx`\n4. `/packages/web/src/components/controls/ActionButton.tsx`\n\n## Dependencies\n\n- Depends on FAB (phage_explorer-tp98) for trigger\n- Blocks Full Modal (phage_explorer-j4ra)\n\n## Testing\n\n- [ ] Drawer slides up when FAB tapped\n- [ ] Drag handle allows resize\n- [ ] Swipe down dismisses\n- [ ] Actions trigger correct functions\n- [ ] Active states show correctly\n- [ ] Works on iOS Safari (no overscroll issues)\n- [ ] Works on Android Chrome\n- [ ] Backdrop closes drawer on tap\n\n## Definition of Done\n\n- [ ] Drawer opens/closes smoothly\n- [ ] Categories display with action buttons\n- [ ] Active states indicated\n- [ ] Gesture handling works (drag, swipe)\n- [ ] \"Show All Features\" links to full modal\n- [ ] Accessible via screen reader","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-09T11:25:49.883261-05:00","updated_at":"2025-12-09T11:32:54.921834-05:00","dependencies":[{"issue_id":"phage_explorer-wd9q","depends_on_id":"phage_explorer-tp98","type":"blocks","created_at":"2025-12-09T11:26:23.907879-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-wl9","title":"[WEB-P2] WebGL Post-Processing: Visual Effects Pipeline","description":"WebGL shaders for phosphor bloom, scanlines, chromatic aberration. Effect composition pipeline. Performance-safe on low-end devices.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-07T16:57:50.820388-05:00","updated_at":"2025-12-07T22:20:11.200712-05:00","closed_at":"2025-12-07T22:20:11.200712-05:00","dependencies":[{"issue_id":"phage_explorer-wl9","depends_on_id":"phage_explorer-10p","type":"blocks","created_at":"2025-12-07T17:04:57.830475-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-wl9","depends_on_id":"phage_explorer-ltg","type":"blocks","created_at":"2025-12-07T17:05:27.579578-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-wlod","title":"[WEB-P6] Add inline help text throughout app","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-07T17:02:39.707361-05:00","updated_at":"2025-12-08T00:43:30.21942-05:00","closed_at":"2025-12-08T00:43:30.21942-05:00","dependencies":[{"issue_id":"phage_explorer-wlod","depends_on_id":"phage_explorer-gwhv","type":"blocks","created_at":"2025-12-07T17:09:51.147589-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-wlod","depends_on_id":"phage_explorer-td5n","type":"blocks","created_at":"2025-12-07T17:10:07.313563-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-wosg","title":"[WEB-P3] Create OverlayStackManager class","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-07T17:02:21.324991-05:00","updated_at":"2025-12-07T18:27:08.450627-05:00","closed_at":"2025-12-07T18:27:08.450627-05:00","dependencies":[{"issue_id":"phage_explorer-wosg","depends_on_id":"phage_explorer-zld6","type":"blocks","created_at":"2025-12-07T17:07:36.492696-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-wrn5","title":"[WEB-P6] Configure manual chunks for code splitting","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-07T17:01:40.044364-05:00","updated_at":"2025-12-07T22:28:50.721839-05:00","closed_at":"2025-12-07T22:28:50.721839-05:00","dependencies":[{"issue_id":"phage_explorer-wrn5","depends_on_id":"phage_explorer-5a2","type":"blocks","created_at":"2025-12-07T17:08:56.17173-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-wsb","title":"[WEB-P1] Configure partialize for selective persistence","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-07T16:58:37.409039-05:00","updated_at":"2025-12-07T17:55:03.734591-05:00","closed_at":"2025-12-07T17:55:03.734591-05:00","dependencies":[{"issue_id":"phage_explorer-wsb","depends_on_id":"phage_explorer-mul","type":"blocks","created_at":"2025-12-07T17:04:47.116589-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-wtf","title":"Layer 1: Sequence Complexity Overlay [X key]","description":"Layer 1 overlay (X key): Display Kolmogorov complexity (compression ratio) sparkline. Highlights HGT regions (high complexity, unusual composition), repetitive elements (low complexity). Uses pako gzip. Pedagogical: information theory, entropy. Priority: P1.","notes":"Layer1 complexity overlay implemented: gzip sparkline, notable region lists, hotkeys X/Esc, overlay stack wiring","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-06T23:10:40.550053-05:00","updated_at":"2025-12-07T13:00:06.088424-05:00","closed_at":"2025-12-07T13:00:06.088427-05:00","dependencies":[{"issue_id":"phage_explorer-wtf","depends_on_id":"phage_explorer-2g5","type":"blocks","created_at":"2025-12-06T23:10:40.5507-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-wzjl","title":"Phase 7: Polish \u0026 Optimization","description":"Comprehensive optimization, accessibility improvements, progressive disclosure system, and testing infrastructure for production-ready deployment.","status":"open","priority":2,"issue_type":"epic","created_at":"2025-12-08T12:56:41.31592-05:00","updated_at":"2025-12-08T12:56:41.31592-05:00"}
{"id":"phage_explorer-wzjl.1","title":"Implement performance optimizations","description":"Optimize virtual scrolling in SequenceGrid with viewport culling and buffer recycling. Implement LRU cache for analysis results with configurable memory limits. Add Web Worker load balancing for concurrent operations. Implement code splitting for overlays and heavy components with lazy loading. Add performance monitoring and metrics collection. Optimize bundle size with tree shaking and dead code elimination.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-08T12:57:56.091808-05:00","updated_at":"2025-12-08T12:57:56.091808-05:00","dependencies":[{"issue_id":"phage_explorer-wzjl.1","depends_on_id":"phage_explorer-wzjl","type":"parent-child","created_at":"2025-12-08T12:57:56.092539-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-wzjl.1","depends_on_id":"phage_explorer-f5cw","type":"blocks","created_at":"2025-12-08T12:57:56.093586-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-wzjl.1","depends_on_id":"phage_explorer-e8og","type":"blocks","created_at":"2025-12-08T12:57:56.094122-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-wzjl.1","depends_on_id":"phage_explorer-8x0c","type":"blocks","created_at":"2025-12-08T12:57:56.094549-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-wzjl.2","title":"Implement accessibility features","description":"Add comprehensive ARIA labels to all interactive components. Implement screen reader support with live regions for dynamic content updates. Ensure full keyboard-only navigation with visible focus indicators. Add reduced motion support respecting prefers-reduced-motion media query. Implement high contrast mode. Test with NVDA/JAWS screen readers. Ensure WCAG 2.1 AA compliance. Add skip links and landmark regions.","status":"in_progress","priority":2,"issue_type":"feature","created_at":"2025-12-08T12:58:02.862748-05:00","updated_at":"2025-12-08T14:27:13.644185-05:00","dependencies":[{"issue_id":"phage_explorer-wzjl.2","depends_on_id":"phage_explorer-wzjl","type":"parent-child","created_at":"2025-12-08T12:58:02.864123-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-wzjl.3","title":"Implement progressive disclosure","description":"Create user tier system with three levels: novice (simplified UI, tooltips), intermediate (balanced features), and power (all advanced features). Implement session tracking to monitor feature usage patterns. Add feature gating logic to hide advanced features from novice users. Implement tier promotion logic based on usage milestones and explicit user preference. Store tier preference in localStorage. Add settings panel to manually override tier. Include onboarding flow for first-time users.","status":"open","priority":3,"issue_type":"feature","created_at":"2025-12-08T12:58:10.501707-05:00","updated_at":"2025-12-08T12:58:10.501707-05:00","dependencies":[{"issue_id":"phage_explorer-wzjl.3","depends_on_id":"phage_explorer-wzjl","type":"parent-child","created_at":"2025-12-08T12:58:10.503683-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-wzjl.4","title":"Add comprehensive tests","description":"Build comprehensive test suite: Unit tests for all analysis functions (GC content, k-mer, restriction) with edge cases. Component tests for all overlays and UI components using Testing Library. Integration tests for critical user flows (load genome, run analysis, compare genomes). E2E tests with Playwright covering full application workflows. Achieve \u003e80% code coverage. Add CI pipeline integration. Include performance regression tests.","status":"in_progress","priority":2,"issue_type":"task","created_at":"2025-12-08T12:58:16.848675-05:00","updated_at":"2025-12-09T08:22:26.076342-05:00","dependencies":[{"issue_id":"phage_explorer-wzjl.4","depends_on_id":"phage_explorer-wzjl","type":"parent-child","created_at":"2025-12-08T12:58:16.849366-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-x03","title":"[WEB-P0] Create Footer component with key hints","description":"Build Footer component showing contextual keyboard shortcuts and help text","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-07T16:59:05.090365-05:00","updated_at":"2025-12-07T17:33:34.097022-05:00","closed_at":"2025-12-07T17:33:34.097022-05:00","dependencies":[{"issue_id":"phage_explorer-x03","depends_on_id":"phage_explorer-5c4","type":"blocks","created_at":"2025-12-07T17:04:43.008619-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-x03","depends_on_id":"phage_explorer-b4f","type":"blocks","created_at":"2025-12-07T17:05:10.929171-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-x6ff","title":"[WEB-P3] Generate hotkey reference dynamically","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-07T17:02:36.939742-05:00","updated_at":"2025-12-08T00:18:43.232357-05:00","closed_at":"2025-12-08T00:18:43.232357-05:00","dependencies":[{"issue_id":"phage_explorer-x6ff","depends_on_id":"phage_explorer-m31q","type":"blocks","created_at":"2025-12-07T17:07:38.481867-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-x7uu","title":"Create overlay-specific help content","description":"Write beginner-friendly help for each analysis overlay: GC Skew, Complexity, Bendability, Promoters, Repeats, etc. Each entry explains: what it measures, why it matters for phages, how to interpret results, common patterns to look for. Stored as structured data files.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-09T11:46:39.880966-05:00","updated_at":"2025-12-09T11:46:39.880966-05:00","dependencies":[{"issue_id":"phage_explorer-x7uu","depends_on_id":"phage_explorer-rhy7","type":"blocks","created_at":"2025-12-09T11:46:55.812857-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-xhw0","title":"[WEB-P5] Create MatrixRainEffect class","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-07T17:02:28.669641-05:00","updated_at":"2025-12-08T00:06:51.684163-05:00","closed_at":"2025-12-08T00:06:51.684163-05:00","dependencies":[{"issue_id":"phage_explorer-xhw0","depends_on_id":"phage_explorer-l1lc","type":"blocks","created_at":"2025-12-07T17:08:19.323706-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-xivy","title":"Web Feature Parity \u0026 Mobile Excellence","description":"# Epic: Web Feature Parity \u0026 Mobile Excellence\n\n## Executive Summary\n\nThis epic represents the strategic initiative to achieve full feature parity between the TUI and Web versions of Phage Explorer, while simultaneously establishing the Web version as a world-class mobile experience. The goal is not mere replication but intelligent adaptation—leveraging the unique strengths of each platform.\n\n## Background \u0026 Rationale\n\n### Current State Analysis\n\n**TUI (Terminal UI) - 1100+ lines App.tsx**\n- 50+ components, 40+ specialized analysis overlays\n- 6 fully-implemented interactive simulations\n- 56+ keyboard shortcuts across 7 categories\n- Progressive experience system (novice→intermediate→power)\n- Complete genomic analysis toolkit\n\n**Web (Browser) - Current State**\n- 43 overlay types defined, many incomplete\n- 10 simulation types registered, visualizers partial\n- 40+ keyboard shortcuts (good coverage)\n- Mobile support exists but cell sizes problematic\n- Canvas rendering works but needs optimization\n\n### The Gap\n\n1. **Mobile UX**: Cells too small for letters at default zoom; orientation changes not leveraged\n2. **Analysis Overlays**: ~12 overlays incomplete or missing visualizations\n3. **Simulation Visualizers**: 6 simulations need complete visualization components\n4. **Progressive Disclosure**: Experience gating exists in state but not wired to UI\n5. **3D Model**: Quality presets work but mobile-specific optimizations missing\n\n## Strategic Goals\n\n1. **100% Feature Parity**: Every TUI feature accessible via Web\n2. **Mobile-First Excellence**: Touch-optimized, orientation-aware, readable at all sizes\n3. **World-Class UX**: Discoverable, learnable, powerful\n4. **Performance**: 60fps rendering, \u003c100ms interactions, offline-capable\n5. **Accessibility**: WCAG AA compliance, keyboard-only navigation, screen reader support\n\n## Success Metrics\n\n- All 40+ TUI overlays functional in Web\n- All 6 simulations with complete visualizers\n- Mobile NPS \u003e 50 (Net Promoter Score)\n- Lighthouse Performance \u003e 90\n- Time-to-Interactive \u003c 3s on 3G\n\n## Architecture Principles\n\n1. **Shared Core**: Maximum code reuse via @phage-explorer/core\n2. **Platform Adaptation**: TUI-optimized ≠ Web-optimized; adapt intelligently\n3. **Progressive Enhancement**: Core features work without JS; enhanced with it\n4. **Lazy Loading**: Load analysis algorithms on-demand via Web Workers\n5. **Responsive First**: Design mobile, enhance for desktop\n\n## Pillars of Work\n\n### Pillar 1: Mobile Sequence Grid Excellence\nFix the current mobile grid issues and make it genuinely useful for genomic exploration.\n\n### Pillar 2: Responsive \u0026 Orientation-Aware Layout  \nIntelligent layout adaptation for portrait/landscape and all device sizes.\n\n### Pillar 3: Complete Analysis Overlay Parity\nImplement all 40+ TUI overlays with Web-optimized visualizations.\n\n### Pillar 4: Simulation Visualizer Parity\nComplete all 6 simulation visualizers with interactive controls.\n\n### Pillar 5: Keyboard/Command Parity\nEnsure all TUI hotkeys work in Web with proper conflict resolution.\n\n### Pillar 6: Progressive Disclosure \u0026 UX Polish\nWire experience levels to UI, implement onboarding, feature tours.\n\n### Pillar 7: 3D Visualization Parity\nMobile-optimized 3D with LOD, touch controls, quality presets.\n\n### Pillar 8: Performance \u0026 Offline\nService worker optimization, lazy loading, cache strategies.\n\n## Dependencies\n\n- Existing @phage-explorer/core algorithms (complete)\n- Existing @phage-explorer/state store (complete)  \n- Web Workers infrastructure (exists, needs expansion)\n- Canvas rendering system (exists, needs optimization)\n\n## Timeline Estimate\n\nNot providing time estimates per project guidelines. Work should be prioritized by impact and dependencies.\n\n## Risk Factors\n\n1. WebGL/WebGPU compatibility across mobile browsers\n2. Memory constraints on older mobile devices\n3. Touch gesture conflicts with browser gestures\n4. IndexedDB storage limits for large genomes\n","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-09T00:33:27.756677-05:00","updated_at":"2025-12-10T00:43:02.548850778-06:00","closed_at":"2025-12-10T00:43:02.548850778-06:00"}
{"id":"phage_explorer-xkxf","title":"Remove Cartoon 3D rendering mode","description":"","notes":"# Remove Cartoon 3D Rendering Mode\n\n## Problem Statement\n\nThe \"Cartoon\" rendering mode is redundant with \"Ribbon\" mode and provides inferior visual results. Having two nearly-identical options confuses users and adds unnecessary UI complexity.\n\n## Analysis\n\n| Mode | What it renders | Visual style |\n|------|-----------------|--------------|\n| Ball-Stick | Atoms + bonds | Atomic detail |\n| Cartoon | Backbone traces as tubes | Smooth tubes |\n| Ribbon | Backbone traces as tubes | Smooth tubes |\n| Surface | Solvent-accessible surface | Blob-like |\n\nCartoon and Ribbon both use `buildTubeFromTraces()` with nearly identical parameters:\n\n**Cartoon (lines 169-177):**\n```tsx\ngroup = buildTubeFromTraces(\n  data.backboneTraces,\n  0.5,                              // radius\n  qualityPreset.tubeRadialSegments,\n  '#38bdf8',                        // color (sky blue)\n  1,                                // opacity\n  chainColors,\n  qualityPreset.tubeMinSegments\n);\n```\n\n**Ribbon (lines 179-188):**\n```tsx\ngroup = buildTubeFromTraces(\n  data.backboneTraces,\n  0.3,                              // radius (slightly thinner)\n  Math.max(6, qualityPreset.tubeRadialSegments - 2),\n  '#c084fc',                        // color (purple)\n  0.9,                              // opacity (slightly transparent)\n  chainColors,\n  qualityPreset.tubeMinSegments\n);\n```\n\nThe only differences are:\n- Tube radius (0.5 vs 0.3)\n- Default color (sky blue vs purple)\n- Opacity (1.0 vs 0.9)\n\nThese differences don't justify a separate mode.\n\n## Solution\n\n1. Remove 'cartoon' from the RenderMode type\n2. Remove the Cartoon button from the UI toolbar\n3. Remove the cartoon case from rebuildStructure switch\n4. Optionally: Add thickness slider to Ribbon mode for users who want thicker tubes\n\n## Files to Modify\n\n**`/packages/web/src/components/Model3DView.tsx`:**\n- Line 23: Remove 'cartoon' from RenderMode type\n- Lines 169-177: Remove cartoon case\n- Lines 531-543: Remove Cartoon button from toolbar\n\n## UI Before/After\n\n**Before:**\n```\n[Ball-Stick] [Cartoon] [Ribbon] [Surface]\n```\n\n**After:**\n```\n[Ball-Stick] [Ribbon] [Surface]\n```\n\n## Testing\n\n- [ ] Cartoon button no longer appears\n- [ ] Selecting modes still works correctly\n- [ ] No TypeScript errors from removed type\n- [ ] Default mode (ball) still works\n\n## Definition of Done\n\n- [ ] Cartoon mode completely removed from codebase\n- [ ] UI shows only 3 render modes\n- [ ] No console errors or warnings\n- [ ] Ribbon mode remains fully functional","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-09T11:25:47.350232-05:00","updated_at":"2025-12-09T11:42:44.321161-05:00","closed_at":"2025-12-09T11:42:44.321161-05:00","dependencies":[{"issue_id":"phage_explorer-xkxf","depends_on_id":"phage_explorer-vru3","type":"blocks","created_at":"2025-12-09T11:26:23.410837-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-xree","title":"[WEB-P5] Add File System Access API integration","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-07T17:02:21.010835-05:00","updated_at":"2025-12-08T00:08:01.771494-05:00","closed_at":"2025-12-08T00:08:01.771494-05:00","dependencies":[{"issue_id":"phage_explorer-xree","depends_on_id":"phage_explorer-plt8","type":"blocks","created_at":"2025-12-07T17:08:11.211666-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-y07y","title":"Create ContextHelpPanel component","description":"Collapsible sidebar panel that shows relevant help based on current view/selection. Auto-detects context from: active overlay, selected gene, focused track. Shows related terms, mini-explanations, and links to full modules. Maintains scroll position during navigation.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-09T11:46:36.415627-05:00","updated_at":"2025-12-09T11:46:36.415627-05:00","dependencies":[{"issue_id":"phage_explorer-y07y","depends_on_id":"phage_explorer-owsv","type":"blocks","created_at":"2025-12-09T11:46:54.038529-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-y07y","depends_on_id":"phage_explorer-3zpa","type":"blocks","created_at":"2025-12-09T11:46:54.267011-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-y6oz","title":"Pillar 3: Complete Analysis Overlay Parity","description":"","status":"open","priority":1,"issue_type":"feature","created_at":"2025-12-09T00:35:43.573835-05:00","updated_at":"2025-12-09T00:35:43.573835-05:00","dependencies":[{"issue_id":"phage_explorer-y6oz","depends_on_id":"phage_explorer-xivy","type":"blocks","created_at":"2025-12-09T00:37:13.237515-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-ybb","title":"[WEB-P2] Implement thin/dots/waves render styles","description":"","notes":"Sparkline component supports line/dots/wave variants via 'variant' prop; canvas implementation shipped in packages/web/src/components/charts/Sparkline.tsx.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-07T16:58:47.101793-05:00","updated_at":"2025-12-07T20:59:34.649779-05:00","closed_at":"2025-12-07T20:59:34.649779-05:00","dependencies":[{"issue_id":"phage_explorer-ybb","depends_on_id":"phage_explorer-w8e","type":"blocks","created_at":"2025-12-07T17:05:18.109769-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-yfr","title":"[WEB-P2] Add density histogram overlay","description":"","notes":"Added canvas-based Histogram component (bins, density line toggle) and exported; CSS hook added. Ready for overlay integration.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-07T16:58:35.066013-05:00","updated_at":"2025-12-07T20:56:29.912471-05:00","closed_at":"2025-12-07T20:56:29.912471-05:00","dependencies":[{"issue_id":"phage_explorer-yfr","depends_on_id":"phage_explorer-rvg","type":"blocks","created_at":"2025-12-07T17:05:13.621623-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-ygr","title":"Advanced: Phylodynamic Trajectory Explorer","description":"Build time-scaled trees from dated accessions via rate-smoothed NJ or treetime-style regression. Coalescent skyline for Ne(t). dN/dS per branch/window (FEL-like). ASCII tree with skyline plot; genome heat strip for dN/dS; cursor highlights loci. Shows evolutionary tempo and selection hotspots. Novelty: High, Pedagogical: High.","notes":"## PHYLODYNAMIC TRAJECTORY EXPLORER\n\n**Full Implementation from Roadmap**\n\n### Concept\nFor dated accessions, build time-scaled trees and visualize rate shifts, skyline Ne, and rapidly evolving loci with selection signals.\n\n### How to Build\n\n**Time-Scaled Tree:**\n- Lightweight BEAST-like approximation in Rust+WASM\n- Rate-smoothed neighbor-joining\n- Treetime-style root-to-tip regression\n- Infer molecular clock rate\n\n**Skyline Population Dynamics:**\n- Coalescent skyline via interval counts\n- Compute effective population size Ne(t)\n- Credible bands from bootstrap or MCMC-lite\n\n**Selection Mapping:**\n- dN/dS per branch/window (FEL-like fast approximation)\n- Map to genome positions\n- Highlight rapidly evolving loci\n\n**Data Ingest:**\n- Accession dates + sequences\n- Multiple sequence alignment\n- Cache alignments and trees in SQLite\n\n### TUI Features\n- ASCII time-scaled tree with branch lengths\n- Side skyline plot showing Ne over time\n- Genome heat strip for dN/dS values\n- Cursor on tree highlights corresponding loci\n- Rate shift annotations on branches\n- Press 't' to toggle tree/skyline focus\n\n### Why It's Good\n- Shows evolutionary tempo and population expansions\n- Connects time to genome changes\n- Identifies selection hotspots\n- Tracks viral evolution in real time\n\n### Implementation Stack\n- Rust+WASM for clock/regression/selection calculations\n- TS/Ink for tree and skyline rendering\n- SQLite caches for alignments and trees\n- ASCII tree with Unicode box-drawing characters\n\nNovelty: 9/10, Pedagogical: 9/10, Wow Factor: 9/10","status":"open","priority":3,"issue_type":"feature","created_at":"2025-12-07T00:18:17.555845-05:00","updated_at":"2025-12-07T13:26:36.421759-05:00","dependencies":[{"issue_id":"phage_explorer-ygr","depends_on_id":"phage_explorer-ojb","type":"blocks","created_at":"2025-12-07T00:20:54.81647-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-yj08","title":"Fix selection pressure overlay rendering on resize","description":"SelectionPressureOverlay canvas does not redraw on resize, causing stretched/blurred bars. Also risk of zero windows and missing transform reset.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-08T00:43:25.145474-05:00","updated_at":"2025-12-08T00:43:48.993834-05:00","closed_at":"2025-12-08T00:43:48.993834-05:00"}
{"id":"phage_explorer-yrsg","title":"[WEB-P6] TUI Mode Skin: Terminal Purist Option","description":"Maximum terminal authenticity option. Dense scanlines, minimal chrome, high contrast, reduced animations. For terminal purists.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-07T17:01:26.213373-05:00","updated_at":"2025-12-08T00:10:40.060152-05:00","closed_at":"2025-12-08T00:10:40.060152-05:00","dependencies":[{"issue_id":"phage_explorer-yrsg","depends_on_id":"phage_explorer-zsi","type":"blocks","created_at":"2025-12-07T17:07:22.175893-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-ysl","title":"[WEB-P2] Create chromatic aberration shader","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-07T16:58:59.74635-05:00","updated_at":"2025-12-07T22:20:28.533768-05:00","closed_at":"2025-12-07T22:20:28.533768-05:00","dependencies":[{"issue_id":"phage_explorer-ysl","depends_on_id":"phage_explorer-wl9","type":"blocks","created_at":"2025-12-07T17:05:22.879257-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-yt8","title":"[WEB-P2] Create GeneMapCanvas component","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-07T16:58:33.401662-05:00","updated_at":"2025-12-07T18:03:55.862809-05:00","closed_at":"2025-12-07T18:03:55.862809-05:00","dependencies":[{"issue_id":"phage_explorer-yt8","depends_on_id":"phage_explorer-rvg","type":"blocks","created_at":"2025-12-07T17:05:11.333797-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-z3eq","title":"[WEB-P4] Ribosome Traffic Simulation: Polysome Dynamics","description":"Simulate ribosome traffic along mRNA. Codon-by-codon timing, collision detection, density visualization. Worker-based for UI responsiveness.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-07T17:01:24.531067-05:00","updated_at":"2025-12-07T18:43:08.139254-05:00","closed_at":"2025-12-07T18:43:08.139254-05:00","dependencies":[{"issue_id":"phage_explorer-z3eq","depends_on_id":"phage_explorer-sft","type":"blocks","created_at":"2025-12-07T17:07:09.966693-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-z3eq","depends_on_id":"phage_explorer-ru4","type":"blocks","created_at":"2025-12-07T17:08:36.787056-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-z3eq","depends_on_id":"phage_explorer-mila","type":"blocks","created_at":"2025-12-07T17:08:46.093742-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-z49z","title":"Verify all phages have 3D model support","description":"","notes":"# Verify All Phages Have 3D Model Support\n\n## Problem Statement\n\nThe user reported that \"Lambda phage and other important critical phages\" are missing from the web interface. This needs investigation and verification.\n\n## Current State\n\n### Phage Catalog\n**File:** `/packages/data-pipeline/src/phage-catalog.ts`\n\nThe catalog includes 12 phages with PDB IDs:\n\n| Phage | Accession | PDB IDs |\n|-------|-----------|---------|\n| Lambda | NC_001416.1 | 7VI9, 8K35 |\n| T4 | NC_000866.4 | 5VF3 |\n| T7 | NC_001604.1 | 3J4G |\n| PhiX174 | NC_001422.1 | 2BPA |\n| MS2 | NC_001417.2 | 2MS2 |\n| M13 | NC_003287.2 | 2MJZ |\n| P22 | NC_002371.2 | 5UU5 |\n| Phi29 | NC_011048.1 | 1MN8 |\n| Mu | NC_000929.1 | 4FCY, 1WRU, 5YVQ |\n| Phi6 | NC_003714.1 | 4BTG |\n| SPbeta | NC_001884.1 | 5Y24, 6HP7, 5XYB |\n| T5 | NC_005859.1 | 8ZVI, 6OMC, 5TJT |\n\nLambda IS in the catalog. So why isn't it showing?\n\n## Investigation Tasks\n\n### 1. Check Database Build\nVerify the phage.db contains all 12 phages:\n```bash\nbun run build:db\nsqlite3 phage.db \"SELECT name, pdb_ids FROM phages ORDER BY name\"\n```\n\n### 2. Check Web Repository Query\n**File:** `/packages/web/src/db/SqlJsRepository.ts`\n\nVerify `listPhages()` returns all phages:\n```typescript\nconst result = this.db.exec(`\n  SELECT id, name, accession, family, ...\n  FROM phages\n  ORDER BY name\n`);\n```\n\n### 3. Check 3D Model Loading\nFor each phage, verify:\n1. `phage.pdbIds` array is populated\n2. First PDB ID resolves to a valid RCSB URL\n3. Structure loads without error\n\n### 4. RCSB Availability\nSome older PDB entries may have been superseded or removed. Check each PDB ID:\n```bash\nfor pdb in 7VI9 8K35 5VF3 3J4G 2BPA 2MS2 2MJZ 5UU5 1MN8 4FCY 4BTG 5Y24 8ZVI; do\n  curl -s -o /dev/null -w \"%{http_code} $pdb\\n\" https://files.rcsb.org/download/$pdb.pdb\ndone\n```\n\n## Potential Issues\n\n### Issue 1: Database Not Rebuilt\nIf `bun run build:db` hasn't been run after catalog updates, the database may be stale.\n\n### Issue 2: JSON Parsing\nPDB IDs are stored as JSON in SQLite. Check parsing:\n```typescript\npdbIds: safeJsonParse\u003cstring[]\u003e(phage.pdbIds, []),\n```\n\n### Issue 3: Web App Cache\nIndexedDB may have cached an older database version.\n\n## Remediation Steps\n\n1. **Rebuild database:**\n   ```bash\n   rm phage.db\n   bun run build:db\n   ```\n\n2. **Clear web app cache:**\n   - Open DevTools \u003e Application \u003e IndexedDB\n   - Delete phage-explorer database\n   - Reload\n\n3. **Verify all phages load:**\n   - Each phage should appear in the list\n   - Each phage with PDB IDs should show 3D model\n\n## Testing Checklist\n\n- [ ] Lambda phage appears in the list\n- [ ] Lambda 3D model loads (PDB 7VI9 or 8K35)\n- [ ] All 12 catalog phages appear\n- [ ] All 12 phages have working 3D models\n- [ ] No console errors during structure loading\n\n## Definition of Done\n\n- [ ] All 12 catalog phages visible in web UI\n- [ ] All phages with PDB IDs load 3D structures\n- [ ] Any missing/broken PDB IDs replaced with alternatives\n- [ ] Database rebuild script works correctly","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-09T11:25:47.724489-05:00","updated_at":"2025-12-09T11:44:14.817108-05:00","closed_at":"2025-12-09T11:44:14.817108-05:00","dependencies":[{"issue_id":"phage_explorer-z49z","depends_on_id":"phage_explorer-vru3","type":"blocks","created_at":"2025-12-09T11:26:23.617718-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-z62n","title":"Align nonB overlay IDs across menu and overlay","description":"MenuOverlays opens 'non-b-dna' but overlay id/state uses 'nonB', so toggle fails. Fix action to openOverlay('nonB').","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-08T02:05:58.736912-05:00","updated_at":"2025-12-08T02:06:09.325601-05:00","closed_at":"2025-12-08T02:06:09.325601-05:00"}
{"id":"phage_explorer-za7","title":"[WEB-P0] Create Header component with branding and status","description":"Build Header component with app branding, theme selector, and status indicators","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-07T16:59:00.400268-05:00","updated_at":"2025-12-07T17:33:34.006923-05:00","closed_at":"2025-12-07T17:33:34.006923-05:00","dependencies":[{"issue_id":"phage_explorer-za7","depends_on_id":"phage_explorer-5c4","type":"blocks","created_at":"2025-12-07T17:04:42.89891-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-za7","depends_on_id":"phage_explorer-b4f","type":"blocks","created_at":"2025-12-07T17:05:09.826619-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-zk7","title":"[WEB-P2] Implement prefetch in scroll direction","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-07T16:58:26.54055-05:00","updated_at":"2025-12-07T18:01:31.81292-05:00","closed_at":"2025-12-07T18:01:31.81292-05:00","dependencies":[{"issue_id":"phage_explorer-zk7","depends_on_id":"phage_explorer-11b","type":"blocks","created_at":"2025-12-07T17:05:10.357553-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-zk7","depends_on_id":"phage_explorer-qss","type":"blocks","created_at":"2025-12-07T17:05:33.696848-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-zkp","title":"[WEB-P5] Advanced Features: Heavy Analysis \u0026 Novel Capabilities","description":"# Phase 5: Advanced Features (Target: Weeks 9-11)\n\n## Purpose\nImplement computationally intensive analyses and leverage web-only capabilities not available in the TUI.\n\n## Why This Matters\nThese features differentiate the web version from the TUI. WebGPU enables massive parallelism impossible in terminals. WebRTC enables collaboration impossible in local apps. Video export enables sharing impossible without GUIs.\n\n## Deliverables\n1. **Advanced Analysis Overlays** - K-mer, module detection, selection pressure\n2. **WebGPU Acceleration** - GPU k-mer counting, parallel analysis\n3. **Collaborative Sessions** - WebRTC-based real-time collaboration\n4. **Export Capabilities** - Clipboard, FASTA, video, file system\n5. **Matrix Rain Effect** - Background visual effect\n\n## Advanced Analyses\n\n### K-mer Anomaly Cartography\n- High-resolution k-mer frequency deviation\n- Windowed analysis across genome\n- Anomaly highlighting\n\n### Module Detection\n- Functional gene clustering\n- Operon boundary prediction\n- Regulatory region identification\n\n### Selection Pressure (dN/dS)\n- Synonymous vs non-synonymous ratio\n- Per-gene and sliding window\n- Evolutionary pressure visualization\n\n### Transcription Flow\n- Promoter strength mapping\n- Terminator detection\n- Transcription unit visualization\n\n## Web-Only Features\n\n### WebGPU Compute (Feature Flagged)\n```typescript\n// GPU-accelerated k-mer counting\n// 10-100x speedup for large sequences\nasync function gpuKmerCount(sequence, k): Map\u003cstring, number\u003e\n```\n\n### WebRTC Collaboration\n```typescript\nclass CollaborationManager {\n  createSession(): Promise\u003cstring\u003e  // Returns session ID\n  joinSession(id): Promise\u003cvoid\u003e    // Join existing session\n  broadcastStateChange(change): void // Sync with peers\n}\n```\n\n### Export Capabilities\n| Format | API Used |\n|--------|----------|\n| Rich clipboard | Clipboard API (HTML + plain) |\n| FASTA | Clipboard/File System Access |\n| Video | WebCodecs |\n| Files | File System Access API |\n\n### Matrix Rain\n- DNA/amino acid characters\n- Background decoration during loading\n- Configurable density and speed\n\n## Acceptance Criteria\n- [ ] All advanced analyses complete in reasonable time (\u003c30s for 100kb)\n- [ ] Progress streaming shows incremental results\n- [ ] Results match TUI implementation exactly\n- [ ] WebGPU provides measurable speedup (where supported)\n- [ ] Collaboration sessions work between two browsers\n- [ ] All export formats produce valid output\n\n## Browser Support Matrix\n| Feature | Chrome | Firefox | Safari |\n|---------|--------|---------|--------|\n| WebGPU | ✅ | 🚧 | 🚧 |\n| File System Access | ✅ | ❌ | ❌ |\n| WebCodecs | ✅ | 🚧 | ❌ |\n| WebRTC | ✅ | ✅ | ✅ |\n\n## Risks \u0026 Mitigations\n- **Risk**: WebGPU not widely available\n  - **Mitigation**: Feature flag, graceful fallback to WASM\n- **Risk**: File System Access limited support\n  - **Mitigation**: Fall back to download/input elements\n- **Risk**: Collaboration signaling complexity\n  - **Mitigation**: Use simple edge function, not full TURN server\n\n## Dependencies\n- Phase 4 (worker orchestration for heavy compute)\n- Phase 3 (overlays to display results)\n- Edge functions for collaboration signaling","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-07T16:56:18.260261-05:00","updated_at":"2025-12-07T18:47:53.064708-05:00","closed_at":"2025-12-07T18:47:53.064708-05:00","dependencies":[{"issue_id":"phage_explorer-zkp","depends_on_id":"phage_explorer-ee1","type":"blocks","created_at":"2025-12-07T17:04:37.94694-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-zkp","depends_on_id":"phage_explorer-sft","type":"blocks","created_at":"2025-12-07T17:04:39.072129-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-zld6","title":"[WEB-P3] Overlay Stack Manager: Multi-Overlay Coordination","description":"Manage multiple overlays with z-indexing, focus trapping, priority sorting. Support modal blocking behavior.","status":"closed","priority":0,"issue_type":"feature","created_at":"2025-12-07T17:01:27.466238-05:00","updated_at":"2025-12-07T21:09:28.169078-05:00","closed_at":"2025-12-07T21:09:28.169078-05:00","dependencies":[{"issue_id":"phage_explorer-zld6","depends_on_id":"phage_explorer-ee1","type":"blocks","created_at":"2025-12-07T17:07:14.033813-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-zqf","title":"[WEB-P2] Add gene labels with collision avoidance","description":"","notes":"GeneMapRenderer labels now do greedy collision avoidance (two rows, bounding-box checks) and skip tiny genes; improves readability.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-07T16:58:37.046117-05:00","updated_at":"2025-12-08T00:07:04.952886-05:00","closed_at":"2025-12-08T00:07:04.952886-05:00","dependencies":[{"issue_id":"phage_explorer-zqf","depends_on_id":"phage_explorer-rvg","type":"blocks","created_at":"2025-12-07T17:05:16.257112-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-zrf1","title":"[WEB-P5] Create fallback download for unsupported browsers","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-07T17:02:22.125984-05:00","updated_at":"2025-12-08T00:08:11.432481-05:00","closed_at":"2025-12-08T00:08:11.432481-05:00","dependencies":[{"issue_id":"phage_explorer-zrf1","depends_on_id":"phage_explorer-plt8","type":"blocks","created_at":"2025-12-07T17:08:12.46576-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-zsi","title":"[WEB-P6] Polish \u0026 Launch: Quality, Accessibility \u0026 Documentation","description":"# Phase 6: Polish \u0026 Launch (Target: Weeks 11-13)\n\n## Purpose\nFinal quality pass before public launch. Performance optimization, accessibility compliance, onboarding experience, and documentation.\n\n## Why This Matters\nFirst impressions matter. A slow, inaccessible, or confusing launch destroys user trust. This phase ensures the app is polished, inclusive, and welcoming.\n\n## Deliverables\n1. **Performance Audit** - Lighthouse 90+, bundle optimization\n2. **Accessibility Review** - WCAG 2.1 AA compliance\n3. **First-Run Onboarding** - Welcome flow and tour\n4. **TUI Mode Skin** - Terminal purist option\n5. **Error Handling** - Boundaries, recovery, telemetry\n6. **Documentation** - User guide, developer docs\n\n## Performance Targets\n| Metric | Target |\n|--------|--------|\n| First Contentful Paint | \u003c1.0s |\n| Largest Contentful Paint | \u003c1.5s |\n| Time to Interactive | \u003c2.0s |\n| Cumulative Layout Shift | \u003c0.1 |\n| Lighthouse Performance | \u003e90 |\n\n## Accessibility Requirements\n\n### WCAG 2.1 AA Compliance\n- [ ] Color contrast ratios meet 4.5:1 minimum\n- [ ] All interactive elements keyboard accessible\n- [ ] Focus indicators visible and consistent\n- [ ] Screen reader announces all content\n- [ ] Reduced motion mode available\n- [ ] High contrast theme available\n\n### Implementation\n```\n- ARIA labels on all interactive elements\n- Focus trap in modals\n- Skip navigation link\n- Semantic HTML structure\n- Announce dynamic content changes\n```\n\n## Onboarding Experience\n\n### First-Run Flow\n1. Welcome modal with app overview\n2. Experience level selection (Novice/Intermediate/Power)\n3. Feature tour highlighting key interactions\n4. Quick keyboard shortcut primer\n5. Sample phage loaded for exploration\n\n### Progressive Discovery\n- Tooltips on first hover of each element\n- Context-sensitive help (? key)\n- \"What's new\" for returning users\n\n## TUI Mode\nFor terminal purists:\n- Maximum scanline intensity\n- Reduced animations\n- Pure monospace aesthetic\n- Minimal chrome\n- High contrast by default\n\n## Error Handling\n```typescript\nclass ErrorBoundary extends React.Component {\n  componentDidCatch(error, errorInfo) {\n    // Log to telemetry\n    // Show recovery UI\n    // Offer \"Report Bug\" action\n  }\n}\n```\n\n## Acceptance Criteria\n- [ ] Lighthouse score \u003e90 in all categories\n- [ ] Screen reader fully navigable\n- [ ] Keyboard-only usage possible\n- [ ] Error states are graceful and helpful\n- [ ] Cold start \u003c2s on broadband\n- [ ] Documentation covers all features\n- [ ] First-run experience is welcoming\n\n## Launch Checklist\n- [ ] DNS configured for phage-explorer.com (or similar)\n- [ ] Vercel deployment verified\n- [ ] Analytics/telemetry operational\n- [ ] Error monitoring active\n- [ ] Social preview images set\n- [ ] GitHub repo linked\n- [ ] Announcement prepared\n\n## Risks \u0026 Mitigations\n- **Risk**: Accessibility issues missed\n  - **Mitigation**: Use axe, WAVE, real screen reader testing\n- **Risk**: Performance regression at launch\n  - **Mitigation**: Continuous Lighthouse CI, bundle size alerts\n- **Risk**: Onboarding too complex\n  - **Mitigation**: User testing, iterate on flow\n\n## Dependencies\n- All previous phases complete\n- Content for documentation\n- Analytics infrastructure decision","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-07T16:56:19.660756-05:00","updated_at":"2025-12-08T00:09:32.878127-05:00","closed_at":"2025-12-08T00:09:32.878127-05:00","dependencies":[{"issue_id":"phage_explorer-zsi","depends_on_id":"phage_explorer-87z","type":"blocks","created_at":"2025-12-07T17:04:40.335269-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-zsi","depends_on_id":"phage_explorer-pml","type":"blocks","created_at":"2025-12-07T17:04:41.205589-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-zsi","depends_on_id":"phage_explorer-10p","type":"blocks","created_at":"2025-12-07T17:04:42.022109-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-zsi","depends_on_id":"phage_explorer-ee1","type":"blocks","created_at":"2025-12-07T17:04:42.85212-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-zsi","depends_on_id":"phage_explorer-sft","type":"blocks","created_at":"2025-12-07T17:04:43.949117-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-zsi","depends_on_id":"phage_explorer-zkp","type":"blocks","created_at":"2025-12-07T17:04:45.058902-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-zuiv","title":"Add touch gesture support swipe pinch long-press","description":"","notes":"# Add Touch Gesture Support (Swipe, Pinch, Long-Press)\n\n## Overview\n\nImplement comprehensive touch gesture support across the web app to enable intuitive mobile navigation and interaction.\n\n## Gesture Types\n\n### 1. Swipe Gestures\n\n**Horizontal Swipe (on sequence view)**\n- Swipe left: Scroll sequence forward\n- Swipe right: Scroll sequence backward\n- Velocity-based: Fast swipe = momentum scrolling\n\n**Horizontal Swipe (on phage list)**\n- Swipe left on item: Quick actions (compare, details)\n- Swipe right on item: Mark/favorite\n\n**Vertical Swipe (on drawer)**\n- Swipe up: Expand drawer\n- Swipe down: Dismiss drawer\n\n### 2. Pinch Gestures\n\n**Pinch on sequence view**\n- Pinch in: Zoom out (see more bases)\n- Pinch out: Zoom in (see fewer bases, larger)\n- Center zoom on pinch midpoint\n\n**Pinch on 3D view**\n- Pinch in: Zoom camera out\n- Pinch out: Zoom camera in\n\n### 3. Long-Press Gestures\n\n**Long-press on amino acid**\n- Show amino acid HUD with detailed information\n- Hold to keep visible, release to dismiss\n\n**Long-press on FAB**\n- Open full feature modal directly\n\n**Long-press on phage in list**\n- Show context menu (compare, export, details)\n\n### 4. Two-Finger Gestures\n\n**Two-finger pan on 3D view**\n- Pan/rotate the molecule\n\n**Two-finger rotate on 3D view**\n- Rotate molecule around center\n\n## Implementation Strategy\n\n### Gesture Detection Library Options\n\n1. **hammer.js** - Popular, feature-rich, but large (7KB gzip)\n2. **use-gesture** (from react-spring) - React hooks, tree-shakeable\n3. **Custom implementation** - Smallest, full control\n\n**Recommendation**: Use `@use-gesture/react` for React integration and tree-shaking.\n\n### Custom Gesture Hook\n\n```typescript\ninterface GestureState {\n  type: 'swipe' | 'pinch' | 'longpress' | 'pan' | 'rotate';\n  direction?: 'left' | 'right' | 'up' | 'down';\n  velocity?: { x: number; y: number };\n  scale?: number;  // For pinch\n  rotation?: number;  // For rotate\n  center?: { x: number; y: number };\n  delta?: { x: number; y: number };\n}\n\ninterface UseGestureOptions {\n  onSwipe?: (state: GestureState) =\u003e void;\n  onPinch?: (state: GestureState) =\u003e void;\n  onLongPress?: (state: GestureState) =\u003e void;\n  onPan?: (state: GestureState) =\u003e void;\n  swipeThreshold?: number;\n  longPressThreshold?: number;\n}\n\nfunction useGestures(ref: RefObject\u003cHTMLElement\u003e, options: UseGestureOptions) {\n  useEffect(() =\u003e {\n    const element = ref.current;\n    if (!element) return;\n\n    let touchStart: Touch | null = null;\n    let touchStartTime = 0;\n    let longPressTimer: number | null = null;\n\n    const handleTouchStart = (e: TouchEvent) =\u003e {\n      touchStart = e.touches[0];\n      touchStartTime = Date.now();\n\n      // Long press detection\n      if (options.onLongPress) {\n        longPressTimer = window.setTimeout(() =\u003e {\n          options.onLongPress?.({\n            type: 'longpress',\n            center: { x: touchStart!.clientX, y: touchStart!.clientY },\n          });\n        }, options.longPressThreshold ?? 500);\n      }\n    };\n\n    const handleTouchEnd = (e: TouchEvent) =\u003e {\n      if (longPressTimer) clearTimeout(longPressTimer);\n\n      if (!touchStart) return;\n\n      const touchEnd = e.changedTouches[0];\n      const dx = touchEnd.clientX - touchStart.clientX;\n      const dy = touchEnd.clientY - touchStart.clientY;\n      const dt = Date.now() - touchStartTime;\n\n      // Swipe detection\n      const threshold = options.swipeThreshold ?? 50;\n      const velocity = { x: dx / dt, y: dy / dt };\n\n      if (Math.abs(dx) \u003e threshold || Math.abs(dy) \u003e threshold) {\n        const direction = Math.abs(dx) \u003e Math.abs(dy)\n          ? dx \u003e 0 ? 'right' : 'left'\n          : dy \u003e 0 ? 'down' : 'up';\n\n        options.onSwipe?.({\n          type: 'swipe',\n          direction,\n          velocity,\n          delta: { x: dx, y: dy },\n        });\n      }\n\n      touchStart = null;\n    };\n\n    // Pinch detection (requires touch-action: none)\n    let initialDistance = 0;\n\n    const handleTouchMove = (e: TouchEvent) =\u003e {\n      if (e.touches.length === 2 \u0026\u0026 options.onPinch) {\n        const t1 = e.touches[0];\n        const t2 = e.touches[1];\n        const distance = Math.hypot(t2.clientX - t1.clientX, t2.clientY - t1.clientY);\n\n        if (initialDistance === 0) {\n          initialDistance = distance;\n        } else {\n          const scale = distance / initialDistance;\n          const center = {\n            x: (t1.clientX + t2.clientX) / 2,\n            y: (t1.clientY + t2.clientY) / 2,\n          };\n\n          options.onPinch?.({\n            type: 'pinch',\n            scale,\n            center,\n          });\n        }\n      }\n    };\n\n    element.addEventListener('touchstart', handleTouchStart);\n    element.addEventListener('touchend', handleTouchEnd);\n    element.addEventListener('touchmove', handleTouchMove);\n\n    return () =\u003e {\n      element.removeEventListener('touchstart', handleTouchStart);\n      element.removeEventListener('touchend', handleTouchEnd);\n      element.removeEventListener('touchmove', handleTouchMove);\n      if (longPressTimer) clearTimeout(longPressTimer);\n    };\n  }, [ref, options]);\n}\n```\n\n## Integration Points\n\n### SequenceView\n\n```tsx\nfunction SequenceView() {\n  const containerRef = useRef\u003cHTMLDivElement\u003e(null);\n\n  useGestures(containerRef, {\n    onSwipe: ({ direction, velocity }) =\u003e {\n      if (direction === 'left') scrollForward(velocity.x);\n      if (direction === 'right') scrollBackward(-velocity.x);\n    },\n    onPinch: ({ scale, center }) =\u003e {\n      zoomAtPoint(scale, center);\n    },\n    onLongPress: ({ center }) =\u003e {\n      const aa = getAminoAcidAtPoint(center);\n      if (aa) showAminoAcidHUD(aa, center);\n    },\n  });\n\n  return \u003cdiv ref={containerRef}\u003e...\u003c/div\u003e;\n}\n```\n\n### 3D View\n\n```tsx\nfunction Model3DView() {\n  const containerRef = useRef\u003cHTMLDivElement\u003e(null);\n\n  useGestures(containerRef, {\n    onPinch: ({ scale }) =\u003e {\n      camera.zoom *= scale;\n      camera.updateProjectionMatrix();\n    },\n    onPan: ({ delta }) =\u003e {\n      // Two-finger pan\n      controls.pan(delta.x, delta.y);\n    },\n  });\n}\n```\n\n## CSS Requirements\n\n```css\n/* Prevent browser default gestures */\n.gesture-container {\n  touch-action: none;  /* Full control over touch */\n}\n\n.sequence-view {\n  touch-action: pan-y;  /* Allow vertical scroll, capture horizontal */\n}\n\n.three-container {\n  touch-action: none;  /* Full control for 3D manipulation */\n}\n\n/* Prevent text selection during gestures */\n.gesture-active {\n  user-select: none;\n  -webkit-user-select: none;\n}\n```\n\n## Browser Considerations\n\n### iOS Safari\n- `touch-action: manipulation` prevents 300ms delay\n- `-webkit-overflow-scrolling: touch` for momentum\n- Watch for double-tap-to-zoom conflicts\n\n### Android Chrome\n- `touch-action` well-supported\n- Consider `overscroll-behavior` for nested scrolling\n\n## Files to Create/Modify\n\n1. **New:** `/packages/web/src/hooks/useGestures.ts`\n2. **Modify:** `/packages/web/src/components/SequenceView.tsx`\n3. **Modify:** `/packages/web/src/components/Model3DView.tsx`\n4. **Modify:** `/packages/web/src/styles.css` (touch-action rules)\n\n## Testing\n\n- [ ] Horizontal swipe scrolls sequence\n- [ ] Pinch zooms sequence view\n- [ ] Long-press shows amino acid HUD\n- [ ] 3D view responds to pinch zoom\n- [ ] No conflicts with browser gestures\n- [ ] Works on iOS Safari\n- [ ] Works on Android Chrome\n- [ ] No accidental triggers\n\n## Definition of Done\n\n- [ ] Swipe gestures work on sequence view\n- [ ] Pinch zoom works on sequence and 3D views\n- [ ] Long-press triggers appropriate actions\n- [ ] Gesture conflicts resolved with browser\n- [ ] Smooth 60fps gesture response\n- [ ] Touch-action CSS properly configured","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-09T11:25:50.061739-05:00","updated_at":"2025-12-09T11:32:55.142012-05:00","dependencies":[{"issue_id":"phage_explorer-zuiv","depends_on_id":"phage_explorer-jvl7","type":"blocks","created_at":"2025-12-09T11:26:23.837666-05:00","created_by":"daemon"}]}
