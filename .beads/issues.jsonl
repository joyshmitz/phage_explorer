{"id":"phage_explorer-022","title":"Layer 1: GC Skew Replication Origin Overlay [G key]","description":"Layer 1 overlay (G key): Display cumulative GC skew sparkline with origin (minimum) and terminus (maximum) markers. O(n) scan, pure TypeScript. Reveals replication mode (theta vs rolling circle). Pedagogical value: 9/10. Priority: P0 - fundamental biology, low effort, high impact.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-06T23:10:40.281601-05:00","updated_at":"2025-12-07T00:00:32.736858-05:00","closed_at":"2025-12-07T00:00:32.736858-05:00","dependencies":[{"issue_id":"phage_explorer-022","depends_on_id":"phage_explorer-2g5","type":"blocks","created_at":"2025-12-06T23:10:40.28282-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-0k6","title":"Layer 3: Temporal Evolution Replay","description":"## Temporal Evolution Replay (Layer 3 Simulation)\n\n### Concept\n\nEvolution is not a photograph — it's a **movie**. When we have multiple isolates of related phages collected over time (e.g., longitudinal coevolution studies, historical laboratory stocks), we can reconstruct **how the genome changed through time**.\n\nThis feature creates an **animated time-lapse of evolution**, showing:\n- When and where each mutation appeared\n- How **effective population size (Ne)** changed (population dynamics)\n- The **substitution rate** (molecular clock calibration)\n- Branches where lineages diverged\n\nThe key mathematical tool is the **dated phylogenetic tree** — a tree where branch lengths are calibrated to real time rather than genetic distance. Combined with ancestral sequence reconstruction, we can \"play back\" evolution.\n\n### Mathematical Foundations\n\n**Molecular Clock Hypothesis:**\n```\nSubstitutions accumulate at roughly constant rate:\n  genetic_distance ≈ μ × t × 2  (for two taxa)\nWhere:\n  μ = substitution rate (subs/site/year)\n  t = divergence time\nFor phages: μ ≈ 10⁻⁵ to 10⁻³ subs/site/year (much faster than most organisms)\n```\n\n**Root-to-tip Regression (clock test):**\n```\nFor each taxon i with sampling date tᵢ:\n  dᵢ = genetic distance from root to tip\nLinear regression: dᵢ = μ × tᵢ + c\nGood clock: R² \u003e 0.8, p \u003c 0.05\ntMRCA = -c / μ (time to most recent common ancestor)\n```\n\n**Least-Squares Dating (LSD2 algorithm):**\n```\nGiven unrooted tree T with branch lengths and tip dates {t₁...tₙ}:\nMinimize: Σᵢⱼ (dᵢⱼ - |tᵢ - tⱼ|×μ)²\nSubject to: all internal node dates \u003c descendant dates\nOutput: Dated tree with internal node dates\n```\n\n**Coalescent Skyline (Population Dynamics):**\n```\nE[waiting time for k → k-1 lineages] = Ne × 2 / (k(k-1))\nSkyline plot: Estimate Ne at each coalescent interval\nReveals population crashes (bottlenecks) and expansions\n```\n\n**Ancestral Sequence Reconstruction (Felsenstein):**\n```\nMaximum Likelihood at each internal node:\nP(node = A) = Σₓ P(left=x|node=A) × P(right=y|node=A) × P(A→x) × P(A→y)\nMarginal reconstruction: Most likely state at each position\n```\n\n### Implementation Approach\n\n**Core interfaces:**\n```typescript\ninterface DatedSequence {\n  id: string;\n  sequence: string;\n  collectionDate: Date;\n  location?: string;\n}\n\ninterface ClockAnalysis {\n  rate: number;              // subs/site/year\n  rateCI: [number, number];  // 95% CI\n  tmrca: Date;               // Time to MRCA\n  r2: number;                // Regression fit\n  clockLike: boolean;        // Is clock model appropriate?\n}\n\ninterface DatedTree {\n  tree: NewickTree;\n  nodeHeights: Map\u003cstring, number\u003e;  // Node ID -\u003e date\n  rate: number;\n}\n\ninterface AncestralReconstruction {\n  nodeSequences: Map\u003cstring, string\u003e;\n  mutations: MutationEvent[];\n  confidence: Map\u003cstring, Float32Array\u003e;\n}\n\ninterface EvolutionFrame {\n  time: number;\n  displayDate: string;\n  sequence: string;\n  mutations: { position: number; from: string; to: string }[];\n  activeBranches: string[];\n  neAtTime: number;\n  cumulativeMutations: number;\n}\n```\n\n**Animation frame generator** yields frames for smooth playback with mutations appearing at interpolated times.\n\n### TUI Visualization\n\n```\nTemporal Evolution Replay: Lambda isolates (1950-2020)\n═══════════════════════════════════════════════════════════════════════════════\n\nTime: ████████████████░░░░░░░░░░░░░░  1985-03-12\n      1950                     2020\n\nTree (branches alive highlighted):\n                ┌──● Lambda-1950 (ancestor)\n            ┌───┤\n        ┌───┤   └──○ Lambda-1962\n    ────┤   └──────────● Lambda-1985 ← YOU ARE HERE\n        └──────────────────○ Lambda-2020 (future)\n\nSequence at 1985-03-12:\nPosition:  12450  12451  12452  12453\nAncestral:   A      T      G      C\nCurrent:     A      T      C*     C    ← MUTATION! G→C (1983-08-21)\n\nMutation Timeline:\n     ╭─[G12452C]──[A3891T]──[T28103C]─────────────────────────╮\n1950 ┼──────○────────○──────────○──────────────────────────────┤ 2020\n\nEffective Population Size (Ne):\n       10⁶ ┤    ╭──────╮\n       10⁵ ┤────╯      ╰──╮                ╭──────────╮\n       10⁴ ┤               ╰────────────────╯          ╰────────\n           1950         1970         1990         2010\n\n[Space] Play/Pause  [←/→] Step  [+/-] Speed  [R] Reset  [ESC] Exit\n```\n\n### Why This Is Good\n\n1. **Time is the hidden dimension**: Most tools show genetic distance, not time. Biologists think in years.\n2. **Coevolution studies**: Phage-bacteria arms races occur over weeks to months. Animation reveals dynamics.\n3. **Outbreak forensics**: For phage therapy monitoring, knowing *when* resistance arose helps understand failures.\n4. **Educational power**: Nothing conveys \"evolution is ongoing\" like watching mutations accumulate.\n5. **Population dynamics**: Ne skyline reveals bottlenecks and expansions — demographic history of the phage.\n\n### Innovation Assessment\n\n**Novelty: HIGH** - Time-tree tools exist (BEAST, TreeTime, LSD2), but no interactive animated TUI visualization. \"Time scrubber\" interface is completely novel.\n\n**Pedagogical Value: 10/10** - Teaches molecular clocks, phylogenetic dating, coalescent theory, ancestral reconstruction, population dynamics.\n\n**Wow Factor: 10/10** - Watching mutations appear one by one as timeline advances — seeing the \"ghost\" of ancestral sequence transform into modern isolate — is genuinely mesmerizing.\n\n### Data Requirements\n- Multiple dated isolate sequences (FASTA + dates)\n- At least 5-10 isolates spanning time range\n- Good temporal signal (clock-like evolution)","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-06T23:17:53.647084-05:00","updated_at":"2025-12-07T13:42:40.50014-05:00","closed_at":"2025-12-07T13:42:40.50014-05:00","dependencies":[{"issue_id":"phage_explorer-0k6","depends_on_id":"phage_explorer-ojb","type":"blocks","created_at":"2025-12-06T23:17:53.649358-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-0qa","title":"Layer 2: Self-Homology Dot Plot","description":"Compare genome against itself to reveal internal structure: direct repeats (parallel diagonals), inverted repeats/hairpins (perpendicular lines), tandem duplications, and palindromes. Uses k-mer indexing for efficient O(n×k + matches×w) computation. Braille-character rendering for high resolution. Essential for finding terminal repeats, att sites, regulatory palindromes. Novelty: 5/10, Pedagogical: 9/10, Cool Factor: 7/10.","notes":"## SELF-HOMOLOGY DOT PLOT (MATRIX)\n\n**Comprehensive Feature Specification from Roadmap**\n\n### Concept\nCompare a genome against itself to reveal internal structure. X-axis and Y-axis both represent the genome; dots at (x,y) indicate sequence at position x matches sequence at position y.\n\n**Pattern Interpretation**:\n- Main diagonal: Always solid (self-match)\n- Parallel diagonal lines: Direct repeats (duplicated sequences, same orientation)\n- Perpendicular lines: Inverted repeats (hairpin/stem-loop structures)\n- Short perpendicular streaks: Palindromes\n- Dense clusters: Repeat-rich regulatory regions\n- Empty regions: Unique sequences with no internal homology\n\n**Why This Matters for Phages**:\n- Terminal repeats: Many phages have DTRs for circularization\n- Attachment sites (attP/attB): Contain inverted repeats for integrases\n- Regulatory palindromes: Operator sequences for homodimer binding\n- Recombination hotspots: Repeated sequences facilitate rearrangements\n\n### Mathematical Foundations\n\n**Window-Based Matching**:\nMatch(i, j, w) = true if similarity(S[i:i+w], S[j:j+w]) \u003e= threshold\n\nCommon measures:\n- Exact: count identical positions \u003e= threshold\n- Hamming: (w - hamming_distance) / w \u003e= threshold\n- BLOSUM: substitution matrix score (for proteins)\n\nTypical: window w = 10-20 bp, threshold = 80-90% identity\n\n**Efficient Computation**:\nNaive: O(n^2 × w)\nBetter: Hash-based k-mer indexing\n1. Build hash table of all k-mers and positions\n2. All position pairs for each k-mer are potential matches\n3. Extend matches to full window\nComplexity: O(n × k) + O(matches × w)\n\n**Inverted Repeat Detection**:\nCompare position i with reverse_complement(j)\nWatson-Crick: A\u003c-\u003eT, C\u003c-\u003eG\nExample: reverse_complement(\"GAATTC\") = \"GAATTC\" (palindrome!)\n\n### Implementation\n\n**Core Interfaces**:\n```typescript\ninterface DotPlotConfig {\n  windowSize: number;      // Minimum match length\n  threshold: number;       // Minimum similarity (0-1)\n  maxDots: number;         // Limit for display\n  includeInverted: boolean; // Detect inverted repeats\n}\n\ninterface Match {\n  x: number;\n  y: number;\n  length: number;\n  inverted: boolean;\n}\n```\n\n**computeDotPlot()**: Build k-mer index, find matches, extend, detect inverted repeats via reverse complement index\n\n**reverseComplement()**: A\u003c-\u003eT, C\u003c-\u003eG, reverse string\n\n**renderDotPlotBraille()**: Convert matches to Braille character grid for 8x resolution boost\n\n### TUI Visualization\n\n```\n╭───────────────────────────────────────────────────────────────────────────╮\n│  SELF-HOMOLOGY DOT PLOT: Lambda Phage (48,502 bp)                        │\n├───────────────────────────────────────────────────────────────────────────┤\n│  Window: 15 bp | Threshold: 85% | ● Direct | ○ Inverted                  │\n│                                                                           │\n│      0kb       10kb      20kb      30kb      40kb      48kb              │\n│  0   ┌──────────────────────────────────────────────────────┐ 0          │\n│      │⣿⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀│            │\n│      │⠀⣿⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀│            │\n│ 20   │⠀⠀⠀⠀⠀⣿⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠈⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀│            │\n│      │⠀⠀⠀⠀⠀⠀⣿⣀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠈⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀│ attP site │\n│ 40   │⠀⠀⠀⠀⠀⠀⠀⠀⣿⠀⠀⠀⠀⠀⠀⠈⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀│ (inverted) │\n│ 48   │⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣿⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣀⣿⣿⠀⠀⠀⠀⠀⠀│ cos (direct) │\n│      └──────────────────────────────────────────────────────┘ 48         │\n│                                                                           │\n│  Detected: 2 inverted repeats (attP), 1 direct repeat (cos termini)      │\n│  [+/-] Zoom  [W] Window  [T] Threshold  [I] Toggle inverted  [ESC] Exit  │\n╰───────────────────────────────────────────────────────────────────────────╯\n```\n\n### Assessment\n- Novelty: 5/10 - Standard tool, but Braille TUI and phage-specific context valuable\n- Pedagogical: 9/10 - Teaches sequence comparison, repeat biology, pattern recognition\n- Cool Factor: 7/10 - Seeing genome structure in one image is powerful\n\n### Files\n- packages/tui/src/components/DotPlotView.tsx\n- packages/core/src/analysis/dot-plot.ts\n- packages/core/src/analysis/repeat-finder.ts","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-06T23:14:47.63539-05:00","updated_at":"2025-12-07T00:07:04.836264-05:00","dependencies":[{"issue_id":"phage_explorer-0qa","depends_on_id":"phage_explorer-54g","type":"blocks","created_at":"2025-12-06T23:14:47.636771-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-0qu","title":"Advanced: Prophage Integration Site \u0026 Excision Risk Explorer","description":"Score attB hot spots, classify tyrosine/serine integrases via HMMER, search for DR/imperfect repeats near tRNA/tmRNA. Risk scoring via symmetry/mismatch penalties and recombination likelihood. Genome heatmap of att likelihood with per-site cards showing attL/attR/attP/attB reconstruction. Novelty: Medium-high, Pedagogical: High (recombination, repeats, stability).","notes":"## PROPHAGE INTEGRATION SITE \u0026 LIFECYCLE PROPENSITY SCORING\n\n**Expanded Feature Specification from Roadmap**\n\n### Concept\nScore lysogeny propensity and preferred integration hotspots, blending attP/attB motifs, integrase class, local repeats, and host genome context. Predict not just WHERE a phage integrates, but HOW LIKELY it is to choose lysogeny vs lysis.\n\n### Mathematical Foundations\n\n**Lifecycle Decision Score:**\n```\nL_propensity = w1 × S_att + w2 × S_regulatory + w3 × S_env + w4 × S_comparison\n\nwhere:\n- S_att: Integration site quality (0-1)\n- S_regulatory: CI/Cro circuit completeness (0-1)\n- S_env: Environmental response element density\n- S_comparison: Similarity to known lysogenic phages\n```\n\n**Regulatory Circuit Scoring:**\n```\nS_regulatory = (has_CI × 0.4) + (has_Cro × 0.2) + (has_antirepressor × 0.2) +\n               (operator_motifs × 0.1) + (promoter_architecture × 0.1)\n```\n\n**att Site Scoring (PSSM):**\n```\nscore = Σᵢ PSSM[i][base_i]\nBuilt from known att cores: Lambda-like, P4-like, Phi31-like\n```\n\n**Excision Risk Model:**\n```\nrisk = w_asymmetry × (1 - symmetryScore) +\n       w_gc × extreme_gc_penalty +\n       w_core × short_core_penalty -\n       serine_integrase_bonus\n```\n\n### Component Analysis\n\n**Integration Site Quality (S_att):**\n- Motif strength vs consensus\n- Arm symmetry (left vs right)\n- Core length and GC balance\n- Proximity to tRNA/tmRNA\n\n**Regulatory Circuit (S_regulatory):**\n- CI repressor presence and strength\n- Cro antirepressor\n- Operator motif quality\n- Promoter architecture (PL, PR, PRM)\n\n**Environmental Response (S_env):**\n- SOS response elements\n- Nutritional sensors\n- Stress-response motifs\n\n**Comparison (S_comparison):**\n- Similarity to known temperate phages\n- Lysogenic lifestyle markers\n\n### TUI Features\n- Lifecycle Propensity panel:\n  - Overall score (0-1) with TEMPERATE/LYTIC verdict\n  - Component breakdowns with progress bars\n  - Confidence explanation\n- Integration Site Heatmap along genome\n- Selected Site details:\n  - attB structure (left arm, core, right arm)\n  - Target type (tRNA-Arg, tmRNA, intergenic)\n  - Score and symmetry %\n- Excision Risk Assessment:\n  - Overall risk meter\n  - Factor breakdown (+ and - contributions)\n  - Predicted outcomes (precise, imprecise, specialized transduction)\n- Integration/Excision animation\n- [D] Detail view, [C] Compare phages, [S] Simulate\n\n### Integrase Classification\n- **Tyrosine recombinases**: Lambda Int family, precise excision\n- **Serine recombinases**: PhiC31 family, unidirectional\n- Catalytic residue detection (R-H-R-Y vs S-R-Y-D)\n\nNovelty: 8/10, Pedagogical: 9/10, Wow Factor: 8/10","status":"open","priority":3,"issue_type":"feature","created_at":"2025-12-06T23:52:19.165886-05:00","updated_at":"2025-12-07T13:39:47.862065-05:00","dependencies":[{"issue_id":"phage_explorer-0qu","depends_on_id":"phage_explorer-54g","type":"blocks","created_at":"2025-12-06T23:56:51.260138-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-0rm","title":"Advanced: Structure-Informed Capsid/Tail Constraint Scanner","description":"Score mutations against coarse structural constraints (lattice geometry, contact propensities). Per-residue fragility scores via Rust+WASM. ESM delta + structural penalty blend. Capsid/tail ASCII view with fragility heatmap; hover shows Δstability; shake test animation. Guides engineering for stability vs escape. Novelty: Medium.","notes":"## STRUCTURE-INFORMED CAPSID/TAIL CONSTRAINT SCANNER\n\n**Full Implementation from Roadmap**\n\n### Concept\nScore mutations against coarse structural constraints (lattice geometry, contact propensities) to flag mechanically fragile regions and assembly cliffs.\n\n### How to Build\n\n**Model Source:**\n- Use built-in coarse models from renderer-3d package\n- Optional PDB-derived contact maps\n- Lattice geometry for icosahedral capsids (T-numbers)\n\n**Constraint Scoring:**\n- Rust+WASM coarse-grain contact penalty\n- Lattice geometry checks (pentamer/hexamer positions)\n- Per-residue 'fragility' scores\n- Consider buried vs exposed positions\n\n**Mutation Scanning:**\n- Single AA substitutions scored via protein LM (ESM) delta\n- Blend with structural penalty:\n```\nfragility = w_esm × ΔΔG_esm + w_struct × contact_penalty + w_lattice × geometry_penalty\n```\n\n**Outputs:**\n- Fragility heatmap per structural protein\n- 'Do not touch' segment annotations\n- Assembly-critical positions flagged\n\n### TUI Features\n- Capsid/tail ASCII view with fragility heatmap overlay\n- Hover residue to see Δstability score\n- 'Shake test' animation for fragile builds\n- Mutation impact predictor panel\n- Color scale: green (robust) → red (fragile)\n\n### Why It's Good\n- Guides engineering for stability vs escape\n- Surfaces structurally sensitive regions\n- Links mutational impact to assembly physics\n- Shows how structure limits sequence variation\n\n### Implementation Stack\n- Rust+WASM for scoring calculations\n- Optional ESM offline scoring cached\n- TS/Ink overlays on existing 3D ASCII renderer\n- SQLite cache for per-residue penalties\n\nNovelty: 9/10, Pedagogical: 9/10, Wow Factor: 9/10","status":"open","priority":3,"issue_type":"feature","created_at":"2025-12-07T00:18:12.512407-05:00","updated_at":"2025-12-07T13:27:23.713048-05:00","dependencies":[{"issue_id":"phage_explorer-0rm","depends_on_id":"phage_explorer-ojb","type":"blocks","created_at":"2025-12-07T00:20:54.265924-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-0vs","title":"Layer 2: Virion Stability Predictor","description":"Layer 2: Predict capsid stability across temperature and ionic strength for handling/formulation guidance. Practical guidance for storage/shipping; connects sequence to physical robustness.\n\n**Build Plan:**\n- Empirical models + coarse-grain capsid energetics (Rust + nalgebra)\n- Estimate melting/denaturation thresholds from capsid protein composition\n- Consider salt bridges, charge distribution, and hydrophobics\n- Optional lightweight MD-informed parameters\n- Precompute stability curves; WASM for quick recalcs on parameter changes\n\n**What Determines Stability:**\n- Net charge and charge distribution\n- Hydrophobic core integrity\n- Salt bridge networks\n- Disulfide bonds (if present)\n- Capsid geometry (T-number)\n\n**TUI Visualization:**\n- 'Stability bar' that shifts as temperature/salt sliders adjust\n- Warning icon when outside safe envelope\n- ASCII melting curve plot\n- Recommended storage conditions panel\n\nNovelty: 8/10, Pedagogical: 8/10, Cool Factor: 8/10.","status":"open","priority":3,"issue_type":"feature","created_at":"2025-12-06T23:15:45.425383-05:00","updated_at":"2025-12-07T13:06:08.637696-05:00","dependencies":[{"issue_id":"phage_explorer-0vs","depends_on_id":"phage_explorer-54g","type":"blocks","created_at":"2025-12-06T23:15:45.425932-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-1eu","title":"Layer 2: Hilbert Curve Genome Atlas","description":"Transform linear genomes into compact 2D visualizations using Hilbert space-filling curves that preserve locality (adjacent sequence positions stay adjacent in 2D). Order-8 curve fits 65kb in 256x256 grid. Features GC content coloring, gene density overlay, multi-genome comparison, and interactive navigation. Reveals patterns invisible in linear views: GC islands, gene clusters, compositional discontinuities. Novelty: 8/10, Pedagogical: 8/10, Cool Factor: 9/10.","notes":"## HILBERT CURVE GENOME ATLAS\n\n**Comprehensive Feature Specification from Roadmap**\n\n### Concept\nTransforms linear genome sequences into compact 2D visualizations using a space-filling fractal curve that preserves locality. Unlike row wrapping, Hilbert curves keep nearby sequence positions near each other in 2D.\n\n**Why Hilbert Curves?**\n- Locality preservation: Adjacent bases stay adjacent in 2D\n- Compact: 65kb genome fits in 256x256 (order-8)\n- Multi-scale patterns visible at different zoom levels\n- Human visual system excels at 2D pattern detection\n\n**Applications**: GC content, gene density, repeat detection, HGT, multi-genome comparison\n\n### Mathematical Foundations\n\n**Curve Construction**: Order-n has 4^n points in 2^n x 2^n grid\n- Order 8: 65,536 points (fits most phages)\n- Order 10: 1,048,576 points (large genomes)\n\n**hilbertD2XY(n, d)**: Index to (x,y) conversion using quadrant rotation\n**hilbertXY2D(n, x, y)**: Reverse for interactive queries\n\n**Properties**: Bijective, continuous (adjacent indices differ by \u003c=1), self-similar\n\n### Implementation\n\n**Core Components**: HilbertConfig (order, colorScheme, windowSize), HilbertResult (grid: Uint8Array, width, height, metrics)\n\n**Coloring**: GC content (blue-white-red), Gene density (black-green), Custom gradients\n\n**Multi-genome**: Generate aligned Hilbert maps, highlight differences\n\n### TUI Visualization\n\nSingle genome: Order-8 map with GC coloring, cursor position, gene overlay\nComparison: Side-by-side Lambda/P22/HK97 with similarity percentages\n\n### Assessment\n- Novelty: 8/10 - Rare in genomics, TUI interactive is innovative\n- Pedagogical: 8/10 - Space-filling curves, locality, recursion\n- Cool Factor: 9/10 - Striking visual transformation\n\n### Files\n- packages/tui/src/components/HilbertView.tsx\n- packages/core/src/analysis/hilbert.ts\n- packages/core/src/analysis/hilbert-compare.ts","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-06T23:14:47.310035-05:00","updated_at":"2025-12-07T00:03:28.082009-05:00","dependencies":[{"issue_id":"phage_explorer-1eu","depends_on_id":"phage_explorer-54g","type":"blocks","created_at":"2025-12-06T23:14:47.311482-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-2g5","title":"Foundation: Overlay System Architecture","description":"Create OverlayManager in Zustand state store with Overlay interface (id, render, height, position). Enables Layer 1 quick toggles (G, X, B, P, R keys) and Layer 2+ visual augmentations. Precompute data on phage selection. Max 3 simultaneous overlays. THIS IS THE CRITICAL FOUNDATION for all 31 features.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-06T23:08:21.93375-05:00","updated_at":"2025-12-07T00:14:11.859895-05:00","closed_at":"2025-12-07T00:14:11.859895-05:00"}
{"id":"phage_explorer-3cl","title":"Advanced: CRISPR Pressure \u0026 Anti-CRISPR Landscape","description":"Integrate host CRISPR spacer hits + Acr predictions (HMMs, small ORF heuristics, ESM embedding similarity). Pressure score combining spacer density, PAM proximity, coding strand. Pressure bar with spacer ticks, Acr candidates glow; center on strongest clash. Novelty: High, Pedagogical: High.","notes":"## CRISPR PRESSURE \u0026 ANTI-CRISPR LANDSCAPE\n\n**Full Implementation from Roadmap**\n\n### Concept\nIntegrate host CRISPR spacer hits, predict anti-CRISPR (Acr) candidates, and visualize the arms race along the genome.\n\n### How to Build\n\n**Spacer Mapping:**\n- Minimap2/mashmap offline to build spacer-hit table\n- In-app filtering by host species/strain\n- PAM proximity detection for active targeting\n\n**Acr Detection:**\n- HMMs for known Acr families (AcrIIA, AcrIIC, AcrIE, etc.)\n- Small ORF heuristics (short, near protospacers)\n- Embedding similarity (ESM small) for novel Acr-like hits\n- Batch scoring in TS or Rust+WASM\n\n**Pressure Score:**\n```\npressure(window) = Σ(spacer_density × PAM_proximity × strand_factor)\n```\n\n**UI Links:**\n- Spacer hits → nearby Acr predictions\n- Suggest escape mutations based on PAM/seed region\n\n### TUI Features\n- Pressure bar under genome (heat intensity)\n- Spacer hits as tick marks (color by host)\n- Acr candidates glow with confidence badges\n- Press 'c' to center on strongest Acr-vs-spacer clash\n- Evidence panel with spacer alignment and Acr HMM scores\n- Escape mutation suggestions\n\n### Why It's Good\n- Turns CRISPR data into actionable interpretation\n- Ties defense vs counter-defense arms race\n- Guides phage therapy selection (escape potential)\n- Predicts vulnerable regions\n\n### Implementation Stack\n- Offline spacer DB (minimap2 precompute)\n- Rust+WASM for windowed pressure scoring\n- TS/Ink visualization\n- SQLite for hits and pressure tiles\n\nNovelty: 9/10, Pedagogical: 9/10, Wow Factor: 9/10","status":"open","priority":3,"issue_type":"feature","created_at":"2025-12-07T00:18:13.42133-05:00","updated_at":"2025-12-07T13:25:22.174926-05:00","dependencies":[{"issue_id":"phage_explorer-3cl","depends_on_id":"phage_explorer-ojb","type":"blocks","created_at":"2025-12-07T00:20:54.384769-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-3jt","title":"Advanced: Protein Structure Quickview via Fold Embeddings","description":"Cluster structural proteins using TM-Vec/ESMFold embeddings to spot fold-family jumps. HNSW/UMAP for nearest neighbors + novelty score. ASCII contact map thumbnail, neighbor list with novelty meter, loop/patch delta annotations. Captures structural novelty beyond sequence identity. Novelty: High.","notes":"## PROTEIN STRUCTURE QUICKVIEW VIA FOLD EMBEDDINGS\n\n### How to Build\n- **Embeddings**: TM-Vec/ESMFold distogram embeddings (precompute via Python sidecar); cache vectors\n- **Clustering**: HNSW/UMAP pipeline (Rust+WASM) for nearest neighbors; novelty score vs known folds\n- **Delta explainer**: Highlight domain swaps, loop insertions, and charge patches\n- **UI**: Pick a protein, see nearest fold neighbors, novelty score, ASCII contact map strip\n\n### TUI Visualization\nASCII contact-map thumbnail; neighbor list with \"novelty meter\"; highlight loop/patch deltas as inline annotations.\n\n### Files\n- packages/core/src/analysis/fold-embeddings.ts\n- packages/tui/src/components/FoldQuickview.tsx","status":"in_progress","priority":3,"issue_type":"feature","created_at":"2025-12-07T00:17:40.679884-05:00","updated_at":"2025-12-07T00:30:27.838212-05:00","dependencies":[{"issue_id":"phage_explorer-3jt","depends_on_id":"phage_explorer-ojb","type":"blocks","created_at":"2025-12-07T00:20:52.256027-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-441","title":"Layer 3: Packaging Motor Pressure Gauge","description":"Layer 3 Overlay: Visualize packaging pressure (60 atm!) as you scroll through genome. The DNA packaging motor is one of the most powerful molecular machines known—generating forces exceeding 60 pN and internal pressures of ~60 atmospheres to compress DNA into capsid. Force increases exponentially with fill fraction via bending + electrostatic + entropic energy models.\n\n**Physics of Packaging:**\n- Terminase translocates DNA into preformed capsids\n- DNA packed to near-crystalline density (~500 mg/mL)\n- Motor burns ~1 ATP per 2 bp packaged\n- Packaging stalls when internal pressure = motor force\n- Stored energy drives subsequent DNA injection\n\n**What Limits Packaging:**\n- Bending energy (DNA persistence length ~50 nm)\n- Electrostatic repulsion (charged DNA backbone)\n- Entropy loss (organized vs random coil)\n- Capsid volume constraints\n\n**Implementation Stack:** Rust+WASM for polymer physics (ndarray + nalgebra), TypeScript wrapper, SQLite caching for force–extension curves. Scroll-synchronized display: position 1 = low pressure; position 48,000 = maximum stress. Pressure gauge flashes red when \u003e50 atm.\n\nNovelty: 10/10, Pedagogical: 9/10, Cool Factor: 10/10.","notes":"Packaging pressure gauge overlay (V): fill fraction tied to scroll (DNA/AA aware), force/pressure estimates, fill and pressure gauges, Esc/V close, integrated into overlay stack and menus","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-06T23:17:53.887447-05:00","updated_at":"2025-12-07T13:42:04.666795-05:00","closed_at":"2025-12-07T13:42:04.666855-05:00","dependencies":[{"issue_id":"phage_explorer-441","depends_on_id":"phage_explorer-ojb","type":"blocks","created_at":"2025-12-06T23:17:53.888443-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-441","depends_on_id":"phage_explorer-2g5","type":"blocks","created_at":"2025-12-06T23:40:02.457611-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-46l","title":"Layer 3: Lysogeny Decision Circuit Simulator","description":"Rebuild CI/Cro-like regulatory switch from sequence motifs and simulate bistable lysis/lysogeny decisions under varying MOI/damage. Promoter/operator/terminator scans + HMMER for CI/Cro-family. Boolean fast mode or ODE/Hill kinetics. Phase portrait visualization with attractors, parameter sliders that flip basins. Novelty: High, Pedagogical: High (bistability, Hill coefficients, feedback).","notes":"## LYSOGENY/LYSIS DECISION CIRCUIT RECONSTRUCTOR\n\n**Full Implementation from Roadmap**\n\n### Mathematical Foundations\n\n**Cooperative Binding (Hill Equation):**\n```\nf(R) = R^n / (K_D^n + R^n)\n```\n\n**CI/Cro Mutual Repression Model:**\n```\nd[CI]/dt = α_CI × f_rep(Cro, OR) - δ_CI × [CI]\nd[Cro]/dt = α_Cro × f_rep(CI, OR) - δ_Cro × [Cro]\n```\n\n**Operator Occupancy (Three-Site Model for Lambda OR):**\n```\nP(OR1 bound by CI) = [CI]² × K₁ / Z\nP(OR2 bound by CI) = [CI]² × K₂ × (1 + ω×P(OR1)) / Z\nZ = 1 + [CI]²K₁ + [CI]²K₂ + [CI]²K₃ + [CI]⁴K₁K₂ω + ...\n```\n\n**SOS Response (UV Damage):**\n```\nd[RecA*]/dt = k_UV × UV - k_off × [RecA*]\nCI_cleavage_rate = k_cleave × [RecA*] × [CI]\n```\n\n### Complete TypeScript Implementation\n\n- `RegulatoryCircuit` interface (promoters, operators, genes)\n- `SwitchState` (CI, Cro, CII, RecAStar concentrations)\n- `SwitchParameters` (synthesis/degradation rates, K_D values, cooperativity)\n- `calculateOperatorOccupancy()` partition function model\n- `calculateSynthesisRates()` PRM/PR activity\n- `switchODE()` full ODE system\n- `simulateSwitch()` trajectory with fate determination\n- `generatePhasePortrait()` vector field generation\n- `findRegulatoryElements()` promoter/operator scanning\n- `predictLysogenyProbability()` condition-based prediction\n\n### TUI Features\n- Phase Portrait (CI vs Cro) with vector field arrows\n- Separatrix marking lytic/lysogenic basins of attraction\n- Genetic Map showing PL, OL, cI, PRM, PR, cro, N\n- Parameter sliders: [M]OI, [U]V damage, [N]utrients\n- Trajectory simulation with live CI/Cro levels\n- P(lysogeny) calculator with factor explanations\n- [R]eset, [P]lay simulation, [J]ump to gene\n\n### Implementation Stack\n- **ODE Solver**: Rust + WASM for smooth trajectories\n- **Phase Portrait**: Precomputed vector field cached in SQLite\n- **Motif Scanning**: TypeScript PWM matching for promoters/operators\n- **UI**: Ink/React with real-time slider updates and animation\n\nNovelty: 10/10, Pedagogical: 10/10, Wow Factor: 9/10","status":"closed","priority":0,"issue_type":"feature","created_at":"2025-12-06T23:17:07.0583-05:00","updated_at":"2025-12-07T13:20:31.018946-05:00","closed_at":"2025-12-07T13:00:45.470304-05:00","dependencies":[{"issue_id":"phage_explorer-46l","depends_on_id":"phage_explorer-ojb","type":"blocks","created_at":"2025-12-06T23:17:07.060887-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-474","title":"Advanced: RNA Structure \u0026 Packaging Signal Explorer","description":"Advanced: Map how synonymous changes would alter mRNA folding/ΔG along coding regions to flag structure-constrained segments. Finds regions constrained by RNA structure, not just protein sequence.\n\n**Build Plan:**\n- ViennaRNA (via viennarna-wasm) for sliding-window MFE/ΔG\n- Compute 'synonymous stress' by sampling silent variants\n- Estimate ΔΔG distribution for each codon position\n- Annotate high-stress windows and link to translation attenuation\n- Flag regulatory RNA hypotheses\n\n**RNA Structure Constraints:**\n- High synonymous stress = structure-constrained\n- Low synonymous stress = freely variable\n- Connect to ribosome pausing predictions\n- Identify potential regulatory elements (riboswitches, attenuators)\n\n**TUI Visualization:**\n- Heat strip under gene showing ΔG and 'stress' percentile\n- Cursor shows example synonymous change and predicted ΔΔG\n- Toggle to overlay on sequence grid\n- Highlight potential regulatory structures\n\nNovelty: 9/10, Pedagogical: 9/10, Cool Factor: 8/10.","status":"open","priority":3,"issue_type":"feature","created_at":"2025-12-06T23:21:06.03497-05:00","updated_at":"2025-12-07T13:06:37.018183-05:00","dependencies":[{"issue_id":"phage_explorer-474","depends_on_id":"phage_explorer-54g","type":"blocks","created_at":"2025-12-06T23:21:06.039512-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-4ee","title":"Layer 3: Ribosome Traffic Jam Simulator","description":"Model mRNA translation as stochastic particle flow using TASEP (Totally Asymmetric Simple Exclusion Process) from statistical physics. Visualize ribosomes moving along transcripts, piling up at rare codon clusters, and creating traffic jams. Real-time animation with density sparklines, codon rate heatmaps, and bottleneck annotations. Teaches codon bias, translation dynamics, ribosome biology. Novelty: 9/10, Pedagogical: 10/10, Cool Factor: 9/10.","notes":"## RIBOSOME TRAFFIC JAM SIMULATOR\n\n**Comprehensive Feature Specification from Roadmap**\n\n### Concept\nModels mRNA translation as stochastic particle flow (TASEP - Totally Asymmetric Simple Exclusion Process), visualizing ribosome movement and pileups.\n\n**TASEP Model**:\n- Ribosomes = particles hopping forward stochastically\n- Each codon has hop rate (tRNA availability)\n- Exclusion: ribosomes cannot overlap (~10 codon footprint)\n- Entry at start codon (initiation rate alpha)\n- Exit at stop codon (termination rate beta)\n\n**Biological Insights**: Rare codon clusters cause queuing, SD spacing affects initiation, codon optimization, ribosome collisions, translation efficiency\n\n### Mathematical Foundations\n\n**Master Equation**: dni/dt = ki-1 ni-1(1-ni) - ki ni(1-ni+1)\n\n**Codon Rates**: Rate proportional to tRNA concentration x adaptation factor\nCAI = exp((1/L) sum(ln(wi)))\n\n**Steady-State Phases**:\n- Low density (alpha \u003c beta): Entry-limited\n- High density (alpha \u003e beta): Exit-limited\n- Maximal current (alpha = beta = 0.5)\n\n**Footprint**: ~28-30 nt = 9-10 codons minimum spacing\n\n### Implementation\n\n**Interfaces**: RibosomeState (position, dwellTime, id, state), TranslationSimulation (mrnaLength, ribosomes[], codonRates, density, flux, time), SimulationConfig (initiationRate, terminationRate, footprint, maxTime)\n\n**simulationTick()**: Attempt initiation, process ribosomes 3'-\u003e5', check blocking, update density\n\n**isBlocked()**: Check if ribosome ahead within footprint distance\n\n**Codon Adaptation Table**: GCT/GAA/CTG/AAA = 1.0 (fast), GCG/CTA/AGG = 0.1-0.3 (slow)\n\n### TUI Visualization\n\nLive animation: mRNA track with ribosome positions (triangles/dots), density sparkline, codon rate heatmap, traffic jam annotations, real-time stats\n\n### Assessment\n- Novelty: 9/10 - TASEP rarely shown interactively in TUI\n- Pedagogical: 10/10 - Statistical physics, codon bias, translation\n- Cool Factor: 9/10 - Watching ribosomes queue is mesmerizing\n\n### Files\n- packages/tui/src/components/RibosomeTrafficView.tsx\n- packages/core/src/analysis/translation-simulation.ts\n- packages/core/src/data/codon-tables.ts","status":"in_progress","priority":1,"issue_type":"feature","created_at":"2025-12-06T23:17:07.375278-05:00","updated_at":"2025-12-07T13:24:35.890927-05:00","dependencies":[{"issue_id":"phage_explorer-4ee","depends_on_id":"phage_explorer-ojb","type":"blocks","created_at":"2025-12-06T23:17:07.376015-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-4nt","title":"Layer 2: Information-Theoretic Sequence Anomaly Scanner","description":"Layer 2 Analysis: Full-panel KL divergence + compression analysis to detect anomalous regions. Classifies as potential HGT, repetitive, or regulatory. Discovery-oriented - finds what you weren't looking for. Extends X overlay.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-06T23:11:46.311139-05:00","updated_at":"2025-12-06T23:22:18.436181-05:00","dependencies":[{"issue_id":"phage_explorer-4nt","depends_on_id":"phage_explorer-54g","type":"blocks","created_at":"2025-12-06T23:11:46.312542-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-4nt","depends_on_id":"phage_explorer-wtf","type":"blocks","created_at":"2025-12-06T23:11:46.31378-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-4pf","title":"Layer 2: Non-B DNA Structure Map (G-Quadruplexes, Z-DNA)","description":"Detect and visualize alternative DNA conformations: G-quadruplexes (G4) using G4Hunter algorithm (score \u003e 1.5 = likely G4), Z-DNA using dinucleotide propensity scores (CG = 1.0, GC = 0.4, AT = -0.1). G4s regulate promoters and affect packaging; Z-DNA triggers innate immunity via ZBP1. Genome track with structure annotations and detailed sequence view. Novelty: 8/10, Pedagogical: 8/10, Cool Factor: 7/10.","notes":"## NON-B DNA STRUCTURE MAP (G4, Z-DNA)\n\n**Comprehensive Feature Specification from Roadmap**\n\n### Concept\nDNA adopts alternative conformations beyond canonical B-form helix with profound regulatory implications.\n\n**G-Quadruplexes (G4)**:\n- Four-stranded structures from G-rich sequences\n- Four guanines form planar \"G-tetrad\" via Hoogsteen bonding\n- Tetrads stack to form remarkably stable structures\n- Found in promoters, 5' UTRs, telomeres\n- In phages: regulate gene expression, affect DNA packaging\n\n**Z-DNA**:\n- Left-handed helix (vs right-handed B-DNA)\n- Forms in alternating purine-pyrimidine (CG)n sequences\n- Recognized by Z-DNA binding proteins (ZBP1/DAI)\n- Triggers innate immune responses - important for viral detection\n- In phages: may be immune evasion targets\n\n**Other Non-B**: Cruciform (inverted repeats), H-DNA/triplex (mirror repeats), slipped structures (tandem repeats)\n\n### Mathematical Foundations\n\n**G4 Pattern**:\nClassic motif: G{3,}N{1,7}G{3,}N{1,7}G{3,}N{1,7}G{3,}\n- G{3,} = 3+ consecutive guanines (one G-run)\n- N{1,7} = 1-7 any nucleotides (loop)\n\n**G4Hunter Algorithm**:\nScore = sum(G_contribution - C_contribution) / window_size\n- G-runs contribute +1 to +4 based on length\n- C-runs contribute -1 to -4 (complementary strand G4)\n- Score \u003e 1.5: likely G4\n- Score \u003e 2.0: strong G4\n\n**Z-DNA Propensity**:\nDinucleotide Z-scores:\n  CG: +1.0 (highest Z-forming)\n  CA/TG: +0.5\n  GC: +0.4\n  AT/TA: -0.1 (disfavored)\n  AA/TT: -0.5 (strongly disfavored)\n\nP_Z = sum(Z_score per dinucleotide) / window_size\nThreshold: P_Z \u003e 0.5 suggests Z-DNA potential\n\n**G4 Free Energy**:\ndG = dG_stacking + dG_loop + dG_ion\nStacking ~-10 kcal/mol per tetrad\nK+ stabilization ~-2 kcal/mol per ion\n\n### Implementation\n\n**Core Interfaces**:\n```typescript\ninterface NonBStructure {\n  type: 'G4' | 'Z-DNA' | 'cruciform' | 'triplex';\n  start: number;\n  end: number;\n  strand: '+' | '-' | 'both';\n  score: number;\n  sequence: string;\n  loops?: number[];  // Loop lengths for G4\n}\n```\n\n**detectG4()**: Compute G4Hunter scores over sliding window, find regions above threshold, assign strand based on score sign\n\n**detectZDNA()**: Compute dinucleotide Z-scores, find regions with propensity \u003e 0.5, merge overlapping regions\n\n### TUI Visualization\n\n```\n╭───────────────────────────────────────────────────────────────────────────╮\n│  NON-B DNA STRUCTURE MAP: T7 Phage                                       │\n├───────────────────────────────────────────────────────────────────────────┤\n│  Genome Track (39,937 bp):                                                │\n│  ════════════════════════════════════════════════════════════════════════ │\n│                                                                           │\n│  G4 (+ strand):    ──────⬡──────────────────⬡─────────────⬡⬡──────────── │\n│                           ↑                  ↑             ↑↑              │\n│                        Promoter?           5' UTR       Regulatory?      │\n│                                                                           │\n│  G4 (- strand):    ────────────⬢────────────────────⬢────────────────── │\n│                               ↑                     ↑                     │\n│                            Potential             Strong                   │\n│                                                                           │\n│  Z-DNA:            ─────────────────────[ZZZ]─────────────[ZZZZ]──────── │\n│                                            ↑                ↑              │\n│                                         Moderate         Strong           │\n│                                                                           │\n│  Structure Details:                                                       │\n│  | Position  | Type   | Score | Sequence                                 │\n│  |  2,341    | G4(+)  |  2.3  | GGGTTGGGTTTGGGTTTGGG                     │\n│  |  8,492    | G4(+)  |  1.8  | GGGGACGGGACGGGACGGGG                     │\n│  | 15,221    | Z-DNA  |  0.7  | CGCGCGCGCGCG                             │\n│                                                                           │\n│  Summary: 6 G4 motifs (4 strong) | 2 Z-DNA regions                       │\n│  [G] Toggle G4  [Z] Toggle Z-DNA  [D] Details  [E] Export  [ESC] Exit    │\n╰───────────────────────────────────────────────────────────────────────────╯\n```\n\n### Assessment\n- Novelty: 8/10 - G4/Z-DNA prediction exists but rarely in genome browsers, TUI novel\n- Pedagogical: 8/10 - Teaches non-canonical DNA, regulatory biology, biophysics\n- Cool Factor: 7/10 - DNA forming weird structures beyond double helix is surprising\n\n### Files\n- packages/tui/src/components/NonBDNAView.tsx\n- packages/core/src/analysis/g4-detection.ts\n- packages/core/src/analysis/z-dna-detection.ts","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-06T23:11:46.636728-05:00","updated_at":"2025-12-07T00:07:52.683753-05:00","dependencies":[{"issue_id":"phage_explorer-4pf","depends_on_id":"phage_explorer-54g","type":"blocks","created_at":"2025-12-06T23:11:46.637573-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-4ty","title":"Advanced: Phage Cocktail Compatibility Matrix","description":"## Phage Cocktail Compatibility Matrix (Advanced Feature)\n\n### Concept\n\nPhage therapy rarely uses single phages — **cocktails** of multiple phages are essential to:\n1. Cover diverse host strains\n2. Prevent resistance emergence\n3. Ensure redundant killing mechanisms\n\nBut not all phages work together. Some interfere through:\n- **Superinfection exclusion (Sie)**: One phage blocks another from entering\n- **Receptor competition**: Both need same receptor (one wins)\n- **Lysis timing conflicts**: Different burst schedules cause resource waste\n- **Immunity/Lysogeny**: Temperate phage provides immunity against related phages\n\nThis feature computes a **compatibility matrix** across all phages and solves the **optimal cocktail selection problem**: find the minimal set covering target host range with no compatibility conflicts.\n\n### Mathematical Foundations\n\n**Compatibility scoring:**\n```\nFor phages A and B, compatibility score C(A,B) ∈ [-1, +1]:\n\nPositive factors (synergy):\n  - Different receptors: +0.3\n  - Different lysis timing (early + late): +0.2\n  - Complementary host ranges: +0.3\n  - No sequence homology in immunity regions: +0.2\n\nNegative factors (interference):\n  - Same receptor: -0.4\n  - Superinfection exclusion genes detected: -0.5\n  - Similar lysis timing: -0.2\n  - Sie genes present in both: -0.3\n  - One temperate provides immunity to other: -0.8\n\nC(A,B) = Σ positive_factors - Σ negative_factors (clamped to [-1, +1])\n```\n\n**Host range coverage:**\n```\nLet H = {h₁, h₂, ..., hₘ} = target hosts\nLet P = {p₁, p₂, ..., pₙ} = candidate phages\nLet R[i,j] = 1 if phage pᵢ infects host hⱼ, else 0\n\nCoverage of subset S ⊆ P:\n  Cov(S) = { hⱼ : ∃ pᵢ ∈ S with R[i,j] = 1 }\n```\n\n**Optimal cocktail as Set Cover + Compatibility (NP-hard):**\n```\nMaximize: |Cov(S)| (hosts covered)\nSubject to:\n  |S| ≤ k (max cocktail size, typically 3-5)\n  ∀ pᵢ, pⱼ ∈ S: C(pᵢ, pⱼ) \u003e threshold (no conflicts)\n\nSolutions:\n  - Greedy: Add phage with best coverage/compatibility ratio\n  - ILP: Optimal but slower\n  - Genetic algorithm: For large phage libraries\n```\n\n**ILP formulation:**\n```\nVariables:\n  xᵢ ∈ {0,1} = 1 if phage i selected\n  yⱼ ∈ {0,1} = 1 if host j covered\n\nMaximize: Σⱼ yⱼ\nSubject to:\n  Σᵢ xᵢ ≤ k                           (cocktail size limit)\n  yⱼ ≤ Σᵢ R[i,j] × xᵢ                 (coverage constraint)\n  xᵢ + xⱼ ≤ 1 for incompatible pairs  (compatibility constraint)\n```\n\n### Implementation Approach\n\n**Feature extraction for compatibility:**\n```typescript\ninterface PhageInterferenceFeatures {\n  phageId: number;\n  receptorGenes: string[];          // e.g., ['OmpC', 'LamB']\n  sieGenes: string[];               // Superinfection exclusion\n  lysisTime: 'early' | 'middle' | 'late';\n  lifecycle: 'lytic' | 'temperate';\n  immunityRegion?: string;          // For temperate phages\n  hostRange: Set\u003cstring\u003e;           // Confirmed hosts\n}\n```\n\n**Pairwise compatibility calculation:**\n```typescript\ninterface CompatibilityScore {\n  phageA: number;\n  phageB: number;\n  score: number;  // -1 to +1\n  factors: { name: string; contribution: number; reason: string }[];\n  compatible: boolean;  // score \u003e threshold\n}\n\n// Compute receptor overlap, Sie presence, lysis timing,\n// immunity cross-reaction, host range complementarity\n```\n\n**Optimal cocktail solver (greedy):**\n```typescript\ninterface CocktailSolution {\n  phages: number[];\n  coverage: string[];  // Hosts covered\n  coveragePercent: number;\n  compatibilityScore: number;  // Average pairwise score\n  rationale: string[];\n}\n\n// While selected.length \u003c maxSize and covered.size \u003c targetHosts.length:\n//   Find best phage (compatible + max marginal coverage)\n//   Add to selection, update covered set\n```\n\n### TUI Visualization\n\n```\nPhage Cocktail Compatibility Matrix\n═══════════════════════════════════════════════════════════════════════════════\n\nCompatibility Heatmap (12 phages):\n          │ λ   T4  T7  P22 M13 Mu  Φ29 Φ6  T5  SPβ HK97 P1  │\n──────────┼─────────────────────────────────────────────────────┤\nLambda    │ ·   +0.6 +0.4 -0.3 +0.8 +0.2 +0.5 +0.7 +0.1 -0.7 +0.3 +0.4 │\nT4        │     ·    +0.5 +0.6 +0.7 +0.3 +0.4 +0.8 +0.6 +0.4 +0.5 +0.5 │\nT7        │          ·    +0.5 +0.6 +0.4 +0.8 +0.7 +0.3 +0.3 +0.4 +0.5 │\nP22       │               ·    +0.5 -0.2 +0.3 +0.6 +0.4 +0.5 -0.4 +0.3 │\n...       │                                                             │\n──────────┴─────────────────────────────────────────────────────────────┘\n\nLegend: ▓▓▓ +0.8 ▒▒▒ +0.4 ░░░ 0.0 ··· -0.4 ▫▫▫ -0.8\n\n⚠ Incompatible pairs:\n  Lambda × SPbeta (-0.7): Cross-immunity (temperate, 78% identity)\n  Lambda × P22 (-0.3): Same receptor (LamB)\n\n───────────────────────────────────────────────────────────────────────────────\n\nCOCKTAIL OPTIMIZER\n\nTarget hosts: E. coli K-12, B, C; Salmonella; P. aeruginosa (5 total)\n\n✓ RECOMMENDED COCKTAIL:\n┌─────────────────────────────────────────────────────────────────────────────┐\n│  1. T4          Covers: E. coli K-12, E. coli B        Lysis: late          │\n│  2. T7          Covers: E. coli K-12, E. coli C        Lysis: early         │\n│  3. Phi6        Covers: P. aeruginosa                  Lysis: middle        │\n│                                                                              │\n│  Coverage: 4/5 hosts (80%)  ████████░░                                      │\n│  Compatibility: +0.67       ██████▓▓░░                                      │\n│                                                                              │\n│  Missing: Salmonella (consider adding P22)                                  │\n│                                                                              │\n│  RATIONALE:                                                                  │\n│  • T4 + T7: Different lysis timing (early + late = sustained killing)       │\n│  • T4 + T7: No receptor overlap (OmpC vs various)                           │\n│  • Phi6: Unique host range (Pseudomonas-specific)                           │\n│  • All lytic: No immunity/lysogeny conflicts                                │\n└─────────────────────────────────────────────────────────────────────────────┘\n\n[+] Add constraint   [H] Change hosts   [S] Solve again   [E] Export   [ESC] Exit\n```\n\n### Why This Is Good\n\n1. **Clinical relevance**: Phage therapy design is done by expert intuition. This provides quantitative guidance.\n2. **Resistance prevention**: Cocktails are essential but bad combinations are worse than single phages.\n3. **Scalable optimization**: As phage libraries grow (thousands), manual selection becomes impossible.\n4. **Explainable recommendations**: Not just \"use these\" but \"because X covers Y, and Z adds receptor diversity.\"\n5. **Novel contribution**: No existing tool combines compatibility scoring with coverage optimization.\n\n### Innovation Assessment\n\n**Novelty: VERY HIGH** - First computational compatibility predictor for phages. First cocktail optimization solver. Novel integration of molecular interference mechanisms.\n\n**Pedagogical Value: 9/10** - Teaches Sie, receptor competition, immunity, combinatorial optimization (set cover, ILP, greedy), therapy design principles.\n\n**Wow Factor: 9/10** - Heatmap with green (compatible) and red (incompatible) is immediately intuitive. Watching algorithm select optimal cocktail with rationale feels like having an expert consultant.\n\n### Data Requirements\n- Phage interference features (receptors, Sie genes, lysis timing)\n- Host range data (which phages infect which hosts)\n- Immunity region sequences (for temperate phages)","status":"open","priority":3,"issue_type":"feature","created_at":"2025-12-06T23:20:17.845538-05:00","updated_at":"2025-12-06T23:46:06.517103-05:00","dependencies":[{"issue_id":"phage_explorer-4ty","depends_on_id":"phage_explorer-54g","type":"blocks","created_at":"2025-12-06T23:20:17.848483-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-4wz","title":"Layer 2: Structural Variant Detector (Deletions, Inversions, Translocations)","description":"Layer 2 Analysis: Detect structural variants between phages - deletions, inversions, duplications, translocations. Alignment block analysis. Essential for understanding phage mosaicism and recombination.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-06T23:13:38.363422-05:00","updated_at":"2025-12-06T23:22:40.578129-05:00","dependencies":[{"issue_id":"phage_explorer-4wz","depends_on_id":"phage_explorer-54g","type":"blocks","created_at":"2025-12-06T23:13:38.365486-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-4wz","depends_on_id":"phage_explorer-2g5","type":"blocks","created_at":"2025-12-06T23:39:31.501831-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-54g","title":"Foundation: Menu Infrastructure (Analysis Menu \u0026 Simulation Hub)","description":"Create reusable ModalMenu component (Ink) for Analysis Menu (A key) and Simulation Hub (Shift+S). Implement MenuItem interface with icons, shortcuts, actions. Categorized navigation with fuzzy search. ESC always exits.","status":"in_progress","priority":1,"issue_type":"epic","created_at":"2025-12-06T23:08:58.84906-05:00","updated_at":"2025-12-06T23:47:35.010274-05:00"}
{"id":"phage_explorer-5ab","title":"Layer 1: Repeat/Palindrome Markers Overlay [R key]","description":"Layer 1 overlay (R key): Display repeat and palindrome markers - inverted repeats (hairpins), direct repeats (duplications). Self-comparison via sliding window. Identifies terminators, recombination sites. Priority: P2.","notes":"Repeat/palindrome overlay (R): naive palindrome scan, density sparkline, overlay stack, Esc/R close","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-06T23:10:41.455889-05:00","updated_at":"2025-12-07T13:00:55.446242-05:00","closed_at":"2025-12-07T13:00:55.446247-05:00","dependencies":[{"issue_id":"phage_explorer-5ab","depends_on_id":"phage_explorer-2g5","type":"blocks","created_at":"2025-12-06T23:10:41.456574-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-5b5","title":"Foundation: Advanced UI State Management","description":"## Advanced UI State Management\n\nZustand state structure supporting overlay/modal/simulation/command systems.\n\n### AdvancedUIState Interface\n```typescript\ninterface AdvancedUIState {\n  // Overlay system\n  activeOverlays: Set\u003cOverlayId\u003e;\n  overlayConfigs: Map\u003cOverlayId, OverlayConfig\u003e;\n\n  // Modal system\n  activeModal: ModalId | null;\n  modalHistory: ModalId[];  // For back navigation\n\n  // Simulation state\n  activeSimulation: SimulationId | null;\n  simulationState: SimState | null;\n  simulationSpeed: number;\n  simulationPaused: boolean;\n\n  // Command palette\n  commandPaletteOpen: boolean;\n  commandSearch: string;\n  commandResults: CommandMatch[];\n  selectedCommandIndex: number;\n\n  // Computed data cache\n  analysisCache: Map\u003cstring, AnalysisResult\u003e;\n}\n```\n\n### Key Principle\nPrecompute on phage selection, not on feature activation. When user selects a phage, background-compute: GC skew, complexity, bendability, promoter predictions. Makes overlays feel instant when toggled.\n\nDepends on: All 4 foundation systems (Overlay, Menu, Command Palette, Simulation)","notes":"Advanced UI state implemented: overlay stack, menu/simulation hubs, command palette state, precompute overlays on phage load, comparison + simulation state tracked in store","status":"closed","priority":0,"issue_type":"feature","created_at":"2025-12-06T23:35:36.359231-05:00","updated_at":"2025-12-07T13:23:18.530353-05:00","closed_at":"2025-12-07T13:23:18.530363-05:00","dependencies":[{"issue_id":"phage_explorer-5b5","depends_on_id":"phage_explorer-2g5","type":"blocks","created_at":"2025-12-06T23:35:36.360877-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-5b5","depends_on_id":"phage_explorer-54g","type":"blocks","created_at":"2025-12-06T23:35:36.361949-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-5b5","depends_on_id":"phage_explorer-8lh","type":"blocks","created_at":"2025-12-06T23:35:36.362786-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-5b5","depends_on_id":"phage_explorer-ojb","type":"blocks","created_at":"2025-12-06T23:35:36.363707-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-5jr","title":"Advanced: HGT Provenance Tracer","description":"Infer donor clades for genomic islands via GC/codon atypicality + k-mer taxonomic assignment (Mash/MinHash). Generate passport stamps per island with donor lineage, confidence, hallmark genes. Genome bar with colored islands; stamp shows donor pie and GC/codon plots. Novelty: High, Pedagogical: High.","notes":"## HORIZONTAL GENE TRANSFER PROVENANCE TRACER\n\n**Full TypeScript Implementation from Roadmap**\n\n### Concept\nCreate forensic 'passport stamps' for genomic islands identifying donor clades, transfer timing, and functional annotation.\n\n### Mathematical Foundations\n\n**Island Detection via Z-Score:**\n```\nGC_z(w) = (GC_w - μ_genome) / σ_genome\n\nFlag window if |GC_z| \u003e 2.0\n```\n\n**Dinucleotide Relative Abundance:**\n```\nρ(XY) = f(XY) / (f(X) × f(Y))\nZ_dinuc = Σ|ρ_island(XY) - ρ_genome(XY)| / 16\n```\n\n**MinHash Jaccard Similarity:**\n```\nJ(A, B) ≈ |MinHash(A) ∩ MinHash(B)| / |MinHash(A) ∪ MinHash(B)|\nContainment: C(A, B) = |MinHash(A) ∩ MinHash(B)| / |MinHash(A)|\n```\n\n**Amelioration Time Estimate:**\n```\nt_amelioration ∝ -ln(|CAI_island - CAI_genome|) / μ_mutation\n```\n\n### Complete TypeScript Implementation\n\n- `GenomicIsland` interface (start, end, GC, z-scores, genes, hallmarks)\n- `DonorCandidate` with taxon, similarity, confidence, evidence type\n- `PassportStamp` with island, donor, amelioration, mechanism\n- `HGTAnalysis` full analysis result\n- `computeGCContent()`, `computeDinucleotideFrequencies()`\n- `computeDinucleotideOddsRatio()`, `dinucleotideZScore()`\n- `detectIslands()` sliding window with merge\n- `createIsland()` with hallmark gene detection\n- `murmurhash3()` hash function\n- `computeMinHash()` k-mer sketching\n- `jaccardFromMinHash()` similarity calculation\n- `inferDonors()` reference database query\n- `estimateAmelioration()` recent/intermediate/ancient\n- `inferTransferMechanism()` lysogeny/transduction/conjugation\n- `analyzeHGTProvenance()` main pipeline\n- `renderIslandGenomeBar()` ASCII visualization\n- `renderPassportStamp()` detailed stamp view\n\n### TUI Features\n- Genome bar with colored islands (by amelioration: recent/intermediate/ancient)\n- 'Passport stamp' popup per island showing:\n  - Location and GC deviation\n  - Top donor with similarity\n  - Donor distribution bars\n  - GC/codon profile sparkline\n  - Hallmark genes\n  - Transfer mechanism\n  - Amelioration estimate\n- Summary: total islands, recent/ancient counts, dominant donors, foreign DNA %\n- [←/→] Navigate, [D] Donor details, [P] Phylo tree\n\n### Why It's Good\n- Forensic tracing of foreign DNA origins\n- Transfer timing estimation via amelioration\n- Connects to host range and safety assessment\n- 'Passport stamp' metaphor makes analysis accessible\n\nNovelty: 9/10, Pedagogical: 9/10, Wow Factor: 8/10","status":"open","priority":3,"issue_type":"feature","created_at":"2025-12-07T00:17:42.024781-05:00","updated_at":"2025-12-07T13:38:54.444937-05:00","dependencies":[{"issue_id":"phage_explorer-5jr","depends_on_id":"phage_explorer-ojb","type":"blocks","created_at":"2025-12-07T00:20:52.376411-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-66a","title":"Layer 2: Comparative Synteny Browser","description":"Layer 2 Analysis: Multi-track visualization of gene order conservation. Ortholog clustering + synteny block detection. Reveals modular boundaries and evolutionary relationships beyond sequence similarity.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-06T23:13:38.661192-05:00","updated_at":"2025-12-06T23:22:41.584582-05:00","dependencies":[{"issue_id":"phage_explorer-66a","depends_on_id":"phage_explorer-54g","type":"blocks","created_at":"2025-12-06T23:13:38.661967-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-6sn","title":"Advanced: Recombination Hotspot Radar","description":"Advanced: Detect mosaic ancestry along the genome using change-point detection on k-mer/embedding profiles and local phylogenies. Reveals chimeric origins and recent recombination donors.\n\n**Build Plan:**\n- Segment with ruptures-like change-point (Rust + ndarray) on embedding/k-mer vectors\n- For each segment, compute nearest clade via sketch (Mash/MinHash) and mini-tree\n- Cache segment→clade calls in SQLite\n- WASM for change-point + sketching; small phylo in TS for speed\n\n**Recombination Detection Methods:**\n- K-mer profile discontinuities\n- Embedding vector jumps\n- Local phylogeny incongruence\n- Change-point significance testing\n\n**TUI Visualization:**\n- Genome heat strip with colors per donor clade\n- Cursor shows donor list and support\n- Press 'r' to highlight high-confidence recombination breakpoints\n- Timeline view showing recombination history\n\nNovelty: 9/10, Pedagogical: 9/10, Cool Factor: 9/10.","notes":"## RECOMBINATION \u0026 MOSAICISM RADAR (SLIDING-WINDOW PHYLO)\n\n### How to Build\n- **Windows**: Slice genome; compute k-mer Jaccard/Mash distances to a panel; optional fast NJ per window (Rust+WASM)\n- **Breakpoint calling**: Change-point detection (PELT/Bayesian) on similarity traces; store segments with top donors\n- **Donor hints**: Track which reference best matches each window; summarize donor composition\n\n### TUI Visualization\nCircular radar with colored arcs; move cursor to see donor and similarity; press 'b' to jump to breakpoints; sparkline of similarity underneath.\n\n### Files\n- packages/core/src/analysis/recombination-radar.ts\n- packages/tui/src/components/MosaicRadarView.tsx","status":"open","priority":3,"issue_type":"feature","created_at":"2025-12-06T23:19:11.092247-05:00","updated_at":"2025-12-07T13:06:34.317841-05:00","dependencies":[{"issue_id":"phage_explorer-6sn","depends_on_id":"phage_explorer-54g","type":"blocks","created_at":"2025-12-06T23:19:11.093779-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-7am","title":"Advanced: Burst Kinetics \u0026 Latency Inference","description":"Infer adsorption rate, latent period, and burst size from OD/plaque time-series using SIR-like infection ODE/SDE. MAP/bootstrapped fits with credible intervals. Map parameters back to holin/endolysin/antiholin loci. Live fit plot, toggle deterministic/stochastic, residuals pane. Bridges wet-lab curves to genome-linked parameters. Novelty: High, Pedagogical: High.","notes":"## BURST KINETICS \u0026 LATENCY INFERENCE FROM GROWTH CURVES\n\n**Full Implementation from Roadmap**\n\n### Mathematical Foundations\n\n**Classic Infection ODE Model:**\n```\ndB/dt = μB - k·B·P            # Bacteria: growth - infection\ndI/dt = k·B·P - I/L           # Infected: new infections - lysis\ndP/dt = (b/L)·I - k·B·P - δP  # Phages: burst - adsorption - decay\n```\n\n**Age-Structured Infected Population:**\n```\n∂i(t,a)/∂t + ∂i(t,a)/∂a = -γ(a)·i(t,a)\nBoundary: i(t,0) = k·B(t)·P(t)\n```\n\n**Likelihood Function for Parameter Inference:**\n```\nL(θ|D) = ∏ᵢ N(yᵢ | f(tᵢ,θ), σ²)\nθ = {k, L, b, μ, δ, B₀, P₀}\n```\n\n**Stochastic Gillespie Model Propensities:**\n```\na₁ = μ·B       # Bacterial division\na₂ = k·B·P     # Adsorption\na₃ = (1/L)·I   # Lysis (releases b phages)\na₄ = δ·P       # Phage decay\n```\n\n### Complete TypeScript Implementation\n\n- `InfectionParameters` interface (k, L, b, μ, δ, B₀, P₀)\n- `rungeKutta4()` 4th-order ODE solver\n- `infectionODE()` system definition\n- `simulateInfection()` trajectory generation\n- `logLikelihood()` for parameter estimation\n- `nelderMead()` optimization\n- `identifyLysisCassette()` gene linking\n- `fitInfectionModel()` main inference function\n- `linkKineticsToGenome()` cassette→kinetics mapping\n\n### TUI Features\n- Growth Curve Fit with 95% CI shading\n- Inferred Parameters panel (k, L, b with confidence intervals)\n- Lysis Cassette visualization (holin, antiholin, endolysin, spanin)\n- Latency prediction match indicator\n- R² and AIC model fit statistics\n- [D]ata toggle, [M]ode ODE/Gillespie, [B]ootstrap, [J]ump to gene\n\n### Implementation Stack\n- **ODE Solver**: Rust + WASM for RK4 with adaptive stepping\n- **Optimization**: Nelder-Mead in TypeScript; optional L-BFGS in Rust\n- **Stochastic**: Gillespie algorithm in Rust + WASM\n- **Caching**: SQLite stores fitted parameters per dataset\n\nNovelty: 9/10, Pedagogical: 9/10, Wow Factor: 8/10","status":"open","priority":3,"issue_type":"feature","created_at":"2025-12-06T23:49:11.338562-05:00","updated_at":"2025-12-07T13:19:44.034977-05:00","dependencies":[{"issue_id":"phage_explorer-7am","depends_on_id":"phage_explorer-ojb","type":"blocks","created_at":"2025-12-06T23:56:50.950647-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-7gs","title":"Advanced: Functional Module Coherence \u0026 Stoichiometry Checker","description":"Segment genomes into functional modules (replication, morphogenesis, lysis). Evaluate stoichiometric balance (capsid:scaffold ratios). Flag incomplete or overrepresented modules, suggest missing partners. Module ribbon with green/amber/red indicators. Quick genome QC and design check. Novelty: Medium-high.","notes":"## FUNCTIONAL MODULE COHERENCE \u0026 STOICHIOMETRY CHECKER\n\n**Full TypeScript Implementation from Roadmap**\n\n### Concept\nPerform comprehensive 'genome health check' by segmenting into functional modules and evaluating completeness, balance, and coherence.\n\n### Mathematical Foundations\n\n**Module Completeness Score:**\n```\nC_module = Σ(w_i × present_i) / Σ(w_i)\n\nwhere:\n- w_i: weight (1.0=critical, 0.5=common, 0.2=optional)\n- present_i: 1 if gene found, 0 otherwise\n```\n\n**Stoichiometric Balance Score:**\n```\nimbalance_ij = |log2(observed_i / observed_j) - log2(r_ij)|\nS_balance = 1 - tanh(Σ imbalance_ij / n_pairs)\n```\n\n**Module Coherence (Gene Neighborhood):**\n```\nCoherence = Σ(adjacent_same_module) / (Σ genes_in_module - 1)\n```\n\n**Expression Proxy from RBS:**\n```\nRBS_strength = PSSM_score(Shine-Dalgarno, -15 to -5)\nExpected_copies ∝ RBS_strength × CAI\n```\n\n### Complete TypeScript Implementation\n\n- `ModuleType`: replication, morphogenesis_head/tail, packaging, lysis, lysogeny, host_interaction, auxiliary\n- `ModuleGene` with role, essentiality, expected copy number, RBS strength\n- `FunctionalModule` with completeness, balance, coherence scores\n- `StoichiometryRule` defining gene pair ratios\n- `ModuleAnalysis` with quality grade A-F\n- `MODULE_KEYWORDS` regex patterns per module type\n- `ESSENTIAL_GENES` weighted lists per module\n- `STOICHIOMETRY_RULES` (MCP:portal, terminase large:small, etc.)\n- `estimateRBSStrength()` Shine-Dalgarno PSSM scoring\n- `classifyGene()`, `determineEssentiality()`\n- `assembleModules()` gene classification pipeline\n- `computeCompletenessScore()`, `computeBalanceScore()`\n- `computeCoherenceScore()` gene adjacency analysis\n- `analyzeModuleCoherence()` main analysis function\n- `renderModuleRibbon()`, `renderStoichiometryChart()`\n\n### TUI Features\n- Module Health Overview with progress bars per module\n- Status indicators: ● complete, ◐ partial, ○ missing\n- Missing essential gene warnings\n- Stoichiometry panel per module showing:\n  - Gene expression levels (bars)\n  - Expected vs observed comparison\n  - Balance score and coherence %\n- Suggestions panel with priority levels\n- Quality grade (A-F) prominently displayed\n- [Tab] Next module, [S] Stoichiometry, [H] Find homologs\n\n### Module Categories\n- Replication: polymerase, helicase, primase, SSB\n- Head: MCP, portal, scaffold, protease\n- Tail: major tail, tape measure, fiber, baseplate\n- Packaging: large/small terminase\n- Lysis: endolysin, holin, spanin\n- Lysogeny: integrase, CI, excisionase\n\nNovelty: 8/10, Pedagogical: 9/10, Wow Factor: 8/10","status":"in_progress","priority":3,"issue_type":"feature","created_at":"2025-12-07T00:17:43.641821-05:00","updated_at":"2025-12-07T13:38:55.758138-05:00","dependencies":[{"issue_id":"phage_explorer-7gs","depends_on_id":"phage_explorer-ojb","type":"blocks","created_at":"2025-12-07T00:20:52.492305-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-8lh","title":"Foundation: Command Palette System","description":"Create fuzzy-search command palette (: or Ctrl+P) for instant access to any feature. CommandRegistry singleton where all features register with name, keywords, action. Power users can access any feature in 3-4 keystrokes.","status":"in_progress","priority":0,"issue_type":"epic","created_at":"2025-12-06T23:08:59.44721-05:00","updated_at":"2025-12-06T23:51:45.500489-05:00"}
{"id":"phage_explorer-92s","title":"Foundation: Progressive Disclosure \u0026 User Journey","description":"## Progressive Disclosure \u0026 User Journey\n\nStrategy for exposing features based on user expertise level.\n\n### New User Journey (First 5 minutes)\n- Only Layer 0 (12 sacred controls)\n- Help overlay shows essential controls only\n- Navigate phages, scroll sequences, toggle DNA/AA\n\n### Intermediate User (First hour)\n- Layer 0 + Layer 1 overlays\n- Discover overlays via help\n- Try diff mode, explore 3D model\n- Help now shows 'Advanced: press A for more...'\n\n### Power User\n- Full Layer 0-4 access\n- Uses command palette (: or Ctrl+P)\n- Runs simulations, does comparative analysis\n- Discovers features through exploration\n\n### Key Insight\nEvery feature reachable in ≤3 keypresses but invisible until needed.\n\nDepends on: Help System (phage_explorer-ofm), UI Design System (phage_explorer-dx3)","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-06T23:35:35.931114-05:00","updated_at":"2025-12-07T00:08:51.333537-05:00","closed_at":"2025-12-07T00:08:51.333537-05:00","dependencies":[{"issue_id":"phage_explorer-92s","depends_on_id":"phage_explorer-ofm","type":"blocks","created_at":"2025-12-06T23:39:01.879645-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-92s","depends_on_id":"phage_explorer-dx3","type":"blocks","created_at":"2025-12-06T23:39:02.988977-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-9jc","title":"Advanced: Cocktail Resistance Evolution Simulator","description":"Simulate resistance emergence under single vs cocktail regimens using Gillespie/tau-leaping. Params from genome: receptor diversity, Sie genes, CRISPR spacer matches. Live ASCII trajectories, risk meter, side-by-side mono vs cocktail. Turns genomic evidence into dosing/risk guidance. Novelty: High, Pedagogical: High (stochastic processes, evolutionary dynamics).","notes":"## COCKTAIL RESISTANCE EVOLUTION SIMULATOR\n\n**Full Implementation from Roadmap**\n\n### Concept\nSimulate resistance emergence under single vs cocktail regimens using genome-derived parameters (receptor diversity, anti-defense, spacer proximity).\n\n### How to Build\n\n**Stochastic Engine:**\n- Gillespie/tau-leaping in Rust+WASM (rand + rayon)\n- Events: bacterial growth, phage adsorption, resistance mutation, receptor switching\n\n**Genome-Derived Parameters:**\n- Receptor diversity from tail fiber annotation\n- Sie genes (superinfection exclusion)\n- CRISPR spacer matches (immunity potential)\n- Anti-defense gene count\n\n**User Inputs:**\n- MOI (multiplicity of infection)\n- Dosing cadence (hours between doses)\n- Population size (CFU/mL)\n- Cocktail composition (1-5 phages)\n\n**Outputs:**\n- Probability of resistance over time\n- Time-to-resistance distribution\n- Compare mono vs cocktail curves\n- Optimal cocktail selection\n\n### TUI Features\n- Live ASCII trajectories (multiple runs overlaid)\n- Risk meter updates in real-time\n- Side-by-side mono vs cocktail comparison\n- Sliders: MOI, dose interval, population size\n- Toggle 'optimize cocktail' to auto-pick best trio\n- Resistance probability timeline\n- [R]un new simulation, [C]ompare, [O]ptimize\n\n### Why It's Good\n- Turns genomic evidence into therapy guidance\n- Quantifies resistance risk over time\n- Compares mono vs cocktail robustness\n- Identifies synergistic combinations\n\n### Implementation Stack\n- Rust+WASM for Gillespie simulator (rand, rayon)\n- TS/Ink UI for sliders and live trajectories\n- SQLite cache for genome-derived parameters\n- ASCII braille for trajectory plots\n\nNovelty: 9/10, Pedagogical: 9/10, Wow Factor: 9/10","status":"open","priority":3,"issue_type":"feature","created_at":"2025-12-06T23:55:45.232996-05:00","updated_at":"2025-12-07T13:21:57.3987-05:00","dependencies":[{"issue_id":"phage_explorer-9jc","depends_on_id":"phage_explorer-ojb","type":"blocks","created_at":"2025-12-06T23:56:51.540252-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-axn","title":"Advanced: Periodicity \u0026 Tandem Repeat Wavelet Spectrogram","description":"Detect tandem repeats, packaging motifs, and promoter periodicities via wavelets/FFT. CWT in Rust+WASM with peak picking for dominant periods/phases. Braille spectrogram under sequence grid with cursor showing period/phase. Finds periodic signals missed by motifs; links to packaging/regulation. Novelty: High, Pedagogical: High (spectral analysis, signal processing).","notes":"## PERIODICITY \u0026 TANDEM REPEAT WAVELET SPECTROGRAM\n\n**Full Implementation from Roadmap**\n\n### Mathematical Foundations\n\n**Continuous Wavelet Transform (CWT):**\n```\nW_f(a,b) = (1/√a) ∫ f(x) · ψ*((x-b)/a) dx\n\nwhere:\n- f(x): DNA signal (A=0, C=1, G=2, T=3 or purine/pyrimidine encoding)\n- ψ: Mother wavelet (Morlet: ψ(x) = e^(iω₀x) · e^(-x²/2))\n- a: Scale (inversely related to frequency/period)\n- b: Position (translation)\n```\n\n**Scale-to-Period Conversion (Morlet):**\n```\nPeriod(a) = (4π × a) / (ω₀ + √(2 + ω₀²))\nTypical scales: a ∈ [2, 256] for periods 2-256 bp\n```\n\n**Power Spectrogram \u0026 Peak Detection:**\n```\nP(a,b) = |W_f(a,b)|²\nisPeak(a,b) = P(a,b) \u003e P(a±1, b±1) AND P(a,b) \u003e threshold × median(P)\n```\n\n**Tandem Repeat Detection via Autocorrelation:**\n```\nR(τ) = Σᵢ f(i) · f(i+τ)\nTR_period = argmax_τ R(τ) for τ ∈ [2, 100]\n```\n\n### Complete TypeScript Implementation\n\n- `WaveletSpectrum` interface (scales, periods, positions, power matrix, peaks)\n- `SpectralPeak` with position, period, power, phase, annotation\n- `TandemRepeat` with start, end, period, copies, consensus unit, purity\n- `encodeDNA()` with numeric/purine/amino encodings\n- `morletWavelet()` complex wavelet function\n- `cwtPoint()` single point computation with Gaussian support\n- `computeCWT()` full spectrogram generation\n- `scaleToPeriod()` conversion function\n- `findSpectralPeaks()` with local maxima and significance threshold\n- `detectTandemRepeats()` autocorrelation-based detection\n- `mergeOverlapping()` for tandem repeat consolidation\n- `analyzePeriodicty()` full analysis pipeline\n- `annotatePeriod()` biological interpretation (codon, helix, promoter)\n- `renderSpectrogramASCII()` braille block visualization\n\n### Biological Periodicities Detected\n\n| Period | Interpretation |\n|--------|----------------|\n| 3 bp | Codon periodicity (coding regions) |\n| 10-11 bp | DNA helical pitch (packaging signals) |\n| 35-45 bp | Promoter spacing (σ factor architecture) |\n| 2-6 bp | Short tandem repeats |\n| 7-20 bp | Microsatellites |\n| 21-100 bp | Minisatellites |\n\n### TUI Features\n- Braille spectrogram strip (period vs position)\n- Scrolling synchronized with main sequence view\n- Dominant periodicities table with strength bars\n- Tandem repeats list with position, period, copies, consensus\n- Cursor shows period and phase at current position\n- [←/→] Move cursor, [P] Jump to peak, [T] Jump to repeat\n\n### Implementation Stack\n- Rust+WASM for CWT (realfft crate) for large genomes\n- TS FFT fallback (fft.js) for small genomes\n- SQLite cache for spectrogram tiles\n- Braille block character rendering (⠀⠁⠂⠃⠄⠅⠆⠇⡀⡁...)\n\nNovelty: 9/10, Pedagogical: 9/10, Wow Factor: 9/10","status":"open","priority":3,"issue_type":"feature","created_at":"2025-12-06T23:53:22.418534-05:00","updated_at":"2025-12-07T13:24:37.691715-05:00","dependencies":[{"issue_id":"phage_explorer-axn","depends_on_id":"phage_explorer-54g","type":"blocks","created_at":"2025-12-06T23:56:51.351465-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-be3","title":"Advanced: Phage-Defense Arms Race Scanner","description":"Advanced: Integrate host defense genes (CRISPR arrays, RM, Abi) with phage anti-defense (anti-CRISPRs, Ocr-like, anti-RM) to visualize coevolutionary escalation. Shows who counters what.\n\n**Build Plan:**\n- Parse host defenses from provided host genomes/metadata\n- Scan phages for anti-defense HMMs (AcrDB, Ocr-like) and methyltransferases\n- Score matches (phage defense vs host counter-defense)\n- Store pairs in SQLite\n- Light inference in TS; heavy HMM in Rust+WASM\n\n**Defense/Counter-Defense Pairs:**\n- CRISPR ↔ Anti-CRISPR (Acr proteins)\n- Type I RM ↔ Ocr/Ral methyltransferases\n- Type II RM ↔ Dam/Dcm methylases\n- Abi systems ↔ Anti-Abi proteins\n\n**TUI Visualization:**\n- Bipartite defense map with 'who counters what'\n- Timeline bar if isolation dates known\n- Meter indicating 'defense pressure' vs 'counter strength'\n- Gene highlighting when hovering interactions\n\nNovelty: 9/10, Pedagogical: 9/10, Cool Factor: 9/10.","notes":"## PHAGE-DEFENSE ARMS RACE DASHBOARD\n\n### Concept\nSummarize anti-CRISPRs, RM evasion motifs, Abi counters, retron/CBASS hits, and Sie systems; score offense/defense balance per phage.\n\n### How to Build\n- **Detection**: HMMER for anti-CRISPR families; motif scans for RM evasion; domain scans for Abi/CBASS/retron; Sie heuristics on membrane proteins\n- **Scoring**: Weighted offense/defense index; store with gene links\n- **Cross-phage compare**: Rank phages by offense/defense; show missing counters\n\n### Why It's Good\nOffers an immediate strategic view of how a phage deals with host defenses; guides cocktail design.\n\n### Implementation Stack\nHMMER precompute; TS scoring; SQLite cache; Ink radar/stacked bars; all CPU, no GPU.\n\n### TUI Visualization\nRadar/stacked bars for offense vs defense; clicking a wedge jumps to the gene; \"missing counter\" badges with suggestions.\n\n### Files\n- packages/core/src/analysis/arms-race.ts\n- packages/tui/src/components/ArmsRaceDashboard.tsx","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-06T23:20:17.595944-05:00","updated_at":"2025-12-07T13:06:35.527376-05:00","dependencies":[{"issue_id":"phage_explorer-be3","depends_on_id":"phage_explorer-54g","type":"blocks","created_at":"2025-12-06T23:20:17.596973-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-bp9","title":"Advanced: Codon Economy \u0026 tRNA Adaptation Dashboard","description":"Model adaptation to different hosts' tRNA pools. Compute RSCU/CAI/tAI against host-specific tRNA atlases. Delta adaptation between hosts; flag regions with poor match. Per-gene bars colored by adaptation; switch host profile live; side-by-side host A vs B strips. Novelty: Medium-high, Pedagogical: High (translational selection).","notes":"## CODON/AA ADAPTATION LANDSCAPE WITH HOST tRNA SUPPLY\n\n**Full Implementation from Roadmap**\n\n### Concept\nModel how well each phage gene is adapted to different hosts' tRNA pools. Compute RSCU/CAI/tAI against host-specific tRNA atlases and show adaptation gradients.\n\n### How to Build\n\n**tRNA Atlas Ingest:**\n- Import per-host tRNA copy numbers and anticodon pools\n- Sources: GtRNAdb, tRNAscan-SE outputs, metagenome predictions\n- Store in SQLite with host taxonomy\n\n**Metrics Computed:**\n- **RSCU** (Relative Synonymous Codon Usage): Σ(observed/expected)\n- **CAI** (Codon Adaptation Index): geometric mean of w_i values\n- **tAI** (tRNA Adaptation Index): accounts for wobble and tRNA abundance\n- **CPB** (Codon-Pair Bias): di-codon frequencies vs expectation\n\n**Sliding-Window Adaptation:**\n- Per-gene and per-window scores\n- Rust+WASM for speed if needed\n- Delta adaptation between two hosts\n\n**Flagging:**\n- Regions with poor host match\n- Potential imported islands (host-mismatched CPB)\n- Module summaries (structural/replication/lysis)\n\n### TUI Features\n- Per-gene bars colored by adaptation score\n- Switch host profile live with immediate recompute\n- Side-by-side host A vs host B adaptation strips\n- Hover shows gene CAI/tAI for selected host\n- Stacked bars per gene colored by 'best host'\n- Host-switch candidates glow\n\n### Why It's Good\n- Connects translational efficiency to host preference\n- Highlights adaptation mismatches and imported islands\n- Aids host prediction and engineering decisions\n- Shows why context matters for gene expression\n\n### Implementation Stack\n- TS for metrics (RSCU, CAI, tAI, CPB)\n- Optional Rust+WASM for batch scoring many hosts\n- SQLite cache of host tRNA pools and per-gene scores\n- Ink UI with stacked bars and host selector\n\nNovelty: 8/10, Pedagogical: 9/10, Wow Factor: 8/10","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-06T23:19:11.419742-05:00","updated_at":"2025-12-07T13:25:20.117032-05:00","dependencies":[{"issue_id":"phage_explorer-bp9","depends_on_id":"phage_explorer-54g","type":"blocks","created_at":"2025-12-06T23:19:11.421645-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-c3j","title":"Layer 2: Genomic Signature PCA (Tetranucleotide Frequency)","description":"Compute tetranucleotide (4-mer) frequencies for all phages (256 dimensions) and project into 2D using PCA for alignment-free phylogenetics. Clustering reveals family relationships, host adaptation patterns, and outliers. PC1 typically correlates with GC content (30-50% variance), PC2 with purine/pyrimidine bias. O(n) per genome computation. Interactive scatter plot with clustering annotations. Novelty: 7/10, Pedagogical: 9/10, Cool Factor: 8/10.","notes":"## GENOMIC SIGNATURE PCA (TETRANUCLEOTIDE FREQUENCY)\n\n**Comprehensive Feature Specification from Roadmap**\n\n### Concept\nEvery genome has a characteristic \"signature\" - unique k-mer frequency pattern reflecting evolutionary history, GC content, codon usage. By computing tetranucleotide frequencies for all phages and projecting via PCA, visualize phylogenetic relationships WITHOUT sequence alignment.\n\n**Power of Genomic Signatures**:\n- Alignment-free comparison - works even for divergent sequences\n- Captures global composition, not just individual gene homology\n- Robust to rearrangements, insertions, deletions\n- Fast: O(n) per genome\n\n**What PCA Reveals**:\n- Clustering by family: Related phages cluster together\n- Host adaptation: Phages infecting same host cluster (shared codon biases)\n- Outliers: Unusual or chimeric genomes stand out\n- GC islands: Horizontally transferred regions have different signatures\n\n### Mathematical Foundations\n\n**Tetranucleotide Frequency Vector**:\nFor genome S of length L:\n- Count each 4-mer: freq(AAAA), freq(AAAC), ..., freq(TTTT)\n- Total 4-mers: 4^4 = 256 possibilities\n- Normalize: f(k) = count(k) / (L - 3)\n\n**Principal Component Analysis**:\nGiven N phages, each with 256-dim frequency vector:\nData matrix X: N x 256\n\n1. Center: X_centered = X - mean(X, axis=0)\n2. Covariance: C = (1/N) * X_centered^T * X_centered [256 x 256]\n3. Eigendecomposition: C = V * Lambda * V^T\n4. Project to 2D: PC1 = X_centered * v1, PC2 = X_centered * v2\n\n**Variance Explained**:\nVariance by PCk = lambda_k / sum(lambda_i)\nTypically:\n- PC1: 30-50% (often correlates with GC content)\n- PC2: 10-20% (often reflects purine/pyrimidine bias)\n\n**Distance in PCA Space**:\nd(i,j) = sqrt((PC1_i - PC1_j)^2 + (PC2_i - PC2_j)^2)\nCorrelates with taxonomic distance, host range overlap, divergence time\n\n### Implementation\n\n**Core Interfaces**:\n```typescript\ninterface KmerVector {\n  phageId: number;\n  name: string;\n  frequencies: Float32Array;  // 256 elements\n  gcContent: number;\n}\n\ninterface PCAResult {\n  projections: { phageId: number; name: string; pc1: number; pc2: number }[];\n  eigenvalues: number[];\n  varianceExplained: number[];\n  loadings: Float32Array[];  // Which 4-mers contribute to each PC\n}\n```\n\n**computeKmerFrequencies()**: Single pass through sequence, encode 4-mers as indices 0-255, count and normalize\n\n**computePCA()**: Center data, power iteration for top eigenvectors, project data\n\n**renderPCAPlot()**: ASCII scatter plot with axes, point labels, cluster annotations\n\n### TUI Visualization\n\n```\n╭───────────────────────────────────────────────────────────────────────────╮\n│  GENOMIC SIGNATURE PCA: Tetranucleotide Frequencies                      │\n├───────────────────────────────────────────────────────────────────────────┤\n│                                                                           │\n│  PC1 (43.2% variance) vs PC2 (16.7% variance)                            │\n│                                                                           │\n│  PC2 ↑                                                                    │\n│      │                                                                    │\n│  0.3 │                    ●T7                                             │\n│      │                   ● ●                   ●Phi29                     │\n│  0.2 │                  ●   (T7-like)            ●                        │\n│      │                 ●                                                  │\n│  0.1 │                                                                    │\n│      │  ●MS2                                                              │\n│  0.0 │───────────────────────────────────●Lambda───────────────→ PC1     │\n│      │       ●PhiX174                        ●                            │\n│ -0.1 │         (ssDNA cluster)              ●P22                          │\n│      │      ●M13                                                          │\n│ -0.2 │                                                                    │\n│      │                                        ◉ YOU ARE HERE              │\n│ -0.3 │                           ●T4           (T4-like cluster)          │\n│      │                          ●SPbeta ●T5                               │\n│ -0.4 └──────────────────────────────────────────────────────────          │\n│     -0.4  -0.3  -0.2  -0.1   0.0   0.1   0.2   0.3   0.4   0.5            │\n│                                                                           │\n│  Clusters: T7-like (high GC) | T4-like (AT-rich) | ssDNA | Lambda-like   │\n│  [Click] Inspect  [Z] Zoom  [3] Add PC3  [E] Export  [ESC] Exit          │\n╰───────────────────────────────────────────────────────────────────────────╯\n```\n\n### Assessment\n- Novelty: 7/10 - Technique known but rarely in user-facing phage tools, TUI scatter novel\n- Pedagogical: 9/10 - Teaches PCA, genomic signatures, alignment-free methods, multivariate stats\n- Cool Factor: 8/10 - Proximity = relatedness is satisfying visualization\n\n### Files\n- packages/tui/src/components/PCAView.tsx\n- packages/core/src/analysis/kmer-frequencies.ts\n- packages/core/src/analysis/pca.ts","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-06T23:15:45.104077-05:00","updated_at":"2025-12-07T00:08:37.368039-05:00","dependencies":[{"issue_id":"phage_explorer-c3j","depends_on_id":"phage_explorer-54g","type":"blocks","created_at":"2025-12-06T23:15:45.105973-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-c95","title":"Layer 2: Virtual Agarose Gel Electrophoresis","description":"Classic molecular biology technique in terminal. Select restriction enzymes, digest phage genomes in silico, visualize DNA fragments as ASCII gel bands with size ladder and log-linear migration. Features enzyme database (EcoRI, HindIII, BamHI, etc.), cut site mapping, double digest support, multi-genome comparison. Bridges wet lab and dry lab - predict gel results before experiments. Novelty: 6/10, Pedagogical: 8/10, Cool Factor: 7/10.","notes":"## VIRTUAL AGAROSE GEL ELECTROPHORESIS\n\n**Comprehensive Feature Specification from Roadmap**\n\n### Concept\nClassic molecular biology technique brought to terminal. Select restriction enzymes, digest phage genomes in silico, visualize fragments as bands on virtual gel with size ladder and realistic migration.\n\n**Why for Phage Research**:\n- Experimental planning: Predict gel before spending reagents\n- Strain verification: Restriction patterns as phage fingerprints\n- Genetic mapping: Quick localization technique\n- Cloning design: Find suitable restriction sites\n- Teaching: Visualize sequence-to-fragment relationship\n\n**Physics**: DNA negative charge (phosphate) migrates to positive electrode. Agarose sieve - small fragments faster. Migration ~ linear with log(size).\n\n### Mathematical Foundations\n\n**Restriction Site Finding**:\n- Match recognition sequence with cut offset\n- Handle palindromic sequences\n- Degenerate bases (N, Y, R, W, S, K, M)\n- Common enzymes: EcoRI (GAATTC), HindIII (AAGCTT), BamHI (GGATCC), NotI (GCGGCCGC), HaeIII (GGCC)\n\n**Fragment Generation**:\nLinear: fragments between cuts plus ends\nCircular: last fragment wraps to first cut\n\nDouble digest: merge cut sites, sort, generate fragments\n\n**Migration (Ogston Model)**:\nlog10(L) = a - b * d\nd = (a - log10(L)) / b\n\nTypical 1% agarose: a ~ 4.5, b ~ 0.05\n\nResolution limits: \u003c200bp poor, \u003e20kb compress (need PFGE)\n\n**Band Intensity**:\nI proportional to mass (copies x length)\nSingle digest: all fragments equal copy, I ~ length\n\n**Expected Fragments**:\n6-cutter: ~4096bp average spacing\nLambda 48.5kb: ~12 EcoRI fragments expected\n\n### Implementation\n\n**Enzyme Database**:\nRestrictionEnzyme: name, recognitionSite, cutOffset, overhang (5/3/blunt), frequency\n\nIUPAC degenerate base regex conversion\n\n**Digestion Engine**:\ndigestGenome(sequence, enzymeName, circular): DigestResult with cutSites[], fragments[], mapData\n\ngenerateCutMap(): Text-based scale with cut position markers\n\n**Gel Renderer**:\nGelConfig: width, height, lanes[], ladder[], concentration\n\nrenderGel(): ASCII gel with wells, ladder bands, sample bands\n- Ladder: reference sizes with thin bands\n- Samples: band width proportional to log(size) for intensity\n- Lane labels below\n\n### TUI Visualization\n\nMain view:\n- Enzyme selector dropdown\n- Cut map showing positions on genome\n- Virtual gel with ladder and sample lanes\n- Fragment table (sizes sorted)\n\nDouble digest view:\n- Side-by-side single and double digest\n- Shows increased resolution with more fragments\n\n### Assessment\n- Novelty: 6/10 - Virtual gel exists but TUI + ASCII art novel\n- Pedagogical: 8/10 - Restriction enzymes, log-linear, gel interpretation\n- Cool Factor: 7/10 - Satisfying to see virtual gel appear in terminal\n\n### Files\n- packages/tui/src/components/GelView.tsx\n- packages/core/src/analysis/restriction-digest.ts\n- packages/core/src/data/restriction-enzymes.ts","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-06T23:15:45.679687-05:00","updated_at":"2025-12-07T00:03:32.788395-05:00","dependencies":[{"issue_id":"phage_explorer-c95","depends_on_id":"phage_explorer-54g","type":"blocks","created_at":"2025-12-06T23:15:45.680152-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-cgd","title":"Layer 1: Promoter/RBS Strength Overlay [P key]","description":"Layer 1 overlay (P key): Display predicted promoter (-35/-10 boxes) and RBS (Shine-Dalgarno) strength annotations. Pattern matching against consensus sequences. Understanding gene expression timing. Priority: P2.","notes":"Promoter/RBS overlay implemented (P): motif scan, density sparkline, overlay stack, Esc/P close","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-06T23:10:41.106532-05:00","updated_at":"2025-12-07T13:00:39.414832-05:00","closed_at":"2025-12-07T13:00:39.414835-05:00","dependencies":[{"issue_id":"phage_explorer-cgd","depends_on_id":"phage_explorer-2g5","type":"blocks","created_at":"2025-12-06T23:10:41.108052-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-cgh","title":"Layer 3: Plaque Growth Cellular Automata","description":"Cellular automaton simulating phage plaque formation on bacterial lawns. Input phage parameters (burst size, latent period, lysogeny probability, diffusion rate) and watch virtual plaques grow in real-time. Models reaction-diffusion: bacteria grow, phages infect, cells lyse after latent period releasing burst, phages diffuse. Explains clear vs turbid plaques, size determinants. Novelty: 9/10, Pedagogical: 9/10, Cool Factor: 10/10.","notes":"## PLAQUE MORPHOLOGY CELLULAR AUTOMATA\n\n**Comprehensive Feature Specification from Roadmap**\n\n### Concept\nSimulate phage plaque formation using cellular automaton, connecting genotype (molecular parameters) to phenotype (observable plaque morphology).\n\n**Biology of Plaque Formation**:\n- Bacteria grow as lawn on solid media\n- Single phage infects one bacterium\n- After latent period, cell lyses releasing burst_size new phages\n- Phages diffuse outward, infect neighbors\n- Process repeats, creating expanding dead zone (plaque)\n\n**What Determines Morphology**:\n- Clear plaques: Virulent phages that always lyse\n- Turbid plaques: Temperate phages, lysogens survive in center\n- Large plaques: Long latent period (more diffusion time before lysis)\n- Small plaques: Short latent period (lysis before diffusion)\n- Halo plaques: Phages with depolymerase activity\n\n### Mathematical Foundations\n\n**Reaction-Diffusion Model**:\nState variables at (x,y,t):\n- B(x,y,t) = bacteria density [0,1]\n- I(x,y,t) = infected cell count\n- P(x,y,t) = free phage particles\n\nEquations:\ndB/dt = r*B*(1-B) - k*B*P        [growth - infection]\ndI/dt = k*B*P - (1/tau)*I        [infection - lysis]\ndP/dt = D*grad^2(P) + b*(1/tau)*I - delta*P  [diffusion + burst - decay]\n\nParameters: r=growth, k=adsorption, tau=latent period, b=burst size, D=diffusion, delta=decay\n\n**Cellular Automaton Simplification**:\nEach cell per tick:\n- BACTERIA: if adjacent PHAGE, become INFECTED with prob p; else stay/divide\n- INFECTED: age++; if age \u003e= latent_period: LYSED, spawn burst_size phages nearby\n- LYSED: stay dead\n- LYSOGEN: immune, can grow (temperate phages)\n\n**Plaque Size Prediction**:\nR ~ sqrt(4 * D * T * efficiency)\nPlaque area proportional to (burst_size * latent_period * D) / adsorption\n\n### Implementation\n\n**Core Interfaces**:\n```typescript\ntype CellState = 'empty' | 'bacteria' | 'infected' | 'lysed' | 'lysogen';\n\ninterface PlaqueSimConfig {\n  gridSize: number;           // NxN grid\n  burstSize: number;          // Phages per lysis\n  latentPeriod: number;       // Ticks until lysis\n  diffusionRate: number;      // Phage movement\n  adsorptionProb: number;     // Infection probability\n  lysogenyProb: number;       // Lysogen probability (temperate)\n  bacteriaGrowthRate: number; // Division probability\n}\n\ninterface SimulationCell {\n  state: CellState;\n  phageCount: number;\n  infectionAge: number;\n}\n```\n\n**initializePlaqueSim()**: Create grid of bacteria, seed single phage at center\n\n**simulateTick()**: \n- Process each cell by state\n- Handle infection, lysis, phage release\n- Diffuse phages to neighbors\n- Update grid\n\n**distributePhages()**: Spread burst_size phages in random directions within 3-cell radius\n\n**renderPlaque()**: Convert cell states to ASCII: bacteria=block, infected=dark shade, lysed=space, lysogen=light shade\n\n### TUI Visualization\n\n```\n╭───────────────────────────────────────────────────────────────────────────╮\n│  PLAQUE MORPHOLOGY SIMULATOR: Lambda Phage                               │\n├───────────────────────────────────────────────────────────────────────────┤\n│                                                                           │\n│  Parameters:         Time: 00:45    Generation: 3                        │\n│  ├─ Burst size: 100                                                       │\n│  ├─ Latent period: 45 min                                                 │\n│  ├─ Lysogeny: 50%                                                         │\n│  └─ Diffusion: Medium                                                     │\n│                                                                           │\n│  ┌─────────────────────────────────────────────────────────────────────┐  │\n│  │█████████████████████████████████████████████████████████████████████│  │\n│  │████████████████████████████▓▓▓██████████████████████████████████████│  │\n│  │██████████████████████████▓▓   ▓▓████████████████████████████████████│  │\n│  │████████████████████████▓▓  ▒▒  ▓▓██████████████████████████████████│  │\n│  │███████████████████████▓  ▒    ▒  ▓█████████████████████████████████│  │\n│  │██████████████████████▓ ▒  ▒▒▒  ▒ ▓█████████████████████████████████│  │\n│  │█████████████████████▓ ▒ ▒     ▒ ▒ ▓████████████████████████████████│  │\n│  │█████████████████████▓ ▒   ▒▒▒  ▒  ▓████████████████████████████████│  │\n│  │██████████████████████▓ ▒ ▒   ▒ ▒ ▓█████████████████████████████████│  │\n│  │███████████████████████▓  ▒▒▒▒▒  ▓██████████████████████████████████│  │\n│  │████████████████████████▓▓     ▓▓███████████████████████████████████│  │\n│  │██████████████████████████▓▓▓▓▓█████████████████████████████████████│  │\n│  │█████████████████████████████████████████████████████████████████████│  │\n│  └─────────────────────────────────────────────────────────────────────┘  │\n│                                                                           │\n│  Legend: █ Bacteria | ▓ Infected | (space) Lysed | ▒ Lysogen             │\n│                                                                           │\n│  Morphology: TURBID (lysogens surviving in center)                       │\n│  Predicted size: Medium (2.1 mm at 24h)                                  │\n│                                                                           │\n│  [Space] Pause  [B/L/D] Adjust params  [R] Reset  [V] Virulent  [ESC]    │\n╰───────────────────────────────────────────────────────────────────────────╯\n```\n\n### Assessment\n- Novelty: 9/10 - Cellular automata for plaques exists in research but never in phage tools, real-time TUI unique\n- Pedagogical: 9/10 - Teaches phage lifecycle, population dynamics, mathematical biology, emergence\n- Cool Factor: 10/10 - Essentially a video game, watching infection spread is addictive\n\n### Files\n- packages/tui/src/components/PlaqueSimView.tsx\n- packages/core/src/simulation/plaque-automata.ts\n- packages/core/src/simulation/plaque-config.ts","status":"closed","priority":3,"issue_type":"feature","created_at":"2025-12-06T23:17:07.628557-05:00","updated_at":"2025-12-07T13:39:06.264546-05:00","closed_at":"2025-12-07T13:39:06.264546-05:00","dependencies":[{"issue_id":"phage_explorer-cgh","depends_on_id":"phage_explorer-ojb","type":"blocks","created_at":"2025-12-06T23:17:07.629569-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-cu3","title":"Advanced: Metagenomic Co-Occurrence \u0026 Niche Profiler","description":"Infer ecological niches and co-occurring taxa from metagenomic abundance tables. SparCC/FlashWeave-like compositional correlations + NMF for latent niche vectors. Co-occurrence network colored by niches, habitat filters, significance thresholds. Adds real-world context to host predictions. Novelty: Medium-high, Pedagogical: High (compositional stats, niche ecology).","notes":"## METAGENOMIC CO-OCCURRENCE \u0026 ECOLOGICAL NICHE PROFILER\n\n### Concept\nInfer ecological niches and co-occurring taxa from metagenomic abundance tables; derive niche vectors and networks.\n\n### How to Build\n- **Input**: BIOM/TSV + sample metadata\n- **Correlations**: SparCC/FlashWeave-like compositional inference in Rust+WASM (ndarray + rayon)\n- **Niche factors**: NMF/PMF in TS for latent \"niche vectors\"\n- **Metadata mapping**: Attach habitats/hosts to factors; cache per phage\n- **UI**: Co-occurrence network colored by niches; stacked niche bars per phage; filters by habitat\n\n### Why It's Good\nAdds real-world context to host predictions; complements CRISPR/prophage evidence.\n\n### Implementation Stack\nRust+WASM for correlations; TS NMF; SQLite cache of niche vectors; BIOM parser in TS.\n\n### TUI Visualization\nNetwork with niche colors; press 'n' to repaint bars; tooltips show top co-occurring taxa/habitats; toggle significance threshold live.\n\n### Files\n- packages/core/src/analysis/metagenomic-niche.ts\n- packages/tui/src/components/NicheNetworkView.tsx","status":"open","priority":3,"issue_type":"feature","created_at":"2025-12-06T23:51:11.070369-05:00","updated_at":"2025-12-07T00:15:39.340902-05:00","dependencies":[{"issue_id":"phage_explorer-cu3","depends_on_id":"phage_explorer-54g","type":"blocks","created_at":"2025-12-06T23:56:51.160196-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-d2p","title":"Advanced: Regulatory Signal Constellations","description":"Scan promoters/terminators/RBS/operators; render co-occurring motifs as constellations. PWMs + co-occurrence graphs. Evidence score combining spacing, orientation, strength into operon-likelihood. Starfield strip above genes; motifs as glyphs; toggle inferred operons. Novelty: Medium, Pedagogical: High.","notes":"## REGULATORY SIGNAL CONSTELLATIONS\n\n**Full Implementation from Roadmap**\n\n### Concept\nScan promoters/terminators/RBS/operators and render co-occurring regulatory motifs as 'constellations' to reveal operons and control logic.\n\n### How to Build\n\n**Motif Scans:**\n- PWMs for sigma factors (σ70, σ32, σ54, σS)\n- Rho-independent terminator detection (stem-loop + poly-U)\n- RBS (Shine-Dalgarno) scoring\n- Operator palindrome detection\n- Run in TS (fast) or Rust+WASM for batch\n\n**Co-occurrence Graph:**\n- Build small graph of motifs per region\n- Detect motif 'motifs' (regulatory patterns):\n  - Promoter + operator + terminator spacing\n  - Dual promoters (divergent)\n  - Antitermination signals\n\n**Evidence Score:**\n- Combine spacing, orientation, and strength\n- Operon-likelihood per gene cluster\n- Regulatory complexity score\n\n**Link to Genes:**\n- Tie regulatory regions to downstream ORFs\n- Annotate likely operons and regulons\n\n### TUI Features\n- Starfield strip above genes (motifs as glyphs)\n- Edges show spacing relationships\n- Hover shows PWM score for each motif\n- Press 'o' to toggle inferred operon highlighting\n- ORF blocks colored by regulatory context\n- Legend showing motif glyph meanings\n\n### Why It's Good\n- Surfaces regulatory architecture beyond genes\n- Shows how multiple motifs compose control logic\n- Aids understanding of temporal expression\n- Spacing and phase matter for function\n\n### Implementation Stack\n- TS PWM scanning\n- Optional Rust+WASM for speed on large genomes\n- SQLite motif hit cache\n- Ink starfield rendering with braille and symbols\n\nNovelty: 8/10, Pedagogical: 9/10, Wow Factor: 8/10","status":"open","priority":3,"issue_type":"feature","created_at":"2025-12-07T00:18:16.627038-05:00","updated_at":"2025-12-07T13:26:01.443216-05:00","dependencies":[{"issue_id":"phage_explorer-d2p","depends_on_id":"phage_explorer-ojb","type":"blocks","created_at":"2025-12-07T00:20:54.703298-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-dr7","title":"Advanced: Amino-Acid Property Phase Portraits","description":"Slide across proteins computing property vectors (hydropathy, charge, aromaticity, disorder). Project trajectories via PCA/UMAP. Compare homologous proteins between phages. ASCII scatter/trajectory; cursor shows window position; color by property dominance. Novelty: Medium-high, Pedagogical: High.","notes":"## AMINO-ACID PROPERTY PHASE PORTRAITS\n\n**Full TypeScript Implementation from Roadmap**\n\n### Concept\nVisualize protein compositional landscapes by computing property trajectories and projecting to 2D phase portraits that reveal domain structure and evolutionary divergence.\n\n### Mathematical Foundations\n\n**Window Property Vector:**\n```\nP(w) = [H(w), Q(w), A(w), F(w), D(w)]\n\nwhere:\n- H(w): Mean hydropathy (Kyte-Doolittle)\n- Q(w): Net charge ((K+R) - (D+E)) / W\n- A(w): Aromaticity (F+W+Y) / W\n- F(w): Flexibility (B-factor proxy)\n- D(w): Disorder propensity (IUPred-like)\n```\n\n**Kyte-Doolittle Hydropathy Scale:**\n```\nI: 4.5, V: 4.2, L: 3.8, F: 2.8, C: 2.5, M: 1.9, A: 1.8\nW: -0.9, G: -0.4, T: -0.7, S: -0.8, Y: -1.3, P: -1.6\nH: -3.2, N: -3.5, D: -3.5, Q: -3.5, E: -3.5, K: -3.9, R: -4.5\n```\n\n**PCA Projection:**\n```\n1. Center: P_centered = P - mean(P)\n2. Covariance: C = P^T × P / (n-1)\n3. Eigenvectors via power iteration\n4. Project: P_2D = P_centered × [v1, v2]\n```\n\n**Fréchet Distance for Trajectory Comparison:**\n```\nd_F(A, B) = min_{α,β} max_t ||A(α(t)) - B(β(t))||\n```\n\n### Complete TypeScript Implementation\n\n- `PropertyVector` interface (hydropathy, charge, aromaticity, flexibility, disorder)\n- `ProteinWindow` with properties and 2D projection\n- `ProteinTrajectory` with windows and detected domains\n- `DetectedDomain` with dominant property and centroid\n- `TrajectoryComparison` with Fréchet distance and divergent regions\n- `HYDROPATHY`, `FLEXIBILITY`, `DISORDER_PROPENSITY` scales\n- `computePropertyVector()` per window\n- `computeTrajectory()` sliding window analysis\n- `matrixMean()`, `centerMatrix()`, `computeCovariance()`\n- `powerIteration()` for eigendecomposition\n- `projectToPCA()` dimension reduction\n- `detectDomains()` clustering by dominant property\n- `getDominantProperty()` normalized comparison\n- `createDomain()` with centroid calculation\n- `analyzePhasePortraits()` main pipeline\n\n### Domain Detection\nAutomatically identifies:\n- Hydrophobic cores (membrane-spanning, buried)\n- Charged regions (DNA-binding, surface)\n- Aromatic clusters (stacking interactions)\n- Flexible linkers (interdomain connections)\n- Disordered regions (regulatory, low complexity)\n\n### TUI Features\n- ASCII scatter plot showing property trajectories\n- Cursor shows window position and properties\n- Press 'd' to jump to sequence slice\n- Color by dominant property\n- Comparative overlay for two proteins\n- Property contribution bars\n- Domain annotations on trajectory\n- Explained variance display\n\n### Why It's Good\n- Reveals domain-level compositional shifts\n- Invisible to simple sequence alignment\n- Shows where folding/interactions affected\n- Links composition directly to function\n\nNovelty: 8/10, Pedagogical: 9/10, Wow Factor: 8/10","status":"open","priority":3,"issue_type":"feature","created_at":"2025-12-07T00:17:46.481224-05:00","updated_at":"2025-12-07T13:39:18.691157-05:00","dependencies":[{"issue_id":"phage_explorer-dr7","depends_on_id":"phage_explorer-ojb","type":"blocks","created_at":"2025-12-07T00:20:52.745862-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-dx3","title":"Foundation: UI Design System \u0026 Visual Language","description":"## UI Design System \u0026 Visual Language\n\nEstablishes coherent visual language across all 31 features to maintain consistency.\n\n### Color Semantics\n- Green (#22c55e): Good, conserved, stable, similar\n- Yellow (#eab308): Caution, moderate, neutral\n- Red (#ef4444): Warning, divergent, unstable, different\n- Blue (#3b82f6): Informational, cool metrics\n- Purple (#a855f7): Special, unique, notable\n- Gray (#6b7280): Inactive, background, reference\n\n### Graph/Sparkline Standards\n- Height: 3-5 character rows for overlays\n- Width: Full terminal width\n- Scale: Auto-normalize, show min/max in labels\n- Style: Braille dots for high resolution\n\n### Panel/Modal Standards\n- Border: Single line box drawing\n- Header: Bold, centered, with close hint\n- Padding: 1 character on all sides\n- Max width: 80 characters (or terminal width - 4)\n\nThis is the foundational design system that all features must follow.","status":"closed","priority":0,"issue_type":"epic","created_at":"2025-12-06T23:35:34.98277-05:00","updated_at":"2025-12-06T23:58:14.201697-05:00","closed_at":"2025-12-06T23:58:14.201697-05:00"}
{"id":"phage_explorer-dxv","title":"Advanced: Pan-Phage Graph Pangenome \u0026 Structural Variant Cards","description":"Build graph pangenome over bundled phages via Rust petgraph + minimap2 bindings. Compress bubbles into variant records (SNP/indel/structural). Per-bubble metadata in SQLite. Mini ASCII graph ribbon with bubbles; press enter for variant card showing diff stats, donor lineage bar, overlapped genes. Shows modular mosaicism and reassortment. Novelty: High.","notes":"## PAN-PHAGE GRAPH PANGENOME \u0026 STRUCTURAL VARIANT CARDS\n\n**Full Implementation from Roadmap**\n\n### Concept\nBuild a graph pangenome over all bundled phages to expose conserved cores, accessory modules, recombination breakpoints, and mosaicism. Per-variant 'cards' show local diff, donor lineage hints, and functional impact.\n\n### How to Build\n\n**Graph Construction:**\n- Rust (petgraph + rayon) for rGFA-like graph\n- Align genomes with minimap2 bindings or rust-bio aligners\n- Compress bubbles into variant records (SNP/indel/structural)\n\n**Annotation Linkage:**\n- Map genes, AMGs, defense/anti-defense loci onto graph nodes\n- Tag breakpoints with recombination evidence\n\n**Variant Cards:**\n- Per-bubble metadata in SQLite:\n  - Size, gene overlap, GC shift, donor similarity\n- Query via WASM-compiled graph summaries\n\n### TUI Features\n- Mini ASCII graph ribbon with bubbles highlighted\n- Press enter to pop 'variant card':\n  - Diff stats (size, gene count)\n  - Donor lineage bar\n  - Overlapped genes list\n- Jump sequence grid to variant locus\n- Filter by: size, function, donor\n- Core vs accessory genome coloring\n\n### Why It's Good\n- Shows modular mosaicism and reassortment\n- Surfaces hotspots for host range or defense evasion\n- Reveals conserved backbone vs exchanged islands\n- Goes beyond linear diffs to real evolutionary story\n\n### Implementation Stack\n- Rust+WASM graph builder (petgraph, rust-bio)\n- minimap2 binding for alignments\n- SQLite for variant cards\n- TS/Ink UI for bubble strips and drilldowns\n\nNovelty: 9/10, Pedagogical: 9/10, Wow Factor: 9/10","status":"open","priority":3,"issue_type":"feature","created_at":"2025-12-07T00:17:39.546693-05:00","updated_at":"2025-12-07T13:21:59.58273-05:00","dependencies":[{"issue_id":"phage_explorer-dxv","depends_on_id":"phage_explorer-ojb","type":"blocks","created_at":"2025-12-07T00:20:52.133844-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-ea3","title":"Foundation: Depth Layers UI Philosophy \u0026 Keybinding Conventions","description":"## Depth Layers UI Philosophy \u0026 Keybinding Conventions\n\n### Core Philosophy\n\nPhage Explorer must serve two audiences:\n1. **Newcomers** who need simplicity and discoverability\n2. **Power users** who need speed and comprehensive access\n\nThe solution: **Depth Layers** — a progressive disclosure system where features are organized by access frequency and complexity.\n\n### The Five Layers\n\n```\nLayer 0: Sacred Surface (12 core controls)\n  ↓ Always visible, never change\nLayer 1: Quick Overlays (5 single-key toggles)\n  ↓ One keypress, instant visual augmentation\nLayer 2: Analysis Menu (A key)\n  ↓ Categorized selection, ~15 analyses\nLayer 3: Simulation Hub (Shift+S)\n  ↓ Interactive simulations, 5 tools\nLayer 4: Command Palette (: or Ctrl+P)\n  ↓ Fuzzy search everything, 31+ features\n```\n\n### Layer 0: Sacred Surface (NEVER CHANGE)\n\nThese 12 controls are the foundation. New users learn these first.\n\n```\nNAVIGATION:\n  ↑/↓       Navigate phages\n  ←/→       Scroll sequence\n  PgUp/PgDn Fast scroll\n  Home/End  Jump to start/end\n\nVIEW CONTROLS:\n  N/C/Space Toggle DNA/AA view\n  F         Cycle reading frame (AA mode)\n  T         Cycle theme\n  D         Toggle diff mode\n  M         Toggle 3D model\n\nMETA:\n  ?         Help overlay\n  S or /    Search phages\n  Q         Quit\n```\n\n**RULE**: These keys MUST remain unchanged forever. Any new feature uses other keys.\n\n### Layer 1: Quick Overlays\n\nSingle-key toggles for visual augmentation. These overlay information on the main sequence view.\n\n```\nG - GC Skew curve (replication origin)\nX - Complexity sparkline (HGT regions)\nB - Bendability track (packaging signals)\nP - Promoter/RBS annotations\nR - Repeat/palindrome markers\n```\n\n**Design Principle**: One key = one overlay. Toggle on/off. Max 3 active overlays.\n\n**Precomputation**: All overlay data computed on phage selection, not on key press. This makes overlays feel instant.\n\n### Layer 2: Analysis Menu\n\nPress `A` to open categorized analysis menu:\n\n```\n╭─────────── Analysis Menu ───────────╮\n│                                      │\n│  WHOLE GENOME                        │\n│  [1] GC Skew Analysis                │\n│  [2] Chaos Game Representation       │\n│  [3] Hilbert Curve Atlas             │\n│  [4] Self-Homology Dot Plot          │\n│  [5] Tetranucleotide PCA             │\n│                                      │\n│  EVOLUTION                           │\n│  [6] dN/dS Selection Pressure        │\n│  [7] Recombination Hotspots          │\n│  [8] Protein Domain Chord Plot       │\n│                                      │\n│  FUNCTION                            │\n│  [9] Codon Adaptation Dashboard      │\n│  [a] Host Range Predictor            │\n│  [b] Arms Race Scanner               │\n│  ...                                 │\n│                                      │\n│  [/] Search   [ESC] Cancel           │\n╰──────────────────────────────────────╯\n```\n\n**Design Principle**: Organized by category, numbered shortcuts, fuzzy search.\n\n### Layer 3: Simulation Hub\n\nPress `Shift+S` to open interactive simulation selector:\n\n```\n╭────────── Simulation Hub ───────────╮\n│                                      │\n│  INTERACTIVE SIMULATIONS             │\n│                                      │\n│  [1] Lysogeny Decision Circuit       │\n│      ODE model of lysis/lysogeny     │\n│      switch with MOI and UV params   │\n│                                      │\n│  [2] Ribosome Traffic Jam            │\n│      Translation particle simulation │\n│      showing codon effects           │\n│                                      │\n│  [3] Plaque Growth Automata          │\n│      2D cellular automaton of        │\n│      plaque formation                │\n│                                      │\n│  [4] Temporal Evolution Replay       │\n│      Animated phylogenetic time-     │\n│      lapse with mutation events      │\n│                                      │\n│  [5] Packaging Motor Pressure        │\n│      60 atm inside the capsid!       │\n│                                      │\n│  [ESC] Cancel                        │\n╰──────────────────────────────────────╯\n```\n\n**Design Principle**: Full-screen takeover, common controls (Space=pause, R=reset, arrows=speed).\n\n### Layer 4: Command Palette\n\nPress `:` or `Ctrl+P` for fuzzy search of ALL features:\n\n```\n╭────────────────────────────────────────────────────────────────────╮\n│ :gc skew                                                     [ESC] │\n├────────────────────────────────────────────────────────────────────┤\n│ ▶ GC Skew Replication Origin        [G]       Overlay             │\n│   Chaos Game Representation         [A→2]     Analysis            │\n│   Genomic Signature PCA             [A→5]     Analysis            │\n│   GC Content Display                [built-in]                     │\n╰────────────────────────────────────────────────────────────────────╯\n```\n\n**Design Principle**: Type anything, find everything. Show shortcut paths.\n\n### Keystroke Budget\n\n```\nLAYER 0 (reserved, untouchable):\n  ↑↓←→ PgUp PgDn Home End\n  N C Space F T D M ? S / Q\n\nLAYER 1 (quick overlays):\n  G X B P R  (5 keys)\n\nLAYER 2 (menu trigger):\n  A\n\nLAYER 3 (simulation trigger):\n  Shift+S\n\nLAYER 4 (command palette):\n  : or Ctrl+P\n\nLAYER 2+ FEATURES (accessed via menu):\n  W (comparison - already exists)\n  K (AA key - already exists)\n  \nRESERVED FOR FUTURE:\n  E I O U Y  (vowels for mnemonic features)\n  H J L Z    (vim-like navigation if needed)\n  1-9        (quick phage selection?)\n```\n\n### Risk Mitigation Strategies\n\n**Risk: Feature bloat slows main loop**\n- Mitigation: Lazy-load analysis components (`React.lazy`)\n- Mitigation: Precompute in background on phage selection\n- Mitigation: Cache aggressively in SQLite\n\n**Risk: Users get lost in menus**\n- Mitigation: ESC always returns to main view\n- Mitigation: Breadcrumb trail in status bar\n- Mitigation: \"Back\" action in every modal\n\n**Risk: Small terminal breaks layouts**\n- Mitigation: Detect terminal size, hide overlays if too small\n- Mitigation: Stack overlays vertically if narrow\n- Mitigation: Minimum viable mode = Layer 0 only\n\n**Risk: Keybinding conflicts**\n- Mitigation: Layer 0 = unmodified lowercase (sacred)\n- Mitigation: Layer 1 = specific lowercase (G, X, B, P, R)\n- Mitigation: Layer 2/3 = Shift+letter or menu selection\n- Mitigation: Layer 4 = `:` prefix (command mode)\n\n### Accessibility Metrics\n\n```\nTotal keystrokes to any feature: 1-3\nVisible complexity for new users: 12 controls\nAvailable power for experts: 31+ features\n```\n\n### Implementation Checklist\n\n- [ ] Document Layer 0 keys in help overlay\n- [ ] Implement overlay manager (max 3 active)\n- [ ] Create ModalMenu component for Layer 2/3\n- [ ] Build CommandRegistry singleton\n- [ ] Implement fuzzy search for palette\n- [ ] Add breadcrumb to status bar\n- [ ] Precompute overlay data on phage selection\n- [ ] Test on 80x24 minimum terminal\n\n### This Epic Blocks\n\nAll UI-related features depend on this philosophy being established and documented.","status":"closed","priority":0,"issue_type":"epic","created_at":"2025-12-06T23:56:39.998888-05:00","updated_at":"2025-12-07T00:00:03.714089-05:00","closed_at":"2025-12-07T00:00:03.714089-05:00"}
{"id":"phage_explorer-fno","title":"Layer 2: Chaos Game Representation (CGR) Fractal Fingerprints","description":"Transform DNA sequences into 2D fractal fingerprints using Chaos Game Representation (CGR). An Iterated Function System maps nucleotides to unit square corners, creating unique visual signatures that encode complete k-mer frequency spectra. Features Braille-character TUI rendering (8x resolution), interactive zoom into k-mer space, side-by-side comparison, and reveals CpG suppression, codon bias, and horizontal gene transfer signatures. Novelty: 9/10, Pedagogical: 9/10, Cool Factor: 10/10.","notes":"## CHAOS GAME REPRESENTATION (CGR) FRACTAL FINGERPRINTS\n\n**Comprehensive Feature Specification from Roadmap**\n\n### Concept\nThe Chaos Game Representation transforms a linear DNA sequence into a 2D fractal image encoding the complete k-mer frequency spectrum in a single visual fingerprint. Based on H. Joel Jeffrey's 1990 algorithm using an Iterated Function System (IFS):\n\n**Algorithm**: Assign nucleotides to unit square corners (A=top-left, T=top-right, G=bottom-right, C=bottom-left). Start at center. For each nucleotide, move halfway toward its corner and place a point. After k steps, point location uniquely encodes the last k nucleotides.\n\n**Biological Insights Revealed**:\n- CpG suppression (void in CG corner region - methylation signature)\n- Codon bias (highly expressed genes cluster in preferred codon regions)\n- Repetitive elements (unusually bright spots = high local k-mer frequency)\n- Horizontal gene transfer (texture discontinuities = mosaic ancestry)\n- Strand asymmetry (leading vs lagging strand preferences)\n\n### Mathematical Foundations\n\n**CGR Iteration Map**:\nGiven corners: A=(0,0), T=(1,0), C=(0,1), G=(1,1)\nStarting: P0 = (0.5, 0.5)\nFor each nucleotide ni: Pi = (Pi-1 + corner(ni)) / 2\n\n**K-mer to Coordinate Mapping (Bijective)**:\nx = sum(i=1 to k) xi / 2^i   (xi = corner_x(si))\ny = sum(i=1 to k) yi / 2^i   (yi = corner_y(si))\nEvery point in [0,1]^2 corresponds to a unique infinite k-mer.\n\n**Frequency CGR (FCGR)**:\nDiscretize unit square into 2^k x 2^k grid. Each cell counts k-mer occurrences:\n- k=3: 8x8 = 64 cells (trinucleotides)\n- k=4: 16x16 = 256 cells (tetranucleotides)\n\n**Fractal Dimension**: D2 = lim(e-\u003e0) log(C(e)) / log(e)\n- Random: D2 ~ 2 (fills plane)\n- Repetitive: D2 \u003c 2 (attractors)\n\n**Comparison Metrics**: Euclidean, Pearson correlation, KL divergence, Cosine similarity\n\n### Implementation\n\n**Core Interfaces**: CGRConfig (resolution, normalize, logScale, smoothing), CGRResult (grid: Float32Array, resolution, maxCount, totalPoints, emptyFraction, entropy)\n\n**computeCGR()**: O(n) iteration, corner lookup, grid increment, entropy calculation\n\n**compareCGR()**: Euclidean distance, Pearson correlation, cosine similarity\n\n**Braille TUI Rendering**: Unicode Braille (0x2800 base) for 8x resolution boost. Heat map coloring.\n\n**Interactive**: Zoom k-mer space, Pan, K-mer lookup, Side-by-side comparison\n\n### Assessment\n- Novelty: 9/10 - CGR + TUI + Braille + interactive zoom unprecedented\n- Pedagogical: 9/10 - IFS, bijective mappings, information theory, chaos\n- Cool Factor: 10/10 - Beautiful fractals from DNA\n\n### Files\n- packages/tui/src/components/CGRView.tsx\n- packages/core/src/analysis/cgr.ts\n- packages/core/src/analysis/cgr-compare.ts","status":"open","priority":1,"issue_type":"feature","created_at":"2025-12-06T23:14:47.023731-05:00","updated_at":"2025-12-07T00:03:27.025404-05:00","dependencies":[{"issue_id":"phage_explorer-fno","depends_on_id":"phage_explorer-54g","type":"blocks","created_at":"2025-12-06T23:14:47.025541-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-h6r","title":"Advanced: Environmental \u0026 Geospatial Provenance Map","description":"Map each phage to nearest metagenomic hits across biomes/locations to infer habitat and novelty. Adds ecological context and highlights novel clades or constrained niches.\n\n**Build Plan:**\n- Import sketch indexes (Mash/FracMinHash) of public metagenomes (IMG/VIROME, MGnify) prebuilt offline\n- At runtime, query sketches in Rust → WASM\n- Store top hits with biome/geo metadata in SQLite\n- Compute novelty score (1 - max containment)\n\n**Why It's Good:**\n- Ecological context for phage origin and distribution\n- Highlights truly novel clades vs well-characterized families\n- Shows metagenomic surveillance and containment vs identity\n\n**TUI Visualization:**\n- Mini world/biome map with hit density\n- Novelty badge prominently displayed\n- Press 'e' to cycle habitats and see containment bars\n\n**Implementation Stack:** Rust+WASM for sketch queries, prebuilt Mash/FracMinHash indexes, SQLite caching, braille/block char world map.\n\nNovelty: 8/10, Pedagogical: 8/10, Cool Factor: 9/10.","notes":"## ENVIRONMENTAL \u0026 GEOSPATIAL PROVENANCE MAP\n\n**Comprehensive Feature Specification from Roadmap**\n\n### Concept\nMap each phage to nearest metagenomic hits across biomes/locations to infer habitat, ecological niche, and novelty. Contextualizes phages within the broader viral ecology.\n\n**What This Feature Does:**\n- Queries prebuilt sketch indexes of public metagenomes\n- Identifies where similar phages have been found\n- Computes novelty score based on containment\n- Maps hits to biomes and geographic locations\n\n### Build Plan\n\n**Step 1: Prebuilt Indexes**\n```bash\n# Offline: Build Mash/FracMinHash indexes\nmash sketch -p 16 -s 10000 -o imgvr_sketches imgvr_seqs/*.fasta\nmash sketch -p 16 -s 10000 -o mgnify_sketches mgnify_seqs/*.fasta\n```\n\n**Step 2: Runtime Queries (Rust+WASM)**\n```rust\nfn query_metagenome_sketches(\n    query_sketch: \u0026MinHashSketch,\n    indexes: \u0026[SketchIndex],\n) -\u003e Vec\u003cMetagenomeHit\u003e {\n    indexes.par_iter()\n        .flat_map(|idx| idx.query(query_sketch, 0.7)) // min containment\n        .filter(|hit| hit.containment \u003e threshold)\n        .collect()\n}\n```\n\n**Step 3: Novelty Scoring**\n```typescript\n// Novelty = 1 - max_containment\n// High novelty = not seen in metagenomes before\nconst novelty = 1 - Math.max(...hits.map(h =\u003e h.containment));\n```\n\n### TUI Visualization\n\n```\n╭─────────────────────────────────────────────────────────────────────────────╮\n│  ENVIRONMENTAL PROVENANCE: Lambda Phage                                     │\n├─────────────────────────────────────────────────────────────────────────────┤\n│                                                                             │\n│  Novelty Score: 0.23 (WELL-CHARACTERIZED)                                   │\n│                                                                             │\n│  ┌─────────────────────────────────────────────────────────────────────┐    │\n│  │  BIOME DISTRIBUTION                                                 │    │\n│  │                                                                     │    │\n│  │  Gut          ████████████████░░░░  72%                            │    │\n│  │  Freshwater   ███████░░░░░░░░░░░░░  34%                            │    │\n│  │  Soil         ████░░░░░░░░░░░░░░░░  18%                            │    │\n│  │  Marine       ██░░░░░░░░░░░░░░░░░░   8%                            │    │\n│  │  Hot Spring   ░░░░░░░░░░░░░░░░░░░░   0%                            │    │\n│  │                                                                     │    │\n│  └─────────────────────────────────────────────────────────────────────┘    │\n│                                                                             │\n│  ┌─ GEOGRAPHIC HITS ────────────────────────────────────────────────────┐   │\n│  │    ·   ·       ·                  ·                                 │   │\n│  │  ·    ●   ·         ●     ·          ·    ·                        │   │\n│  │     ·      ·    ●      ·      ●   ·        ·                       │   │\n│  │        ·        ·  ·                   ·                           │   │\n│  │  ● = High containment  · = Low containment                          │   │\n│  └─────────────────────────────────────────────────────────────────────┘    │\n│                                                                             │\n│  Top Metagenome Sources:                                                    │\n│  ├─ IMG/VR: Human gut (USA)     Containment: 0.77                          │\n│  ├─ MGnify: Wastewater (EU)     Containment: 0.65                          │\n│  └─ MGnify: River sediment (CN) Containment: 0.52                          │\n│                                                                             │\n│  [E] Cycle habitats  [G] Geographic focus  [N] Novelty details  [ESC]      │\n╰─────────────────────────────────────────────────────────────────────────────╯\n```\n\n### Why It's Good\n\n1. **Ecological Context**: Places phages within their natural habitat\n2. **Novelty Detection**: Identifies truly novel vs well-studied phages\n3. **Surveillance Integration**: Shows where similar phages circulate globally\n4. **Therapy Considerations**: Gut vs environmental origin affects safety profile","status":"open","priority":3,"issue_type":"feature","created_at":"2025-12-07T13:04:28.752178-05:00","updated_at":"2025-12-07T13:05:38.055918-05:00","dependencies":[{"issue_id":"phage_explorer-h6r","depends_on_id":"phage_explorer-ojb","type":"blocks","created_at":"2025-12-07T13:06:05.612928-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-hto","title":"Advanced: Functional Synteny Elastic Alignment","description":"Align gene order between phages using dynamic time warping on gene family sequences. MMseqs2 clustering offline. Synteny continuity scores, module conservation metrics. Dual gene bars with elastic bands linking orthologous modules; breakpoint markers. Highlights rearrangements beyond sequence identity. Novelty: Medium-high.","notes":"## FUNCTIONAL SYNTENY ELASTIC ALIGNMENT\n\n**Full Implementation from Roadmap**\n\n### Concept\nAlign gene order between phages using elastic warping on gene families/distances to reveal conserved modules vs shuffled blocks.\n\n### How to Build\n\n**Gene Families:**\n- Cluster proteins via MMseqs2 offline\n- Store family IDs per gene in SQLite\n- Family = orthologous group\n\n**Elastic Alignment:**\n- Rust+WASM dynamic time warping (DTW) on family sequences\n- Gap penalties reflecting genomic distance\n- Output: matched blocks and breakpoints\n- Handle inversions and translocations\n\n**Scores:**\n- Synteny continuity score per region\n- Module conservation metrics\n- Rearrangement count and complexity\n\n**Caching:**\n- Precompute pairwise synteny for 12 core phages\n- On-demand for newly loaded phages\n\n### TUI Features\n- Dual gene bars (phage A on top, phage B below)\n- Elastic 'bands' linking orthologous modules\n- Breakpoint markers with rearrangement type\n- Press 'm' to cycle through modules\n- Press 's' to show continuity score\n- Color by module function (replication, morphogenesis, lysis)\n\n### Why It's Good\n- Highlights modular genome architecture\n- Reveals rearrangements beyond sequence identity\n- Shows how function and position co-evolve\n- Aids understanding of phage modularity\n\n### Implementation Stack\n- Rust+WASM DTW algorithm\n- TS/Ink dual-track view\n- SQLite caches for family IDs and synteny results\n- ASCII band rendering with Unicode box characters\n\nNovelty: 8/10, Pedagogical: 9/10, Wow Factor: 8/10","status":"open","priority":3,"issue_type":"feature","created_at":"2025-12-07T00:18:15.661616-05:00","updated_at":"2025-12-07T13:25:58.968648-05:00","dependencies":[{"issue_id":"phage_explorer-hto","depends_on_id":"phage_explorer-ojb","type":"blocks","created_at":"2025-12-07T00:20:54.60057-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-ihk","title":"Advanced: Dinucleotide \u0026 Codon Bias Tensor Decomposition","description":"Decompose di-/tri-nucleotide and codon-usage patterns into latent bias modes via NMF/PCA. Correlate components with metadata (host, lifecycle, genome type). 2D latent map with phages as points; bar chart of contributing k-mers. Exposes hidden biases tied to biology. Novelty: Medium.","notes":"## DINUCLEOTIDE \u0026 CODON BIAS TENSOR DECOMPOSITION\n\n**Full Implementation from Roadmap**\n\n### Concept\nDecompose joint di-/tri-nucleotide and codon-usage patterns across phages into latent 'bias modes' (e.g., replication strategy, host clade) and position each genome in that space.\n\n### How to Build\n\n**Tensor Build:**\n- For each phage, compute dinuc/codon frequency vectors\n- Stack into matrix/tensor (phages × features)\n- Features: 16 dinucs + 64 codons + optional trinucs\n\n**Decomposition:**\n- NMF/PCA in Rust+WASM (ndarray + linfa) for speed\n- Store loadings per phage and per-feature\n- Components capture latent bias modes\n\n**Annotation:**\n- Correlate components with metadata:\n  - Host taxonomy (Gram+/-, specific species)\n  - Lifecycle (lytic/temperate)\n  - Genome type (dsDNA, ssDNA, RNA)\n  - Replication strategy\n\n**Per-Gene Projection:**\n- Optional per-gene loadings to localize bias shifts\n- Identifies islands with different compositional signature\n\n### TUI Features\n- 2D latent map with phages as points (ASCII scatter)\n- Hover shows metadata correlations for position\n- Bar chart of top contributing k-mers for selected component\n- Component selector to rotate view\n- Outlier highlighting with novelty scores\n- Per-gene mode showing bias shifts along genome\n\n### Why It's Good\n- Exposes hidden biases tied to biology\n- Aids clustering and anomaly detection\n- Shows replication enzyme signatures\n- Identifies horizontally transferred regions\n\n### Implementation Stack\n- Rust+WASM NMF/PCA (linfa crate)\n- TS UI for scatter plots and bars\n- SQLite for loadings and component metadata correlations\n- Braille block scatter rendering\n\nNovelty: 8/10, Pedagogical: 8/10, Wow Factor: 8/10","status":"open","priority":3,"issue_type":"feature","created_at":"2025-12-07T00:18:14.634815-05:00","updated_at":"2025-12-07T13:25:57.969998-05:00","dependencies":[{"issue_id":"phage_explorer-ihk","depends_on_id":"phage_explorer-ojb","type":"blocks","created_at":"2025-12-07T00:20:54.493414-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-ji2","title":"Advanced: Epistasis \u0026 Fitness Landscape Explorer","description":"Map pairwise epistasis for key proteins (capsid/tail/polymerase) via ESM single-mutant scores + Potts/EVcouplings model. Find robust vs fragile regions and likely escape routes. Braille heatmap (pos×pos) with Δfitness cells, mutant cards, protein selector. Anticipates escape; guides stable engineering. Novelty: High, Pedagogical: High (fitness landscapes, robustness).","notes":"## EPISTASIS \u0026 FITNESS LANDSCAPE EXPLORER (IN SILICO DMS)\n\n**Full Implementation from Roadmap**\n\n### Mathematical Foundations\n\n**Potts Model for Sequence Distributions:**\n```\nP(A₁, ..., Aₗ) = (1/Z) × exp(Σᵢ hᵢ(Aᵢ) + Σᵢ\u003cⱼ Jᵢⱼ(Aᵢ, Aⱼ))\n\nwhere:\n- Aᵢ: Amino acid at position i\n- hᵢ(a): Single-site field (preference for amino acid a)\n- Jᵢⱼ(a,b): Coupling between positions i,j for amino acids a,b\n- Z: Partition function (normalization)\n```\n\n**Direct Information (DI) for Coupling Strength:**\n```\nDI(i,j) = Σₐ,ᵦ P_dir(a,b|i,j) × log(P_dir(a,b|i,j) / (fᵢ(a) × fⱼ(b)))\n```\n\n**Epistasis Score:**\n```\nε_ij(a,b) = ΔΔG = (G_wt - G_mut_i - G_mut_j + G_double)\n\nPositive ε: Antagonistic (compensatory - double better than expected)\nNegative ε: Synergistic (double worse than expected)\n```\n\n**Single-Mutant Fitness from Pseudo-Likelihood:**\n```\nΔG_mut ≈ -log(P_ESM(mut) / P_ESM(wt))\nUsing BLOSUM62 as proxy for evolutionary constraint\n```\n\n### Complete TypeScript Implementation\n\n- `SingleMutantEffect` interface (position, wt, mut, ΔFitness, uncertainty, structural context)\n- `EpistasisPair` with pos1/2, single effects, double effect, epistasis score, type, significance\n- `PottsModel` (fields, couplings, directInfo matrices)\n- `FitnessLandscape` per protein (single mutants, epistasis pairs, robust/fragile regions, escape routes)\n- `computePseudoLikelihood()` BLOSUM62-based scoring with context\n- `BLOSUM62` substitution matrix\n- `computeDirectInfo()` from sequence frequencies (pairwise MI proxy)\n- `predictSingleMutants()` for all positions × 20 amino acids\n- `computeEpistasis()` for position pairs with high DI\n- `identifyRegions()` robust vs fragile via sliding window\n- `analyzeFitnessLandscape()` full pipeline for key proteins\n- `renderEpistasisHeatmap()` ASCII block visualization\n\n### Key Proteins Analyzed\n- Capsid (coat proteins)\n- Tail fibers\n- Portal\n- Polymerase\n\n### TUI Features\n- Epistasis Heatmap (position × position) with block characters\n- Selected Pair details: wt/mut, single effects, double effect, ε score\n- Interpretation: synergistic, antagonistic, additive\n- Region Summary: robust (stable) vs fragile (sensitive) regions\n- Escape Routes: compensatory mutation pairs\n- [←/→] Move selection, [P] Select protein, [T] Threshold slider\n\n### Implementation Stack\n- Offline LM scoring (ESM2/ProtT5 via Python) cached\n- Rust+WASM for Potts model fitting (ndarray + statrs)\n- SQLite matrix cache for epistasis scores\n- TS/Ink UI for heatmap and mutant cards\n\nNovelty: 9/10, Pedagogical: 9/10, Wow Factor: 8/10","status":"open","priority":3,"issue_type":"feature","created_at":"2025-12-06T23:54:34.192624-05:00","updated_at":"2025-12-07T13:24:38.729265-05:00","dependencies":[{"issue_id":"phage_explorer-ji2","depends_on_id":"phage_explorer-54g","type":"blocks","created_at":"2025-12-06T23:56:51.449633-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-kul","title":"Layer 2: Sequence Logo Generator","description":"Create information-theoretic sequence logos from multiple sequence alignments. Compute Shannon entropy per position, letter heights proportional to frequency × information content. Standard for visualizing conserved motifs (promoters, RBS, binding sites). Supports both DNA (max 2 bits) and protein (max 4.3 bits) alphabets. ASCII art stacked letters with bit scale. Novelty: 6/10, Pedagogical: 9/10, Cool Factor: 7/10.","notes":"## SEQUENCE LOGO GENERATOR\n\n**Comprehensive Feature Specification from Roadmap**\n\n### Concept\nCreate information-theoretic sequence logos from multiple sequence alignments. The standard visualization for conserved motifs in promoters, ribosome binding sites, transcription factor binding sites.\n\n**What sequence logos show**:\n- Height of stack at each position = total information content (bits)\n- Height of each letter within stack = that base's contribution\n- Highly conserved positions have tall stacks (near 2 bits for DNA)\n- Variable positions have short stacks (near 0 bits)\n\n### Mathematical Foundations\n\n**Information Content**:\nFor DNA: max_bits = 2 (log2(4) nucleotides)\nFor protein: max_bits = 4.3 (log2(20) amino acids)\n\n**Shannon Entropy at position p**:\nH(p) = -sum(f(b,p) * log2(f(b,p))) for all bases b\n\nwhere f(b,p) = frequency of base b at position p\n\n**Information Content**:\nR(p) = max_bits - H(p) - e(n)\n\nwhere e(n) = small sample correction = (s-1) / (2 * ln(2) * n)\ns = number of symbols, n = number of sequences\n\n**Letter Heights**:\nheight(b,p) = f(b,p) * R(p)\n\nLetters stacked smallest at bottom, largest on top.\n\n### Implementation\n\n**Core Interface**:\n```typescript\ninterface LogoColumn {\n  position: number;\n  totalBits: number;  // Information content\n  letters: { char: string; height: number }[];  // Sorted by height\n}\n\nfunction generateLogo(alignment: string[], type: 'dna' | 'protein'): LogoColumn[]\n```\n\n**Key Functions**:\n- Count frequencies at each position\n- Calculate Shannon entropy\n- Compute information content per position\n- Sort letters by height for stacking\n- Render as ASCII art with scaled heights\n\n### TUI Visualization\n\n```\nPromoter -10 box consensus logo:\n\nBits\n 2.0 |     T\n     |     T A A A\n 1.5 |     T A A A T\n     |   T T A A A T\n 1.0 |   T T A A A T\n     |   T T A A A T\n 0.5 | T T T A A A T A\n     | T T T A A A T A T\n 0.0 +-+-+-+-+-+-+-+-+-+-\n       1 2 3 4 5 6 7 8 9\n\nConsensus: TATAAT (Pribnow box)\nInformation content: 8.2 bits (highly conserved)\n```\n\n### Assessment\n- Novelty: 6/10 - Standard bioinformatics tool, but TUI rendering is useful\n- Pedagogical: 9/10 - Teaches information theory, conservation, motif structure\n- Cool Factor: 7/10 - Seeing letter stacks is intuitive and satisfying\n\n### Files\n- packages/tui/src/components/LogoView.tsx\n- packages/core/src/analysis/sequence-logo.ts\n- packages/core/src/analysis/alignment-utils.ts","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-06T23:12:45.391548-05:00","updated_at":"2025-12-07T00:06:19.92041-05:00","dependencies":[{"issue_id":"phage_explorer-kul","depends_on_id":"phage_explorer-54g","type":"blocks","created_at":"2025-12-06T23:12:45.393178-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-ltm","title":"Advanced: Host-Phage Protein Interaction \u0026 Docking Map","description":"Predict host targets of phage effectors (anti-defense, RBPs) via ESM/ProtT5 embedding similarity, PFAM domain filtering, and optional coarse docking. Bipartite graph UI with confidence edges, residue tooltips. Generates mechanistic host-range and anti-defense hypotheses beyond BLAST. Novelty: High, Pedagogical: High (embeddings, docking, domain-function).","notes":"## HOST-PHAGE PROTEIN INTERACTION \u0026 EFFECTOR DOCKING MAP\n\n**Full Implementation from Roadmap**\n\n### Mathematical Foundations\n\n**Embedding Similarity:**\n```\nsim_embed(p, h) = cos(e_p, e_h) = (e_p · e_h) / (||e_p|| × ||e_h||)\n```\n\n**Domain Compatibility Score:**\n```\nsim_domain(p, h) = Σᵢⱼ P(interact | domain_i, domain_j) × I(domain_i ∈ p) × I(domain_j ∈ h)\n```\n\n**Docking Score Transformation:**\n```\nP(bind | E_dock) = 1 / (1 + exp((E_dock - E_threshold) / kT))\n```\n\n**Bayesian Evidence Fusion:**\n```\nlog P(interact | embed, domain, dock) =\n    w₁ × log(sim_embed) + w₂ × log(sim_domain) + w₃ × log(P_dock) + prior\nConfidence = σ(log_odds)\n```\n\n### Complete TypeScript Implementation\n\n- `ProteinEmbedding` interface (1280-dim ESM2 vectors)\n- `DomainHit` with functional categories (receptor, defense, metabolism)\n- `PredictedInteraction` with evidence scores and confidence\n- `HostProtein` database entry structure\n- `cosineSimilarity()` embedding comparison\n- `DOMAIN_INTERACTION_PRIORS` Map (Phage_tail_fiber↔LPS, Anti_CRISPR↔CRISPR_Cas, etc.)\n- `domainCompatibility()` with supporting pair tracking\n- `classifyInteractionType()` (anti-defense, receptor-binding, metabolic)\n- `fuseEvidence()` Bayesian confidence calculation\n- `buildInteractionNetwork()` main network construction\n\n### TUI Features\n- Bipartite graph: phage proteins ↔ host targets\n- Edge thickness = confidence level\n- Interaction type filtering: [F]unction (receptor, defense, metabolism)\n- Evidence panel showing embedding sim, domain match, docking score\n- Top receptor candidates with confidence percentages\n- Host Range Breadth indicator\n\n### Implementation Stack\n- Python (ESM/ProtT5) for embeddings, export to ONNX\n- ONNX Runtime in Bun for inference\n- HMMER precompute for domain annotations\n- SQLite caching for embedding vectors\n- Braille/block bipartite graph visualization\n\nNovelty: 9/10, Pedagogical: 9/10, Wow Factor: 9/10","status":"open","priority":3,"issue_type":"feature","created_at":"2025-12-06T23:50:09.694441-05:00","updated_at":"2025-12-07T13:20:32.29099-05:00","dependencies":[{"issue_id":"phage_explorer-ltm","depends_on_id":"phage_explorer-54g","type":"blocks","created_at":"2025-12-06T23:56:51.05269-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-nm9","title":"Advanced: High-Resolution K-mer Anomaly Cartography","description":"Map localized k-mer rarity via z-scores vs reference corpus. Sliding window with Welford variance + LOF. Fuse with GC skew and coding density. Scrolling heat-strip under sequence grid; hotspots pulse; side panel shows top k-mers and genes. Flags HGT/AMG/defense islands. Novelty: Medium-high.","notes":"## HIGH-RESOLUTION K-MER ANOMALY CARTOGRAPHY\n\n**Full Implementation from Roadmap**\n\n### Concept\nMap localized k-mer rarity/novelty (z-scores vs a reference corpus) to expose atypical islands (HGT, AMGs, anti-defense loci) and couple with GC/AT skew and coding density.\n\n### How to Build\n\n**Background Model:**\n- Global corpus k-mer frequencies (k=3/5/7/9) precomputed\n- Store means/variances per k\n- Sources: all known phage genomes\n\n**Sliding Windows:**\n- Rust+WASM streaming k-mer counter\n- Welford's online variance algorithm\n- Per-window z-scores and LOF (Local Outlier Factor)\n- Cache per phage in SQLite\n\n**Composite Score:**\n```\nanomaly = w₁×z_kmer + w₂×GC_skew + w₃×(1-coding_density)\n```\n- Weights configurable by user\n- Higher score = more anomalous\n\n**Drill-Down:**\n- Link anomalous windows to nearby genes\n- Show top contributing k-mers\n- Motif and function predictions\n\n### TUI Features\n- Scrolling heat-strip under sequence grid\n- Hotspots pulse/glow\n- Press 'enter' to open side panel with:\n  - Top-k unusual k-mers\n  - Nearby genes\n  - Putative function\n- Anomaly threshold slider\n\n### Why It's Good\n- Flags HGT, defense, AMG islands that annotation misses\n- Prioritizes 'what's weird here?'\n- Alignment-free detection\n- Compositional biology insights\n\n### Implementation Stack\n- Rust+WASM sliding k-mer stats\n- TS/Ink heat-strip visualization\n- SQLite window cache\n- Optional LOF in Rust with kd-tree\n\nNovelty: 8/10, Pedagogical: 8/10, Wow Factor: 8/10","status":"in_progress","priority":3,"issue_type":"feature","created_at":"2025-12-07T00:17:45.217066-05:00","updated_at":"2025-12-07T13:27:18.933998-05:00","dependencies":[{"issue_id":"phage_explorer-nm9","depends_on_id":"phage_explorer-ojb","type":"blocks","created_at":"2025-12-07T00:20:52.603582-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-ofm","title":"Foundation: Help System Redesign (Contextual Layered Help)","description":"## Help System Redesign (Contextual Layered Help)\n\nReplace single help overlay with contextual, layered help system.\n\n### New Help Layout\n- Two-column layout: Navigation/View Controls\n- Overlays section (G/X/B/P/R toggles)\n- Search section\n- Advanced section (A menu, Shift+S hub, : palette)\n\n### Progressive Disclosure\n- Press ? once: Essential controls only\n- Press ? twice: Detailed docs with feature explanations\n- Context-sensitive: Show relevant shortcuts based on current view\n\n### Features\n- Each overlay explained\n- Each analysis tool described\n- Keyboard shortcut cheatsheet\n- ESC always exits\n\nDepends on: UI Design System (phage_explorer-dx3)","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-06T23:35:35.397685-05:00","updated_at":"2025-12-07T00:04:19.099563-05:00","closed_at":"2025-12-07T00:04:19.099563-05:00","dependencies":[{"issue_id":"phage_explorer-ofm","depends_on_id":"phage_explorer-2g5","type":"blocks","created_at":"2025-12-06T23:35:35.399184-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-ofm","depends_on_id":"phage_explorer-dx3","type":"blocks","created_at":"2025-12-06T23:39:00.284879-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-oit","title":"Advanced: Transcription Flow \u0026 Promoter Strength Explorer","description":"Predict promoter/terminator strengths and simulate transcriptional flow to identify bottlenecks or overexpression risks. Bridges sequence-level regulatory signals to expression realism.\n\n**Build Plan:**\n- Promoter/terminator scoring via motif/HMM + CNN-lite (ONNX in Bun)\n- Simple queue/flow model in TS or Rust+WASM to propagate polymerase flux\n- Consider pauses, terminators, and sigma factor preferences\n- Link to gene functions to flag likely expression imbalances\n\n**Why It's Good:**\n- Shows interplay of promoter strength, termination efficiency, and transcriptional bottlenecks\n- Aids redesign and synthetic biology applications\n- Identifies potential expression problems before wet lab\n\n**TUI Visualization:**\n- 'Flow meter' overlay with thickness proportional to predicted transcription\n- Paused regions glow/highlight\n- Toggle σ-factor presets to redraw map live\n\n**Implementation Stack:** ONNX Runtime for CNN models, TypeScript flow simulator, Rust+WASM for heavy motif scans, SQLite caching.\n\nNovelty: 9/10, Pedagogical: 9/10, Cool Factor: 8/10.","notes":"## TRANSCRIPTION FLOW \u0026 PROMOTER STRENGTH EXPLORER\n\n**Comprehensive Feature Specification from Roadmap**\n\n### Concept\nPredict promoter/terminator strengths and simulate transcriptional flow to identify bottlenecks or overexpression risks. Connects sequence-level regulatory signals to expression predictions.\n\n**What This Feature Does:**\n- Scans for promoters and terminators with strength predictions\n- Models RNA polymerase flux along the genome\n- Identifies transcriptional bottlenecks and overexpression zones\n- Supports different sigma factor contexts\n\n### Build Plan\n\n**Step 1: Regulatory Element Detection**\n```typescript\ninterface PromoterHit {\n  position: number;\n  strength: number;    // 0-1, relative\n  sigmaFactor: 'σ70' | 'σ32' | 'σ54' | 'σS';\n  confidence: number;\n  sequence: string;    // -35 to +1\n}\n\ninterface TerminatorHit {\n  position: number;\n  efficiency: number;  // 0-1, fraction terminated\n  type: 'rho-independent' | 'rho-dependent';\n  confidence: number;\n}\n```\n\n**Step 2: Flow Simulation**\n```typescript\nfunction simulateTranscriptionFlow(\n  promoters: PromoterHit[],\n  terminators: TerminatorHit[],\n  genomeLength: number\n): TranscriptionProfile {\n  const flux = new Float32Array(genomeLength);\n  \n  // Initialize flux at each promoter\n  for (const p of promoters) {\n    flux[p.position] += p.strength;\n  }\n  \n  // Propagate downstream, attenuating at terminators\n  for (let i = 0; i \u003c genomeLength; i++) {\n    if (i \u003e 0) flux[i] += flux[i-1];\n    \n    // Apply termination\n    const term = terminators.find(t =\u003e t.position === i);\n    if (term) {\n      flux[i] *= (1 - term.efficiency);\n    }\n  }\n  \n  return { flux, peaks: findPeaks(flux), bottlenecks: findBottlenecks(flux) };\n}\n```\n\n**Step 3: Expression Balance Analysis**\n```typescript\n// Flag genes with unusual expression predictions\nfunction analyzeExpressionBalance(\n  genes: Gene[],\n  flux: Float32Array\n): ExpressionWarning[] {\n  return genes.map(gene =\u003e {\n    const avgFlux = mean(flux.slice(gene.start, gene.end));\n    const expectedRange = getExpectedRange(gene.function);\n    \n    if (avgFlux \u003e expectedRange.max) {\n      return { gene, warning: 'OVEREXPRESSED', flux: avgFlux };\n    }\n    if (avgFlux \u003c expectedRange.min) {\n      return { gene, warning: 'UNDEREXPRESSED', flux: avgFlux };\n    }\n    return null;\n  }).filter(Boolean);\n}\n```\n\n### TUI Visualization\n\n```\n╭─────────────────────────────────────────────────────────────────────────────╮\n│  TRANSCRIPTION FLOW: Lambda Phage                          σ70 (default)    │\n├─────────────────────────────────────────────────────────────────────────────┤\n│                                                                             │\n│  Gene Map:                                                                  │\n│  │ N │ cI │ O │ P │ Q ├──────────────────────────┤ S │ R │ Rz │           │\n│                                                                             │\n│  Flow Profile:                                                              │\n│  ┌─────────────────────────────────────────────────────────────────────┐    │\n│  │                    ▄▄▄▄                                             │    │\n│  │         ▄▄▄       ████                                              │    │\n│  │   ▄▄▄▄▄████▄▄▄   █████▄▄▄▄                        ▄▄▄▄▄▄           │    │\n│  │▄▄██████████████▄███████████▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄███████▄▄         │    │\n│  └─────────────────────────────────────────────────────────────────────┘    │\n│    ↑ PL     ↑ PR            ↑ PR'          tL↓        ↑ PR''               │\n│                                                                             │\n│  Promoters Detected:                                                        │\n│  ├─ PL (pos: 35,417)     Strength: ████████░░ 0.82  [σ70]                  │\n│  ├─ PR (pos: 37,940)     Strength: █████████░ 0.94  [σ70] ← STRONG        │\n│  ├─ PR' (pos: 44,130)    Strength: ██████░░░░ 0.61  [σ70]                  │\n│  └─ PR'' (pos: 46,200)   Strength: █████░░░░░ 0.53  [σ70]                  │\n│                                                                             │\n│  Terminators:                                                               │\n│  └─ tL (pos: 38,150)     Efficiency: 0.95 (rho-independent)                │\n│                                                                             │\n│  ⚠️  Expression Warnings:                                                  │\n│  └─ Gene 'Q': HIGH predicted expression (flux: 2.3x average)               │\n│                                                                             │\n│  [S] Toggle sigma factors  [P] Show promoter details  [F] Flow animation   │\n╰─────────────────────────────────────────────────────────────────────────────╯\n```\n\n### Why It's Good\n\n1. **Regulatory Understanding**: Shows how genome organization affects expression\n2. **Design Aid**: Identifies problematic expression patterns before wet lab\n3. **Sigma Factor Context**: Different growth conditions = different flow patterns\n4. **Bottleneck Detection**: Finds where transcription gets stuck or accumulates","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-07T13:04:30.5481-05:00","updated_at":"2025-12-07T13:05:39.960984-05:00","dependencies":[{"issue_id":"phage_explorer-oit","depends_on_id":"phage_explorer-ojb","type":"blocks","created_at":"2025-12-07T13:06:05.732256-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-ojb","title":"Foundation: Simulation Framework","description":"Create common infrastructure for 5 interactive simulations: Lysogeny Circuit, Ribosome Traffic, Plaque Automata, Evolution Replay, Packaging Motor. Implement Simulation interface with init/step/render lifecycle. Common controls: Space=pause, R=reset, arrows=speed.","notes":"Simulation framework implemented: registry for 5 sims, SimulationHub overlay (Shift+S) to launch, SimulationView with controls (pause/step/reset/speed), store tracks simulation state. Sim types: lysogeny circuit, ribosome traffic, plaque automata, evolution replay, packaging motor.","status":"closed","priority":0,"issue_type":"epic","created_at":"2025-12-06T23:08:59.749642-05:00","updated_at":"2025-12-07T13:24:15.377629-05:00","closed_at":"2025-12-07T13:24:15.377637-05:00"}
{"id":"phage_explorer-oqh","title":"Layer 2: Selection Pressure Chromosome Painter (dN/dS Landscape)","description":"Layer 2 Analysis: Compute dN/dS (omega) across genes, paint chromosome by selection pressure. Blue=purifying (essential), Red=positive (arms race), Gray=neutral. Nei-Gojobori method with JC correction. Requires comparison phage. Pedagogical: 10/10.","status":"open","priority":1,"issue_type":"feature","created_at":"2025-12-06T23:11:46.057601-05:00","updated_at":"2025-12-06T23:22:16.15258-05:00","dependencies":[{"issue_id":"phage_explorer-oqh","depends_on_id":"phage_explorer-54g","type":"blocks","created_at":"2025-12-06T23:11:46.060136-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-oqh","depends_on_id":"phage_explorer-2g5","type":"blocks","created_at":"2025-12-06T23:39:30.270014-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-owy","title":"Layer 2: Host Range Predictor (CRISPR Spacer Matching)","description":"Fuse CRISPR spacer hits with receptor-binding motif classifiers. Score per host lineage with evidence (spacer alignments, RBP motif hits). MinHash/LSH index for spacers + HMMER for RBP families. Bayesian fusion scoring. Evidence table per host with strict/permissive thresholds, host cloud sized by probability. Novelty: High, Pedagogical: High.","notes":"## HOST-RANGE INFERENCE VIA CRISPR SPACERS + RECEPTOR MOTIFS\n\n**Full Implementation from Roadmap**\n\n### Concept\nFuse CRISPR spacer hits with receptor-binding motif classifiers to predict host range. Score per host lineage and display evidence.\n\n### How to Build\n\n**Spacer DB Ingest:**\n- Parse spacer FASTAs/TSVs from CRISPRdb, IMG/VR, CRISPR-Cas++\n- Build MinHash/LSH index (Rust+WASM) for fast lookup\n- Fall back to banded alignments for top hits\n- Store spacer→host mappings with confidence\n\n**Motif/RBP Typing:**\n- HMMER precompute for RBP families (beta-helix, depolymerase, etc.)\n- TS classifier on receptor-binding domain signatures\n- Link RBP domains to known receptors (LPS, OmpA, FhuA, etc.)\n\n**Fusion Scoring:**\n```\nlog P(host | spacer, motif) = w₁ × spacer_score + w₂ × motif_score + prior\nConfidence = σ(log_odds)\n```\n\n**Evidence Types:**\n- Spacer alignments with mismatches\n- RBP domain hits with E-values\n- Known receptor associations\n\n### TUI Features\n- Host leaderboard with confidence bars\n- Press host to see spacer hit list and RBP motif hits\n- 'Host cloud' ASCII plot sized by probability\n- Toggle 'strict vs permissive' thresholds\n- Evidence drilldown per candidate\n\n### Why It's Good\n- Combines complementary evidence types\n- Tightens weak host predictions\n- Points to mechanisms (which receptor, which spacer)\n- Guides experimental validation\n\n### Implementation Stack\n- Rust+WASM LSH for spacer queries\n- HMMER precompute for RBP domains\n- Fusion/scoring in TS\n- SQLite cache for hits and scores\n- Ink UI tables and plots\n\nNovelty: 9/10, Pedagogical: 9/10, Wow Factor: 8/10","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-06T23:12:45.734-05:00","updated_at":"2025-12-07T13:25:18.704593-05:00","dependencies":[{"issue_id":"phage_explorer-owy","depends_on_id":"phage_explorer-54g","type":"blocks","created_at":"2025-12-06T23:12:45.735205-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-owy","depends_on_id":"phage_explorer-2g5","type":"blocks","created_at":"2025-12-06T23:39:32.636107-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-qlu","title":"Layer 1: DNA Bendability/Curvature Overlay [B key]","description":"Calculate and visualize intrinsic DNA curvature and flexibility based on dinucleotide wedge model parameters (roll, tilt, twist). Reveals packaging signals, A-tract bends, and protein binding sites. Features curvature sparklines, flexibility gradients, A-tract detection, and 2D helix trajectory projection. Connects sequence to physical shape - essential for understanding capsid packaging. Novelty: 8/10, Pedagogical: 9/10, Cool Factor: 8/10.","notes":"Bendability overlay (B): AT proxy per window, sparkline, overlay stack, Esc/B close","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-06T23:10:40.824309-05:00","updated_at":"2025-12-07T13:00:47.094209-05:00","closed_at":"2025-12-07T13:00:47.094214-05:00","dependencies":[{"issue_id":"phage_explorer-qlu","depends_on_id":"phage_explorer-2g5","type":"blocks","created_at":"2025-12-06T23:10:40.825179-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-qzk","title":"Advanced: Tail Fiber Tropism \u0026 Receptor Atlas","description":"Predict receptor-binding specificity by clustering tail fiber/tip proteins and mapping them to known or candidate host receptors. Sharpens host-range hypotheses and engineering targets.\n\n**Build Plan:**\n- Embed tail fibers with ESM/ProtT5 (Python), cluster with HDBSCAN/UMAP\n- Optional AlphaFold2-lite batches for 3D hints\n- Match against receptor HMMs and host surface proteomes\n- Cache clusters and receptor likelihoods\n- Inference via ONNX Runtime in Bun for new sequences\n\n**Why It's Good:**\n- Connects sequence to receptor-binding lineage and host-range\n- Complements codon/tRNA signals with direct molecular evidence\n- Engineering targets for host-range expansion/restriction\n\n**Implementation Stack:** Python (ESM/ProtT5) for embeddings, ONNX Runtime for inference, HDBSCAN/UMAP clustering, Rust+WASM for fast matching, SQLite caching.\n\nNovelty: 9/10, Pedagogical: 8/10, Cool Factor: 9/10.","notes":"## TAIL FIBER TROPISM \u0026 RECEPTOR ATLAS\n\n**Comprehensive Feature Specification from Roadmap**\n\n### Concept\nPredict receptor-binding specificity by clustering tail fiber/tip proteins and mapping them to known or candidate host receptors. Centers on receptor-binding lineage and host-range prediction.\n\n**What This Feature Does:**\n- Embeds tail fiber proteins using protein language models (ESM/ProtT5)\n- Clusters similar fibers to identify tropism families\n- Maps clusters to known receptors (LPS, OmpA, FhuA, etc.)\n- Predicts host-range breadth from receptor diversity\n\n### Build Plan\n\n**Step 1: Protein Embedding**\n```python\nfrom esm import pretrained\nmodel, alphabet = pretrained.load_model_and_alphabet('esm2_t33_650M_UR50D')\n# Embed tail fiber sequences\nembeddings = model(tail_fiber_seqs)\n```\n\n**Step 2: Clustering**\n```python\nimport hdbscan\nimport umap\n\n# Reduce dimensions\nreducer = umap.UMAP(n_components=2, metric='cosine')\nembedding_2d = reducer.fit_transform(embeddings)\n\n# Cluster\nclusterer = hdbscan.HDBSCAN(min_cluster_size=5)\nlabels = clusterer.fit_predict(embedding_2d)\n```\n\n**Step 3: Receptor Matching**\n- HMM profiles for known receptor-binding domains\n- Host surface proteome database\n- Confidence scoring: embedding cosine + domain match + literature support\n\n### TUI Visualization\n\n```\n╭─────────────────────────────────────────────────────────────────────────────╮\n│  TAIL FIBER TROPISM \u0026 RECEPTOR ATLAS: Lambda Phage                          │\n├─────────────────────────────────────────────────────────────────────────────┤\n│                                                                             │\n│  Tail Fiber Cluster: LamB-family (87% confidence)                           │\n│                                                                             │\n│  ┌─────────────────────────────────────────────────────────────────────┐    │\n│  │  TROPISM MAP                                                        │    │\n│  │                                                                     │    │\n│  │     [LamB]──●──[OmpC]      Current phage: ●                        │    │\n│  │        ╲   │   ╱           Cluster members: ○                      │    │\n│  │         ╲  │  ╱                                                    │    │\n│  │   [FhuA]──○──○──[BtuB]     Edge = receptor overlap                │    │\n│  │           │   ╲                                                    │    │\n│  │           ○    ╲                                                   │    │\n│  │         ╱       [FepA]                                            │    │\n│  │      [Tsx]                                                        │    │\n│  │                                                                     │    │\n│  └─────────────────────────────────────────────────────────────────────┘    │\n│                                                                             │\n│  Predicted Receptors:                                                       │\n│  ├─ 1. LamB (maltoporin)        94% confidence  [E. coli K-12]             │\n│  ├─ 2. OmpC                     31% confidence  [Salmonella]               │\n│  └─ 3. Unknown porin            12% confidence  [Shigella]                 │\n│                                                                             │\n│  Host Range Breadth: NARROW (single primary receptor)                       │\n│                                                                             │\n│  [F] Filter by function  [H] Show host taxa  [C] Cluster details  [ESC]    │\n╰─────────────────────────────────────────────────────────────────────────────╯\n```\n\n### Why It's Good\n\n1. **Direct Molecular Evidence**: Goes beyond sequence similarity to predict actual binding partners\n2. **Engineering Targets**: Identifies fiber domains to modify for host-range changes\n3. **Complements Other Signals**: Works with codon/tRNA adaptation and CRISPR spacer evidence\n4. **Cluster Context**: Shows evolutionary relationships among receptor-binding proteins","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-07T13:04:27.663149-05:00","updated_at":"2025-12-07T13:05:36.323256-05:00","dependencies":[{"issue_id":"phage_explorer-qzk","depends_on_id":"phage_explorer-ojb","type":"blocks","created_at":"2025-12-07T13:06:05.522106-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-sek","title":"Overlay caching, 3D pause keybinding, overlay legends","description":"Implement caching for overlays (complexity and others), add non-conflicting 3D pause key, add sparkline legends.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-07T00:11:53.52113-05:00","updated_at":"2025-12-07T00:14:21.56502-05:00","closed_at":"2025-12-07T00:14:21.56502-05:00"}
{"id":"phage_explorer-t9j","title":"Advanced: Structural Epitope Clash Map","description":"## Structural Epitope Clash Map (Tail Fiber Host Range Analyzer)\n\n### Concept\nThe tail fiber is the phage's MOLECULAR KEY — its receptor-binding domain (RBD) determines host specificity. This feature combines:\n1. **Structural analysis**: ΔΔG alanine scans and electrostatics on predicted structures\n2. **Modular domain detection**: Identify N-anchor, shaft, and hypervariable RBD regions\n3. **Entropy-based variability mapping**: Find conserved vs rapidly-evolving positions\n4. **Host range prediction**: Infer likely hosts from RBD sequence features\n\n### Mathematical Foundations\n\n**Shannon entropy for per-position variability:**\nH(i) = -Σ p(a) × log₂(p(a)) for each alignment position\n- H(i) = 0: Perfectly conserved (functional constraint)\n- H(i) = 4.3: Maximum entropy (20 AA, no constraint)\nEntropy profile reveals low entropy in anchor/shaft (structural), high in RBD (host-range variability)\n\n**Domain boundary detection:**\nTail fibers have conserved modular structure: [N-anchor] — [Shaft repeats] — [RBD]\nDetect via:\n- Entropy gradient peaks (sudden variability change)\n- Hydropathy profile transitions\n- Secondary structure predictions (α-helix shaft → β-sheet RBD)\n- Recombination breakpoint detection\n\n**Structural stability (ΔΔG):**\nΔΔG = ΔG(wild-type) - ΔG(alanine mutant)\n- High ΔΔG = structurally important (core)\n- Low ΔΔG = surface-exposed, tolerant to mutation\n- Negative ΔΔG = destabilizing, likely under selection\n\n**Host range prediction features:**\nFor ML model: k-mer frequencies (k=3,4,5), AA composition, predicted secondary structure, isoelectric point, molecular weight, specific motifs (carbohydrate-binding, Ig-like folds)\n\n### Implementation\n- entropyProfile(alignment) → Float64Array of per-position entropy\n- detectDomainBoundaries(entropy, hydropathy, secondaryStructure) → DomainBoundary[]\n- predictHostRange(rbdSequence, knownRBDs) → HostPrediction[] with confidence\n- analyzeStructuralEpitopes(pdbId, sequence) → StructuralRisk[] (ΔΔG, surface area, charge)\n\n### TUI Visualization (Multi-Layer)\n- Domain structure bar: N-anchor | Shaft | RBD with conservation coloring\n- Entropy profile sparkline (low in anchor, high in RBD)\n- Structural risk profile (ΔΔG instability)\n- Host range prediction table with confidence bars\n- Chimera suggestion: \"Swap RBD (aa 850-1132) with P22 gpJ → Predicted new host: Salmonella\"\n- 3D ASCII model with epitope highlighting (charge/risk mode toggle)\n\n### Pedagogical Value: 9/10\nTeaches receptor-ligand biology, protein modularity, information theory (Shannon entropy), structural biology (surface exposure, electrostatics), evolution of specificity (arms race in molecular detail).\n\n### External Dependencies\n- AlphaFold DB or ESMFold for structure prediction\n- FoldX (or ML surrogate) for ΔΔG calculations\n- APBS for electrostatics\n\n### Priority: P4 (highest complexity)","status":"open","priority":4,"issue_type":"feature","created_at":"2025-12-06T23:21:06.440127-05:00","updated_at":"2025-12-06T23:31:50.332681-05:00","dependencies":[{"issue_id":"phage_explorer-t9j","depends_on_id":"phage_explorer-54g","type":"blocks","created_at":"2025-12-06T23:21:06.441895-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-u8f","title":"Advanced: Capsid Packaging \u0026 Ejection Energetics Simulator","description":"Quantify physics of packing dsDNA into capsid and ejection: force-extension, internal pressure (up to ~60 atm), salt/GC effects. Worm-Like Chain elasticity + Debye-Hückel electrostatics + bending energy. Compare headful vs cos vs phi29 portal strategies. Interactive sliders for ionic strength, temperature; fill fraction animation. Bridges genome composition to biophysical feasibility. Novelty: High, Pedagogical: High.","notes":"## CAPSID PACKAGING \u0026 EJECTION ENERGETICS SIMULATOR\n\n**Full Implementation from Roadmap**\n\n### Mathematical Foundations\n\n**Worm-Like Chain (WLC) Model:**\n```\nF(x) = (k_B T / L_p) × [1/(4(1-x/L)²) - 1/4 + x/L]\n\nWhere:\n- L_p = persistence length (~50 nm for dsDNA)\n- L = contour length of DNA\n- x = end-to-end extension\n- k_B × T ≈ 4.1 pN·nm at 25°C\n```\n\n**Confinement Free Energy (Odijk regime):**\n```\nΔG_confinement = (k_B T × L) / (L_p^(1/3) × D^(2/3))\n```\n\n**Electrostatic Repulsion (Debye-Hückel):**\n```\nU_elec(r) = (q² / 4πε₀ε_r) × (e^(-κr) / r)\nκ = √(2 × N_A × e² × I / (ε₀ε_r k_B T))\n```\n\n**Internal Pressure:**\n```\nP = -(∂G/∂V) = (k_B T / V) × [N_segments + B₂ × N² / V + ...]\n```\n\n### Complete TypeScript Implementation\n\n- `PackagingEnergetics` interface with bending, confinement, electrostatic components\n- `CapsidGeometry` models: T4, Lambda, T7, Phi29, PhiX174\n- `MotorProperties` for different packaging systems\n- `calculateDebyeLength()`, `wlcForce()`, `calculateBendingEnergy()`\n- `calculateConfinementEntropy()`, `calculateElectrostaticEnergy()`\n- `calculateInternalPressure()`, `generateForceExtensionCurve()`\n- `simulateEjection()` with osmotic pressure opposition\n- `comparePackagingEnergetics()` for multi-phage comparison\n\n### Implementation Stack\n- **Physics Engine**: Rust + nalgebra + ndarray → WASM\n- **Caching**: SQLite stores precomputed force-extension curves\n- **UI**: Ink/React with Braille block plotting for smooth curves\n- **Animation**: requestAnimationFrame-like loop for ejection dynamics\n\n### TUI Features\n- Force vs Fill Fraction plot with motor stall line\n- Energy component breakdown (bending, confinement, electrostatic)\n- Capsid fill visualization with pressure gauge\n- Ejection dynamics timeline with velocity decay\n- Interactive sliders: [I]onic strength, [T]emperature, [S]trategy\n\nNovelty: 10/10, Pedagogical: 9/10, Wow Factor: 9/10","status":"closed","priority":3,"issue_type":"feature","created_at":"2025-12-06T23:48:08.831742-05:00","updated_at":"2025-12-07T13:24:38.29233-05:00","closed_at":"2025-12-07T13:24:38.29233-05:00","dependencies":[{"issue_id":"phage_explorer-u8f","depends_on_id":"phage_explorer-ojb","type":"blocks","created_at":"2025-12-06T23:56:50.829947-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-ug4","title":"Layer 2: Auxiliary Metabolic Gene (AMG) Pathway Mapper","description":"Detect AMGs via HMMER vs curated profiles, map to KEGG reactions, estimate pathway flux gains via Delta-FBA in target hosts. Template models for common hosts, Δflux per pathway. Turns annotations into quantitative metabolic impact; surfaces hijacking strategies. Novelty: Medium-high, Pedagogical: High (stoichiometry, metabolic control).","notes":"## AUXILIARY METABOLIC GENE (AMG) FLUX POTENTIAL ANALYZER\n\n**Full Implementation from Roadmap**\n\n### Mathematical Foundations\n\n**Flux Balance Analysis (FBA):**\n```\nMaximize: c^T × v (objective function, e.g., biomass)\nSubject to: S × v = 0 (steady-state)\n            v_min ≤ v ≤ v_max (flux bounds)\n```\n\n**Delta-FBA for AMG Impact:**\n```\nΔflux = v_with_AMG - v_without_AMG\n%Gain = (v_with - v_without) / v_without × 100\n```\n\n### Complete TypeScript Implementation\n\n- `HostModel` interface (metabolites, reactions, stoichiometry, objectives)\n- `AMGDetection` with KO mapping, HMM scores, coverage\n- `DeltaFBAResult` with pathway impacts and percent gains\n- `PathwayImpact` (affected reactions, total flux change)\n- `ECOLI_CORE_MODEL` with glycolysis, TCA, nucleotide synthesis\n- `AMG_PROFILES` Map (psbA/D photosynthesis, nrdA/B nucleotide, thyX, mazG, phoH)\n- `detectAMGs()` HMM-based detection\n- `calculateDeltaFBA()` flux change estimation\n- `analyzeAMGFluxPotential()` full analysis pipeline\n- `formatAMGAnalysisForTUI()` display formatting\n\n### TUI Features\n- Metabolic Map with pathway flow visualization\n- AMG positions marked with stars (★)\n- Flux Impact Summary table with gain bars\n- Host Comparison panel (Prochlorococcus, Synechococcus, E. coli, Bacillus)\n- Total Δ Objective and compatibility scores\n- Top Affected Pathways ranking\n- [←/→] Switch AMG, [H] Switch host, [P] Pathway detail\n\n### Implementation Stack\n- Rust+WASM for LP solver (delta-FBA)\n- HMMER precompute for AMG detection\n- KEGG reaction mapping\n- SQLite for pathway and AMG caches\n- TS/Ink UI for metabolic flow visualization\n\nNovelty: 8/10, Pedagogical: 9/10, Wow Factor: 8/10","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-06T23:12:45.993704-05:00","updated_at":"2025-12-07T13:20:33.313773-05:00","dependencies":[{"issue_id":"phage_explorer-ug4","depends_on_id":"phage_explorer-54g","type":"blocks","created_at":"2025-12-06T23:12:45.995081-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-ujh","title":"Advanced: Protein Domain Chord Plot","description":"## Protein Domain Chord Plot (Advanced Feature)\n\n### Concept\n\nPhage proteomes are **modular mosaics** — built from shuffled and recombined functional domains. The same DNA-binding domain might appear in the repressor of one phage and the anti-repressor of another. The same tail fiber receptor-binding domain might be swapped between distant phages to change host range.\n\nA **chord diagram** visualizes these domain-sharing relationships as arcs connecting phages. Each arc represents a shared domain, with thickness proportional to copy number or sequence identity. The result reveals:\n- **Core domains**: Present in all phages (structural essentials)\n- **Accessory domains**: Patchy distribution (niche adaptation)\n- **Domain promiscuity**: Domains appearing in unexpected combinations\n- **Convergent evolution**: Same domain, independent acquisitions\n\n### Mathematical Foundations\n\n**Domain Detection via HMM profiles:**\n```\nHMMER3 hmmscan workflow:\n  1. Query each protein against Pfam-A HMM database\n  2. For each domain hit:\n     - E-value \u003c 1e-5 (significant)\n     - Coverage \u003e 60% of HMM model\n     - No envelope overlap with higher-scoring hits\nOutput: domain annotations with Pfam accession, name, positions, bit score\n```\n\n**Domain occurrence matrix:**\n```\nLet D = {d₁, d₂, ..., dₘ} = all detected domains\nLet P = {p₁, p₂, ..., pₙ} = all phages\n\nOccurrence matrix O[m × n]:\n  O[i,j] = count of domain dᵢ in phage pⱼ\n\nPresence/absence matrix B[m × n]:\n  B[i,j] = 1 if O[i,j] \u003e 0, else 0\n```\n\n**Domain co-occurrence (for clustering):**\n```\nJaccard similarity between domains:\n  J(dᵢ, dⱼ) = |phages with both| / |phages with either|\n\nDomains with high Jaccard often function together.\nCluster with MCL (Markov Cluster Algorithm) to find domain modules.\n```\n\n**Chord diagram layout:**\n```\nPhages arranged on circle (0 to 2π): θᵢ = 2π × i / n\nFor each shared domain connecting phages pᵢ and pⱼ:\n  Draw Bezier curve from θᵢ to θⱼ\n  Control points at circle center (creates arc shape)\nArc thickness ∝ number of shared copies or sequence identity\n```\n\n### Implementation Approach\n\n**Domain hit storage:**\n```typescript\ninterface DomainHit {\n  pfamId: string;\n  pfamName: string;\n  clanId?: string;\n  proteinId: string;\n  phageId: number;\n  start: number;\n  end: number;\n  score: number;\n  eValue: number;\n  description: string;\n}\n```\n\n**Domain sharing computation:**\n```typescript\ninterface DomainSharing {\n  domain: string;\n  phageA: number;\n  phageB: number;\n  copiesA: number;\n  copiesB: number;\n  averageIdentity: number;\n}\n\n// Find all pairwise sharings across phages\n// Group by domain family for filtering\n```\n\n**MCL clustering for domain modules:**\n```typescript\ninterface DomainCluster {\n  id: number;\n  domains: string[];\n  name: string;  // Inferred function\n  phageCount: number;\n}\n\n// Build adjacency from co-occurrence Jaccard\n// MCL iterations: expand (matrix multiply) + inflate (element-wise power)\n// Extract clusters from converged matrix\n```\n\n**ASCII Braille chord renderer:**\n```typescript\n// Braille characters give 2x4 dots per cell = high resolution curves\n// placeBraillePoint() sets individual dots in character grid\n// Bezier curves drawn point-by-point through center\n// Result: smooth arcs connecting phages on outer ring\n```\n\n### TUI Visualization\n\n```\nProtein Domain Chord Plot: Lambda + T4 + T7 + P22 + Phi29\n═══════════════════════════════════════════════════════════════════════════════\n\n              Lambda\n                ╱╲\n              ╱    ╲\n           ⡠⠊      ⠑⡄\n         ⡰⠁          ⠑⡄\n       ⡠⠃              ⠘⡄\n      ⡜                  ⠘⡄           Selected: HTH_3 (Helix-turn-helix)\n    ⡰⠁                    ⠑⡄           Found in: Lambda (cI), P22 (c2)\n   ⡜                        ⠘⡄          Function: DNA-binding repressor\n  ⡜                          ⠘⡄\n ⡔    T4                 P22   ⠢⡀\n⡎      ⠑⢄                ⡠⠊      ⠱⡀\n⡇        ⠑⢄            ⡠⠊        ⠱⡀\n⡇          ⠑⢄        ⡠⠊          ⢱\n⡇            ⠑⢄    ⡠⠊            ⢱\n⡇              ⠑⢄⡠⠊              ⢱\n⠘⡄              ⡜               ⡰⠁\n ⠘⡄            ⡜               ⡰⠁\n  ⠘⡄          ⡜               ⡰⠁\n   ⠑⡄        ⡜              ⡰⠁\n    ⠑⡄      ⡜   Phi29     ⡠⠊\n     ⠑⡄    ⡜            ⡠⠊\n       ⠑⡄⡰⠁          ⡠⠊\n         ⠱⡀        ⡠⠊\n           T7───────⠁\n\n───────────────────────────────────────────────────────────────────────────────\n\nDomain Summary:\n┌─────────────┬──────────────────────────────┬────────┬─────────────────┐\n│ Domain      │ Phages                       │ Copies │ Function        │\n├─────────────┼──────────────────────────────┼────────┼─────────────────┤\n│ Phage_cap_E │ Lambda, T4, T7, P22, Phi29   │   8    │ Capsid protein  │\n│ HTH_3       │ Lambda, P22                  │   2    │ DNA binding     │\n│ Phage_tail  │ Lambda, T4, P22              │  12    │ Tail structure  │\n│ DNA_pol_B   │ T4, T7, Phi29                │   3    │ DNA replication │\n│ Peptidase_M │ Lambda, T4, T7, P22          │   4    │ Lysis           │\n└─────────────┴──────────────────────────────┴────────┴─────────────────┘\n\nLegend: ━ Core (all phages)  ─ Common (3-4)  ╌ Rare (2)\n\n[Tab] Cycle domains  [Enter] Show alignment  [F] Filter by clan  [ESC] Exit\n```\n\n### Why This Is Good\n\n1. **Domain-level evolution**: Genes evolve, but domains are truly modular units. Domain sharing reveals deeper relationships.\n2. **Function transfer mechanism**: Which domains spread through phage populations.\n3. **Protein engineering hints**: Domain X appears with domain Y = may function together.\n4. **Beautiful data reduction**: Thousands of genes → dozens of domains → one elegant visualization.\n5. **Novel TUI visualization**: Chord diagrams in terminals are rare; Braille curves push ASCII art boundaries.\n\n### Innovation Assessment\n\n**Novelty: HIGH** - Chord diagrams exist (Circos), but no TUI implementation. ASCII/Braille curve rendering is novel. Interactive domain filtering is new.\n\n**Pedagogical Value: 9/10** - Teaches protein domains, HMM profiles, modular evolution, network visualization.\n\n**Wow Factor: 9/10** - Smooth Braille curves connecting distant phages through shared domains is visually stunning.\n\n### Data Requirements\n- HMMER + Pfam-A database for domain detection (offline preprocessing)\n- Pre-computed domain_hits table in SQLite\n- ~50MB additional data for Pfam profiles","status":"open","priority":3,"issue_type":"feature","created_at":"2025-12-06T23:20:17.342284-05:00","updated_at":"2025-12-06T23:43:59.044724-05:00","dependencies":[{"issue_id":"phage_explorer-ujh","depends_on_id":"phage_explorer-54g","type":"blocks","created_at":"2025-12-06T23:20:17.344679-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-w71","title":"Layer 2: Prophage Excision Precision Mapper","description":"Layer 2 Analysis: Predict exact attL/attR sites for temperate phages. Find integrase, search for imperfect direct repeats at boundaries. Model excision product. Essential for temperate phage biology.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-06T23:13:38.973351-05:00","updated_at":"2025-12-06T23:22:42.804123-05:00","dependencies":[{"issue_id":"phage_explorer-w71","depends_on_id":"phage_explorer-54g","type":"blocks","created_at":"2025-12-06T23:13:38.974873-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-wae","title":"Advanced: Pan-Phage Latent Space Atlas","description":"Layer 2: Explore a 'phage universe' using genome embeddings that capture composition, motifs, and structural signals. Learn fixed-length vectors for phage genomes via contrastive encoders (BYOL/SimCLR-style), enabling fast nearest-neighbor search beyond ANI/k-mers.\n\n**Build Plan:**\n- Train/finetune contrastive encoder on large phage + host-viral corpora\n- Core in Python (PyTorch + bitsandbytes), export to ONNX\n- Run inference in Bun via ONNX Runtime Web or WASM\n- Precompute embeddings for bundled phages, cache to SQLite\n- Use UMAP/t-SNE (Rust+WASM via umap-js/tsne-rs) for on-device projection\n\n**Why It's Good:**\n- Captures higher-order signals (motif co-occurrence, periodicity, codon bias)\n- Enables 'find me things like this' beyond simple k-mer overlap\n- Shows latent space vs classic metrics (ANI, Mash)\n\n**TUI Visualization:**\n- Interactive 2D 'phage universe' scatter with density shading\n- Keyboard navigation to jump to nearest neighbors\n- Press 'l' to recenter on current phage with animated zoom\n- Hover tooltips show phage metadata\n\nNovelty: 9/10, Pedagogical: 9/10, Cool Factor: 10/10.","notes":"## PAN-PHAGE LATENT SPACE ATLAS (LLM-AUGMENTED)\n\n**Full Implementation from Roadmap**\n\n### Concept\nLearn joint embeddings for genomes and proteomes using k-mer sketches plus protein LM embeddings (ESM/ProtT5). Cluster phages by functional/evolutionary proximity; explain cluster membership with 'semantic diffs.'\n\n### How to Build\n\n**Embeddings:**\n- TS pipeline for k-mer MinHash sketches\n- Python/Rust sidecar for ESM2/ProtT5 protein embeddings (tail fibers, polymerases, repressors)\n- Cache vectors in SQLite/Parquet\n\n**Fusion:**\n- Concatenate or project via PCA/UMAP\n- Rust+WASM or TS (ml-js) for projection to 2D/3D\n- HNSW neighbor index (wasm-hnsw or Rust HNSW)\n\n**Explanations:**\n- For neighbor pairs, surface:\n  - Top k-mer deltas\n  - Domain differences\n  - Codon/AA usage deltas\n\n### TUI Features\n- ASCII UMAP scatterplot with live cursor\n- Select point to list nearest neighbors and 'why' (top domains/k-mers)\n- Glow outliers with novelty scores\n- Toggle layers: genome-only vs protein-LLM fused\n- [L] Recenter on current phage with animated zoom\n- Hover tooltips with phage metadata\n- Density shading for cluster visualization\n\n### Why It's Good\n- Maps 'phage space' blending sequence + functional signals\n- Fast neighbor lookup enables 'find similar' queries\n- Highlights outliers and novelty\n- Shows where different molecular layers agree or disagree\n\n### Implementation Stack\n- MinHash in TS\n- Embeddings via optional Python microservice (ESM2) cached to disk\n- HNSW in Rust+WASM for fast kNN\n- UMAP in Rust (umap-rs) or TS (umap-js)\n- Ink UI for interactive scatter\n\nNovelty: 9/10, Pedagogical: 9/10, Wow Factor: 10/10","status":"open","priority":3,"issue_type":"epic","created_at":"2025-12-06T23:19:10.733099-05:00","updated_at":"2025-12-07T13:22:00.720674-05:00","dependencies":[{"issue_id":"phage_explorer-wae","depends_on_id":"phage_explorer-2g5","type":"blocks","created_at":"2025-12-06T23:19:10.736323-05:00","created_by":"daemon"},{"issue_id":"phage_explorer-wae","depends_on_id":"phage_explorer-54g","type":"blocks","created_at":"2025-12-06T23:19:10.738549-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-wtf","title":"Layer 1: Sequence Complexity Overlay [X key]","description":"Layer 1 overlay (X key): Display Kolmogorov complexity (compression ratio) sparkline. Highlights HGT regions (high complexity, unusual composition), repetitive elements (low complexity). Uses pako gzip. Pedagogical: information theory, entropy. Priority: P1.","notes":"Layer1 complexity overlay implemented: gzip sparkline, notable region lists, hotkeys X/Esc, overlay stack wiring","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-06T23:10:40.550053-05:00","updated_at":"2025-12-07T13:00:06.088424-05:00","closed_at":"2025-12-07T13:00:06.088427-05:00","dependencies":[{"issue_id":"phage_explorer-wtf","depends_on_id":"phage_explorer-2g5","type":"blocks","created_at":"2025-12-06T23:10:40.5507-05:00","created_by":"daemon"}]}
{"id":"phage_explorer-ygr","title":"Advanced: Phylodynamic Trajectory Explorer","description":"Build time-scaled trees from dated accessions via rate-smoothed NJ or treetime-style regression. Coalescent skyline for Ne(t). dN/dS per branch/window (FEL-like). ASCII tree with skyline plot; genome heat strip for dN/dS; cursor highlights loci. Shows evolutionary tempo and selection hotspots. Novelty: High, Pedagogical: High.","notes":"## PHYLODYNAMIC TRAJECTORY EXPLORER\n\n**Full Implementation from Roadmap**\n\n### Concept\nFor dated accessions, build time-scaled trees and visualize rate shifts, skyline Ne, and rapidly evolving loci with selection signals.\n\n### How to Build\n\n**Time-Scaled Tree:**\n- Lightweight BEAST-like approximation in Rust+WASM\n- Rate-smoothed neighbor-joining\n- Treetime-style root-to-tip regression\n- Infer molecular clock rate\n\n**Skyline Population Dynamics:**\n- Coalescent skyline via interval counts\n- Compute effective population size Ne(t)\n- Credible bands from bootstrap or MCMC-lite\n\n**Selection Mapping:**\n- dN/dS per branch/window (FEL-like fast approximation)\n- Map to genome positions\n- Highlight rapidly evolving loci\n\n**Data Ingest:**\n- Accession dates + sequences\n- Multiple sequence alignment\n- Cache alignments and trees in SQLite\n\n### TUI Features\n- ASCII time-scaled tree with branch lengths\n- Side skyline plot showing Ne over time\n- Genome heat strip for dN/dS values\n- Cursor on tree highlights corresponding loci\n- Rate shift annotations on branches\n- Press 't' to toggle tree/skyline focus\n\n### Why It's Good\n- Shows evolutionary tempo and population expansions\n- Connects time to genome changes\n- Identifies selection hotspots\n- Tracks viral evolution in real time\n\n### Implementation Stack\n- Rust+WASM for clock/regression/selection calculations\n- TS/Ink for tree and skyline rendering\n- SQLite caches for alignments and trees\n- ASCII tree with Unicode box-drawing characters\n\nNovelty: 9/10, Pedagogical: 9/10, Wow Factor: 9/10","status":"open","priority":3,"issue_type":"feature","created_at":"2025-12-07T00:18:17.555845-05:00","updated_at":"2025-12-07T13:26:36.421759-05:00","dependencies":[{"issue_id":"phage_explorer-ygr","depends_on_id":"phage_explorer-ojb","type":"blocks","created_at":"2025-12-07T00:20:54.81647-05:00","created_by":"daemon"}]}
